function FD(e,t){for(var n=0;n<t.length;n++){const a=t[n];if(typeof a!="string"&&!Array.isArray(a)){for(const l in a)if(l!=="default"&&!(l in e)){const o=Object.getOwnPropertyDescriptor(a,l);o&&Object.defineProperty(e,l,o.get?o:{enumerable:!0,get:()=>a[l]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))a(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerPolicy&&(o.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?o.credentials="include":l.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}})();function qa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var mg={exports:{}},Jc={};var dS;function HD(){if(dS)return Jc;dS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,l,o){var d=null;if(o!==void 0&&(d=""+o),l.key!==void 0&&(d=""+l.key),"key"in l){o={};for(var u in l)u!=="key"&&(o[u]=l[u])}else o=l;return l=o.ref,{$$typeof:e,type:a,key:d,ref:l!==void 0?l:null,props:o}}return Jc.Fragment=t,Jc.jsx=n,Jc.jsxs=n,Jc}var uS;function KD(){return uS||(uS=1,mg.exports=HD()),mg.exports}var r=KD(),hg={exports:{}},Ue={};var fS;function GD(){if(fS)return Ue;fS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),b=Symbol.iterator;function N(I){return I===null||typeof I!="object"?null:(I=b&&I[b]||I["@@iterator"],typeof I=="function"?I:null)}var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function A(I,M,H){this.props=I,this.context=M,this.refs=S,this.updater=H||v}A.prototype.isReactComponent={},A.prototype.setState=function(I,M){if(typeof I!="object"&&typeof I!="function"&&I!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,I,M,"setState")},A.prototype.forceUpdate=function(I){this.updater.enqueueForceUpdate(this,I,"forceUpdate")};function E(){}E.prototype=A.prototype;function C(I,M,H){this.props=I,this.context=M,this.refs=S,this.updater=H||v}var O=C.prototype=new E;O.constructor=C,w(O,A.prototype),O.isPureReactComponent=!0;var k=Array.isArray;function _(){}var T={H:null,A:null,T:null,S:null},P=Object.prototype.hasOwnProperty;function L(I,M,H){var oe=H.ref;return{$$typeof:e,type:I,key:M,ref:oe!==void 0?oe:null,props:H}}function z(I,M){return L(I.type,M,I.props)}function U(I){return typeof I=="object"&&I!==null&&I.$$typeof===e}function B(I){var M={"=":"=0",":":"=2"};return"$"+I.replace(/[=:]/g,function(H){return M[H]})}var ee=/\/+/g;function X(I,M){return typeof I=="object"&&I!==null&&I.key!=null?B(""+I.key):M.toString(36)}function be(I){switch(I.status){case"fulfilled":return I.value;case"rejected":throw I.reason;default:switch(typeof I.status=="string"?I.then(_,_):(I.status="pending",I.then(function(M){I.status==="pending"&&(I.status="fulfilled",I.value=M)},function(M){I.status==="pending"&&(I.status="rejected",I.reason=M)})),I.status){case"fulfilled":return I.value;case"rejected":throw I.reason}}throw I}function G(I,M,H,oe,K){var pe=typeof I;(pe==="undefined"||pe==="boolean")&&(I=null);var V=!1;if(I===null)V=!0;else switch(pe){case"bigint":case"string":case"number":V=!0;break;case"object":switch(I.$$typeof){case e:case t:V=!0;break;case x:return V=I._init,G(V(I._payload),M,H,oe,K)}}if(V)return K=K(I),V=oe===""?"."+X(I,0):oe,k(K)?(H="",V!=null&&(H=V.replace(ee,"$&/")+"/"),G(K,M,H,"",function(ne){return ne})):K!=null&&(U(K)&&(K=z(K,H+(K.key==null||I&&I.key===K.key?"":(""+K.key).replace(ee,"$&/")+"/")+V)),M.push(K)),1;V=0;var xe=oe===""?".":oe+":";if(k(I))for(var Z=0;Z<I.length;Z++)oe=I[Z],pe=xe+X(oe,Z),V+=G(oe,M,H,pe,K);else if(Z=N(I),typeof Z=="function")for(I=Z.call(I),Z=0;!(oe=I.next()).done;)oe=oe.value,pe=xe+X(oe,Z++),V+=G(oe,M,H,pe,K);else if(pe==="object"){if(typeof I.then=="function")return G(be(I),M,H,oe,K);throw M=String(I),Error("Objects are not valid as a React child (found: "+(M==="[object Object]"?"object with keys {"+Object.keys(I).join(", ")+"}":M)+"). If you meant to render a collection of children, use an array instead.")}return V}function J(I,M,H){if(I==null)return I;var oe=[],K=0;return G(I,oe,"","",function(pe){return M.call(H,pe,K++)}),oe}function $(I){if(I._status===-1){var M=I._result;M=M(),M.then(function(H){(I._status===0||I._status===-1)&&(I._status=1,I._result=H)},function(H){(I._status===0||I._status===-1)&&(I._status=2,I._result=H)}),I._status===-1&&(I._status=0,I._result=M)}if(I._status===1)return I._result.default;throw I._result}var q=typeof reportError=="function"?reportError:function(I){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var M=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof I=="object"&&I!==null&&typeof I.message=="string"?String(I.message):String(I),error:I});if(!window.dispatchEvent(M))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",I);return}console.error(I)},se={map:J,forEach:function(I,M,H){J(I,function(){M.apply(this,arguments)},H)},count:function(I){var M=0;return J(I,function(){M++}),M},toArray:function(I){return J(I,function(M){return M})||[]},only:function(I){if(!U(I))throw Error("React.Children.only expected to receive a single React element child.");return I}};return Ue.Activity=p,Ue.Children=se,Ue.Component=A,Ue.Fragment=n,Ue.Profiler=l,Ue.PureComponent=C,Ue.StrictMode=a,Ue.Suspense=m,Ue.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ue.__COMPILER_RUNTIME={__proto__:null,c:function(I){return T.H.useMemoCache(I)}},Ue.cache=function(I){return function(){return I.apply(null,arguments)}},Ue.cacheSignal=function(){return null},Ue.cloneElement=function(I,M,H){if(I==null)throw Error("The argument must be a React element, but you passed "+I+".");var oe=w({},I.props),K=I.key;if(M!=null)for(pe in M.key!==void 0&&(K=""+M.key),M)!P.call(M,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&M.ref===void 0||(oe[pe]=M[pe]);var pe=arguments.length-2;if(pe===1)oe.children=H;else if(1<pe){for(var V=Array(pe),xe=0;xe<pe;xe++)V[xe]=arguments[xe+2];oe.children=V}return L(I.type,K,oe)},Ue.createContext=function(I){return I={$$typeof:d,_currentValue:I,_currentValue2:I,_threadCount:0,Provider:null,Consumer:null},I.Provider=I,I.Consumer={$$typeof:o,_context:I},I},Ue.createElement=function(I,M,H){var oe,K={},pe=null;if(M!=null)for(oe in M.key!==void 0&&(pe=""+M.key),M)P.call(M,oe)&&oe!=="key"&&oe!=="__self"&&oe!=="__source"&&(K[oe]=M[oe]);var V=arguments.length-2;if(V===1)K.children=H;else if(1<V){for(var xe=Array(V),Z=0;Z<V;Z++)xe[Z]=arguments[Z+2];K.children=xe}if(I&&I.defaultProps)for(oe in V=I.defaultProps,V)K[oe]===void 0&&(K[oe]=V[oe]);return L(I,pe,K)},Ue.createRef=function(){return{current:null}},Ue.forwardRef=function(I){return{$$typeof:u,render:I}},Ue.isValidElement=U,Ue.lazy=function(I){return{$$typeof:x,_payload:{_status:-1,_result:I},_init:$}},Ue.memo=function(I,M){return{$$typeof:h,type:I,compare:M===void 0?null:M}},Ue.startTransition=function(I){var M=T.T,H={};T.T=H;try{var oe=I(),K=T.S;K!==null&&K(H,oe),typeof oe=="object"&&oe!==null&&typeof oe.then=="function"&&oe.then(_,q)}catch(pe){q(pe)}finally{M!==null&&H.types!==null&&(M.types=H.types),T.T=M}},Ue.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ue.use=function(I){return T.H.use(I)},Ue.useActionState=function(I,M,H){return T.H.useActionState(I,M,H)},Ue.useCallback=function(I,M){return T.H.useCallback(I,M)},Ue.useContext=function(I){return T.H.useContext(I)},Ue.useDebugValue=function(){},Ue.useDeferredValue=function(I,M){return T.H.useDeferredValue(I,M)},Ue.useEffect=function(I,M){return T.H.useEffect(I,M)},Ue.useEffectEvent=function(I){return T.H.useEffectEvent(I)},Ue.useId=function(){return T.H.useId()},Ue.useImperativeHandle=function(I,M,H){return T.H.useImperativeHandle(I,M,H)},Ue.useInsertionEffect=function(I,M){return T.H.useInsertionEffect(I,M)},Ue.useLayoutEffect=function(I,M){return T.H.useLayoutEffect(I,M)},Ue.useMemo=function(I,M){return T.H.useMemo(I,M)},Ue.useOptimistic=function(I,M){return T.H.useOptimistic(I,M)},Ue.useReducer=function(I,M,H){return T.H.useReducer(I,M,H)},Ue.useRef=function(I){return T.H.useRef(I)},Ue.useState=function(I){return T.H.useState(I)},Ue.useSyncExternalStore=function(I,M,H){return T.H.useSyncExternalStore(I,M,H)},Ue.useTransition=function(){return T.H.useTransition()},Ue.version="19.2.3",Ue}var mS;function qo(){return mS||(mS=1,hg.exports=GD()),hg.exports}var g=qo();const El=qa(g),VD=FD({__proto__:null,default:El},[g]);var xg={exports:{}},ed={},pg={exports:{}},gg={};var hS;function YD(){return hS||(hS=1,(function(e){function t(G,J){var $=G.length;G.push(J);e:for(;0<$;){var q=$-1>>>1,se=G[q];if(0<l(se,J))G[q]=J,G[$]=se,$=q;else break e}}function n(G){return G.length===0?null:G[0]}function a(G){if(G.length===0)return null;var J=G[0],$=G.pop();if($!==J){G[0]=$;e:for(var q=0,se=G.length,I=se>>>1;q<I;){var M=2*(q+1)-1,H=G[M],oe=M+1,K=G[oe];if(0>l(H,$))oe<se&&0>l(K,H)?(G[q]=K,G[oe]=$,q=oe):(G[q]=H,G[M]=$,q=M);else if(oe<se&&0>l(K,$))G[q]=K,G[oe]=$,q=oe;else break e}}return J}function l(G,J){var $=G.sortIndex-J.sortIndex;return $!==0?$:G.id-J.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var d=Date,u=d.now();e.unstable_now=function(){return d.now()-u}}var m=[],h=[],x=1,p=null,b=3,N=!1,v=!1,w=!1,S=!1,A=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function O(G){for(var J=n(h);J!==null;){if(J.callback===null)a(h);else if(J.startTime<=G)a(h),J.sortIndex=J.expirationTime,t(m,J);else break;J=n(h)}}function k(G){if(w=!1,O(G),!v)if(n(m)!==null)v=!0,_||(_=!0,B());else{var J=n(h);J!==null&&be(k,J.startTime-G)}}var _=!1,T=-1,P=5,L=-1;function z(){return S?!0:!(e.unstable_now()-L<P)}function U(){if(S=!1,_){var G=e.unstable_now();L=G;var J=!0;try{e:{v=!1,w&&(w=!1,E(T),T=-1),N=!0;var $=b;try{t:{for(O(G),p=n(m);p!==null&&!(p.expirationTime>G&&z());){var q=p.callback;if(typeof q=="function"){p.callback=null,b=p.priorityLevel;var se=q(p.expirationTime<=G);if(G=e.unstable_now(),typeof se=="function"){p.callback=se,O(G),J=!0;break t}p===n(m)&&a(m),O(G)}else a(m);p=n(m)}if(p!==null)J=!0;else{var I=n(h);I!==null&&be(k,I.startTime-G),J=!1}}break e}finally{p=null,b=$,N=!1}J=void 0}}finally{J?B():_=!1}}}var B;if(typeof C=="function")B=function(){C(U)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,X=ee.port2;ee.port1.onmessage=U,B=function(){X.postMessage(null)}}else B=function(){A(U,0)};function be(G,J){T=A(function(){G(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return b},e.unstable_next=function(G){switch(b){case 1:case 2:case 3:var J=3;break;default:J=b}var $=b;b=J;try{return G()}finally{b=$}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(G,J){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var $=b;b=G;try{return J()}finally{b=$}},e.unstable_scheduleCallback=function(G,J,$){var q=e.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?q+$:q):$=q,G){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=$+se,G={id:x++,callback:J,priorityLevel:G,startTime:$,expirationTime:se,sortIndex:-1},$>q?(G.sortIndex=$,t(h,G),n(m)===null&&G===n(h)&&(w?(E(T),T=-1):w=!0,be(k,$-q))):(G.sortIndex=se,t(m,G),v||N||(v=!0,_||(_=!0,B()))),G},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(G){var J=b;return function(){var $=b;b=J;try{return G.apply(this,arguments)}finally{b=$}}}})(gg)),gg}var xS;function QD(){return xS||(xS=1,pg.exports=YD()),pg.exports}var bg={exports:{}},_r={};var pS;function WD(){if(pS)return _r;pS=1;var e=qo();function t(m){var h="https://react.dev/errors/"+m;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)h+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+m+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var a={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},l=Symbol.for("react.portal");function o(m,h,x){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:p==null?null:""+p,children:m,containerInfo:h,implementation:x}}var d=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(m,h){if(m==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return _r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,_r.createPortal=function(m,h){var x=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(t(299));return o(m,h,null,x)},_r.flushSync=function(m){var h=d.T,x=a.p;try{if(d.T=null,a.p=2,m)return m()}finally{d.T=h,a.p=x,a.d.f()}},_r.preconnect=function(m,h){typeof m=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,a.d.C(m,h))},_r.prefetchDNS=function(m){typeof m=="string"&&a.d.D(m)},_r.preinit=function(m,h){if(typeof m=="string"&&h&&typeof h.as=="string"){var x=h.as,p=u(x,h.crossOrigin),b=typeof h.integrity=="string"?h.integrity:void 0,N=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;x==="style"?a.d.S(m,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:p,integrity:b,fetchPriority:N}):x==="script"&&a.d.X(m,{crossOrigin:p,integrity:b,fetchPriority:N,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},_r.preinitModule=function(m,h){if(typeof m=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var x=u(h.as,h.crossOrigin);a.d.M(m,{crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&a.d.M(m)},_r.preload=function(m,h){if(typeof m=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var x=h.as,p=u(x,h.crossOrigin);a.d.L(m,x,{crossOrigin:p,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},_r.preloadModule=function(m,h){if(typeof m=="string")if(h){var x=u(h.as,h.crossOrigin);a.d.m(m,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:x,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else a.d.m(m)},_r.requestFormReset=function(m){a.d.r(m)},_r.unstable_batchedUpdates=function(m,h){return m(h)},_r.useFormState=function(m,h,x){return d.H.useFormState(m,h,x)},_r.useFormStatus=function(){return d.H.useHostTransitionStatus()},_r.version="19.2.3",_r}var gS;function gk(){if(gS)return bg.exports;gS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),bg.exports=WD(),bg.exports}var bS;function XD(){if(bS)return ed;bS=1;var e=QD(),t=qo(),n=gk();function a(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function o(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function d(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function u(s){if(s.tag===31){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function m(s){if(o(s)!==s)throw Error(a(188))}function h(s){var i=s.alternate;if(!i){if(i=o(s),i===null)throw Error(a(188));return i!==s?null:s}for(var c=s,f=i;;){var y=c.return;if(y===null)break;var j=y.alternate;if(j===null){if(f=y.return,f!==null){c=f;continue}break}if(y.child===j.child){for(j=y.child;j;){if(j===c)return m(y),s;if(j===f)return m(y),i;j=j.sibling}throw Error(a(188))}if(c.return!==f.return)c=y,f=j;else{for(var R=!1,D=y.child;D;){if(D===c){R=!0,c=y,f=j;break}if(D===f){R=!0,f=y,c=j;break}D=D.sibling}if(!R){for(D=j.child;D;){if(D===c){R=!0,c=j,f=y;break}if(D===f){R=!0,f=j,c=y;break}D=D.sibling}if(!R)throw Error(a(189))}}if(c.alternate!==f)throw Error(a(190))}if(c.tag!==3)throw Error(a(188));return c.stateNode.current===c?s:i}function x(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=x(s),i!==null)return i;s=s.sibling}return null}var p=Object.assign,b=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),v=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),E=Symbol.for("react.consumer"),C=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),z=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function B(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var ee=Symbol.for("react.client.reference");function X(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===ee?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case w:return"Fragment";case A:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case _:return"SuspenseList";case L:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case v:return"Portal";case C:return s.displayName||"Context";case E:return(s._context.displayName||"Context")+".Consumer";case O:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case T:return i=s.displayName||null,i!==null?i:X(s.type)||"Memo";case P:i=s._payload,s=s._init;try{return X(s(i))}catch{}}return null}var be=Array.isArray,G=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,J=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$={pending:!1,data:null,method:null,action:null},q=[],se=-1;function I(s){return{current:s}}function M(s){0>se||(s.current=q[se],q[se]=null,se--)}function H(s,i){se++,q[se]=s.current,s.current=i}var oe=I(null),K=I(null),pe=I(null),V=I(null);function xe(s,i){switch(H(pe,i),H(K,s),H(oe,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?P2(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=P2(i),s=D2(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}M(oe),H(oe,s)}function Z(){M(oe),M(K),M(pe)}function ne(s){s.memoizedState!==null&&H(V,s);var i=oe.current,c=D2(i,s.type);i!==c&&(H(K,s),H(oe,c))}function Se(s){K.current===s&&(M(oe),M(K)),V.current===s&&(M(V),Qc._currentValue=$)}var W,ae;function we(s){if(W===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);W=i&&i[1]||"",ae=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+W+s+ae}var Be=!1;function tt(s,i){if(!s||Be)return"";Be=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(i){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(de){var le=de}Reflect.construct(s,[],je)}else{try{je.call()}catch(de){le=de}s.call(je.prototype)}}else{try{throw Error()}catch(de){le=de}(je=s())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(de){if(de&&le&&typeof de.stack=="string")return[de.stack,le.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=f.DetermineComponentFrameRoot(),R=j[0],D=j[1];if(R&&D){var F=R.split(`
`),re=D.split(`
`);for(y=f=0;f<F.length&&!F[f].includes("DetermineComponentFrameRoot");)f++;for(;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;if(f===F.length||y===re.length)for(f=F.length-1,y=re.length-1;1<=f&&0<=y&&F[f]!==re[y];)y--;for(;1<=f&&0<=y;f--,y--)if(F[f]!==re[y]){if(f!==1||y!==1)do if(f--,y--,0>y||F[f]!==re[y]){var he=`
`+F[f].replace(" at new "," at ");return s.displayName&&he.includes("<anonymous>")&&(he=he.replace("<anonymous>",s.displayName)),he}while(1<=f&&0<=y);break}}}finally{Be=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?we(c):""}function kr(s,i){switch(s.tag){case 26:case 27:case 5:return we(s.type);case 16:return we("Lazy");case 13:return s.child!==i&&i!==null?we("Suspense Fallback"):we("Suspense");case 19:return we("SuspenseList");case 0:case 15:return tt(s.type,!1);case 11:return tt(s.type.render,!1);case 1:return tt(s.type,!0);case 31:return we("Activity");default:return""}}function tr(s){try{var i="",c=null;do i+=kr(s,c),c=s,s=s.return;while(s);return i}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var an=Object.prototype.hasOwnProperty,Ha=e.unstable_scheduleCallback,kl=e.unstable_cancelCallback,nc=e.unstable_shouldYield,ac=e.unstable_requestPaint,br=e.unstable_now,sc=e.unstable_getCurrentPriorityLevel,_l=e.unstable_ImmediatePriority,Ti=e.unstable_UserBlockingPriority,Wn=e.unstable_NormalPriority,rr=e.unstable_LowPriority,Ri=e.unstable_IdlePriority,fe=e.log,ve=e.unstable_setDisableYieldValue,Ne=null,Ae=null;function Ce(s){if(typeof fe=="function"&&ve(s),Ae&&typeof Ae.setStrictMode=="function")try{Ae.setStrictMode(Ne,s)}catch{}}var Ee=Math.clz32?Math.clz32:Pr,Le=Math.log,We=Math.LN2;function Pr(s){return s>>>=0,s===0?32:31-(Le(s)/We|0)|0}var Fe=256,Je=262144,Kt=4194304;function Dr(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Gt(s,i,c){var f=s.pendingLanes;if(f===0)return 0;var y=0,j=s.suspendedLanes,R=s.pingedLanes;s=s.warmLanes;var D=f&134217727;return D!==0?(f=D&~j,f!==0?y=Dr(f):(R&=D,R!==0?y=Dr(R):c||(c=D&~s,c!==0&&(y=Dr(c))))):(D=f&~j,D!==0?y=Dr(D):R!==0?y=Dr(R):c||(c=f&~s,c!==0&&(y=Dr(c)))),y===0?0:i!==0&&i!==y&&(i&j)===0&&(j=y&-y,c=i&-i,j>=c||j===32&&(c&4194048)!==0)?i:y}function $t(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function pa(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ga(){var s=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),s}function lc(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function Ol(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function n0(s,i,c,f,y,j){var R=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var D=s.entanglements,F=s.expirationTimes,re=s.hiddenUpdates;for(c=R&~c;0<c;){var he=31-Ee(c),je=1<<he;D[he]=0,F[he]=-1;var le=re[he];if(le!==null)for(re[he]=null,he=0;he<le.length;he++){var de=le[he];de!==null&&(de.lane&=-536870913)}c&=~je}f!==0&&ju(s,f,0),j!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=j&~(R&~i))}function ju(s,i,c){s.pendingLanes|=i,s.suspendedLanes&=~i;var f=31-Ee(i);s.entangledLanes|=i,s.entanglements[f]=s.entanglements[f]|1073741824|c&261930}function Nu(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var f=31-Ee(c),y=1<<f;y&i|s[f]&i&&(s[f]|=i),c&=~y}}function wu(s,i){var c=i&-i;return c=(c&42)!==0?1:ic(c),(c&(s.suspendedLanes|i))!==0?0:c}function ic(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function oc(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function cc(){var s=J.p;return s!==0?s:(s=window.event,s===void 0?32:nS(s.type))}function Su(s,i){var c=J.p;try{return J.p=s,i()}finally{J.p=c}}var ba=Math.random().toString(36).slice(2),Vt="__reactFiber$"+ba,yr="__reactProps$"+ba,zs="__reactContainer$"+ba,dc="__reactEvents$"+ba,a0="__reactListeners$"+ba,s0="__reactHandles$"+ba,Eu="__reactResources$"+ba,ie="__reactMarker$"+ba;function ke(s){delete s[Vt],delete s[yr],delete s[dc],delete s[a0],delete s[s0]}function De(s){var i=s[Vt];if(i)return i;for(var c=s.parentNode;c;){if(i=c[zs]||c[Vt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=U2(s);s!==null;){if(c=s[Vt])return c;s=U2(s)}return i}s=c,c=s.parentNode}return null}function nr(s){if(s=s[Vt]||s[zs]){var i=s.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return s}return null}function Bs(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(a(33))}function $s(s){var i=s[Eu];return i||(i=s[Eu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ut(s){s[ie]=!0}var uc=new Set,Cu={};function ya(s,i){Us(s,i),Us(s+"Capture",i)}function Us(s,i){for(Cu[s]=i,s=0;s<i.length;s++)uc.add(i[s])}var Mr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),w1={},S1={};function MR(s){return an.call(S1,s)?!0:an.call(w1,s)?!1:Mr.test(s)?S1[s]=!0:(w1[s]=!0,!1)}function Au(s,i,c){if(MR(i))if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var f=i.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+c)}}function ku(s,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+c)}}function Ka(s,i,c,f){if(f===null)s.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(i,c,""+f)}}function wn(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function E1(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function IR(s,i,c){var f=Object.getOwnPropertyDescriptor(s.constructor.prototype,i);if(!s.hasOwnProperty(i)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,j=f.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return y.call(this)},set:function(R){c=""+R,j.call(this,R)}}),Object.defineProperty(s,i,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(R){c=""+R},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function l0(s){if(!s._valueTracker){var i=E1(s)?"checked":"value";s._valueTracker=IR(s,i,""+s[i])}}function C1(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),f="";return s&&(f=E1(s)?s.checked?"true":"false":s.value),s=f,s!==c?(i.setValue(s),!0):!1}function _u(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var LR=/[\n"\\]/g;function Sn(s){return s.replace(LR,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function i0(s,i,c,f,y,j,R,D){s.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?s.type=R:s.removeAttribute("type"),i!=null?R==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+wn(i)):s.value!==""+wn(i)&&(s.value=""+wn(i)):R!=="submit"&&R!=="reset"||s.removeAttribute("value"),i!=null?o0(s,R,wn(i)):c!=null?o0(s,R,wn(c)):f!=null&&s.removeAttribute("value"),y==null&&j!=null&&(s.defaultChecked=!!j),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.name=""+wn(D):s.removeAttribute("name")}function A1(s,i,c,f,y,j,R,D){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.type=j),i!=null||c!=null){if(!(j!=="submit"&&j!=="reset"||i!=null)){l0(s);return}c=c!=null?""+wn(c):"",i=i!=null?""+wn(i):c,D||i===s.value||(s.value=i),s.defaultValue=i}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,s.checked=D?s.checked:!!f,s.defaultChecked=!!f,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(s.name=R),l0(s)}function o0(s,i,c){i==="number"&&_u(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Pi(s,i,c,f){if(s=s.options,i){i={};for(var y=0;y<c.length;y++)i["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=i.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&f&&(s[c].defaultSelected=!0)}else{for(c=""+wn(c),i=null,y=0;y<s.length;y++){if(s[y].value===c){s[y].selected=!0,f&&(s[y].defaultSelected=!0);return}i!==null||s[y].disabled||(i=s[y])}i!==null&&(i.selected=!0)}}function k1(s,i,c){if(i!=null&&(i=""+wn(i),i!==s.value&&(s.value=i),c==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=c!=null?""+wn(c):""}function _1(s,i,c,f){if(i==null){if(f!=null){if(c!=null)throw Error(a(92));if(be(f)){if(1<f.length)throw Error(a(93));f=f[0]}c=f}c==null&&(c=""),i=c}c=wn(i),s.defaultValue=c,f=s.textContent,f===c&&f!==""&&f!==null&&(s.value=f),l0(s)}function Di(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var zR=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function O1(s,i,c){var f=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":f?s.setProperty(i,c):typeof c!="number"||c===0||zR.has(i)?i==="float"?s.cssFloat=c:s[i]=(""+c).trim():s[i]=c+"px"}function T1(s,i,c){if(i!=null&&typeof i!="object")throw Error(a(62));if(s=s.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||i!=null&&i.hasOwnProperty(f)||(f.indexOf("--")===0?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="");for(var y in i)f=i[y],i.hasOwnProperty(y)&&c[y]!==f&&O1(s,y,f)}else for(var j in i)i.hasOwnProperty(j)&&O1(s,j,i[j])}function c0(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BR=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$R=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ou(s){return $R.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ga(){}var d0=null;function u0(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Mi=null,Ii=null;function R1(s){var i=nr(s);if(i&&(s=i.stateNode)){var c=s[yr]||null;e:switch(s=i.stateNode,i.type){case"input":if(i0(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+Sn(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var f=c[i];if(f!==s&&f.form===s.form){var y=f[yr]||null;if(!y)throw Error(a(90));i0(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(i=0;i<c.length;i++)f=c[i],f.form===s.form&&C1(f)}break e;case"textarea":k1(s,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Pi(s,!!c.multiple,i,!1)}}}var f0=!1;function P1(s,i,c){if(f0)return s(i,c);f0=!0;try{var f=s(i);return f}finally{if(f0=!1,(Mi!==null||Ii!==null)&&(bf(),Mi&&(i=Mi,s=Ii,Ii=Mi=null,R1(i),s)))for(i=0;i<s.length;i++)R1(s[i])}}function fc(s,i){var c=s.stateNode;if(c===null)return null;var f=c[yr]||null;if(f===null)return null;c=f[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(s=s.type,f=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!f;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(a(231,i,typeof c));return c}var Va=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),m0=!1;if(Va)try{var mc={};Object.defineProperty(mc,"passive",{get:function(){m0=!0}}),window.addEventListener("test",mc,mc),window.removeEventListener("test",mc,mc)}catch{m0=!1}var qs=null,h0=null,Tu=null;function D1(){if(Tu)return Tu;var s,i=h0,c=i.length,f,y="value"in qs?qs.value:qs.textContent,j=y.length;for(s=0;s<c&&i[s]===y[s];s++);var R=c-s;for(f=1;f<=R&&i[c-f]===y[j-f];f++);return Tu=y.slice(s,1<f?1-f:void 0)}function Ru(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function Pu(){return!0}function M1(){return!1}function Hr(s){function i(c,f,y,j,R){this._reactName=c,this._targetInst=y,this.type=f,this.nativeEvent=j,this.target=R,this.currentTarget=null;for(var D in s)s.hasOwnProperty(D)&&(c=s[D],this[D]=c?c(j):j[D]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?Pu:M1,this.isPropagationStopped=M1,this}return p(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Pu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Pu)},persist:function(){},isPersistent:Pu}),i}var Tl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Du=Hr(Tl),hc=p({},Tl,{view:0,detail:0}),UR=Hr(hc),x0,p0,xc,Mu=p({},hc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b0,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==xc&&(xc&&s.type==="mousemove"?(x0=s.screenX-xc.screenX,p0=s.screenY-xc.screenY):p0=x0=0,xc=s),x0)},movementY:function(s){return"movementY"in s?s.movementY:p0}}),I1=Hr(Mu),qR=p({},Mu,{dataTransfer:0}),FR=Hr(qR),HR=p({},hc,{relatedTarget:0}),g0=Hr(HR),KR=p({},Tl,{animationName:0,elapsedTime:0,pseudoElement:0}),GR=Hr(KR),VR=p({},Tl,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),YR=Hr(VR),QR=p({},Tl,{data:0}),L1=Hr(QR),WR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},XR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ZR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JR(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=ZR[s])?!!i[s]:!1}function b0(){return JR}var eP=p({},hc,{key:function(s){if(s.key){var i=WR[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Ru(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?XR[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b0,charCode:function(s){return s.type==="keypress"?Ru(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ru(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),tP=Hr(eP),rP=p({},Mu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z1=Hr(rP),nP=p({},hc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b0}),aP=Hr(nP),sP=p({},Tl,{propertyName:0,elapsedTime:0,pseudoElement:0}),lP=Hr(sP),iP=p({},Mu,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),oP=Hr(iP),cP=p({},Tl,{newState:0,oldState:0}),dP=Hr(cP),uP=[9,13,27,32],y0=Va&&"CompositionEvent"in window,pc=null;Va&&"documentMode"in document&&(pc=document.documentMode);var fP=Va&&"TextEvent"in window&&!pc,B1=Va&&(!y0||pc&&8<pc&&11>=pc),$1=" ",U1=!1;function q1(s,i){switch(s){case"keyup":return uP.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F1(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Li=!1;function mP(s,i){switch(s){case"compositionend":return F1(i);case"keypress":return i.which!==32?null:(U1=!0,$1);case"textInput":return s=i.data,s===$1&&U1?null:s;default:return null}}function hP(s,i){if(Li)return s==="compositionend"||!y0&&q1(s,i)?(s=D1(),Tu=h0=qs=null,Li=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return B1&&i.locale!=="ko"?null:i.data;default:return null}}var xP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function H1(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!xP[s.type]:i==="textarea"}function K1(s,i,c,f){Mi?Ii?Ii.push(f):Ii=[f]:Mi=f,i=Ef(i,"onChange"),0<i.length&&(c=new Du("onChange","change",null,c,f),s.push({event:c,listeners:i}))}var gc=null,bc=null;function pP(s){A2(s,0)}function Iu(s){var i=Bs(s);if(C1(i))return s}function G1(s,i){if(s==="change")return i}var V1=!1;if(Va){var v0;if(Va){var j0="oninput"in document;if(!j0){var Y1=document.createElement("div");Y1.setAttribute("oninput","return;"),j0=typeof Y1.oninput=="function"}v0=j0}else v0=!1;V1=v0&&(!document.documentMode||9<document.documentMode)}function Q1(){gc&&(gc.detachEvent("onpropertychange",W1),bc=gc=null)}function W1(s){if(s.propertyName==="value"&&Iu(bc)){var i=[];K1(i,bc,s,u0(s)),P1(pP,i)}}function gP(s,i,c){s==="focusin"?(Q1(),gc=i,bc=c,gc.attachEvent("onpropertychange",W1)):s==="focusout"&&Q1()}function bP(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Iu(bc)}function yP(s,i){if(s==="click")return Iu(i)}function vP(s,i){if(s==="input"||s==="change")return Iu(i)}function jP(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var sn=typeof Object.is=="function"?Object.is:jP;function yc(s,i){if(sn(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),f=Object.keys(i);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var y=c[f];if(!an.call(i,y)||!sn(s[y],i[y]))return!1}return!0}function X1(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Z1(s,i){var c=X1(s);s=0;for(var f;c;){if(c.nodeType===3){if(f=s+c.textContent.length,s<=i&&f>=i)return{node:c,offset:i-s};s=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=X1(c)}}function J1(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?J1(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function eN(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=_u(s.document);i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=_u(s.document)}return i}function N0(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var NP=Va&&"documentMode"in document&&11>=document.documentMode,zi=null,w0=null,vc=null,S0=!1;function tN(s,i,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;S0||zi==null||zi!==_u(f)||(f=zi,"selectionStart"in f&&N0(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),vc&&yc(vc,f)||(vc=f,f=Ef(w0,"onSelect"),0<f.length&&(i=new Du("onSelect","select",null,i,c),s.push({event:i,listeners:f}),i.target=zi)))}function Rl(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var Bi={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionrun:Rl("Transition","TransitionRun"),transitionstart:Rl("Transition","TransitionStart"),transitioncancel:Rl("Transition","TransitionCancel"),transitionend:Rl("Transition","TransitionEnd")},E0={},rN={};Va&&(rN=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Pl(s){if(E0[s])return E0[s];if(!Bi[s])return s;var i=Bi[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in rN)return E0[s]=i[c];return s}var nN=Pl("animationend"),aN=Pl("animationiteration"),sN=Pl("animationstart"),wP=Pl("transitionrun"),SP=Pl("transitionstart"),EP=Pl("transitioncancel"),lN=Pl("transitionend"),iN=new Map,C0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");C0.push("scrollEnd");function Xn(s,i){iN.set(s,i),ya(i,[s])}var Lu=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},En=[],$i=0,A0=0;function zu(){for(var s=$i,i=A0=$i=0;i<s;){var c=En[i];En[i++]=null;var f=En[i];En[i++]=null;var y=En[i];En[i++]=null;var j=En[i];if(En[i++]=null,f!==null&&y!==null){var R=f.pending;R===null?y.next=y:(y.next=R.next,R.next=y),f.pending=y}j!==0&&oN(c,y,j)}}function Bu(s,i,c,f){En[$i++]=s,En[$i++]=i,En[$i++]=c,En[$i++]=f,A0|=f,s.lanes|=f,s=s.alternate,s!==null&&(s.lanes|=f)}function k0(s,i,c,f){return Bu(s,i,c,f),$u(s)}function Dl(s,i){return Bu(s,null,null,i),$u(s)}function oN(s,i,c){s.lanes|=c;var f=s.alternate;f!==null&&(f.lanes|=c);for(var y=!1,j=s.return;j!==null;)j.childLanes|=c,f=j.alternate,f!==null&&(f.childLanes|=c),j.tag===22&&(s=j.stateNode,s===null||s._visibility&1||(y=!0)),s=j,j=j.return;return s.tag===3?(j=s.stateNode,y&&i!==null&&(y=31-Ee(c),s=j.hiddenUpdates,f=s[y],f===null?s[y]=[i]:f.push(i),i.lane=c|536870912),j):null}function $u(s){if(50<qc)throw qc=0,Lp=null,Error(a(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Ui={};function CP(s,i,c,f){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(s,i,c,f){return new CP(s,i,c,f)}function _0(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Ya(s,i){var c=s.alternate;return c===null?(c=ln(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function cN(s,i){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,i=c.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function Uu(s,i,c,f,y,j){var R=0;if(f=s,typeof s=="function")_0(s)&&(R=1);else if(typeof s=="string")R=TD(s,c,oe.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case L:return s=ln(31,c,i,y),s.elementType=L,s.lanes=j,s;case w:return Ml(c.children,y,j,i);case S:R=8,y|=24;break;case A:return s=ln(12,c,i,y|2),s.elementType=A,s.lanes=j,s;case k:return s=ln(13,c,i,y),s.elementType=k,s.lanes=j,s;case _:return s=ln(19,c,i,y),s.elementType=_,s.lanes=j,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case C:R=10;break e;case E:R=9;break e;case O:R=11;break e;case T:R=14;break e;case P:R=16,f=null;break e}R=29,c=Error(a(130,s===null?"null":typeof s,"")),f=null}return i=ln(R,c,i,y),i.elementType=s,i.type=f,i.lanes=j,i}function Ml(s,i,c,f){return s=ln(7,s,f,i),s.lanes=c,s}function O0(s,i,c){return s=ln(6,s,null,i),s.lanes=c,s}function dN(s){var i=ln(18,null,null,0);return i.stateNode=s,i}function T0(s,i,c){return i=ln(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var uN=new WeakMap;function Cn(s,i){if(typeof s=="object"&&s!==null){var c=uN.get(s);return c!==void 0?c:(i={value:s,source:i,stack:tr(i)},uN.set(s,i),i)}return{value:s,source:i,stack:tr(i)}}var qi=[],Fi=0,qu=null,jc=0,An=[],kn=0,Fs=null,va=1,ja="";function Qa(s,i){qi[Fi++]=jc,qi[Fi++]=qu,qu=s,jc=i}function fN(s,i,c){An[kn++]=va,An[kn++]=ja,An[kn++]=Fs,Fs=s;var f=va;s=ja;var y=32-Ee(f)-1;f&=~(1<<y),c+=1;var j=32-Ee(i)+y;if(30<j){var R=y-y%5;j=(f&(1<<R)-1).toString(32),f>>=R,y-=R,va=1<<32-Ee(i)+y|c<<y|f,ja=j+s}else va=1<<j|c<<y|f,ja=s}function R0(s){s.return!==null&&(Qa(s,1),fN(s,1,0))}function P0(s){for(;s===qu;)qu=qi[--Fi],qi[Fi]=null,jc=qi[--Fi],qi[Fi]=null;for(;s===Fs;)Fs=An[--kn],An[kn]=null,ja=An[--kn],An[kn]=null,va=An[--kn],An[kn]=null}function mN(s,i){An[kn++]=va,An[kn++]=ja,An[kn++]=Fs,va=i.id,ja=i.overflow,Fs=s}var vr=null,St=null,Xe=!1,Hs=null,_n=!1,D0=Error(a(519));function Ks(s){var i=Error(a(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Nc(Cn(i,s)),D0}function hN(s){var i=s.stateNode,c=s.type,f=s.memoizedProps;switch(i[Vt]=s,i[yr]=f,c){case"dialog":Ge("cancel",i),Ge("close",i);break;case"iframe":case"object":case"embed":Ge("load",i);break;case"video":case"audio":for(c=0;c<Hc.length;c++)Ge(Hc[c],i);break;case"source":Ge("error",i);break;case"img":case"image":case"link":Ge("error",i),Ge("load",i);break;case"details":Ge("toggle",i);break;case"input":Ge("invalid",i),A1(i,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Ge("invalid",i);break;case"textarea":Ge("invalid",i),_1(i,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||f.suppressHydrationWarning===!0||T2(i.textContent,c)?(f.popover!=null&&(Ge("beforetoggle",i),Ge("toggle",i)),f.onScroll!=null&&Ge("scroll",i),f.onScrollEnd!=null&&Ge("scrollend",i),f.onClick!=null&&(i.onclick=Ga),i=!0):i=!1,i||Ks(s,!0)}function xN(s){for(vr=s.return;vr;)switch(vr.tag){case 5:case 31:case 13:_n=!1;return;case 27:case 3:_n=!0;return;default:vr=vr.return}}function Hi(s){if(s!==vr)return!1;if(!Xe)return xN(s),Xe=!0,!1;var i=s.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||Zp(s.type,s.memoizedProps)),c=!c),c&&St&&Ks(s),xN(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));St=$2(s)}else if(i===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(317));St=$2(s)}else i===27?(i=St,sl(s.type)?(s=ng,ng=null,St=s):St=i):St=vr?Tn(s.stateNode.nextSibling):null;return!0}function Il(){St=vr=null,Xe=!1}function M0(){var s=Hs;return s!==null&&(Yr===null?Yr=s:Yr.push.apply(Yr,s),Hs=null),s}function Nc(s){Hs===null?Hs=[s]:Hs.push(s)}var I0=I(null),Ll=null,Wa=null;function Gs(s,i,c){H(I0,i._currentValue),i._currentValue=c}function Xa(s){s._currentValue=I0.current,M(I0)}function L0(s,i,c){for(;s!==null;){var f=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,f!==null&&(f.childLanes|=i)):f!==null&&(f.childLanes&i)!==i&&(f.childLanes|=i),s===c)break;s=s.return}}function z0(s,i,c,f){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var j=y.dependencies;if(j!==null){var R=y.child;j=j.firstContext;e:for(;j!==null;){var D=j;j=y;for(var F=0;F<i.length;F++)if(D.context===i[F]){j.lanes|=c,D=j.alternate,D!==null&&(D.lanes|=c),L0(j.return,c,s),f||(R=null);break e}j=D.next}}else if(y.tag===18){if(R=y.return,R===null)throw Error(a(341));R.lanes|=c,j=R.alternate,j!==null&&(j.lanes|=c),L0(R,c,s),R=null}else R=y.child;if(R!==null)R.return=y;else for(R=y;R!==null;){if(R===s){R=null;break}if(y=R.sibling,y!==null){y.return=R.return,R=y;break}R=R.return}y=R}}function Ki(s,i,c,f){s=null;for(var y=i,j=!1;y!==null;){if(!j){if((y.flags&524288)!==0)j=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var R=y.alternate;if(R===null)throw Error(a(387));if(R=R.memoizedProps,R!==null){var D=y.type;sn(y.pendingProps.value,R.value)||(s!==null?s.push(D):s=[D])}}else if(y===V.current){if(R=y.alternate,R===null)throw Error(a(387));R.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Qc):s=[Qc])}y=y.return}s!==null&&z0(i,s,c,f),i.flags|=262144}function Fu(s){for(s=s.firstContext;s!==null;){if(!sn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function zl(s){Ll=s,Wa=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function jr(s){return pN(Ll,s)}function Hu(s,i){return Ll===null&&zl(s),pN(s,i)}function pN(s,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Wa===null){if(s===null)throw Error(a(308));Wa=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Wa=Wa.next=i;return c}var AP=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(c,f){s.push(f)}};this.abort=function(){i.aborted=!0,s.forEach(function(c){return c()})}},kP=e.unstable_scheduleCallback,_P=e.unstable_NormalPriority,Yt={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function B0(){return{controller:new AP,data:new Map,refCount:0}}function wc(s){s.refCount--,s.refCount===0&&kP(_P,function(){s.controller.abort()})}var Sc=null,$0=0,Gi=0,Vi=null;function OP(s,i){if(Sc===null){var c=Sc=[];$0=0,Gi=Fp(),Vi={status:"pending",value:void 0,then:function(f){c.push(f)}}}return $0++,i.then(gN,gN),i}function gN(){if(--$0===0&&Sc!==null){Vi!==null&&(Vi.status="fulfilled");var s=Sc;Sc=null,Gi=0,Vi=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function TP(s,i){var c=[],f={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return s.then(function(){f.status="fulfilled",f.value=i;for(var y=0;y<c.length;y++)(0,c[y])(i)},function(y){for(f.status="rejected",f.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),f}var bN=G.S;G.S=function(s,i){t2=br(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&OP(s,i),bN!==null&&bN(s,i)};var Bl=I(null);function U0(){var s=Bl.current;return s!==null?s:yt.pooledCache}function Ku(s,i){i===null?H(Bl,Bl.current):H(Bl,i.pool)}function yN(){var s=U0();return s===null?null:{parent:Yt._currentValue,pool:s}}var Yi=Error(a(460)),q0=Error(a(474)),Gu=Error(a(542)),Vu={then:function(){}};function vN(s){return s=s.status,s==="fulfilled"||s==="rejected"}function jN(s,i,c){switch(c=s[c],c===void 0?s.push(i):c!==i&&(i.then(Ga,Ga),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,wN(s),s;default:if(typeof i.status=="string")i.then(Ga,Ga);else{if(s=yt,s!==null&&100<s.shellSuspendCounter)throw Error(a(482));s=i,s.status="pending",s.then(function(f){if(i.status==="pending"){var y=i;y.status="fulfilled",y.value=f}},function(f){if(i.status==="pending"){var y=i;y.status="rejected",y.reason=f}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,wN(s),s}throw Ul=i,Yi}}function $l(s){try{var i=s._init;return i(s._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Ul=c,Yi):c}}var Ul=null;function NN(){if(Ul===null)throw Error(a(459));var s=Ul;return Ul=null,s}function wN(s){if(s===Yi||s===Gu)throw Error(a(483))}var Qi=null,Ec=0;function Yu(s){var i=Ec;return Ec+=1,Qi===null&&(Qi=[]),jN(Qi,s,i)}function Cc(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Qu(s,i){throw i.$$typeof===b?Error(a(525)):(s=Object.prototype.toString.call(i),Error(a(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function SN(s){function i(Q,Y){if(s){var te=Q.deletions;te===null?(Q.deletions=[Y],Q.flags|=16):te.push(Y)}}function c(Q,Y){if(!s)return null;for(;Y!==null;)i(Q,Y),Y=Y.sibling;return null}function f(Q){for(var Y=new Map;Q!==null;)Q.key!==null?Y.set(Q.key,Q):Y.set(Q.index,Q),Q=Q.sibling;return Y}function y(Q,Y){return Q=Ya(Q,Y),Q.index=0,Q.sibling=null,Q}function j(Q,Y,te){return Q.index=te,s?(te=Q.alternate,te!==null?(te=te.index,te<Y?(Q.flags|=67108866,Y):te):(Q.flags|=67108866,Y)):(Q.flags|=1048576,Y)}function R(Q){return s&&Q.alternate===null&&(Q.flags|=67108866),Q}function D(Q,Y,te,ye){return Y===null||Y.tag!==6?(Y=O0(te,Q.mode,ye),Y.return=Q,Y):(Y=y(Y,te),Y.return=Q,Y)}function F(Q,Y,te,ye){var Pe=te.type;return Pe===w?he(Q,Y,te.props.children,ye,te.key):Y!==null&&(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===P&&$l(Pe)===Y.type)?(Y=y(Y,te.props),Cc(Y,te),Y.return=Q,Y):(Y=Uu(te.type,te.key,te.props,null,Q.mode,ye),Cc(Y,te),Y.return=Q,Y)}function re(Q,Y,te,ye){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==te.containerInfo||Y.stateNode.implementation!==te.implementation?(Y=T0(te,Q.mode,ye),Y.return=Q,Y):(Y=y(Y,te.children||[]),Y.return=Q,Y)}function he(Q,Y,te,ye,Pe){return Y===null||Y.tag!==7?(Y=Ml(te,Q.mode,ye,Pe),Y.return=Q,Y):(Y=y(Y,te),Y.return=Q,Y)}function je(Q,Y,te){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=O0(""+Y,Q.mode,te),Y.return=Q,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case N:return te=Uu(Y.type,Y.key,Y.props,null,Q.mode,te),Cc(te,Y),te.return=Q,te;case v:return Y=T0(Y,Q.mode,te),Y.return=Q,Y;case P:return Y=$l(Y),je(Q,Y,te)}if(be(Y)||B(Y))return Y=Ml(Y,Q.mode,te,null),Y.return=Q,Y;if(typeof Y.then=="function")return je(Q,Yu(Y),te);if(Y.$$typeof===C)return je(Q,Hu(Q,Y),te);Qu(Q,Y)}return null}function le(Q,Y,te,ye){var Pe=Y!==null?Y.key:null;if(typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint")return Pe!==null?null:D(Q,Y,""+te,ye);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case N:return te.key===Pe?F(Q,Y,te,ye):null;case v:return te.key===Pe?re(Q,Y,te,ye):null;case P:return te=$l(te),le(Q,Y,te,ye)}if(be(te)||B(te))return Pe!==null?null:he(Q,Y,te,ye,null);if(typeof te.then=="function")return le(Q,Y,Yu(te),ye);if(te.$$typeof===C)return le(Q,Y,Hu(Q,te),ye);Qu(Q,te)}return null}function de(Q,Y,te,ye,Pe){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return Q=Q.get(te)||null,D(Y,Q,""+ye,Pe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case N:return Q=Q.get(ye.key===null?te:ye.key)||null,F(Y,Q,ye,Pe);case v:return Q=Q.get(ye.key===null?te:ye.key)||null,re(Y,Q,ye,Pe);case P:return ye=$l(ye),de(Q,Y,te,ye,Pe)}if(be(ye)||B(ye))return Q=Q.get(te)||null,he(Y,Q,ye,Pe,null);if(typeof ye.then=="function")return de(Q,Y,te,Yu(ye),Pe);if(ye.$$typeof===C)return de(Q,Y,te,Hu(Y,ye),Pe);Qu(Y,ye)}return null}function Oe(Q,Y,te,ye){for(var Pe=null,rt=null,Te=Y,He=Y=0,Qe=null;Te!==null&&He<te.length;He++){Te.index>He?(Qe=Te,Te=null):Qe=Te.sibling;var nt=le(Q,Te,te[He],ye);if(nt===null){Te===null&&(Te=Qe);break}s&&Te&&nt.alternate===null&&i(Q,Te),Y=j(nt,Y,He),rt===null?Pe=nt:rt.sibling=nt,rt=nt,Te=Qe}if(He===te.length)return c(Q,Te),Xe&&Qa(Q,He),Pe;if(Te===null){for(;He<te.length;He++)Te=je(Q,te[He],ye),Te!==null&&(Y=j(Te,Y,He),rt===null?Pe=Te:rt.sibling=Te,rt=Te);return Xe&&Qa(Q,He),Pe}for(Te=f(Te);He<te.length;He++)Qe=de(Te,Q,He,te[He],ye),Qe!==null&&(s&&Qe.alternate!==null&&Te.delete(Qe.key===null?He:Qe.key),Y=j(Qe,Y,He),rt===null?Pe=Qe:rt.sibling=Qe,rt=Qe);return s&&Te.forEach(function(dl){return i(Q,dl)}),Xe&&Qa(Q,He),Pe}function Ie(Q,Y,te,ye){if(te==null)throw Error(a(151));for(var Pe=null,rt=null,Te=Y,He=Y=0,Qe=null,nt=te.next();Te!==null&&!nt.done;He++,nt=te.next()){Te.index>He?(Qe=Te,Te=null):Qe=Te.sibling;var dl=le(Q,Te,nt.value,ye);if(dl===null){Te===null&&(Te=Qe);break}s&&Te&&dl.alternate===null&&i(Q,Te),Y=j(dl,Y,He),rt===null?Pe=dl:rt.sibling=dl,rt=dl,Te=Qe}if(nt.done)return c(Q,Te),Xe&&Qa(Q,He),Pe;if(Te===null){for(;!nt.done;He++,nt=te.next())nt=je(Q,nt.value,ye),nt!==null&&(Y=j(nt,Y,He),rt===null?Pe=nt:rt.sibling=nt,rt=nt);return Xe&&Qa(Q,He),Pe}for(Te=f(Te);!nt.done;He++,nt=te.next())nt=de(Te,Q,He,nt.value,ye),nt!==null&&(s&&nt.alternate!==null&&Te.delete(nt.key===null?He:nt.key),Y=j(nt,Y,He),rt===null?Pe=nt:rt.sibling=nt,rt=nt);return s&&Te.forEach(function(qD){return i(Q,qD)}),Xe&&Qa(Q,He),Pe}function pt(Q,Y,te,ye){if(typeof te=="object"&&te!==null&&te.type===w&&te.key===null&&(te=te.props.children),typeof te=="object"&&te!==null){switch(te.$$typeof){case N:e:{for(var Pe=te.key;Y!==null;){if(Y.key===Pe){if(Pe=te.type,Pe===w){if(Y.tag===7){c(Q,Y.sibling),ye=y(Y,te.props.children),ye.return=Q,Q=ye;break e}}else if(Y.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===P&&$l(Pe)===Y.type){c(Q,Y.sibling),ye=y(Y,te.props),Cc(ye,te),ye.return=Q,Q=ye;break e}c(Q,Y);break}else i(Q,Y);Y=Y.sibling}te.type===w?(ye=Ml(te.props.children,Q.mode,ye,te.key),ye.return=Q,Q=ye):(ye=Uu(te.type,te.key,te.props,null,Q.mode,ye),Cc(ye,te),ye.return=Q,Q=ye)}return R(Q);case v:e:{for(Pe=te.key;Y!==null;){if(Y.key===Pe)if(Y.tag===4&&Y.stateNode.containerInfo===te.containerInfo&&Y.stateNode.implementation===te.implementation){c(Q,Y.sibling),ye=y(Y,te.children||[]),ye.return=Q,Q=ye;break e}else{c(Q,Y);break}else i(Q,Y);Y=Y.sibling}ye=T0(te,Q.mode,ye),ye.return=Q,Q=ye}return R(Q);case P:return te=$l(te),pt(Q,Y,te,ye)}if(be(te))return Oe(Q,Y,te,ye);if(B(te)){if(Pe=B(te),typeof Pe!="function")throw Error(a(150));return te=Pe.call(te),Ie(Q,Y,te,ye)}if(typeof te.then=="function")return pt(Q,Y,Yu(te),ye);if(te.$$typeof===C)return pt(Q,Y,Hu(Q,te),ye);Qu(Q,te)}return typeof te=="string"&&te!==""||typeof te=="number"||typeof te=="bigint"?(te=""+te,Y!==null&&Y.tag===6?(c(Q,Y.sibling),ye=y(Y,te),ye.return=Q,Q=ye):(c(Q,Y),ye=O0(te,Q.mode,ye),ye.return=Q,Q=ye),R(Q)):c(Q,Y)}return function(Q,Y,te,ye){try{Ec=0;var Pe=pt(Q,Y,te,ye);return Qi=null,Pe}catch(Te){if(Te===Yi||Te===Gu)throw Te;var rt=ln(29,Te,null,Q.mode);return rt.lanes=ye,rt.return=Q,rt}}}var ql=SN(!0),EN=SN(!1),Vs=!1;function F0(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function H0(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Ys(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Qs(s,i,c){var f=s.updateQueue;if(f===null)return null;if(f=f.shared,(st&2)!==0){var y=f.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),f.pending=i,i=$u(s),oN(s,null,c),i}return Bu(s,f,i,c),$u(s)}function Ac(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var f=i.lanes;f&=s.pendingLanes,c|=f,i.lanes=c,Nu(s,c)}}function K0(s,i){var c=s.updateQueue,f=s.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var y=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var R={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};j===null?y=j=R:j=j.next=R,c=c.next}while(c!==null);j===null?y=j=i:j=j.next=i}else y=j=i;c={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:j,shared:f.shared,callbacks:f.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}var G0=!1;function kc(){if(G0){var s=Vi;if(s!==null)throw s}}function _c(s,i,c,f){G0=!1;var y=s.updateQueue;Vs=!1;var j=y.firstBaseUpdate,R=y.lastBaseUpdate,D=y.shared.pending;if(D!==null){y.shared.pending=null;var F=D,re=F.next;F.next=null,R===null?j=re:R.next=re,R=F;var he=s.alternate;he!==null&&(he=he.updateQueue,D=he.lastBaseUpdate,D!==R&&(D===null?he.firstBaseUpdate=re:D.next=re,he.lastBaseUpdate=F))}if(j!==null){var je=y.baseState;R=0,he=re=F=null,D=j;do{var le=D.lane&-536870913,de=le!==D.lane;if(de?(Ye&le)===le:(f&le)===le){le!==0&&le===Gi&&(G0=!0),he!==null&&(he=he.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Oe=s,Ie=D;le=i;var pt=c;switch(Ie.tag){case 1:if(Oe=Ie.payload,typeof Oe=="function"){je=Oe.call(pt,je,le);break e}je=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=Ie.payload,le=typeof Oe=="function"?Oe.call(pt,je,le):Oe,le==null)break e;je=p({},je,le);break e;case 2:Vs=!0}}le=D.callback,le!==null&&(s.flags|=64,de&&(s.flags|=8192),de=y.callbacks,de===null?y.callbacks=[le]:de.push(le))}else de={lane:le,tag:D.tag,payload:D.payload,callback:D.callback,next:null},he===null?(re=he=de,F=je):he=he.next=de,R|=le;if(D=D.next,D===null){if(D=y.shared.pending,D===null)break;de=D,D=de.next,de.next=null,y.lastBaseUpdate=de,y.shared.pending=null}}while(!0);he===null&&(F=je),y.baseState=F,y.firstBaseUpdate=re,y.lastBaseUpdate=he,j===null&&(y.shared.lanes=0),el|=R,s.lanes=R,s.memoizedState=je}}function CN(s,i){if(typeof s!="function")throw Error(a(191,s));s.call(i)}function AN(s,i){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)CN(c[s],i)}var Wi=I(null),Wu=I(0);function kN(s,i){s=ls,H(Wu,s),H(Wi,i),ls=s|i.baseLanes}function V0(){H(Wu,ls),H(Wi,Wi.current)}function Y0(){ls=Wu.current,M(Wi),M(Wu)}var on=I(null),On=null;function Ws(s){var i=s.alternate;H(qt,qt.current&1),H(on,s),On===null&&(i===null||Wi.current!==null||i.memoizedState!==null)&&(On=s)}function Q0(s){H(qt,qt.current),H(on,s),On===null&&(On=s)}function _N(s){s.tag===22?(H(qt,qt.current),H(on,s),On===null&&(On=s)):Xs()}function Xs(){H(qt,qt.current),H(on,on.current)}function cn(s){M(on),On===s&&(On=null),M(qt)}var qt=I(0);function Xu(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||tg(c)||rg(c)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Za=0,qe=null,ht=null,Qt=null,Zu=!1,Xi=!1,Fl=!1,Ju=0,Oc=0,Zi=null,RP=0;function Dt(){throw Error(a(321))}function W0(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!sn(s[c],i[c]))return!1;return!0}function X0(s,i,c,f,y,j){return Za=j,qe=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,G.H=s===null||s.memoizedState===null?fw:fp,Fl=!1,j=c(f,y),Fl=!1,Xi&&(j=TN(i,c,f,y)),ON(s),j}function ON(s){G.H=Pc;var i=ht!==null&&ht.next!==null;if(Za=0,Qt=ht=qe=null,Zu=!1,Oc=0,Zi=null,i)throw Error(a(300));s===null||Wt||(s=s.dependencies,s!==null&&Fu(s)&&(Wt=!0))}function TN(s,i,c,f){qe=s;var y=0;do{if(Xi&&(Zi=null),Oc=0,Xi=!1,25<=y)throw Error(a(301));if(y+=1,Qt=ht=null,s.updateQueue!=null){var j=s.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}G.H=mw,j=i(c,f)}while(Xi);return j}function PP(){var s=G.H,i=s.useState()[0];return i=typeof i.then=="function"?Tc(i):i,s=s.useState()[0],(ht!==null?ht.memoizedState:null)!==s&&(qe.flags|=1024),i}function Z0(){var s=Ju!==0;return Ju=0,s}function J0(s,i,c){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~c}function ep(s){if(Zu){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}Zu=!1}Za=0,Qt=ht=qe=null,Xi=!1,Oc=Ju=0,Zi=null}function Ir(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?qe.memoizedState=Qt=s:Qt=Qt.next=s,Qt}function Ft(){if(ht===null){var s=qe.alternate;s=s!==null?s.memoizedState:null}else s=ht.next;var i=Qt===null?qe.memoizedState:Qt.next;if(i!==null)Qt=i,ht=s;else{if(s===null)throw qe.alternate===null?Error(a(467)):Error(a(310));ht=s,s={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Qt===null?qe.memoizedState=Qt=s:Qt=Qt.next=s}return Qt}function ef(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tc(s){var i=Oc;return Oc+=1,Zi===null&&(Zi=[]),s=jN(Zi,s,i),i=qe,(Qt===null?i.memoizedState:Qt.next)===null&&(i=i.alternate,G.H=i===null||i.memoizedState===null?fw:fp),s}function tf(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Tc(s);if(s.$$typeof===C)return jr(s)}throw Error(a(438,String(s)))}function tp(s){var i=null,c=qe.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var f=qe.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(i={data:f.data.map(function(y){return y.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=ef(),qe.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(s),f=0;f<s;f++)c[f]=z;return i.index++,c}function Ja(s,i){return typeof i=="function"?i(s):i}function rf(s){var i=Ft();return rp(i,ht,s)}function rp(s,i,c){var f=s.queue;if(f===null)throw Error(a(311));f.lastRenderedReducer=c;var y=s.baseQueue,j=f.pending;if(j!==null){if(y!==null){var R=y.next;y.next=j.next,j.next=R}i.baseQueue=y=j,f.pending=null}if(j=s.baseState,y===null)s.memoizedState=j;else{i=y.next;var D=R=null,F=null,re=i,he=!1;do{var je=re.lane&-536870913;if(je!==re.lane?(Ye&je)===je:(Za&je)===je){var le=re.revertLane;if(le===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),je===Gi&&(he=!0);else if((Za&le)===le){re=re.next,le===Gi&&(he=!0);continue}else je={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(D=F=je,R=j):F=F.next=je,qe.lanes|=le,el|=le;je=re.action,Fl&&c(j,je),j=re.hasEagerState?re.eagerState:c(j,je)}else le={lane:je,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},F===null?(D=F=le,R=j):F=F.next=le,qe.lanes|=je,el|=je;re=re.next}while(re!==null&&re!==i);if(F===null?R=j:F.next=D,!sn(j,s.memoizedState)&&(Wt=!0,he&&(c=Vi,c!==null)))throw c;s.memoizedState=j,s.baseState=R,s.baseQueue=F,f.lastRenderedState=j}return y===null&&(f.lanes=0),[s.memoizedState,f.dispatch]}function np(s){var i=Ft(),c=i.queue;if(c===null)throw Error(a(311));c.lastRenderedReducer=s;var f=c.dispatch,y=c.pending,j=i.memoizedState;if(y!==null){c.pending=null;var R=y=y.next;do j=s(j,R.action),R=R.next;while(R!==y);sn(j,i.memoizedState)||(Wt=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),c.lastRenderedState=j}return[j,f]}function RN(s,i,c){var f=qe,y=Ft(),j=Xe;if(j){if(c===void 0)throw Error(a(407));c=c()}else c=i();var R=!sn((ht||y).memoizedState,c);if(R&&(y.memoizedState=c,Wt=!0),y=y.queue,lp(MN.bind(null,f,y,s),[s]),y.getSnapshot!==i||R||Qt!==null&&Qt.memoizedState.tag&1){if(f.flags|=2048,Ji(9,{destroy:void 0},DN.bind(null,f,y,c,i),null),yt===null)throw Error(a(349));j||(Za&127)!==0||PN(f,i,c)}return c}function PN(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=qe.updateQueue,i===null?(i=ef(),qe.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function DN(s,i,c,f){i.value=c,i.getSnapshot=f,IN(i)&&LN(s)}function MN(s,i,c){return c(function(){IN(i)&&LN(s)})}function IN(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!sn(s,c)}catch{return!0}}function LN(s){var i=Dl(s,2);i!==null&&Qr(i,s,2)}function ap(s){var i=Ir();if(typeof s=="function"){var c=s;if(s=c(),Fl){Ce(!0);try{c()}finally{Ce(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:s},i}function zN(s,i,c,f){return s.baseState=c,rp(s,ht,typeof f=="function"?f:Ja)}function DP(s,i,c,f,y){if(sf(s))throw Error(a(485));if(s=i.action,s!==null){var j={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){j.listeners.push(R)}};G.T!==null?c(!0):j.isTransition=!1,f(j),c=i.pending,c===null?(j.next=i.pending=j,BN(i,j)):(j.next=c.next,i.pending=c.next=j)}}function BN(s,i){var c=i.action,f=i.payload,y=s.state;if(i.isTransition){var j=G.T,R={};G.T=R;try{var D=c(y,f),F=G.S;F!==null&&F(R,D),$N(s,i,D)}catch(re){sp(s,i,re)}finally{j!==null&&R.types!==null&&(j.types=R.types),G.T=j}}else try{j=c(y,f),$N(s,i,j)}catch(re){sp(s,i,re)}}function $N(s,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){UN(s,i,f)},function(f){return sp(s,i,f)}):UN(s,i,c)}function UN(s,i,c){i.status="fulfilled",i.value=c,qN(i),s.state=c,i=s.pending,i!==null&&(c=i.next,c===i?s.pending=null:(c=c.next,i.next=c,BN(s,c)))}function sp(s,i,c){var f=s.pending;if(s.pending=null,f!==null){f=f.next;do i.status="rejected",i.reason=c,qN(i),i=i.next;while(i!==f)}s.action=null}function qN(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function FN(s,i){return i}function HN(s,i){if(Xe){var c=yt.formState;if(c!==null){e:{var f=qe;if(Xe){if(St){t:{for(var y=St,j=_n;y.nodeType!==8;){if(!j){y=null;break t}if(y=Tn(y.nextSibling),y===null){y=null;break t}}j=y.data,y=j==="F!"||j==="F"?y:null}if(y){St=Tn(y.nextSibling),f=y.data==="F!";break e}}Ks(f)}f=!1}f&&(i=c[0])}}return c=Ir(),c.memoizedState=c.baseState=i,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:FN,lastRenderedState:i},c.queue=f,c=cw.bind(null,qe,f),f.dispatch=c,f=ap(!1),j=up.bind(null,qe,!1,f.queue),f=Ir(),y={state:i,dispatch:null,action:s,pending:null},f.queue=y,c=DP.bind(null,qe,y,j,c),y.dispatch=c,f.memoizedState=s,[i,c,!1]}function KN(s){var i=Ft();return GN(i,ht,s)}function GN(s,i,c){if(i=rp(s,i,FN)[0],s=rf(Ja)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var f=Tc(i)}catch(R){throw R===Yi?Gu:R}else f=i;i=Ft();var y=i.queue,j=y.dispatch;return c!==i.memoizedState&&(qe.flags|=2048,Ji(9,{destroy:void 0},MP.bind(null,y,c),null)),[f,j,s]}function MP(s,i){s.action=i}function VN(s){var i=Ft(),c=ht;if(c!==null)return GN(i,c,s);Ft(),i=i.memoizedState,c=Ft();var f=c.queue.dispatch;return c.memoizedState=s,[i,f,!1]}function Ji(s,i,c,f){return s={tag:s,create:c,deps:f,inst:i,next:null},i=qe.updateQueue,i===null&&(i=ef(),qe.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=s.next=s:(f=c.next,c.next=s,s.next=f,i.lastEffect=s),s}function YN(){return Ft().memoizedState}function nf(s,i,c,f){var y=Ir();qe.flags|=s,y.memoizedState=Ji(1|i,{destroy:void 0},c,f===void 0?null:f)}function af(s,i,c,f){var y=Ft();f=f===void 0?null:f;var j=y.memoizedState.inst;ht!==null&&f!==null&&W0(f,ht.memoizedState.deps)?y.memoizedState=Ji(i,j,c,f):(qe.flags|=s,y.memoizedState=Ji(1|i,j,c,f))}function QN(s,i){nf(8390656,8,s,i)}function lp(s,i){af(2048,8,s,i)}function IP(s){qe.flags|=4;var i=qe.updateQueue;if(i===null)i=ef(),qe.updateQueue=i,i.events=[s];else{var c=i.events;c===null?i.events=[s]:c.push(s)}}function WN(s){var i=Ft().memoizedState;return IP({ref:i,nextImpl:s}),function(){if((st&2)!==0)throw Error(a(440));return i.impl.apply(void 0,arguments)}}function XN(s,i){return af(4,2,s,i)}function ZN(s,i){return af(4,4,s,i)}function JN(s,i){if(typeof i=="function"){s=s();var c=i(s);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function ew(s,i,c){c=c!=null?c.concat([s]):null,af(4,4,JN.bind(null,i,s),c)}function ip(){}function tw(s,i){var c=Ft();i=i===void 0?null:i;var f=c.memoizedState;return i!==null&&W0(i,f[1])?f[0]:(c.memoizedState=[s,i],s)}function rw(s,i){var c=Ft();i=i===void 0?null:i;var f=c.memoizedState;if(i!==null&&W0(i,f[1]))return f[0];if(f=s(),Fl){Ce(!0);try{s()}finally{Ce(!1)}}return c.memoizedState=[f,i],f}function op(s,i,c){return c===void 0||(Za&1073741824)!==0&&(Ye&261930)===0?s.memoizedState=i:(s.memoizedState=c,s=n2(),qe.lanes|=s,el|=s,c)}function nw(s,i,c,f){return sn(c,i)?c:Wi.current!==null?(s=op(s,c,f),sn(s,i)||(Wt=!0),s):(Za&42)===0||(Za&1073741824)!==0&&(Ye&261930)===0?(Wt=!0,s.memoizedState=c):(s=n2(),qe.lanes|=s,el|=s,i)}function aw(s,i,c,f,y){var j=J.p;J.p=j!==0&&8>j?j:8;var R=G.T,D={};G.T=D,up(s,!1,i,c);try{var F=y(),re=G.S;if(re!==null&&re(D,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var he=TP(F,f);Rc(s,i,he,fn(s))}else Rc(s,i,f,fn(s))}catch(je){Rc(s,i,{then:function(){},status:"rejected",reason:je},fn())}finally{J.p=j,R!==null&&D.types!==null&&(R.types=D.types),G.T=R}}function LP(){}function cp(s,i,c,f){if(s.tag!==5)throw Error(a(476));var y=sw(s).queue;aw(s,y,i,$,c===null?LP:function(){return lw(s),c(f)})}function sw(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:$,baseState:$,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:$},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ja,lastRenderedState:c},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function lw(s){var i=sw(s);i.next===null&&(i=s.alternate.memoizedState),Rc(s,i.next.queue,{},fn())}function dp(){return jr(Qc)}function iw(){return Ft().memoizedState}function ow(){return Ft().memoizedState}function zP(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var c=fn();s=Ys(c);var f=Qs(i,s,c);f!==null&&(Qr(f,i,c),Ac(f,i,c)),i={cache:B0()},s.payload=i;return}i=i.return}}function BP(s,i,c){var f=fn();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},sf(s)?dw(i,c):(c=k0(s,i,c,f),c!==null&&(Qr(c,s,f),uw(c,i,f)))}function cw(s,i,c){var f=fn();Rc(s,i,c,f)}function Rc(s,i,c,f){var y={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(sf(s))dw(i,y);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var R=i.lastRenderedState,D=j(R,c);if(y.hasEagerState=!0,y.eagerState=D,sn(D,R))return Bu(s,i,y,0),yt===null&&zu(),!1}catch{}if(c=k0(s,i,y,f),c!==null)return Qr(c,s,f),uw(c,i,f),!0}return!1}function up(s,i,c,f){if(f={lane:2,revertLane:Fp(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},sf(s)){if(i)throw Error(a(479))}else i=k0(s,c,f,2),i!==null&&Qr(i,s,2)}function sf(s){var i=s.alternate;return s===qe||i!==null&&i===qe}function dw(s,i){Xi=Zu=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function uw(s,i,c){if((c&4194048)!==0){var f=i.lanes;f&=s.pendingLanes,c|=f,i.lanes=c,Nu(s,c)}}var Pc={readContext:jr,use:tf,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt};Pc.useEffectEvent=Dt;var fw={readContext:jr,use:tf,useCallback:function(s,i){return Ir().memoizedState=[s,i===void 0?null:i],s},useContext:jr,useEffect:QN,useImperativeHandle:function(s,i,c){c=c!=null?c.concat([s]):null,nf(4194308,4,JN.bind(null,i,s),c)},useLayoutEffect:function(s,i){return nf(4194308,4,s,i)},useInsertionEffect:function(s,i){nf(4,2,s,i)},useMemo:function(s,i){var c=Ir();i=i===void 0?null:i;var f=s();if(Fl){Ce(!0);try{s()}finally{Ce(!1)}}return c.memoizedState=[f,i],f},useReducer:function(s,i,c){var f=Ir();if(c!==void 0){var y=c(i);if(Fl){Ce(!0);try{c(i)}finally{Ce(!1)}}}else y=i;return f.memoizedState=f.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},f.queue=s,s=s.dispatch=BP.bind(null,qe,s),[f.memoizedState,s]},useRef:function(s){var i=Ir();return s={current:s},i.memoizedState=s},useState:function(s){s=ap(s);var i=s.queue,c=cw.bind(null,qe,i);return i.dispatch=c,[s.memoizedState,c]},useDebugValue:ip,useDeferredValue:function(s,i){var c=Ir();return op(c,s,i)},useTransition:function(){var s=ap(!1);return s=aw.bind(null,qe,s.queue,!0,!1),Ir().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,c){var f=qe,y=Ir();if(Xe){if(c===void 0)throw Error(a(407));c=c()}else{if(c=i(),yt===null)throw Error(a(349));(Ye&127)!==0||PN(f,i,c)}y.memoizedState=c;var j={value:c,getSnapshot:i};return y.queue=j,QN(MN.bind(null,f,j,s),[s]),f.flags|=2048,Ji(9,{destroy:void 0},DN.bind(null,f,j,c,i),null),c},useId:function(){var s=Ir(),i=yt.identifierPrefix;if(Xe){var c=ja,f=va;c=(f&~(1<<32-Ee(f)-1)).toString(32)+c,i="_"+i+"R_"+c,c=Ju++,0<c&&(i+="H"+c.toString(32)),i+="_"}else c=RP++,i="_"+i+"r_"+c.toString(32)+"_";return s.memoizedState=i},useHostTransitionStatus:dp,useFormState:HN,useActionState:HN,useOptimistic:function(s){var i=Ir();i.memoizedState=i.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=up.bind(null,qe,!0,c),c.dispatch=i,[s,i]},useMemoCache:tp,useCacheRefresh:function(){return Ir().memoizedState=zP.bind(null,qe)},useEffectEvent:function(s){var i=Ir(),c={impl:s};return i.memoizedState=c,function(){if((st&2)!==0)throw Error(a(440));return c.impl.apply(void 0,arguments)}}},fp={readContext:jr,use:tf,useCallback:tw,useContext:jr,useEffect:lp,useImperativeHandle:ew,useInsertionEffect:XN,useLayoutEffect:ZN,useMemo:rw,useReducer:rf,useRef:YN,useState:function(){return rf(Ja)},useDebugValue:ip,useDeferredValue:function(s,i){var c=Ft();return nw(c,ht.memoizedState,s,i)},useTransition:function(){var s=rf(Ja)[0],i=Ft().memoizedState;return[typeof s=="boolean"?s:Tc(s),i]},useSyncExternalStore:RN,useId:iw,useHostTransitionStatus:dp,useFormState:KN,useActionState:KN,useOptimistic:function(s,i){var c=Ft();return zN(c,ht,s,i)},useMemoCache:tp,useCacheRefresh:ow};fp.useEffectEvent=WN;var mw={readContext:jr,use:tf,useCallback:tw,useContext:jr,useEffect:lp,useImperativeHandle:ew,useInsertionEffect:XN,useLayoutEffect:ZN,useMemo:rw,useReducer:np,useRef:YN,useState:function(){return np(Ja)},useDebugValue:ip,useDeferredValue:function(s,i){var c=Ft();return ht===null?op(c,s,i):nw(c,ht.memoizedState,s,i)},useTransition:function(){var s=np(Ja)[0],i=Ft().memoizedState;return[typeof s=="boolean"?s:Tc(s),i]},useSyncExternalStore:RN,useId:iw,useHostTransitionStatus:dp,useFormState:VN,useActionState:VN,useOptimistic:function(s,i){var c=Ft();return ht!==null?zN(c,ht,s,i):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:tp,useCacheRefresh:ow};mw.useEffectEvent=WN;function mp(s,i,c,f){i=s.memoizedState,c=c(f,i),c=c==null?i:p({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var hp={enqueueSetState:function(s,i,c){s=s._reactInternals;var f=fn(),y=Ys(f);y.payload=i,c!=null&&(y.callback=c),i=Qs(s,y,f),i!==null&&(Qr(i,s,f),Ac(i,s,f))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var f=fn(),y=Ys(f);y.tag=1,y.payload=i,c!=null&&(y.callback=c),i=Qs(s,y,f),i!==null&&(Qr(i,s,f),Ac(i,s,f))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=fn(),f=Ys(c);f.tag=2,i!=null&&(f.callback=i),i=Qs(s,f,c),i!==null&&(Qr(i,s,c),Ac(i,s,c))}};function hw(s,i,c,f,y,j,R){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(f,j,R):i.prototype&&i.prototype.isPureReactComponent?!yc(c,f)||!yc(y,j):!0}function xw(s,i,c,f){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,f),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,f),i.state!==s&&hp.enqueueReplaceState(i,i.state,null)}function Hl(s,i){var c=i;if("ref"in i){c={};for(var f in i)f!=="ref"&&(c[f]=i[f])}if(s=s.defaultProps){c===i&&(c=p({},c));for(var y in s)c[y]===void 0&&(c[y]=s[y])}return c}function pw(s){Lu(s)}function gw(s){console.error(s)}function bw(s){Lu(s)}function lf(s,i){try{var c=s.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(f){setTimeout(function(){throw f})}}function yw(s,i,c){try{var f=s.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function xp(s,i,c){return c=Ys(c),c.tag=3,c.payload={element:null},c.callback=function(){lf(s,i)},c}function vw(s){return s=Ys(s),s.tag=3,s}function jw(s,i,c,f){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var j=f.value;s.payload=function(){return y(j)},s.callback=function(){yw(i,c,f)}}var R=c.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(s.callback=function(){yw(i,c,f),typeof y!="function"&&(tl===null?tl=new Set([this]):tl.add(this));var D=f.stack;this.componentDidCatch(f.value,{componentStack:D!==null?D:""})})}function $P(s,i,c,f,y){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(i=c.alternate,i!==null&&Ki(i,c,y,!0),c=on.current,c!==null){switch(c.tag){case 31:case 13:return On===null?yf():c.alternate===null&&Mt===0&&(Mt=3),c.flags&=-257,c.flags|=65536,c.lanes=y,f===Vu?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([f]):i.add(f),$p(s,f,y)),!1;case 22:return c.flags|=65536,f===Vu?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([f]):c.add(f)),$p(s,f,y)),!1}throw Error(a(435,c.tag))}return $p(s,f,y),yf(),!1}if(Xe)return i=on.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=y,f!==D0&&(s=Error(a(422),{cause:f}),Nc(Cn(s,c)))):(f!==D0&&(i=Error(a(423),{cause:f}),Nc(Cn(i,c))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,f=Cn(f,c),y=xp(s.stateNode,f,y),K0(s,y),Mt!==4&&(Mt=2)),!1;var j=Error(a(520),{cause:f});if(j=Cn(j,c),Uc===null?Uc=[j]:Uc.push(j),Mt!==4&&(Mt=2),i===null)return!0;f=Cn(f,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,s=y&-y,c.lanes|=s,s=xp(c.stateNode,f,s),K0(c,s),!1;case 1:if(i=c.type,j=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(tl===null||!tl.has(j))))return c.flags|=65536,y&=-y,c.lanes|=y,y=vw(y),jw(y,s,c,f),K0(c,y),!1}c=c.return}while(c!==null);return!1}var pp=Error(a(461)),Wt=!1;function Nr(s,i,c,f){i.child=s===null?EN(i,null,c,f):ql(i,s.child,c,f)}function Nw(s,i,c,f,y){c=c.render;var j=i.ref;if("ref"in f){var R={};for(var D in f)D!=="ref"&&(R[D]=f[D])}else R=f;return zl(i),f=X0(s,i,c,R,j,y),D=Z0(),s!==null&&!Wt?(J0(s,i,y),es(s,i,y)):(Xe&&D&&R0(i),i.flags|=1,Nr(s,i,f,y),i.child)}function ww(s,i,c,f,y){if(s===null){var j=c.type;return typeof j=="function"&&!_0(j)&&j.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=j,Sw(s,i,j,f,y)):(s=Uu(c.type,null,f,i,i.mode,y),s.ref=i.ref,s.return=i,i.child=s)}if(j=s.child,!Sp(s,y)){var R=j.memoizedProps;if(c=c.compare,c=c!==null?c:yc,c(R,f)&&s.ref===i.ref)return es(s,i,y)}return i.flags|=1,s=Ya(j,f),s.ref=i.ref,s.return=i,i.child=s}function Sw(s,i,c,f,y){if(s!==null){var j=s.memoizedProps;if(yc(j,f)&&s.ref===i.ref)if(Wt=!1,i.pendingProps=f=j,Sp(s,y))(s.flags&131072)!==0&&(Wt=!0);else return i.lanes=s.lanes,es(s,i,y)}return gp(s,i,c,f,y)}function Ew(s,i,c,f){var y=f.children,j=s!==null?s.memoizedState:null;if(s===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((i.flags&128)!==0){if(j=j!==null?j.baseLanes|c:c,s!==null){for(f=i.child=s.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~j}else f=0,i.child=null;return Cw(s,i,j,c,f)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&Ku(i,j!==null?j.cachePool:null),j!==null?kN(i,j):V0(),_N(i);else return f=i.lanes=536870912,Cw(s,i,j!==null?j.baseLanes|c:c,c,f)}else j!==null?(Ku(i,j.cachePool),kN(i,j),Xs(),i.memoizedState=null):(s!==null&&Ku(i,null),V0(),Xs());return Nr(s,i,y,c),i.child}function Dc(s,i){return s!==null&&s.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function Cw(s,i,c,f,y){var j=U0();return j=j===null?null:{parent:Yt._currentValue,pool:j},i.memoizedState={baseLanes:c,cachePool:j},s!==null&&Ku(i,null),V0(),_N(i),s!==null&&Ki(s,i,f,!0),i.childLanes=y,null}function of(s,i){return i=df({mode:i.mode,children:i.children},s.mode),i.ref=s.ref,s.child=i,i.return=s,i}function Aw(s,i,c){return ql(i,s.child,null,c),s=of(i,i.pendingProps),s.flags|=2,cn(i),i.memoizedState=null,s}function UP(s,i,c){var f=i.pendingProps,y=(i.flags&128)!==0;if(i.flags&=-129,s===null){if(Xe){if(f.mode==="hidden")return s=of(i,f),i.lanes=536870912,Dc(null,s);if(Q0(i),(s=St)?(s=B2(s,_n),s=s!==null&&s.data==="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Fs!==null?{id:va,overflow:ja}:null,retryLane:536870912,hydrationErrors:null},c=dN(s),c.return=i,i.child=c,vr=i,St=null)):s=null,s===null)throw Ks(i);return i.lanes=536870912,null}return of(i,f)}var j=s.memoizedState;if(j!==null){var R=j.dehydrated;if(Q0(i),y)if(i.flags&256)i.flags&=-257,i=Aw(s,i,c);else if(i.memoizedState!==null)i.child=s.child,i.flags|=128,i=null;else throw Error(a(558));else if(Wt||Ki(s,i,c,!1),y=(c&s.childLanes)!==0,Wt||y){if(f=yt,f!==null&&(R=wu(f,c),R!==0&&R!==j.retryLane))throw j.retryLane=R,Dl(s,R),Qr(f,s,R),pp;yf(),i=Aw(s,i,c)}else s=j.treeContext,St=Tn(R.nextSibling),vr=i,Xe=!0,Hs=null,_n=!1,s!==null&&mN(i,s),i=of(i,f),i.flags|=4096;return i}return s=Ya(s.child,{mode:f.mode,children:f.children}),s.ref=i.ref,i.child=s,s.return=i,s}function cf(s,i){var c=i.ref;if(c===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(a(284));(s===null||s.ref!==c)&&(i.flags|=4194816)}}function gp(s,i,c,f,y){return zl(i),c=X0(s,i,c,f,void 0,y),f=Z0(),s!==null&&!Wt?(J0(s,i,y),es(s,i,y)):(Xe&&f&&R0(i),i.flags|=1,Nr(s,i,c,y),i.child)}function kw(s,i,c,f,y,j){return zl(i),i.updateQueue=null,c=TN(i,f,c,y),ON(s),f=Z0(),s!==null&&!Wt?(J0(s,i,j),es(s,i,j)):(Xe&&f&&R0(i),i.flags|=1,Nr(s,i,c,j),i.child)}function _w(s,i,c,f,y){if(zl(i),i.stateNode===null){var j=Ui,R=c.contextType;typeof R=="object"&&R!==null&&(j=jr(R)),j=new c(f,j),i.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=hp,i.stateNode=j,j._reactInternals=i,j=i.stateNode,j.props=f,j.state=i.memoizedState,j.refs={},F0(i),R=c.contextType,j.context=typeof R=="object"&&R!==null?jr(R):Ui,j.state=i.memoizedState,R=c.getDerivedStateFromProps,typeof R=="function"&&(mp(i,c,R,f),j.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(R=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),R!==j.state&&hp.enqueueReplaceState(j,j.state,null),_c(i,f,j,y),kc(),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308),f=!0}else if(s===null){j=i.stateNode;var D=i.memoizedProps,F=Hl(c,D);j.props=F;var re=j.context,he=c.contextType;R=Ui,typeof he=="object"&&he!==null&&(R=jr(he));var je=c.getDerivedStateFromProps;he=typeof je=="function"||typeof j.getSnapshotBeforeUpdate=="function",D=i.pendingProps!==D,he||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(D||re!==R)&&xw(i,j,f,R),Vs=!1;var le=i.memoizedState;j.state=le,_c(i,f,j,y),kc(),re=i.memoizedState,D||le!==re||Vs?(typeof je=="function"&&(mp(i,c,je,f),re=i.memoizedState),(F=Vs||hw(i,c,F,f,le,re,R))?(he||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(i.flags|=4194308)):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=f,i.memoizedState=re),j.props=f,j.state=re,j.context=R,f=F):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),f=!1)}else{j=i.stateNode,H0(s,i),R=i.memoizedProps,he=Hl(c,R),j.props=he,je=i.pendingProps,le=j.context,re=c.contextType,F=Ui,typeof re=="object"&&re!==null&&(F=jr(re)),D=c.getDerivedStateFromProps,(re=typeof D=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(R!==je||le!==F)&&xw(i,j,f,F),Vs=!1,le=i.memoizedState,j.state=le,_c(i,f,j,y),kc();var de=i.memoizedState;R!==je||le!==de||Vs||s!==null&&s.dependencies!==null&&Fu(s.dependencies)?(typeof D=="function"&&(mp(i,c,D,f),de=i.memoizedState),(he=Vs||hw(i,c,he,f,le,de,F)||s!==null&&s.dependencies!==null&&Fu(s.dependencies))?(re||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(f,de,F),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(f,de,F)),typeof j.componentDidUpdate=="function"&&(i.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof j.componentDidUpdate!="function"||R===s.memoizedProps&&le===s.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&le===s.memoizedState||(i.flags|=1024),i.memoizedProps=f,i.memoizedState=de),j.props=f,j.state=de,j.context=F,f=he):(typeof j.componentDidUpdate!="function"||R===s.memoizedProps&&le===s.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||R===s.memoizedProps&&le===s.memoizedState||(i.flags|=1024),f=!1)}return j=f,cf(s,i),f=(i.flags&128)!==0,j||f?(j=i.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:j.render(),i.flags|=1,s!==null&&f?(i.child=ql(i,s.child,null,y),i.child=ql(i,null,c,y)):Nr(s,i,c,y),i.memoizedState=j.state,s=i.child):s=es(s,i,y),s}function Ow(s,i,c,f){return Il(),i.flags|=256,Nr(s,i,c,f),i.child}var bp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function yp(s){return{baseLanes:s,cachePool:yN()}}function vp(s,i,c){return s=s!==null?s.childLanes&~c:0,i&&(s|=un),s}function Tw(s,i,c){var f=i.pendingProps,y=!1,j=(i.flags&128)!==0,R;if((R=j)||(R=s!==null&&s.memoizedState===null?!1:(qt.current&2)!==0),R&&(y=!0,i.flags&=-129),R=(i.flags&32)!==0,i.flags&=-33,s===null){if(Xe){if(y?Ws(i):Xs(),(s=St)?(s=B2(s,_n),s=s!==null&&s.data!=="&"?s:null,s!==null&&(i.memoizedState={dehydrated:s,treeContext:Fs!==null?{id:va,overflow:ja}:null,retryLane:536870912,hydrationErrors:null},c=dN(s),c.return=i,i.child=c,vr=i,St=null)):s=null,s===null)throw Ks(i);return rg(s)?i.lanes=32:i.lanes=536870912,null}var D=f.children;return f=f.fallback,y?(Xs(),y=i.mode,D=df({mode:"hidden",children:D},y),f=Ml(f,y,c,null),D.return=i,f.return=i,D.sibling=f,i.child=D,f=i.child,f.memoizedState=yp(c),f.childLanes=vp(s,R,c),i.memoizedState=bp,Dc(null,f)):(Ws(i),jp(i,D))}var F=s.memoizedState;if(F!==null&&(D=F.dehydrated,D!==null)){if(j)i.flags&256?(Ws(i),i.flags&=-257,i=Np(s,i,c)):i.memoizedState!==null?(Xs(),i.child=s.child,i.flags|=128,i=null):(Xs(),D=f.fallback,y=i.mode,f=df({mode:"visible",children:f.children},y),D=Ml(D,y,c,null),D.flags|=2,f.return=i,D.return=i,f.sibling=D,i.child=f,ql(i,s.child,null,c),f=i.child,f.memoizedState=yp(c),f.childLanes=vp(s,R,c),i.memoizedState=bp,i=Dc(null,f));else if(Ws(i),rg(D)){if(R=D.nextSibling&&D.nextSibling.dataset,R)var re=R.dgst;R=re,f=Error(a(419)),f.stack="",f.digest=R,Nc({value:f,source:null,stack:null}),i=Np(s,i,c)}else if(Wt||Ki(s,i,c,!1),R=(c&s.childLanes)!==0,Wt||R){if(R=yt,R!==null&&(f=wu(R,c),f!==0&&f!==F.retryLane))throw F.retryLane=f,Dl(s,f),Qr(R,s,f),pp;tg(D)||yf(),i=Np(s,i,c)}else tg(D)?(i.flags|=192,i.child=s.child,i=null):(s=F.treeContext,St=Tn(D.nextSibling),vr=i,Xe=!0,Hs=null,_n=!1,s!==null&&mN(i,s),i=jp(i,f.children),i.flags|=4096);return i}return y?(Xs(),D=f.fallback,y=i.mode,F=s.child,re=F.sibling,f=Ya(F,{mode:"hidden",children:f.children}),f.subtreeFlags=F.subtreeFlags&65011712,re!==null?D=Ya(re,D):(D=Ml(D,y,c,null),D.flags|=2),D.return=i,f.return=i,f.sibling=D,i.child=f,Dc(null,f),f=i.child,D=s.child.memoizedState,D===null?D=yp(c):(y=D.cachePool,y!==null?(F=Yt._currentValue,y=y.parent!==F?{parent:F,pool:F}:y):y=yN(),D={baseLanes:D.baseLanes|c,cachePool:y}),f.memoizedState=D,f.childLanes=vp(s,R,c),i.memoizedState=bp,Dc(s.child,f)):(Ws(i),c=s.child,s=c.sibling,c=Ya(c,{mode:"visible",children:f.children}),c.return=i,c.sibling=null,s!==null&&(R=i.deletions,R===null?(i.deletions=[s],i.flags|=16):R.push(s)),i.child=c,i.memoizedState=null,c)}function jp(s,i){return i=df({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function df(s,i){return s=ln(22,s,null,i),s.lanes=0,s}function Np(s,i,c){return ql(i,s.child,null,c),s=jp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Rw(s,i,c){s.lanes|=i;var f=s.alternate;f!==null&&(f.lanes|=i),L0(s.return,i,c)}function wp(s,i,c,f,y,j){var R=s.memoizedState;R===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:y,treeForkCount:j}:(R.isBackwards=i,R.rendering=null,R.renderingStartTime=0,R.last=f,R.tail=c,R.tailMode=y,R.treeForkCount=j)}function Pw(s,i,c){var f=i.pendingProps,y=f.revealOrder,j=f.tail;f=f.children;var R=qt.current,D=(R&2)!==0;if(D?(R=R&1|2,i.flags|=128):R&=1,H(qt,R),Nr(s,i,f,c),f=Xe?jc:0,!D&&s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Rw(s,c,i);else if(s.tag===19)Rw(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(y){case"forwards":for(c=i.child,y=null;c!==null;)s=c.alternate,s!==null&&Xu(s)===null&&(y=c),c=c.sibling;c=y,c===null?(y=i.child,i.child=null):(y=c.sibling,c.sibling=null),wp(i,!1,y,c,j,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,y=i.child,i.child=null;y!==null;){if(s=y.alternate,s!==null&&Xu(s)===null){i.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}wp(i,!0,c,null,j,f);break;case"together":wp(i,!1,null,null,void 0,f);break;default:i.memoizedState=null}return i.child}function es(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),el|=i.lanes,(c&i.childLanes)===0)if(s!==null){if(Ki(s,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(a(153));if(i.child!==null){for(s=i.child,c=Ya(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=Ya(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function Sp(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&Fu(s)))}function qP(s,i,c){switch(i.tag){case 3:xe(i,i.stateNode.containerInfo),Gs(i,Yt,s.memoizedState.cache),Il();break;case 27:case 5:ne(i);break;case 4:xe(i,i.stateNode.containerInfo);break;case 10:Gs(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Q0(i),null;break;case 13:var f=i.memoizedState;if(f!==null)return f.dehydrated!==null?(Ws(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Tw(s,i,c):(Ws(i),s=es(s,i,c),s!==null?s.sibling:null);Ws(i);break;case 19:var y=(s.flags&128)!==0;if(f=(c&i.childLanes)!==0,f||(Ki(s,i,c,!1),f=(c&i.childLanes)!==0),y){if(f)return Pw(s,i,c);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),H(qt,qt.current),f)break;return null;case 22:return i.lanes=0,Ew(s,i,c,i.pendingProps);case 24:Gs(i,Yt,s.memoizedState.cache)}return es(s,i,c)}function Dw(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps)Wt=!0;else{if(!Sp(s,c)&&(i.flags&128)===0)return Wt=!1,qP(s,i,c);Wt=(s.flags&131072)!==0}else Wt=!1,Xe&&(i.flags&1048576)!==0&&fN(i,jc,i.index);switch(i.lanes=0,i.tag){case 16:e:{var f=i.pendingProps;if(s=$l(i.elementType),i.type=s,typeof s=="function")_0(s)?(f=Hl(s,f),i.tag=1,i=_w(null,i,s,f,c)):(i.tag=0,i=gp(null,i,s,f,c));else{if(s!=null){var y=s.$$typeof;if(y===O){i.tag=11,i=Nw(null,i,s,f,c);break e}else if(y===T){i.tag=14,i=ww(null,i,s,f,c);break e}}throw i=X(s)||s,Error(a(306,i,""))}}return i;case 0:return gp(s,i,i.type,i.pendingProps,c);case 1:return f=i.type,y=Hl(f,i.pendingProps),_w(s,i,f,y,c);case 3:e:{if(xe(i,i.stateNode.containerInfo),s===null)throw Error(a(387));f=i.pendingProps;var j=i.memoizedState;y=j.element,H0(s,i),_c(i,f,null,c);var R=i.memoizedState;if(f=R.cache,Gs(i,Yt,f),f!==j.cache&&z0(i,[Yt],c,!0),kc(),f=R.element,j.isDehydrated)if(j={element:f,isDehydrated:!1,cache:R.cache},i.updateQueue.baseState=j,i.memoizedState=j,i.flags&256){i=Ow(s,i,f,c);break e}else if(f!==y){y=Cn(Error(a(424)),i),Nc(y),i=Ow(s,i,f,c);break e}else for(s=i.stateNode.containerInfo,s.nodeType===9?s=s.body:s=s.nodeName==="HTML"?s.ownerDocument.body:s,St=Tn(s.firstChild),vr=i,Xe=!0,Hs=null,_n=!0,c=EN(i,null,f,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(Il(),f===y){i=es(s,i,c);break e}Nr(s,i,f,c)}i=i.child}return i;case 26:return cf(s,i),s===null?(c=K2(i.type,null,i.pendingProps,null))?i.memoizedState=c:Xe||(c=i.type,s=i.pendingProps,f=Cf(pe.current).createElement(c),f[Vt]=i,f[yr]=s,wr(f,c,s),Ut(f),i.stateNode=f):i.memoizedState=K2(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return ne(i),s===null&&Xe&&(f=i.stateNode=q2(i.type,i.pendingProps,pe.current),vr=i,_n=!0,y=St,sl(i.type)?(ng=y,St=Tn(f.firstChild)):St=y),Nr(s,i,i.pendingProps.children,c),cf(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&Xe&&((y=f=St)&&(f=bD(f,i.type,i.pendingProps,_n),f!==null?(i.stateNode=f,vr=i,St=Tn(f.firstChild),_n=!1,y=!0):y=!1),y||Ks(i)),ne(i),y=i.type,j=i.pendingProps,R=s!==null?s.memoizedProps:null,f=j.children,Zp(y,j)?f=null:R!==null&&Zp(y,R)&&(i.flags|=32),i.memoizedState!==null&&(y=X0(s,i,PP,null,null,c),Qc._currentValue=y),cf(s,i),Nr(s,i,f,c),i.child;case 6:return s===null&&Xe&&((s=c=St)&&(c=yD(c,i.pendingProps,_n),c!==null?(i.stateNode=c,vr=i,St=null,s=!0):s=!1),s||Ks(i)),null;case 13:return Tw(s,i,c);case 4:return xe(i,i.stateNode.containerInfo),f=i.pendingProps,s===null?i.child=ql(i,null,f,c):Nr(s,i,f,c),i.child;case 11:return Nw(s,i,i.type,i.pendingProps,c);case 7:return Nr(s,i,i.pendingProps,c),i.child;case 8:return Nr(s,i,i.pendingProps.children,c),i.child;case 12:return Nr(s,i,i.pendingProps.children,c),i.child;case 10:return f=i.pendingProps,Gs(i,i.type,f.value),Nr(s,i,f.children,c),i.child;case 9:return y=i.type._context,f=i.pendingProps.children,zl(i),y=jr(y),f=f(y),i.flags|=1,Nr(s,i,f,c),i.child;case 14:return ww(s,i,i.type,i.pendingProps,c);case 15:return Sw(s,i,i.type,i.pendingProps,c);case 19:return Pw(s,i,c);case 31:return UP(s,i,c);case 22:return Ew(s,i,c,i.pendingProps);case 24:return zl(i),f=jr(Yt),s===null?(y=U0(),y===null&&(y=yt,j=B0(),y.pooledCache=j,j.refCount++,j!==null&&(y.pooledCacheLanes|=c),y=j),i.memoizedState={parent:f,cache:y},F0(i),Gs(i,Yt,y)):((s.lanes&c)!==0&&(H0(s,i),_c(i,null,null,c),kc()),y=s.memoizedState,j=i.memoizedState,y.parent!==f?(y={parent:f,cache:f},i.memoizedState=y,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=y),Gs(i,Yt,f)):(f=j.cache,Gs(i,Yt,f),f!==y.cache&&z0(i,[Yt],c,!0))),Nr(s,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(a(156,i.tag))}function ts(s){s.flags|=4}function Ep(s,i,c,f,y){if((i=(s.mode&32)!==0)&&(i=!1),i){if(s.flags|=16777216,(y&335544128)===y)if(s.stateNode.complete)s.flags|=8192;else if(i2())s.flags|=8192;else throw Ul=Vu,q0}else s.flags&=-16777217}function Mw(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!W2(i))if(i2())s.flags|=8192;else throw Ul=Vu,q0}function uf(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?ga():536870912,s.lanes|=i,no|=i)}function Mc(s,i){if(!Xe)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:f.sibling=null}}function Et(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,f=0;if(i)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=f,s.childLanes=c,i}function FP(s,i,c){var f=i.pendingProps;switch(P0(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Et(i),null;case 1:return Et(i),null;case 3:return c=i.stateNode,f=null,s!==null&&(f=s.memoizedState.cache),i.memoizedState.cache!==f&&(i.flags|=2048),Xa(Yt),Z(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Hi(i)?ts(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,M0())),Et(i),null;case 26:var y=i.type,j=i.memoizedState;return s===null?(ts(i),j!==null?(Et(i),Mw(i,j)):(Et(i),Ep(i,y,null,f,c))):j?j!==s.memoizedState?(ts(i),Et(i),Mw(i,j)):(Et(i),i.flags&=-16777217):(s=s.memoizedProps,s!==f&&ts(i),Et(i),Ep(i,y,s,f,c)),null;case 27:if(Se(i),c=pe.current,y=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==f&&ts(i);else{if(!f){if(i.stateNode===null)throw Error(a(166));return Et(i),null}s=oe.current,Hi(i)?hN(i):(s=q2(y,f,c),i.stateNode=s,ts(i))}return Et(i),null;case 5:if(Se(i),y=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==f&&ts(i);else{if(!f){if(i.stateNode===null)throw Error(a(166));return Et(i),null}if(j=oe.current,Hi(i))hN(i);else{var R=Cf(pe.current);switch(j){case 1:j=R.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:j=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":j=R.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":j=R.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":j=R.createElement("div"),j.innerHTML="<script><\/script>",j=j.removeChild(j.firstChild);break;case"select":j=typeof f.is=="string"?R.createElement("select",{is:f.is}):R.createElement("select"),f.multiple?j.multiple=!0:f.size&&(j.size=f.size);break;default:j=typeof f.is=="string"?R.createElement(y,{is:f.is}):R.createElement(y)}}j[Vt]=i,j[yr]=f;e:for(R=i.child;R!==null;){if(R.tag===5||R.tag===6)j.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===i)break e;for(;R.sibling===null;){if(R.return===null||R.return===i)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}i.stateNode=j;e:switch(wr(j,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ts(i)}}return Et(i),Ep(i,i.type,s===null?null:s.memoizedProps,i.pendingProps,c),null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==f&&ts(i);else{if(typeof f!="string"&&i.stateNode===null)throw Error(a(166));if(s=pe.current,Hi(i)){if(s=i.stateNode,c=i.memoizedProps,f=null,y=vr,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}s[Vt]=i,s=!!(s.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||T2(s.nodeValue,c)),s||Ks(i,!0)}else s=Cf(s).createTextNode(f),s[Vt]=i,i.stateNode=s}return Et(i),null;case 31:if(c=i.memoizedState,s===null||s.memoizedState!==null){if(f=Hi(i),c!==null){if(s===null){if(!f)throw Error(a(318));if(s=i.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(a(557));s[Vt]=i}else Il(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Et(i),s=!1}else c=M0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=c),s=!0;if(!s)return i.flags&256?(cn(i),i):(cn(i),null);if((i.flags&128)!==0)throw Error(a(558))}return Et(i),null;case 13:if(f=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Hi(i),f!==null&&f.dehydrated!==null){if(s===null){if(!y)throw Error(a(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(a(317));y[Vt]=i}else Il(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Et(i),y=!1}else y=M0(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return i.flags&256?(cn(i),i):(cn(i),null)}return cn(i),(i.flags&128)!==0?(i.lanes=c,i):(c=f!==null,s=s!==null&&s.memoizedState!==null,c&&(f=i.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),j=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(j=f.memoizedState.cachePool.pool),j!==y&&(f.flags|=2048)),c!==s&&c&&(i.child.flags|=8192),uf(i,i.updateQueue),Et(i),null);case 4:return Z(),s===null&&Vp(i.stateNode.containerInfo),Et(i),null;case 10:return Xa(i.type),Et(i),null;case 19:if(M(qt),f=i.memoizedState,f===null)return Et(i),null;if(y=(i.flags&128)!==0,j=f.rendering,j===null)if(y)Mc(f,!1);else{if(Mt!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(j=Xu(s),j!==null){for(i.flags|=128,Mc(f,!1),s=j.updateQueue,i.updateQueue=s,uf(i,s),i.subtreeFlags=0,s=c,c=i.child;c!==null;)cN(c,s),c=c.sibling;return H(qt,qt.current&1|2),Xe&&Qa(i,f.treeForkCount),i.child}s=s.sibling}f.tail!==null&&br()>pf&&(i.flags|=128,y=!0,Mc(f,!1),i.lanes=4194304)}else{if(!y)if(s=Xu(j),s!==null){if(i.flags|=128,y=!0,s=s.updateQueue,i.updateQueue=s,uf(i,s),Mc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!j.alternate&&!Xe)return Et(i),null}else 2*br()-f.renderingStartTime>pf&&c!==536870912&&(i.flags|=128,y=!0,Mc(f,!1),i.lanes=4194304);f.isBackwards?(j.sibling=i.child,i.child=j):(s=f.last,s!==null?s.sibling=j:i.child=j,f.last=j)}return f.tail!==null?(s=f.tail,f.rendering=s,f.tail=s.sibling,f.renderingStartTime=br(),s.sibling=null,c=qt.current,H(qt,y?c&1|2:c&1),Xe&&Qa(i,f.treeForkCount),s):(Et(i),null);case 22:case 23:return cn(i),Y0(),f=i.memoizedState!==null,s!==null?s.memoizedState!==null!==f&&(i.flags|=8192):f&&(i.flags|=8192),f?(c&536870912)!==0&&(i.flags&128)===0&&(Et(i),i.subtreeFlags&6&&(i.flags|=8192)):Et(i),c=i.updateQueue,c!==null&&uf(i,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),f=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(f=i.memoizedState.cachePool.pool),f!==c&&(i.flags|=2048),s!==null&&M(Bl),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Xa(Yt),Et(i),null;case 25:return null;case 30:return null}throw Error(a(156,i.tag))}function HP(s,i){switch(P0(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Xa(Yt),Z(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return Se(i),null;case 31:if(i.memoizedState!==null){if(cn(i),i.alternate===null)throw Error(a(340));Il()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 13:if(cn(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(a(340));Il()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return M(qt),null;case 4:return Z(),null;case 10:return Xa(i.type),null;case 22:case 23:return cn(i),Y0(),s!==null&&M(Bl),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Xa(Yt),null;case 25:return null;default:return null}}function Iw(s,i){switch(P0(i),i.tag){case 3:Xa(Yt),Z();break;case 26:case 27:case 5:Se(i);break;case 4:Z();break;case 31:i.memoizedState!==null&&cn(i);break;case 13:cn(i);break;case 19:M(qt);break;case 10:Xa(i.type);break;case 22:case 23:cn(i),Y0(),s!==null&&M(Bl);break;case 24:Xa(Yt)}}function Ic(s,i){try{var c=i.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var y=f.next;c=y;do{if((c.tag&s)===s){f=void 0;var j=c.create,R=c.inst;f=j(),R.destroy=f}c=c.next}while(c!==y)}}catch(D){dt(i,i.return,D)}}function Zs(s,i,c){try{var f=i.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var j=y.next;f=j;do{if((f.tag&s)===s){var R=f.inst,D=R.destroy;if(D!==void 0){R.destroy=void 0,y=i;var F=c,re=D;try{re()}catch(he){dt(y,F,he)}}}f=f.next}while(f!==j)}}catch(he){dt(i,i.return,he)}}function Lw(s){var i=s.updateQueue;if(i!==null){var c=s.stateNode;try{AN(i,c)}catch(f){dt(s,s.return,f)}}}function zw(s,i,c){c.props=Hl(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(f){dt(s,i,f)}}function Lc(s,i){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var f=s.stateNode;break;case 30:f=s.stateNode;break;default:f=s.stateNode}typeof c=="function"?s.refCleanup=c(f):c.current=f}}catch(y){dt(s,i,y)}}function Na(s,i){var c=s.ref,f=s.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(y){dt(s,i,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){dt(s,i,y)}else c.current=null}function Bw(s){var i=s.type,c=s.memoizedProps,f=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(y){dt(s,s.return,y)}}function Cp(s,i,c){try{var f=s.stateNode;fD(f,s.type,c,i),f[yr]=i}catch(y){dt(s,s.return,y)}}function $w(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&sl(s.type)||s.tag===4}function Ap(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||$w(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&sl(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function kp(s,i,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(s),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Ga));else if(f!==4&&(f===27&&sl(s.type)&&(c=s.stateNode,i=null),s=s.child,s!==null))for(kp(s,i,c),s=s.sibling;s!==null;)kp(s,i,c),s=s.sibling}function ff(s,i,c){var f=s.tag;if(f===5||f===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(f!==4&&(f===27&&sl(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(ff(s,i,c),s=s.sibling;s!==null;)ff(s,i,c),s=s.sibling}function Uw(s){var i=s.stateNode,c=s.memoizedProps;try{for(var f=s.type,y=i.attributes;y.length;)i.removeAttributeNode(y[0]);wr(i,f,c),i[Vt]=s,i[yr]=c}catch(j){dt(s,s.return,j)}}var rs=!1,Xt=!1,_p=!1,qw=typeof WeakSet=="function"?WeakSet:Set,dr=null;function KP(s,i){if(s=s.containerInfo,Wp=Pf,s=eN(s),N0(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var y=f.anchorOffset,j=f.focusNode;f=f.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var R=0,D=-1,F=-1,re=0,he=0,je=s,le=null;t:for(;;){for(var de;je!==c||y!==0&&je.nodeType!==3||(D=R+y),je!==j||f!==0&&je.nodeType!==3||(F=R+f),je.nodeType===3&&(R+=je.nodeValue.length),(de=je.firstChild)!==null;)le=je,je=de;for(;;){if(je===s)break t;if(le===c&&++re===y&&(D=R),le===j&&++he===f&&(F=R),(de=je.nextSibling)!==null)break;je=le,le=je.parentNode}je=de}c=D===-1||F===-1?null:{start:D,end:F}}else c=null}c=c||{start:0,end:0}}else c=null;for(Xp={focusedElem:s,selectionRange:c},Pf=!1,dr=i;dr!==null;)if(i=dr,s=i.child,(i.subtreeFlags&1028)!==0&&s!==null)s.return=i,dr=s;else for(;dr!==null;){switch(i=dr,j=i.alternate,s=i.flags,i.tag){case 0:if((s&4)!==0&&(s=i.updateQueue,s=s!==null?s.events:null,s!==null))for(c=0;c<s.length;c++)y=s[c],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&j!==null){s=void 0,c=i,y=j.memoizedProps,j=j.memoizedState,f=c.stateNode;try{var Oe=Hl(c.type,y);s=f.getSnapshotBeforeUpdate(Oe,j),f.__reactInternalSnapshotBeforeUpdate=s}catch(Ie){dt(c,c.return,Ie)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,c=s.nodeType,c===9)eg(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":eg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(a(163))}if(s=i.sibling,s!==null){s.return=i.return,dr=s;break}dr=i.return}}function Fw(s,i,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:as(s,c),f&4&&Ic(5,c);break;case 1:if(as(s,c),f&4)if(s=c.stateNode,i===null)try{s.componentDidMount()}catch(R){dt(c,c.return,R)}else{var y=Hl(c.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(y,i,s.__reactInternalSnapshotBeforeUpdate)}catch(R){dt(c,c.return,R)}}f&64&&Lw(c),f&512&&Lc(c,c.return);break;case 3:if(as(s,c),f&64&&(s=c.updateQueue,s!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{AN(s,i)}catch(R){dt(c,c.return,R)}}break;case 27:i===null&&f&4&&Uw(c);case 26:case 5:as(s,c),i===null&&f&4&&Bw(c),f&512&&Lc(c,c.return);break;case 12:as(s,c);break;case 31:as(s,c),f&4&&Gw(s,c);break;case 13:as(s,c),f&4&&Vw(s,c),f&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=eD.bind(null,c),vD(s,c))));break;case 22:if(f=c.memoizedState!==null||rs,!f){i=i!==null&&i.memoizedState!==null||Xt,y=rs;var j=Xt;rs=f,(Xt=i)&&!j?ss(s,c,(c.subtreeFlags&8772)!==0):as(s,c),rs=y,Xt=j}break;case 30:break;default:as(s,c)}}function Hw(s){var i=s.alternate;i!==null&&(s.alternate=null,Hw(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&ke(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var At=null,Kr=!1;function ns(s,i,c){for(c=c.child;c!==null;)Kw(s,i,c),c=c.sibling}function Kw(s,i,c){if(Ae&&typeof Ae.onCommitFiberUnmount=="function")try{Ae.onCommitFiberUnmount(Ne,c)}catch{}switch(c.tag){case 26:Xt||Na(c,i),ns(s,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Xt||Na(c,i);var f=At,y=Kr;sl(c.type)&&(At=c.stateNode,Kr=!1),ns(s,i,c),Gc(c.stateNode),At=f,Kr=y;break;case 5:Xt||Na(c,i);case 6:if(f=At,y=Kr,At=null,ns(s,i,c),At=f,Kr=y,At!==null)if(Kr)try{(At.nodeType===9?At.body:At.nodeName==="HTML"?At.ownerDocument.body:At).removeChild(c.stateNode)}catch(j){dt(c,i,j)}else try{At.removeChild(c.stateNode)}catch(j){dt(c,i,j)}break;case 18:At!==null&&(Kr?(s=At,L2(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),fo(s)):L2(At,c.stateNode));break;case 4:f=At,y=Kr,At=c.stateNode.containerInfo,Kr=!0,ns(s,i,c),At=f,Kr=y;break;case 0:case 11:case 14:case 15:Zs(2,c,i),Xt||Zs(4,c,i),ns(s,i,c);break;case 1:Xt||(Na(c,i),f=c.stateNode,typeof f.componentWillUnmount=="function"&&zw(c,i,f)),ns(s,i,c);break;case 21:ns(s,i,c);break;case 22:Xt=(f=Xt)||c.memoizedState!==null,ns(s,i,c),Xt=f;break;default:ns(s,i,c)}}function Gw(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{fo(s)}catch(c){dt(i,i.return,c)}}}function Vw(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{fo(s)}catch(c){dt(i,i.return,c)}}function GP(s){switch(s.tag){case 31:case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new qw),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new qw),i;default:throw Error(a(435,s.tag))}}function mf(s,i){var c=GP(s);i.forEach(function(f){if(!c.has(f)){c.add(f);var y=tD.bind(null,s,f);f.then(y,y)}})}function Gr(s,i){var c=i.deletions;if(c!==null)for(var f=0;f<c.length;f++){var y=c[f],j=s,R=i,D=R;e:for(;D!==null;){switch(D.tag){case 27:if(sl(D.type)){At=D.stateNode,Kr=!1;break e}break;case 5:At=D.stateNode,Kr=!1;break e;case 3:case 4:At=D.stateNode.containerInfo,Kr=!0;break e}D=D.return}if(At===null)throw Error(a(160));Kw(j,R,y),At=null,Kr=!1,j=y.alternate,j!==null&&(j.return=null),y.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)Yw(i,s),i=i.sibling}var Zn=null;function Yw(s,i){var c=s.alternate,f=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Gr(i,s),Vr(s),f&4&&(Zs(3,s,s.return),Ic(3,s),Zs(5,s,s.return));break;case 1:Gr(i,s),Vr(s),f&512&&(Xt||c===null||Na(c,c.return)),f&64&&rs&&(s=s.updateQueue,s!==null&&(f=s.callbacks,f!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var y=Zn;if(Gr(i,s),Vr(s),f&512&&(Xt||c===null||Na(c,c.return)),f&4){var j=c!==null?c.memoizedState:null;if(f=s.memoizedState,c===null)if(f===null)if(s.stateNode===null){e:{f=s.type,c=s.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":j=y.getElementsByTagName("title")[0],(!j||j[ie]||j[Vt]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=y.createElement(f),y.head.insertBefore(j,y.querySelector("head > title"))),wr(j,f,c),j[Vt]=s,Ut(j),f=j;break e;case"link":var R=Y2("link","href",y).get(f+(c.href||""));if(R){for(var D=0;D<R.length;D++)if(j=R[D],j.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&j.getAttribute("rel")===(c.rel==null?null:c.rel)&&j.getAttribute("title")===(c.title==null?null:c.title)&&j.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){R.splice(D,1);break t}}j=y.createElement(f),wr(j,f,c),y.head.appendChild(j);break;case"meta":if(R=Y2("meta","content",y).get(f+(c.content||""))){for(D=0;D<R.length;D++)if(j=R[D],j.getAttribute("content")===(c.content==null?null:""+c.content)&&j.getAttribute("name")===(c.name==null?null:c.name)&&j.getAttribute("property")===(c.property==null?null:c.property)&&j.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&j.getAttribute("charset")===(c.charSet==null?null:c.charSet)){R.splice(D,1);break t}}j=y.createElement(f),wr(j,f,c),y.head.appendChild(j);break;default:throw Error(a(468,f))}j[Vt]=s,Ut(j),f=j}s.stateNode=f}else Q2(y,s.type,s.stateNode);else s.stateNode=V2(y,f,s.memoizedProps);else j!==f?(j===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):j.count--,f===null?Q2(y,s.type,s.stateNode):V2(y,f,s.memoizedProps)):f===null&&s.stateNode!==null&&Cp(s,s.memoizedProps,c.memoizedProps)}break;case 27:Gr(i,s),Vr(s),f&512&&(Xt||c===null||Na(c,c.return)),c!==null&&f&4&&Cp(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Gr(i,s),Vr(s),f&512&&(Xt||c===null||Na(c,c.return)),s.flags&32){y=s.stateNode;try{Di(y,"")}catch(Oe){dt(s,s.return,Oe)}}f&4&&s.stateNode!=null&&(y=s.memoizedProps,Cp(s,y,c!==null?c.memoizedProps:y)),f&1024&&(_p=!0);break;case 6:if(Gr(i,s),Vr(s),f&4){if(s.stateNode===null)throw Error(a(162));f=s.memoizedProps,c=s.stateNode;try{c.nodeValue=f}catch(Oe){dt(s,s.return,Oe)}}break;case 3:if(_f=null,y=Zn,Zn=Af(i.containerInfo),Gr(i,s),Zn=y,Vr(s),f&4&&c!==null&&c.memoizedState.isDehydrated)try{fo(i.containerInfo)}catch(Oe){dt(s,s.return,Oe)}_p&&(_p=!1,Qw(s));break;case 4:f=Zn,Zn=Af(s.stateNode.containerInfo),Gr(i,s),Vr(s),Zn=f;break;case 12:Gr(i,s),Vr(s);break;case 31:Gr(i,s),Vr(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,mf(s,f)));break;case 13:Gr(i,s),Vr(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(xf=br()),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,mf(s,f)));break;case 22:y=s.memoizedState!==null;var F=c!==null&&c.memoizedState!==null,re=rs,he=Xt;if(rs=re||y,Xt=he||F,Gr(i,s),Xt=he,rs=re,Vr(s),f&8192)e:for(i=s.stateNode,i._visibility=y?i._visibility&-2:i._visibility|1,y&&(c===null||F||rs||Xt||Kl(s)),c=null,i=s;;){if(i.tag===5||i.tag===26){if(c===null){F=c=i;try{if(j=F.stateNode,y)R=j.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{D=F.stateNode;var je=F.memoizedProps.style,le=je!=null&&je.hasOwnProperty("display")?je.display:null;D.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(Oe){dt(F,F.return,Oe)}}}else if(i.tag===6){if(c===null){F=i;try{F.stateNode.nodeValue=y?"":F.memoizedProps}catch(Oe){dt(F,F.return,Oe)}}}else if(i.tag===18){if(c===null){F=i;try{var de=F.stateNode;y?z2(de,!0):z2(F.stateNode,!1)}catch(Oe){dt(F,F.return,Oe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}f&4&&(f=s.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,mf(s,c))));break;case 19:Gr(i,s),Vr(s),f&4&&(f=s.updateQueue,f!==null&&(s.updateQueue=null,mf(s,f)));break;case 30:break;case 21:break;default:Gr(i,s),Vr(s)}}function Vr(s){var i=s.flags;if(i&2){try{for(var c,f=s.return;f!==null;){if($w(f)){c=f;break}f=f.return}if(c==null)throw Error(a(160));switch(c.tag){case 27:var y=c.stateNode,j=Ap(s);ff(s,j,y);break;case 5:var R=c.stateNode;c.flags&32&&(Di(R,""),c.flags&=-33);var D=Ap(s);ff(s,D,R);break;case 3:case 4:var F=c.stateNode.containerInfo,re=Ap(s);kp(s,re,F);break;default:throw Error(a(161))}}catch(he){dt(s,s.return,he)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Qw(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Qw(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function as(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)Fw(s,i.alternate,i),i=i.sibling}function Kl(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Zs(4,i,i.return),Kl(i);break;case 1:Na(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&zw(i,i.return,c),Kl(i);break;case 27:Gc(i.stateNode);case 26:case 5:Na(i,i.return),Kl(i);break;case 22:i.memoizedState===null&&Kl(i);break;case 30:Kl(i);break;default:Kl(i)}s=s.sibling}}function ss(s,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var f=i.alternate,y=s,j=i,R=j.flags;switch(j.tag){case 0:case 11:case 15:ss(y,j,c),Ic(4,j);break;case 1:if(ss(y,j,c),f=j,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(re){dt(f,f.return,re)}if(f=j,y=f.updateQueue,y!==null){var D=f.stateNode;try{var F=y.shared.hiddenCallbacks;if(F!==null)for(y.shared.hiddenCallbacks=null,y=0;y<F.length;y++)CN(F[y],D)}catch(re){dt(f,f.return,re)}}c&&R&64&&Lw(j),Lc(j,j.return);break;case 27:Uw(j);case 26:case 5:ss(y,j,c),c&&f===null&&R&4&&Bw(j),Lc(j,j.return);break;case 12:ss(y,j,c);break;case 31:ss(y,j,c),c&&R&4&&Gw(y,j);break;case 13:ss(y,j,c),c&&R&4&&Vw(y,j);break;case 22:j.memoizedState===null&&ss(y,j,c),Lc(j,j.return);break;case 30:break;default:ss(y,j,c)}i=i.sibling}}function Op(s,i){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&wc(c))}function Tp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&wc(s))}function Jn(s,i,c,f){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Ww(s,i,c,f),i=i.sibling}function Ww(s,i,c,f){var y=i.flags;switch(i.tag){case 0:case 11:case 15:Jn(s,i,c,f),y&2048&&Ic(9,i);break;case 1:Jn(s,i,c,f);break;case 3:Jn(s,i,c,f),y&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&wc(s)));break;case 12:if(y&2048){Jn(s,i,c,f),s=i.stateNode;try{var j=i.memoizedProps,R=j.id,D=j.onPostCommit;typeof D=="function"&&D(R,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(F){dt(i,i.return,F)}}else Jn(s,i,c,f);break;case 31:Jn(s,i,c,f);break;case 13:Jn(s,i,c,f);break;case 23:break;case 22:j=i.stateNode,R=i.alternate,i.memoizedState!==null?j._visibility&2?Jn(s,i,c,f):zc(s,i):j._visibility&2?Jn(s,i,c,f):(j._visibility|=2,eo(s,i,c,f,(i.subtreeFlags&10256)!==0||!1)),y&2048&&Op(R,i);break;case 24:Jn(s,i,c,f),y&2048&&Tp(i.alternate,i);break;default:Jn(s,i,c,f)}}function eo(s,i,c,f,y){for(y=y&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var j=s,R=i,D=c,F=f,re=R.flags;switch(R.tag){case 0:case 11:case 15:eo(j,R,D,F,y),Ic(8,R);break;case 23:break;case 22:var he=R.stateNode;R.memoizedState!==null?he._visibility&2?eo(j,R,D,F,y):zc(j,R):(he._visibility|=2,eo(j,R,D,F,y)),y&&re&2048&&Op(R.alternate,R);break;case 24:eo(j,R,D,F,y),y&&re&2048&&Tp(R.alternate,R);break;default:eo(j,R,D,F,y)}i=i.sibling}}function zc(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=s,f=i,y=f.flags;switch(f.tag){case 22:zc(c,f),y&2048&&Op(f.alternate,f);break;case 24:zc(c,f),y&2048&&Tp(f.alternate,f);break;default:zc(c,f)}i=i.sibling}}var Bc=8192;function to(s,i,c){if(s.subtreeFlags&Bc)for(s=s.child;s!==null;)Xw(s,i,c),s=s.sibling}function Xw(s,i,c){switch(s.tag){case 26:to(s,i,c),s.flags&Bc&&s.memoizedState!==null&&RD(c,Zn,s.memoizedState,s.memoizedProps);break;case 5:to(s,i,c);break;case 3:case 4:var f=Zn;Zn=Af(s.stateNode.containerInfo),to(s,i,c),Zn=f;break;case 22:s.memoizedState===null&&(f=s.alternate,f!==null&&f.memoizedState!==null?(f=Bc,Bc=16777216,to(s,i,c),Bc=f):to(s,i,c));break;default:to(s,i,c)}}function Zw(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function $c(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];dr=f,e2(f,s)}Zw(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Jw(s),s=s.sibling}function Jw(s){switch(s.tag){case 0:case 11:case 15:$c(s),s.flags&2048&&Zs(9,s,s.return);break;case 3:$c(s);break;case 12:$c(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,hf(s)):$c(s);break;default:$c(s)}}function hf(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var f=i[c];dr=f,e2(f,s)}Zw(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Zs(8,i,i.return),hf(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,hf(i));break;default:hf(i)}s=s.sibling}}function e2(s,i){for(;dr!==null;){var c=dr;switch(c.tag){case 0:case 11:case 15:Zs(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:wc(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,dr=f;else e:for(c=s;dr!==null;){f=dr;var y=f.sibling,j=f.return;if(Hw(f),f===c){dr=null;break e}if(y!==null){y.return=j,dr=y;break e}dr=j}}}var VP={getCacheForType:function(s){var i=jr(Yt),c=i.data.get(s);return c===void 0&&(c=s(),i.data.set(s,c)),c},cacheSignal:function(){return jr(Yt).controller.signal}},YP=typeof WeakMap=="function"?WeakMap:Map,st=0,yt=null,Ke=null,Ye=0,ct=0,dn=null,Js=!1,ro=!1,Rp=!1,ls=0,Mt=0,el=0,Gl=0,Pp=0,un=0,no=0,Uc=null,Yr=null,Dp=!1,xf=0,t2=0,pf=1/0,gf=null,tl=null,ar=0,rl=null,ao=null,is=0,Mp=0,Ip=null,r2=null,qc=0,Lp=null;function fn(){return(st&2)!==0&&Ye!==0?Ye&-Ye:G.T!==null?Fp():cc()}function n2(){if(un===0)if((Ye&536870912)===0||Xe){var s=Je;Je<<=1,(Je&3932160)===0&&(Je=262144),un=s}else un=536870912;return s=on.current,s!==null&&(s.flags|=32),un}function Qr(s,i,c){(s===yt&&(ct===2||ct===9)||s.cancelPendingCommit!==null)&&(so(s,0),nl(s,Ye,un,!1)),Ol(s,c),((st&2)===0||s!==yt)&&(s===yt&&((st&2)===0&&(Gl|=c),Mt===4&&nl(s,Ye,un,!1)),wa(s))}function a2(s,i,c){if((st&6)!==0)throw Error(a(327));var f=!c&&(i&127)===0&&(i&s.expiredLanes)===0||$t(s,i),y=f?XP(s,i):Bp(s,i,!0),j=f;do{if(y===0){ro&&!f&&nl(s,i,0,!1);break}else{if(c=s.current.alternate,j&&!QP(c)){y=Bp(s,i,!1),j=!1;continue}if(y===2){if(j=i,s.errorRecoveryDisabledLanes&j)var R=0;else R=s.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){i=R;e:{var D=s;y=Uc;var F=D.current.memoizedState.isDehydrated;if(F&&(so(D,R).flags|=256),R=Bp(D,R,!1),R!==2){if(Rp&&!F){D.errorRecoveryDisabledLanes|=j,Gl|=j,y=4;break e}j=Yr,Yr=y,j!==null&&(Yr===null?Yr=j:Yr.push.apply(Yr,j))}y=R}if(j=!1,y!==2)continue}}if(y===1){so(s,0),nl(s,i,0,!0);break}e:{switch(f=s,j=y,j){case 0:case 1:throw Error(a(345));case 4:if((i&4194048)!==i)break;case 6:nl(f,i,un,!Js);break e;case 2:Yr=null;break;case 3:case 5:break;default:throw Error(a(329))}if((i&62914560)===i&&(y=xf+300-br(),10<y)){if(nl(f,i,un,!Js),Gt(f,0,!0)!==0)break e;is=i,f.timeoutHandle=M2(s2.bind(null,f,c,Yr,gf,Dp,i,un,Gl,no,Js,j,"Throttled",-0,0),y);break e}s2(f,c,Yr,gf,Dp,i,un,Gl,no,Js,j,null,-0,0)}}break}while(!0);wa(s)}function s2(s,i,c,f,y,j,R,D,F,re,he,je,le,de){if(s.timeoutHandle=-1,je=i.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ga},Xw(i,j,je);var Oe=(j&62914560)===j?xf-br():(j&4194048)===j?t2-br():0;if(Oe=PD(je,Oe),Oe!==null){is=j,s.cancelPendingCommit=Oe(m2.bind(null,s,i,j,c,f,y,R,D,F,he,je,null,le,de)),nl(s,j,R,!re);return}}m2(s,i,j,c,f,y,R,D,F)}function QP(s){for(var i=s;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var y=c[f],j=y.getSnapshot;y=y.value;try{if(!sn(j(),y))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function nl(s,i,c,f){i&=~Pp,i&=~Gl,s.suspendedLanes|=i,s.pingedLanes&=~i,f&&(s.warmLanes|=i),f=s.expirationTimes;for(var y=i;0<y;){var j=31-Ee(y),R=1<<j;f[j]=-1,y&=~R}c!==0&&ju(s,c,i)}function bf(){return(st&6)===0?(Fc(0),!1):!0}function zp(){if(Ke!==null){if(ct===0)var s=Ke.return;else s=Ke,Wa=Ll=null,ep(s),Qi=null,Ec=0,s=Ke;for(;s!==null;)Iw(s.alternate,s),s=s.return;Ke=null}}function so(s,i){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,xD(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),is=0,zp(),yt=s,Ke=c=Ya(s.current,null),Ye=i,ct=0,dn=null,Js=!1,ro=$t(s,i),Rp=!1,no=un=Pp=Gl=el=Mt=0,Yr=Uc=null,Dp=!1,(i&8)!==0&&(i|=i&32);var f=s.entangledLanes;if(f!==0)for(s=s.entanglements,f&=i;0<f;){var y=31-Ee(f),j=1<<y;i|=s[y],f&=~j}return ls=i,zu(),c}function l2(s,i){qe=null,G.H=Pc,i===Yi||i===Gu?(i=NN(),ct=3):i===q0?(i=NN(),ct=4):ct=i===pp?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,dn=i,Ke===null&&(Mt=1,lf(s,Cn(i,s.current)))}function i2(){var s=on.current;return s===null?!0:(Ye&4194048)===Ye?On===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?s===On:!1}function o2(){var s=G.H;return G.H=Pc,s===null?Pc:s}function c2(){var s=G.A;return G.A=VP,s}function yf(){Mt=4,Js||(Ye&4194048)!==Ye&&on.current!==null||(ro=!0),(el&134217727)===0&&(Gl&134217727)===0||yt===null||nl(yt,Ye,un,!1)}function Bp(s,i,c){var f=st;st|=2;var y=o2(),j=c2();(yt!==s||Ye!==i)&&(gf=null,so(s,i)),i=!1;var R=Mt;e:do try{if(ct!==0&&Ke!==null){var D=Ke,F=dn;switch(ct){case 8:zp(),R=6;break e;case 3:case 2:case 9:case 6:on.current===null&&(i=!0);var re=ct;if(ct=0,dn=null,lo(s,D,F,re),c&&ro){R=0;break e}break;default:re=ct,ct=0,dn=null,lo(s,D,F,re)}}WP(),R=Mt;break}catch(he){l2(s,he)}while(!0);return i&&s.shellSuspendCounter++,Wa=Ll=null,st=f,G.H=y,G.A=j,Ke===null&&(yt=null,Ye=0,zu()),R}function WP(){for(;Ke!==null;)d2(Ke)}function XP(s,i){var c=st;st|=2;var f=o2(),y=c2();yt!==s||Ye!==i?(gf=null,pf=br()+500,so(s,i)):ro=$t(s,i);e:do try{if(ct!==0&&Ke!==null){i=Ke;var j=dn;t:switch(ct){case 1:ct=0,dn=null,lo(s,i,j,1);break;case 2:case 9:if(vN(j)){ct=0,dn=null,u2(i);break}i=function(){ct!==2&&ct!==9||yt!==s||(ct=7),wa(s)},j.then(i,i);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:vN(j)?(ct=0,dn=null,u2(i)):(ct=0,dn=null,lo(s,i,j,7));break;case 5:var R=null;switch(Ke.tag){case 26:R=Ke.memoizedState;case 5:case 27:var D=Ke;if(R?W2(R):D.stateNode.complete){ct=0,dn=null;var F=D.sibling;if(F!==null)Ke=F;else{var re=D.return;re!==null?(Ke=re,vf(re)):Ke=null}break t}}ct=0,dn=null,lo(s,i,j,5);break;case 6:ct=0,dn=null,lo(s,i,j,6);break;case 8:zp(),Mt=6;break e;default:throw Error(a(462))}}ZP();break}catch(he){l2(s,he)}while(!0);return Wa=Ll=null,G.H=f,G.A=y,st=c,Ke!==null?0:(yt=null,Ye=0,zu(),Mt)}function ZP(){for(;Ke!==null&&!nc();)d2(Ke)}function d2(s){var i=Dw(s.alternate,s,ls);s.memoizedProps=s.pendingProps,i===null?vf(s):Ke=i}function u2(s){var i=s,c=i.alternate;switch(i.tag){case 15:case 0:i=kw(c,i,i.pendingProps,i.type,void 0,Ye);break;case 11:i=kw(c,i,i.pendingProps,i.type.render,i.ref,Ye);break;case 5:ep(i);default:Iw(c,i),i=Ke=cN(i,ls),i=Dw(c,i,ls)}s.memoizedProps=s.pendingProps,i===null?vf(s):Ke=i}function lo(s,i,c,f){Wa=Ll=null,ep(i),Qi=null,Ec=0;var y=i.return;try{if($P(s,y,i,c,Ye)){Mt=1,lf(s,Cn(c,s.current)),Ke=null;return}}catch(j){if(y!==null)throw Ke=y,j;Mt=1,lf(s,Cn(c,s.current)),Ke=null;return}i.flags&32768?(Xe||f===1?s=!0:ro||(Ye&536870912)!==0?s=!1:(Js=s=!0,(f===2||f===9||f===3||f===6)&&(f=on.current,f!==null&&f.tag===13&&(f.flags|=16384))),f2(i,s)):vf(i)}function vf(s){var i=s;do{if((i.flags&32768)!==0){f2(i,Js);return}s=i.return;var c=FP(i.alternate,i,ls);if(c!==null){Ke=c;return}if(i=i.sibling,i!==null){Ke=i;return}Ke=i=s}while(i!==null);Mt===0&&(Mt=5)}function f2(s,i){do{var c=HP(s.alternate,s);if(c!==null){c.flags&=32767,Ke=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(s=s.sibling,s!==null)){Ke=s;return}Ke=s=c}while(s!==null);Mt=6,Ke=null}function m2(s,i,c,f,y,j,R,D,F){s.cancelPendingCommit=null;do jf();while(ar!==0);if((st&6)!==0)throw Error(a(327));if(i!==null){if(i===s.current)throw Error(a(177));if(j=i.lanes|i.childLanes,j|=A0,n0(s,c,j,R,D,F),s===yt&&(Ke=yt=null,Ye=0),ao=i,rl=s,is=c,Mp=j,Ip=y,r2=f,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,rD(Wn,function(){return b2(),null})):(s.callbackNode=null,s.callbackPriority=0),f=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||f){f=G.T,G.T=null,y=J.p,J.p=2,R=st,st|=4;try{KP(s,i,c)}finally{st=R,J.p=y,G.T=f}}ar=1,h2(),x2(),p2()}}function h2(){if(ar===1){ar=0;var s=rl,i=ao,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=G.T,G.T=null;var f=J.p;J.p=2;var y=st;st|=4;try{Yw(i,s);var j=Xp,R=eN(s.containerInfo),D=j.focusedElem,F=j.selectionRange;if(R!==D&&D&&D.ownerDocument&&J1(D.ownerDocument.documentElement,D)){if(F!==null&&N0(D)){var re=F.start,he=F.end;if(he===void 0&&(he=re),"selectionStart"in D)D.selectionStart=re,D.selectionEnd=Math.min(he,D.value.length);else{var je=D.ownerDocument||document,le=je&&je.defaultView||window;if(le.getSelection){var de=le.getSelection(),Oe=D.textContent.length,Ie=Math.min(F.start,Oe),pt=F.end===void 0?Ie:Math.min(F.end,Oe);!de.extend&&Ie>pt&&(R=pt,pt=Ie,Ie=R);var Q=Z1(D,Ie),Y=Z1(D,pt);if(Q&&Y&&(de.rangeCount!==1||de.anchorNode!==Q.node||de.anchorOffset!==Q.offset||de.focusNode!==Y.node||de.focusOffset!==Y.offset)){var te=je.createRange();te.setStart(Q.node,Q.offset),de.removeAllRanges(),Ie>pt?(de.addRange(te),de.extend(Y.node,Y.offset)):(te.setEnd(Y.node,Y.offset),de.addRange(te))}}}}for(je=[],de=D;de=de.parentNode;)de.nodeType===1&&je.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<je.length;D++){var ye=je[D];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}Pf=!!Wp,Xp=Wp=null}finally{st=y,J.p=f,G.T=c}}s.current=i,ar=2}}function x2(){if(ar===2){ar=0;var s=rl,i=ao,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=G.T,G.T=null;var f=J.p;J.p=2;var y=st;st|=4;try{Fw(s,i.alternate,i)}finally{st=y,J.p=f,G.T=c}}ar=3}}function p2(){if(ar===4||ar===3){ar=0,ac();var s=rl,i=ao,c=is,f=r2;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ar=5:(ar=0,ao=rl=null,g2(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(tl=null),oc(c),i=i.stateNode,Ae&&typeof Ae.onCommitFiberRoot=="function")try{Ae.onCommitFiberRoot(Ne,i,void 0,(i.current.flags&128)===128)}catch{}if(f!==null){i=G.T,y=J.p,J.p=2,G.T=null;try{for(var j=s.onRecoverableError,R=0;R<f.length;R++){var D=f[R];j(D.value,{componentStack:D.stack})}}finally{G.T=i,J.p=y}}(is&3)!==0&&jf(),wa(s),y=s.pendingLanes,(c&261930)!==0&&(y&42)!==0?s===Lp?qc++:(qc=0,Lp=s):qc=0,Fc(0)}}function g2(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,wc(i)))}function jf(){return h2(),x2(),p2(),b2()}function b2(){if(ar!==5)return!1;var s=rl,i=Mp;Mp=0;var c=oc(is),f=G.T,y=J.p;try{J.p=32>c?32:c,G.T=null,c=Ip,Ip=null;var j=rl,R=is;if(ar=0,ao=rl=null,is=0,(st&6)!==0)throw Error(a(331));var D=st;if(st|=4,Jw(j.current),Ww(j,j.current,R,c),st=D,Fc(0,!1),Ae&&typeof Ae.onPostCommitFiberRoot=="function")try{Ae.onPostCommitFiberRoot(Ne,j)}catch{}return!0}finally{J.p=y,G.T=f,g2(s,i)}}function y2(s,i,c){i=Cn(c,i),i=xp(s.stateNode,i,2),s=Qs(s,i,2),s!==null&&(Ol(s,2),wa(s))}function dt(s,i,c){if(s.tag===3)y2(s,s,c);else for(;i!==null;){if(i.tag===3){y2(i,s,c);break}else if(i.tag===1){var f=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(tl===null||!tl.has(f))){s=Cn(c,s),c=vw(2),f=Qs(i,c,2),f!==null&&(jw(c,f,i,s),Ol(f,2),wa(f));break}}i=i.return}}function $p(s,i,c){var f=s.pingCache;if(f===null){f=s.pingCache=new YP;var y=new Set;f.set(i,y)}else y=f.get(i),y===void 0&&(y=new Set,f.set(i,y));y.has(c)||(Rp=!0,y.add(c),s=JP.bind(null,s,i,c),i.then(s,s))}function JP(s,i,c){var f=s.pingCache;f!==null&&f.delete(i),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,yt===s&&(Ye&c)===c&&(Mt===4||Mt===3&&(Ye&62914560)===Ye&&300>br()-xf?(st&2)===0&&so(s,0):Pp|=c,no===Ye&&(no=0)),wa(s)}function v2(s,i){i===0&&(i=ga()),s=Dl(s,i),s!==null&&(Ol(s,i),wa(s))}function eD(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),v2(s,c)}function tD(s,i){var c=0;switch(s.tag){case 31:case 13:var f=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:f=s.stateNode;break;case 22:f=s.stateNode._retryCache;break;default:throw Error(a(314))}f!==null&&f.delete(i),v2(s,c)}function rD(s,i){return Ha(s,i)}var Nf=null,io=null,Up=!1,wf=!1,qp=!1,al=0;function wa(s){s!==io&&s.next===null&&(io===null?Nf=io=s:io=io.next=s),wf=!0,Up||(Up=!0,aD())}function Fc(s,i){if(!qp&&wf){qp=!0;do for(var c=!1,f=Nf;f!==null;){if(s!==0){var y=f.pendingLanes;if(y===0)var j=0;else{var R=f.suspendedLanes,D=f.pingedLanes;j=(1<<31-Ee(42|s)+1)-1,j&=y&~(R&~D),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(c=!0,S2(f,j))}else j=Ye,j=Gt(f,f===yt?j:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(j&3)===0||$t(f,j)||(c=!0,S2(f,j));f=f.next}while(c);qp=!1}}function nD(){j2()}function j2(){wf=Up=!1;var s=0;al!==0&&hD()&&(s=al);for(var i=br(),c=null,f=Nf;f!==null;){var y=f.next,j=N2(f,i);j===0?(f.next=null,c===null?Nf=y:c.next=y,y===null&&(io=c)):(c=f,(s!==0||(j&3)!==0)&&(wf=!0)),f=y}ar!==0&&ar!==5||Fc(s),al!==0&&(al=0)}function N2(s,i){for(var c=s.suspendedLanes,f=s.pingedLanes,y=s.expirationTimes,j=s.pendingLanes&-62914561;0<j;){var R=31-Ee(j),D=1<<R,F=y[R];F===-1?((D&c)===0||(D&f)!==0)&&(y[R]=pa(D,i)):F<=i&&(s.expiredLanes|=D),j&=~D}if(i=yt,c=Ye,c=Gt(s,s===i?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f=s.callbackNode,c===0||s===i&&(ct===2||ct===9)||s.cancelPendingCommit!==null)return f!==null&&f!==null&&kl(f),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||$t(s,c)){if(i=c&-c,i===s.callbackPriority)return i;switch(f!==null&&kl(f),oc(c)){case 2:case 8:c=Ti;break;case 32:c=Wn;break;case 268435456:c=Ri;break;default:c=Wn}return f=w2.bind(null,s),c=Ha(c,f),s.callbackPriority=i,s.callbackNode=c,i}return f!==null&&f!==null&&kl(f),s.callbackPriority=2,s.callbackNode=null,2}function w2(s,i){if(ar!==0&&ar!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(jf()&&s.callbackNode!==c)return null;var f=Ye;return f=Gt(s,s===yt?f:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),f===0?null:(a2(s,f,i),N2(s,br()),s.callbackNode!=null&&s.callbackNode===c?w2.bind(null,s):null)}function S2(s,i){if(jf())return null;a2(s,i,!0)}function aD(){pD(function(){(st&6)!==0?Ha(_l,nD):j2()})}function Fp(){if(al===0){var s=Gi;s===0&&(s=Fe,Fe<<=1,(Fe&261888)===0&&(Fe=256)),al=s}return al}function E2(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ou(""+s)}function C2(s,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,s.id&&c.setAttribute("form",s.id),i.parentNode.insertBefore(c,i),s=new FormData(s),c.parentNode.removeChild(c),s}function sD(s,i,c,f,y){if(i==="submit"&&c&&c.stateNode===y){var j=E2((y[yr]||null).action),R=f.submitter;R&&(i=(i=R[yr]||null)?E2(i.formAction):R.getAttribute("formAction"),i!==null&&(j=i,R=null));var D=new Du("action","action",null,f,y);s.push({event:D,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(al!==0){var F=R?C2(y,R):new FormData(y);cp(c,{pending:!0,data:F,method:y.method,action:j},null,F)}}else typeof j=="function"&&(D.preventDefault(),F=R?C2(y,R):new FormData(y),cp(c,{pending:!0,data:F,method:y.method,action:j},j,F))},currentTarget:y}]})}}for(var Hp=0;Hp<C0.length;Hp++){var Kp=C0[Hp],lD=Kp.toLowerCase(),iD=Kp[0].toUpperCase()+Kp.slice(1);Xn(lD,"on"+iD)}Xn(nN,"onAnimationEnd"),Xn(aN,"onAnimationIteration"),Xn(sN,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(wP,"onTransitionRun"),Xn(SP,"onTransitionStart"),Xn(EP,"onTransitionCancel"),Xn(lN,"onTransitionEnd"),Us("onMouseEnter",["mouseout","mouseover"]),Us("onMouseLeave",["mouseout","mouseover"]),Us("onPointerEnter",["pointerout","pointerover"]),Us("onPointerLeave",["pointerout","pointerover"]),ya("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ya("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ya("onBeforeInput",["compositionend","keypress","textInput","paste"]),ya("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ya("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oD=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hc));function A2(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var f=s[c],y=f.event;f=f.listeners;e:{var j=void 0;if(i)for(var R=f.length-1;0<=R;R--){var D=f[R],F=D.instance,re=D.currentTarget;if(D=D.listener,F!==j&&y.isPropagationStopped())break e;j=D,y.currentTarget=re;try{j(y)}catch(he){Lu(he)}y.currentTarget=null,j=F}else for(R=0;R<f.length;R++){if(D=f[R],F=D.instance,re=D.currentTarget,D=D.listener,F!==j&&y.isPropagationStopped())break e;j=D,y.currentTarget=re;try{j(y)}catch(he){Lu(he)}y.currentTarget=null,j=F}}}}function Ge(s,i){var c=i[dc];c===void 0&&(c=i[dc]=new Set);var f=s+"__bubble";c.has(f)||(k2(i,s,2,!1),c.add(f))}function Gp(s,i,c){var f=0;i&&(f|=4),k2(c,s,f,i)}var Sf="_reactListening"+Math.random().toString(36).slice(2);function Vp(s){if(!s[Sf]){s[Sf]=!0,uc.forEach(function(c){c!=="selectionchange"&&(oD.has(c)||Gp(c,!1,s),Gp(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Sf]||(i[Sf]=!0,Gp("selectionchange",!1,i))}}function k2(s,i,c,f){switch(nS(i)){case 2:var y=ID;break;case 8:y=LD;break;default:y=og}c=y.bind(null,i,c,s),y=void 0,!m0||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),f?y!==void 0?s.addEventListener(i,c,{capture:!0,passive:y}):s.addEventListener(i,c,!0):y!==void 0?s.addEventListener(i,c,{passive:y}):s.addEventListener(i,c,!1)}function Yp(s,i,c,f,y){var j=f;if((i&1)===0&&(i&2)===0&&f!==null)e:for(;;){if(f===null)return;var R=f.tag;if(R===3||R===4){var D=f.stateNode.containerInfo;if(D===y)break;if(R===4)for(R=f.return;R!==null;){var F=R.tag;if((F===3||F===4)&&R.stateNode.containerInfo===y)return;R=R.return}for(;D!==null;){if(R=De(D),R===null)return;if(F=R.tag,F===5||F===6||F===26||F===27){f=j=R;continue e}D=D.parentNode}}f=f.return}P1(function(){var re=j,he=u0(c),je=[];e:{var le=iN.get(s);if(le!==void 0){var de=Du,Oe=s;switch(s){case"keypress":if(Ru(c)===0)break e;case"keydown":case"keyup":de=tP;break;case"focusin":Oe="focus",de=g0;break;case"focusout":Oe="blur",de=g0;break;case"beforeblur":case"afterblur":de=g0;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=I1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=FR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=aP;break;case nN:case aN:case sN:de=GR;break;case lN:de=lP;break;case"scroll":case"scrollend":de=UR;break;case"wheel":de=oP;break;case"copy":case"cut":case"paste":de=YR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=z1;break;case"toggle":case"beforetoggle":de=dP}var Ie=(i&4)!==0,pt=!Ie&&(s==="scroll"||s==="scrollend"),Q=Ie?le!==null?le+"Capture":null:le;Ie=[];for(var Y=re,te;Y!==null;){var ye=Y;if(te=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||te===null||Q===null||(ye=fc(Y,Q),ye!=null&&Ie.push(Kc(Y,ye,te))),pt)break;Y=Y.return}0<Ie.length&&(le=new de(le,Oe,null,c,he),je.push({event:le,listeners:Ie}))}}if((i&7)===0){e:{if(le=s==="mouseover"||s==="pointerover",de=s==="mouseout"||s==="pointerout",le&&c!==d0&&(Oe=c.relatedTarget||c.fromElement)&&(De(Oe)||Oe[zs]))break e;if((de||le)&&(le=he.window===he?he:(le=he.ownerDocument)?le.defaultView||le.parentWindow:window,de?(Oe=c.relatedTarget||c.toElement,de=re,Oe=Oe?De(Oe):null,Oe!==null&&(pt=o(Oe),Ie=Oe.tag,Oe!==pt||Ie!==5&&Ie!==27&&Ie!==6)&&(Oe=null)):(de=null,Oe=re),de!==Oe)){if(Ie=I1,ye="onMouseLeave",Q="onMouseEnter",Y="mouse",(s==="pointerout"||s==="pointerover")&&(Ie=z1,ye="onPointerLeave",Q="onPointerEnter",Y="pointer"),pt=de==null?le:Bs(de),te=Oe==null?le:Bs(Oe),le=new Ie(ye,Y+"leave",de,c,he),le.target=pt,le.relatedTarget=te,ye=null,De(he)===re&&(Ie=new Ie(Q,Y+"enter",Oe,c,he),Ie.target=te,Ie.relatedTarget=pt,ye=Ie),pt=ye,de&&Oe)t:{for(Ie=cD,Q=de,Y=Oe,te=0,ye=Q;ye;ye=Ie(ye))te++;ye=0;for(var Pe=Y;Pe;Pe=Ie(Pe))ye++;for(;0<te-ye;)Q=Ie(Q),te--;for(;0<ye-te;)Y=Ie(Y),ye--;for(;te--;){if(Q===Y||Y!==null&&Q===Y.alternate){Ie=Q;break t}Q=Ie(Q),Y=Ie(Y)}Ie=null}else Ie=null;de!==null&&_2(je,le,de,Ie,!1),Oe!==null&&pt!==null&&_2(je,pt,Oe,Ie,!0)}}e:{if(le=re?Bs(re):window,de=le.nodeName&&le.nodeName.toLowerCase(),de==="select"||de==="input"&&le.type==="file")var rt=G1;else if(H1(le))if(V1)rt=vP;else{rt=bP;var Te=gP}else de=le.nodeName,!de||de.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?re&&c0(re.elementType)&&(rt=G1):rt=yP;if(rt&&(rt=rt(s,re))){K1(je,rt,c,he);break e}Te&&Te(s,le,re),s==="focusout"&&re&&le.type==="number"&&re.memoizedProps.value!=null&&o0(le,"number",le.value)}switch(Te=re?Bs(re):window,s){case"focusin":(H1(Te)||Te.contentEditable==="true")&&(zi=Te,w0=re,vc=null);break;case"focusout":vc=w0=zi=null;break;case"mousedown":S0=!0;break;case"contextmenu":case"mouseup":case"dragend":S0=!1,tN(je,c,he);break;case"selectionchange":if(NP)break;case"keydown":case"keyup":tN(je,c,he)}var He;if(y0)e:{switch(s){case"compositionstart":var Qe="onCompositionStart";break e;case"compositionend":Qe="onCompositionEnd";break e;case"compositionupdate":Qe="onCompositionUpdate";break e}Qe=void 0}else Li?q1(s,c)&&(Qe="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(Qe="onCompositionStart");Qe&&(B1&&c.locale!=="ko"&&(Li||Qe!=="onCompositionStart"?Qe==="onCompositionEnd"&&Li&&(He=D1()):(qs=he,h0="value"in qs?qs.value:qs.textContent,Li=!0)),Te=Ef(re,Qe),0<Te.length&&(Qe=new L1(Qe,s,null,c,he),je.push({event:Qe,listeners:Te}),He?Qe.data=He:(He=F1(c),He!==null&&(Qe.data=He)))),(He=fP?mP(s,c):hP(s,c))&&(Qe=Ef(re,"onBeforeInput"),0<Qe.length&&(Te=new L1("onBeforeInput","beforeinput",null,c,he),je.push({event:Te,listeners:Qe}),Te.data=He)),sD(je,s,re,c,he)}A2(je,i)})}function Kc(s,i,c){return{instance:s,listener:i,currentTarget:c}}function Ef(s,i){for(var c=i+"Capture",f=[];s!==null;){var y=s,j=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||j===null||(y=fc(s,c),y!=null&&f.unshift(Kc(s,y,j)),y=fc(s,i),y!=null&&f.push(Kc(s,y,j))),s.tag===3)return f;s=s.return}return[]}function cD(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function _2(s,i,c,f,y){for(var j=i._reactName,R=[];c!==null&&c!==f;){var D=c,F=D.alternate,re=D.stateNode;if(D=D.tag,F!==null&&F===f)break;D!==5&&D!==26&&D!==27||re===null||(F=re,y?(re=fc(c,j),re!=null&&R.unshift(Kc(c,re,F))):y||(re=fc(c,j),re!=null&&R.push(Kc(c,re,F)))),c=c.return}R.length!==0&&s.push({event:i,listeners:R})}var dD=/\r\n?/g,uD=/\u0000|\uFFFD/g;function O2(s){return(typeof s=="string"?s:""+s).replace(dD,`
`).replace(uD,"")}function T2(s,i){return i=O2(i),O2(s)===i}function xt(s,i,c,f,y,j){switch(c){case"children":typeof f=="string"?i==="body"||i==="textarea"&&f===""||Di(s,f):(typeof f=="number"||typeof f=="bigint")&&i!=="body"&&Di(s,""+f);break;case"className":ku(s,"class",f);break;case"tabIndex":ku(s,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ku(s,c,f);break;case"style":T1(s,f,j);break;case"data":if(i!=="object"){ku(s,"data",f);break}case"src":case"href":if(f===""&&(i!=="a"||c!=="href")){s.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ou(""+f),s.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(c==="formAction"?(i!=="input"&&xt(s,i,"name",y.name,y,null),xt(s,i,"formEncType",y.formEncType,y,null),xt(s,i,"formMethod",y.formMethod,y,null),xt(s,i,"formTarget",y.formTarget,y,null)):(xt(s,i,"encType",y.encType,y,null),xt(s,i,"method",y.method,y,null),xt(s,i,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){s.removeAttribute(c);break}f=Ou(""+f),s.setAttribute(c,f);break;case"onClick":f!=null&&(s.onclick=Ga);break;case"onScroll":f!=null&&Ge("scroll",s);break;case"onScrollEnd":f!=null&&Ge("scrollend",s);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(a(60));s.innerHTML=c}}break;case"multiple":s.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":s.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){s.removeAttribute("xlink:href");break}c=Ou(""+f),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""+f):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":f===!0?s.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?s.setAttribute(c,f):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?s.setAttribute(c,f):s.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?s.removeAttribute(c):s.setAttribute(c,f);break;case"popover":Ge("beforetoggle",s),Ge("toggle",s),Au(s,"popover",f);break;case"xlinkActuate":Ka(s,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Ka(s,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Ka(s,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Ka(s,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Ka(s,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Ka(s,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Ka(s,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Au(s,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=BR.get(c)||c,Au(s,c,f))}}function Qp(s,i,c,f,y,j){switch(c){case"style":T1(s,f,j);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(a(61));if(c=f.__html,c!=null){if(y.children!=null)throw Error(a(60));s.innerHTML=c}}break;case"children":typeof f=="string"?Di(s,f):(typeof f=="number"||typeof f=="bigint")&&Di(s,""+f);break;case"onScroll":f!=null&&Ge("scroll",s);break;case"onScrollEnd":f!=null&&Ge("scrollend",s);break;case"onClick":f!=null&&(s.onclick=Ga);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Cu.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),i=c.slice(2,y?c.length-7:void 0),j=s[yr]||null,j=j!=null?j[c]:null,typeof j=="function"&&s.removeEventListener(i,j,y),typeof f=="function")){typeof j!="function"&&j!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(i,f,y);break e}c in s?s[c]=f:f===!0?s.setAttribute(c,""):Au(s,c,f)}}}function wr(s,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",s),Ge("load",s);var f=!1,y=!1,j;for(j in c)if(c.hasOwnProperty(j)){var R=c[j];if(R!=null)switch(j){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:xt(s,i,j,R,c,null)}}y&&xt(s,i,"srcSet",c.srcSet,c,null),f&&xt(s,i,"src",c.src,c,null);return;case"input":Ge("invalid",s);var D=j=R=y=null,F=null,re=null;for(f in c)if(c.hasOwnProperty(f)){var he=c[f];if(he!=null)switch(f){case"name":y=he;break;case"type":R=he;break;case"checked":F=he;break;case"defaultChecked":re=he;break;case"value":j=he;break;case"defaultValue":D=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(a(137,i));break;default:xt(s,i,f,he,c,null)}}A1(s,j,D,F,re,R,y,!1);return;case"select":Ge("invalid",s),f=R=j=null;for(y in c)if(c.hasOwnProperty(y)&&(D=c[y],D!=null))switch(y){case"value":j=D;break;case"defaultValue":R=D;break;case"multiple":f=D;default:xt(s,i,y,D,c,null)}i=j,c=R,s.multiple=!!f,i!=null?Pi(s,!!f,i,!1):c!=null&&Pi(s,!!f,c,!0);return;case"textarea":Ge("invalid",s),j=y=f=null;for(R in c)if(c.hasOwnProperty(R)&&(D=c[R],D!=null))switch(R){case"value":f=D;break;case"defaultValue":y=D;break;case"children":j=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(a(91));break;default:xt(s,i,R,D,c,null)}_1(s,f,y,j);return;case"option":for(F in c)c.hasOwnProperty(F)&&(f=c[F],f!=null)&&(F==="selected"?s.selected=f&&typeof f!="function"&&typeof f!="symbol":xt(s,i,F,f,c,null));return;case"dialog":Ge("beforetoggle",s),Ge("toggle",s),Ge("cancel",s),Ge("close",s);break;case"iframe":case"object":Ge("load",s);break;case"video":case"audio":for(f=0;f<Hc.length;f++)Ge(Hc[f],s);break;case"image":Ge("error",s),Ge("load",s);break;case"details":Ge("toggle",s);break;case"embed":case"source":case"link":Ge("error",s),Ge("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in c)if(c.hasOwnProperty(re)&&(f=c[re],f!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,i));default:xt(s,i,re,f,c,null)}return;default:if(c0(i)){for(he in c)c.hasOwnProperty(he)&&(f=c[he],f!==void 0&&Qp(s,i,he,f,c,void 0));return}}for(D in c)c.hasOwnProperty(D)&&(f=c[D],f!=null&&xt(s,i,D,f,c,null))}function fD(s,i,c,f){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,j=null,R=null,D=null,F=null,re=null,he=null;for(de in c){var je=c[de];if(c.hasOwnProperty(de)&&je!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":F=je;default:f.hasOwnProperty(de)||xt(s,i,de,null,f,je)}}for(var le in f){var de=f[le];if(je=c[le],f.hasOwnProperty(le)&&(de!=null||je!=null))switch(le){case"type":j=de;break;case"name":y=de;break;case"checked":re=de;break;case"defaultChecked":he=de;break;case"value":R=de;break;case"defaultValue":D=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(a(137,i));break;default:de!==je&&xt(s,i,le,de,f,je)}}i0(s,R,D,F,re,he,j,y);return;case"select":de=R=D=le=null;for(j in c)if(F=c[j],c.hasOwnProperty(j)&&F!=null)switch(j){case"value":break;case"multiple":de=F;default:f.hasOwnProperty(j)||xt(s,i,j,null,f,F)}for(y in f)if(j=f[y],F=c[y],f.hasOwnProperty(y)&&(j!=null||F!=null))switch(y){case"value":le=j;break;case"defaultValue":D=j;break;case"multiple":R=j;default:j!==F&&xt(s,i,y,j,f,F)}i=D,c=R,f=de,le!=null?Pi(s,!!c,le,!1):!!f!=!!c&&(i!=null?Pi(s,!!c,i,!0):Pi(s,!!c,c?[]:"",!1));return;case"textarea":de=le=null;for(D in c)if(y=c[D],c.hasOwnProperty(D)&&y!=null&&!f.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:xt(s,i,D,null,f,y)}for(R in f)if(y=f[R],j=c[R],f.hasOwnProperty(R)&&(y!=null||j!=null))switch(R){case"value":le=y;break;case"defaultValue":de=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(a(91));break;default:y!==j&&xt(s,i,R,y,f,j)}k1(s,le,de);return;case"option":for(var Oe in c)le=c[Oe],c.hasOwnProperty(Oe)&&le!=null&&!f.hasOwnProperty(Oe)&&(Oe==="selected"?s.selected=!1:xt(s,i,Oe,null,f,le));for(F in f)le=f[F],de=c[F],f.hasOwnProperty(F)&&le!==de&&(le!=null||de!=null)&&(F==="selected"?s.selected=le&&typeof le!="function"&&typeof le!="symbol":xt(s,i,F,le,f,de));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ie in c)le=c[Ie],c.hasOwnProperty(Ie)&&le!=null&&!f.hasOwnProperty(Ie)&&xt(s,i,Ie,null,f,le);for(re in f)if(le=f[re],de=c[re],f.hasOwnProperty(re)&&le!==de&&(le!=null||de!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(a(137,i));break;default:xt(s,i,re,le,f,de)}return;default:if(c0(i)){for(var pt in c)le=c[pt],c.hasOwnProperty(pt)&&le!==void 0&&!f.hasOwnProperty(pt)&&Qp(s,i,pt,void 0,f,le);for(he in f)le=f[he],de=c[he],!f.hasOwnProperty(he)||le===de||le===void 0&&de===void 0||Qp(s,i,he,le,f,de);return}}for(var Q in c)le=c[Q],c.hasOwnProperty(Q)&&le!=null&&!f.hasOwnProperty(Q)&&xt(s,i,Q,null,f,le);for(je in f)le=f[je],de=c[je],!f.hasOwnProperty(je)||le===de||le==null&&de==null||xt(s,i,je,le,f,de)}function R2(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function mD(){if(typeof performance.getEntriesByType=="function"){for(var s=0,i=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var y=c[f],j=y.transferSize,R=y.initiatorType,D=y.duration;if(j&&D&&R2(R)){for(R=0,D=y.responseEnd,f+=1;f<c.length;f++){var F=c[f],re=F.startTime;if(re>D)break;var he=F.transferSize,je=F.initiatorType;he&&R2(je)&&(F=F.responseEnd,R+=he*(F<D?1:(D-re)/(F-re)))}if(--f,i+=8*(j+R)/(y.duration/1e3),s++,10<s)break}}if(0<s)return i/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Wp=null,Xp=null;function Cf(s){return s.nodeType===9?s:s.ownerDocument}function P2(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function D2(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function Zp(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jp=null;function hD(){var s=window.event;return s&&s.type==="popstate"?s===Jp?!1:(Jp=s,!0):(Jp=null,!1)}var M2=typeof setTimeout=="function"?setTimeout:void 0,xD=typeof clearTimeout=="function"?clearTimeout:void 0,I2=typeof Promise=="function"?Promise:void 0,pD=typeof queueMicrotask=="function"?queueMicrotask:typeof I2<"u"?function(s){return I2.resolve(null).then(s).catch(gD)}:M2;function gD(s){setTimeout(function(){throw s})}function sl(s){return s==="head"}function L2(s,i){var c=i,f=0;do{var y=c.nextSibling;if(s.removeChild(c),y&&y.nodeType===8)if(c=y.data,c==="/$"||c==="/&"){if(f===0){s.removeChild(y),fo(i);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Gc(s.ownerDocument.documentElement);else if(c==="head"){c=s.ownerDocument.head,Gc(c);for(var j=c.firstChild;j;){var R=j.nextSibling,D=j.nodeName;j[ie]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&j.rel.toLowerCase()==="stylesheet"||c.removeChild(j),j=R}}else c==="body"&&Gc(s.ownerDocument.body);c=y}while(c);fo(i)}function z2(s,i){var c=s;s=0;do{var f=c.nextSibling;if(c.nodeType===1?i?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(i?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(s===0)break;s--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||s++;c=f}while(c)}function eg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":eg(c),ke(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function bD(s,i,c,f){for(;s.nodeType===1;){var y=c;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!f&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(f){if(!s[ie])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(j=s.getAttribute("rel"),j==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(j!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(j=s.getAttribute("src"),(j!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&j&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var j=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===j)return s}else return s;if(s=Tn(s.nextSibling),s===null)break}return null}function yD(s,i,c){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Tn(s.nextSibling),s===null))return null;return s}function B2(s,i){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!i||(s=Tn(s.nextSibling),s===null))return null;return s}function tg(s){return s.data==="$?"||s.data==="$~"}function rg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function vD(s,i){var c=s.ownerDocument;if(s.data==="$~")s._reactRetry=i;else if(s.data!=="$?"||c.readyState!=="loading")i();else{var f=function(){i(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),s._reactRetry=f}}function Tn(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return s}var ng=null;function $2(s){s=s.nextSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="/$"||c==="/&"){if(i===0)return Tn(s.nextSibling);i--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||i++}s=s.nextSibling}return null}function U2(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(i===0)return s;i--}else c!=="/$"&&c!=="/&"||i++}s=s.previousSibling}return null}function q2(s,i,c){switch(i=Cf(c),s){case"html":if(s=i.documentElement,!s)throw Error(a(452));return s;case"head":if(s=i.head,!s)throw Error(a(453));return s;case"body":if(s=i.body,!s)throw Error(a(454));return s;default:throw Error(a(451))}}function Gc(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);ke(s)}var Rn=new Map,F2=new Set;function Af(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var os=J.d;J.d={f:jD,r:ND,D:wD,C:SD,L:ED,m:CD,X:kD,S:AD,M:_D};function jD(){var s=os.f(),i=bf();return s||i}function ND(s){var i=nr(s);i!==null&&i.tag===5&&i.type==="form"?lw(i):os.r(s)}var oo=typeof document>"u"?null:document;function H2(s,i,c){var f=oo;if(f&&typeof i=="string"&&i){var y=Sn(i);y='link[rel="'+s+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),F2.has(y)||(F2.add(y),s={rel:s,crossOrigin:c,href:i},f.querySelector(y)===null&&(i=f.createElement("link"),wr(i,"link",s),Ut(i),f.head.appendChild(i)))}}function wD(s){os.D(s),H2("dns-prefetch",s,null)}function SD(s,i){os.C(s,i),H2("preconnect",s,i)}function ED(s,i,c){os.L(s,i,c);var f=oo;if(f&&s&&i){var y='link[rel="preload"][as="'+Sn(i)+'"]';i==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+Sn(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+Sn(c.imageSizes)+'"]')):y+='[href="'+Sn(s)+'"]';var j=y;switch(i){case"style":j=co(s);break;case"script":j=uo(s)}Rn.has(j)||(s=p({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:s,as:i},c),Rn.set(j,s),f.querySelector(y)!==null||i==="style"&&f.querySelector(Vc(j))||i==="script"&&f.querySelector(Yc(j))||(i=f.createElement("link"),wr(i,"link",s),Ut(i),f.head.appendChild(i)))}}function CD(s,i){os.m(s,i);var c=oo;if(c&&s){var f=i&&typeof i.as=="string"?i.as:"script",y='link[rel="modulepreload"][as="'+Sn(f)+'"][href="'+Sn(s)+'"]',j=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=uo(s)}if(!Rn.has(j)&&(s=p({rel:"modulepreload",href:s},i),Rn.set(j,s),c.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Yc(j)))return}f=c.createElement("link"),wr(f,"link",s),Ut(f),c.head.appendChild(f)}}}function AD(s,i,c){os.S(s,i,c);var f=oo;if(f&&s){var y=$s(f).hoistableStyles,j=co(s);i=i||"default";var R=y.get(j);if(!R){var D={loading:0,preload:null};if(R=f.querySelector(Vc(j)))D.loading=5;else{s=p({rel:"stylesheet",href:s,"data-precedence":i},c),(c=Rn.get(j))&&ag(s,c);var F=R=f.createElement("link");Ut(F),wr(F,"link",s),F._p=new Promise(function(re,he){F.onload=re,F.onerror=he}),F.addEventListener("load",function(){D.loading|=1}),F.addEventListener("error",function(){D.loading|=2}),D.loading|=4,kf(R,i,f)}R={type:"stylesheet",instance:R,count:1,state:D},y.set(j,R)}}}function kD(s,i){os.X(s,i);var c=oo;if(c&&s){var f=$s(c).hoistableScripts,y=uo(s),j=f.get(y);j||(j=c.querySelector(Yc(y)),j||(s=p({src:s,async:!0},i),(i=Rn.get(y))&&sg(s,i),j=c.createElement("script"),Ut(j),wr(j,"link",s),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},f.set(y,j))}}function _D(s,i){os.M(s,i);var c=oo;if(c&&s){var f=$s(c).hoistableScripts,y=uo(s),j=f.get(y);j||(j=c.querySelector(Yc(y)),j||(s=p({src:s,async:!0,type:"module"},i),(i=Rn.get(y))&&sg(s,i),j=c.createElement("script"),Ut(j),wr(j,"link",s),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},f.set(y,j))}}function K2(s,i,c,f){var y=(y=pe.current)?Af(y):null;if(!y)throw Error(a(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=co(c.href),c=$s(y).hoistableStyles,f=c.get(i),f||(f={type:"style",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=co(c.href);var j=$s(y).hoistableStyles,R=j.get(s);if(R||(y=y.ownerDocument||y,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(s,R),(j=y.querySelector(Vc(s)))&&!j._p&&(R.instance=j,R.state.loading=5),Rn.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Rn.set(s,c),j||OD(y,s,c,R.state))),i&&f===null)throw Error(a(528,""));return R}if(i&&f!==null)throw Error(a(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=uo(c),c=$s(y).hoistableScripts,f=c.get(i),f||(f={type:"script",instance:null,count:0,state:null},c.set(i,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,s))}}function co(s){return'href="'+Sn(s)+'"'}function Vc(s){return'link[rel="stylesheet"]['+s+"]"}function G2(s){return p({},s,{"data-precedence":s.precedence,precedence:null})}function OD(s,i,c,f){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?f.loading=1:(i=s.createElement("link"),f.preload=i,i.addEventListener("load",function(){return f.loading|=1}),i.addEventListener("error",function(){return f.loading|=2}),wr(i,"link",c),Ut(i),s.head.appendChild(i))}function uo(s){return'[src="'+Sn(s)+'"]'}function Yc(s){return"script[async]"+s}function V2(s,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var f=s.querySelector('style[data-href~="'+Sn(c.href)+'"]');if(f)return i.instance=f,Ut(f),f;var y=p({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(s.ownerDocument||s).createElement("style"),Ut(f),wr(f,"style",y),kf(f,c.precedence,s),i.instance=f;case"stylesheet":y=co(c.href);var j=s.querySelector(Vc(y));if(j)return i.state.loading|=4,i.instance=j,Ut(j),j;f=G2(c),(y=Rn.get(y))&&ag(f,y),j=(s.ownerDocument||s).createElement("link"),Ut(j);var R=j;return R._p=new Promise(function(D,F){R.onload=D,R.onerror=F}),wr(j,"link",f),i.state.loading|=4,kf(j,c.precedence,s),i.instance=j;case"script":return j=uo(c.src),(y=s.querySelector(Yc(j)))?(i.instance=y,Ut(y),y):(f=c,(y=Rn.get(j))&&(f=p({},c),sg(f,y)),s=s.ownerDocument||s,y=s.createElement("script"),Ut(y),wr(y,"link",f),s.head.appendChild(y),i.instance=y);case"void":return null;default:throw Error(a(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(f=i.instance,i.state.loading|=4,kf(f,c.precedence,s));return i.instance}function kf(s,i,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,j=y,R=0;R<f.length;R++){var D=f[R];if(D.dataset.precedence===i)j=D;else if(j!==y)break}j?j.parentNode.insertBefore(s,j.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(s,i.firstChild))}function ag(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function sg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var _f=null;function Y2(s,i,c){if(_f===null){var f=new Map,y=_f=new Map;y.set(c,f)}else y=_f,f=y.get(c),f||(f=new Map,y.set(c,f));if(f.has(s))return f;for(f.set(s,null),c=c.getElementsByTagName(s),y=0;y<c.length;y++){var j=c[y];if(!(j[ie]||j[Vt]||s==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var R=j.getAttribute(i)||"";R=s+R;var D=f.get(R);D?D.push(j):f.set(R,[j])}}return f}function Q2(s,i,c){s=s.ownerDocument||s,s.head.insertBefore(c,i==="title"?s.querySelector("head > title"):null)}function TD(s,i,c){if(c===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(s=i.disabled,typeof i.precedence=="string"&&s==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function W2(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function RD(s,i,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var y=co(f.href),j=i.querySelector(Vc(y));if(j){i=j._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(s.count++,s=Of.bind(s),i.then(s,s)),c.state.loading|=4,c.instance=j,Ut(j);return}j=i.ownerDocument||i,f=G2(f),(y=Rn.get(y))&&ag(f,y),j=j.createElement("link"),Ut(j);var R=j;R._p=new Promise(function(D,F){R.onload=D,R.onerror=F}),wr(j,"link",f),c.instance=j}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(c,i),(i=c.state.preload)&&(c.state.loading&3)===0&&(s.count++,c=Of.bind(s),i.addEventListener("load",c),i.addEventListener("error",c))}}var lg=0;function PD(s,i){return s.stylesheets&&s.count===0&&Rf(s,s.stylesheets),0<s.count||0<s.imgCount?function(c){var f=setTimeout(function(){if(s.stylesheets&&Rf(s,s.stylesheets),s.unsuspend){var j=s.unsuspend;s.unsuspend=null,j()}},6e4+i);0<s.imgBytes&&lg===0&&(lg=62500*mD());var y=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Rf(s,s.stylesheets),s.unsuspend)){var j=s.unsuspend;s.unsuspend=null,j()}},(s.imgBytes>lg?50:800)+i);return s.unsuspend=c,function(){s.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function Of(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Tf=null;function Rf(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Tf=new Map,i.forEach(DD,s),Tf=null,Of.call(s))}function DD(s,i){if(!(i.state.loading&4)){var c=Tf.get(s);if(c)var f=c.get(null);else{c=new Map,Tf.set(s,c);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<y.length;j++){var R=y[j];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(c.set(R.dataset.precedence,R),f=R)}f&&c.set(null,f)}y=i.instance,R=y.getAttribute("data-precedence"),j=c.get(R)||f,j===f&&c.set(null,y),c.set(R,y),this.count++,f=Of.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),j?j.parentNode.insertBefore(y,j.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),i.state.loading|=4}}var Qc={$$typeof:C,Provider:null,Consumer:null,_currentValue:$,_currentValue2:$,_threadCount:0};function MD(s,i,c,f,y,j,R,D,F){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=lc(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=lc(0),this.hiddenUpdates=lc(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=j,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function X2(s,i,c,f,y,j,R,D,F,re,he,je){return s=new MD(s,i,c,R,F,re,he,je,D),i=1,j===!0&&(i|=24),j=ln(3,null,null,i),s.current=j,j.stateNode=s,i=B0(),i.refCount++,s.pooledCache=i,i.refCount++,j.memoizedState={element:f,isDehydrated:c,cache:i},F0(j),s}function Z2(s){return s?(s=Ui,s):Ui}function J2(s,i,c,f,y,j){y=Z2(y),f.context===null?f.context=y:f.pendingContext=y,f=Ys(i),f.payload={element:c},j=j===void 0?null:j,j!==null&&(f.callback=j),c=Qs(s,f,i),c!==null&&(Qr(c,s,i),Ac(c,s,i))}function eS(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function ig(s,i){eS(s,i),(s=s.alternate)&&eS(s,i)}function tS(s){if(s.tag===13||s.tag===31){var i=Dl(s,67108864);i!==null&&Qr(i,s,67108864),ig(s,67108864)}}function rS(s){if(s.tag===13||s.tag===31){var i=fn();i=ic(i);var c=Dl(s,i);c!==null&&Qr(c,s,i),ig(s,i)}}var Pf=!0;function ID(s,i,c,f){var y=G.T;G.T=null;var j=J.p;try{J.p=2,og(s,i,c,f)}finally{J.p=j,G.T=y}}function LD(s,i,c,f){var y=G.T;G.T=null;var j=J.p;try{J.p=8,og(s,i,c,f)}finally{J.p=j,G.T=y}}function og(s,i,c,f){if(Pf){var y=cg(f);if(y===null)Yp(s,i,f,Df,c),aS(s,f);else if(BD(y,s,i,c,f))f.stopPropagation();else if(aS(s,f),i&4&&-1<zD.indexOf(s)){for(;y!==null;){var j=nr(y);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var R=Dr(j.pendingLanes);if(R!==0){var D=j;for(D.pendingLanes|=2,D.entangledLanes|=2;R;){var F=1<<31-Ee(R);D.entanglements[1]|=F,R&=~F}wa(j),(st&6)===0&&(pf=br()+500,Fc(0))}}break;case 31:case 13:D=Dl(j,2),D!==null&&Qr(D,j,2),bf(),ig(j,2)}if(j=cg(f),j===null&&Yp(s,i,f,Df,c),j===y)break;y=j}y!==null&&f.stopPropagation()}else Yp(s,i,f,null,c)}}function cg(s){return s=u0(s),dg(s)}var Df=null;function dg(s){if(Df=null,s=De(s),s!==null){var i=o(s);if(i===null)s=null;else{var c=i.tag;if(c===13){if(s=d(i),s!==null)return s;s=null}else if(c===31){if(s=u(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Df=s,null}function nS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(sc()){case _l:return 2;case Ti:return 8;case Wn:case rr:return 32;case Ri:return 268435456;default:return 32}default:return 32}}var ug=!1,ll=null,il=null,ol=null,Wc=new Map,Xc=new Map,cl=[],zD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function aS(s,i){switch(s){case"focusin":case"focusout":ll=null;break;case"dragenter":case"dragleave":il=null;break;case"mouseover":case"mouseout":ol=null;break;case"pointerover":case"pointerout":Wc.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(i.pointerId)}}function Zc(s,i,c,f,y,j){return s===null||s.nativeEvent!==j?(s={blockedOn:i,domEventName:c,eventSystemFlags:f,nativeEvent:j,targetContainers:[y]},i!==null&&(i=nr(i),i!==null&&tS(i)),s):(s.eventSystemFlags|=f,i=s.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),s)}function BD(s,i,c,f,y){switch(i){case"focusin":return ll=Zc(ll,s,i,c,f,y),!0;case"dragenter":return il=Zc(il,s,i,c,f,y),!0;case"mouseover":return ol=Zc(ol,s,i,c,f,y),!0;case"pointerover":var j=y.pointerId;return Wc.set(j,Zc(Wc.get(j)||null,s,i,c,f,y)),!0;case"gotpointercapture":return j=y.pointerId,Xc.set(j,Zc(Xc.get(j)||null,s,i,c,f,y)),!0}return!1}function sS(s){var i=De(s.target);if(i!==null){var c=o(i);if(c!==null){if(i=c.tag,i===13){if(i=d(c),i!==null){s.blockedOn=i,Su(s.priority,function(){rS(c)});return}}else if(i===31){if(i=u(c),i!==null){s.blockedOn=i,Su(s.priority,function(){rS(c)});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Mf(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=cg(s.nativeEvent);if(c===null){c=s.nativeEvent;var f=new c.constructor(c.type,c);d0=f,c.target.dispatchEvent(f),d0=null}else return i=nr(c),i!==null&&tS(i),s.blockedOn=c,!1;i.shift()}return!0}function lS(s,i,c){Mf(s)&&c.delete(i)}function $D(){ug=!1,ll!==null&&Mf(ll)&&(ll=null),il!==null&&Mf(il)&&(il=null),ol!==null&&Mf(ol)&&(ol=null),Wc.forEach(lS),Xc.forEach(lS)}function If(s,i){s.blockedOn===i&&(s.blockedOn=null,ug||(ug=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,$D)))}var Lf=null;function iS(s){Lf!==s&&(Lf=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Lf===s&&(Lf=null);for(var i=0;i<s.length;i+=3){var c=s[i],f=s[i+1],y=s[i+2];if(typeof f!="function"){if(dg(f||c)===null)continue;break}var j=nr(c);j!==null&&(s.splice(i,3),i-=3,cp(j,{pending:!0,data:y,method:c.method,action:f},f,y))}}))}function fo(s){function i(F){return If(F,s)}ll!==null&&If(ll,s),il!==null&&If(il,s),ol!==null&&If(ol,s),Wc.forEach(i),Xc.forEach(i);for(var c=0;c<cl.length;c++){var f=cl[c];f.blockedOn===s&&(f.blockedOn=null)}for(;0<cl.length&&(c=cl[0],c.blockedOn===null);)sS(c),c.blockedOn===null&&cl.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var y=c[f],j=c[f+1],R=y[yr]||null;if(typeof j=="function")R||iS(c);else if(R){var D=null;if(j&&j.hasAttribute("formAction")){if(y=j,R=j[yr]||null)D=R.formAction;else if(dg(y)!==null)continue}else D=R.action;typeof D=="function"?c[f+1]=D:(c.splice(f,3),f-=3),iS(c)}}}function oS(){function s(j){j.canIntercept&&j.info==="react-transition"&&j.intercept({handler:function(){return new Promise(function(R){return y=R})},focusReset:"manual",scroll:"manual"})}function i(){y!==null&&(y(),y=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var j=navigation.currentEntry;j&&j.url!=null&&navigation.navigate(j.url,{state:j.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),y!==null&&(y(),y=null)}}}function fg(s){this._internalRoot=s}zf.prototype.render=fg.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(a(409));var c=i.current,f=fn();J2(c,f,s,i,null,null)},zf.prototype.unmount=fg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;J2(s.current,2,null,s,null,null),bf(),i[zs]=null}};function zf(s){this._internalRoot=s}zf.prototype.unstable_scheduleHydration=function(s){if(s){var i=cc();s={blockedOn:null,target:s,priority:i};for(var c=0;c<cl.length&&i!==0&&i<cl[c].priority;c++);cl.splice(c,0,s),c===0&&sS(s)}};var cS=t.version;if(cS!=="19.2.3")throw Error(a(527,cS,"19.2.3"));J.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(a(188)):(s=Object.keys(s).join(","),Error(a(268,s)));return s=h(i),s=s!==null?x(s):null,s=s===null?null:s.stateNode,s};var UD={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bf.isDisabled&&Bf.supportsFiber)try{Ne=Bf.inject(UD),Ae=Bf}catch{}}return ed.createRoot=function(s,i){if(!l(s))throw Error(a(299));var c=!1,f="",y=pw,j=gw,R=bw;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(f=i.identifierPrefix),i.onUncaughtError!==void 0&&(y=i.onUncaughtError),i.onCaughtError!==void 0&&(j=i.onCaughtError),i.onRecoverableError!==void 0&&(R=i.onRecoverableError)),i=X2(s,1,!1,null,null,c,f,null,y,j,R,oS),s[zs]=i.current,Vp(s),new fg(i)},ed.hydrateRoot=function(s,i,c){if(!l(s))throw Error(a(299));var f=!1,y="",j=pw,R=gw,D=bw,F=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(j=c.onUncaughtError),c.onCaughtError!==void 0&&(R=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.formState!==void 0&&(F=c.formState)),i=X2(s,1,!0,i,c??null,f,y,F,j,R,D,oS),i.context=Z2(null),c=i.current,f=fn(),f=ic(f),y=Ys(f),y.callback=null,Qs(c,y,f),c=f,i.current.lanes=c,Ol(i,c),wa(i),s[zs]=i.current,Vp(s),new zf(i)},ed.version="19.2.3",ed}var yS;function ZD(){if(yS)return xg.exports;yS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xg.exports=XD(),xg.exports}var JD=ZD();const eM=qa(JD);var vS="popstate";function tM(e={}){function t(a,l){let{pathname:o,search:d,hash:u}=a.location;return dy("",{pathname:o,search:d,hash:u},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){return typeof l=="string"?l:wd(l)}return nM(t,n,null,e)}function Ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Un(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function rM(){return Math.random().toString(36).substring(2,10)}function jS(e,t){return{usr:e.state,key:e.key,idx:t}}function dy(e,t,n=null,a){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Fo(t):t,state:n,key:t&&t.key||a||rM()}}function wd({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Fo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function nM(e,t,n,a={}){let{window:l=document.defaultView,v5Compat:o=!1}=a,d=l.history,u="POP",m=null,h=x();h==null&&(h=0,d.replaceState({...d.state,idx:h},""));function x(){return(d.state||{idx:null}).idx}function p(){u="POP";let S=x(),A=S==null?null:S-h;h=S,m&&m({action:u,location:w.location,delta:A})}function b(S,A){u="PUSH";let E=dy(w.location,S,A);h=x()+1;let C=jS(E,h),O=w.createHref(E);try{d.pushState(C,"",O)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;l.location.assign(O)}o&&m&&m({action:u,location:w.location,delta:1})}function N(S,A){u="REPLACE";let E=dy(w.location,S,A);h=x();let C=jS(E,h),O=w.createHref(E);d.replaceState(C,"",O),o&&m&&m({action:u,location:w.location,delta:0})}function v(S){return aM(S)}let w={get action(){return u},get location(){return e(l,d)},listen(S){if(m)throw new Error("A history only accepts one active listener");return l.addEventListener(vS,p),m=S,()=>{l.removeEventListener(vS,p),m=null}},createHref(S){return t(l,S)},createURL:v,encodeLocation(S){let A=v(S);return{pathname:A.pathname,search:A.search,hash:A.hash}},push:b,replace:N,go(S){return d.go(S)}};return w}function aM(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Ot(n,"No window.location.(origin|href) available to create URL");let a=typeof e=="string"?e:wd(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=n+a),new URL(a,n)}function bk(e,t,n="/"){return sM(e,t,n,!1)}function sM(e,t,n,a){let l=typeof t=="string"?Fo(t):t,o=bs(l.pathname||"/",n);if(o==null)return null;let d=yk(e);lM(d);let u=null;for(let m=0;u==null&&m<d.length;++m){let h=gM(o);u=xM(d[m],h,a)}return u}function yk(e,t=[],n=[],a="",l=!1){let o=(d,u,m=l,h)=>{let x={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};if(x.relativePath.startsWith("/")){if(!x.relativePath.startsWith(a)&&m)return;Ot(x.relativePath.startsWith(a),`Absolute route path "${x.relativePath}" nested under path "${a}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),x.relativePath=x.relativePath.slice(a.length)}let p=xs([a,x.relativePath]),b=n.concat(x);d.children&&d.children.length>0&&(Ot(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),yk(d.children,t,b,p,m)),!(d.path==null&&!d.index)&&t.push({path:p,score:mM(p,d.index),routesMeta:b})};return e.forEach((d,u)=>{if(d.path===""||!d.path?.includes("?"))o(d,u);else for(let m of vk(d.path))o(d,u,!0,m)}),t}function vk(e){let t=e.split("/");if(t.length===0)return[];let[n,...a]=t,l=n.endsWith("?"),o=n.replace(/\?$/,"");if(a.length===0)return l?[o,""]:[o];let d=vk(a.join("/")),u=[];return u.push(...d.map(m=>m===""?o:[o,m].join("/"))),l&&u.push(...d),u.map(m=>e.startsWith("/")&&m===""?"/":m)}function lM(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:hM(t.routesMeta.map(a=>a.childrenIndex),n.routesMeta.map(a=>a.childrenIndex)))}var iM=/^:[\w-]+$/,oM=3,cM=2,dM=1,uM=10,fM=-2,NS=e=>e==="*";function mM(e,t){let n=e.split("/"),a=n.length;return n.some(NS)&&(a+=fM),t&&(a+=cM),n.filter(l=>!NS(l)).reduce((l,o)=>l+(iM.test(o)?oM:o===""?dM:uM),a)}function hM(e,t){return e.length===t.length&&e.slice(0,-1).every((a,l)=>a===t[l])?e[e.length-1]-t[t.length-1]:0}function xM(e,t,n=!1){let{routesMeta:a}=e,l={},o="/",d=[];for(let u=0;u<a.length;++u){let m=a[u],h=u===a.length-1,x=o==="/"?t:t.slice(o.length)||"/",p=Rm({path:m.relativePath,caseSensitive:m.caseSensitive,end:h},x),b=m.route;if(!p&&h&&n&&!a[a.length-1].route.index&&(p=Rm({path:m.relativePath,caseSensitive:m.caseSensitive,end:!1},x)),!p)return null;Object.assign(l,p.params),d.push({params:l,pathname:xs([o,p.pathname]),pathnameBase:jM(xs([o,p.pathnameBase])),route:b}),p.pathnameBase!=="/"&&(o=xs([o,p.pathnameBase]))}return d}function Rm(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,a]=pM(e.path,e.caseSensitive,e.end),l=t.match(n);if(!l)return null;let o=l[0],d=o.replace(/(.)\/+$/,"$1"),u=l.slice(1);return{params:a.reduce((h,{paramName:x,isOptional:p},b)=>{if(x==="*"){let v=u[b]||"";d=o.slice(0,o.length-v.length).replace(/(.)\/+$/,"$1")}const N=u[b];return p&&!N?h[x]=void 0:h[x]=(N||"").replace(/%2F/g,"/"),h},{}),pathname:o,pathnameBase:d,pattern:e}}function pM(e,t=!1,n=!0){Un(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,u,m)=>(a.push({paramName:u,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),l+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?l+="\\/*$":e!==""&&e!=="/"&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function gM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Un(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function bs(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,a=e.charAt(n);return a&&a!=="/"?null:e.slice(n)||"/"}var jk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bM=e=>jk.test(e);function yM(e,t="/"){let{pathname:n,search:a="",hash:l=""}=typeof e=="string"?Fo(e):e,o;if(n)if(bM(n))o=n;else{if(n.includes("//")){let d=n;n=n.replace(/\/\/+/g,"/"),Un(!1,`Pathnames cannot have embedded double slashes - normalizing ${d} -> ${n}`)}n.startsWith("/")?o=wS(n.substring(1),"/"):o=wS(n,t)}else o=t;return{pathname:o,search:NM(a),hash:wM(l)}}function wS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(l=>{l===".."?n.length>1&&n.pop():l!=="."&&n.push(l)}),n.length>1?n.join("/"):"/"}function yg(e,t,n,a){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(a)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function vM(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function jv(e){let t=vM(e);return t.map((n,a)=>a===t.length-1?n.pathname:n.pathnameBase)}function Nv(e,t,n,a=!1){let l;typeof e=="string"?l=Fo(e):(l={...e},Ot(!l.pathname||!l.pathname.includes("?"),yg("?","pathname","search",l)),Ot(!l.pathname||!l.pathname.includes("#"),yg("#","pathname","hash",l)),Ot(!l.search||!l.search.includes("#"),yg("#","search","hash",l)));let o=e===""||l.pathname==="",d=o?"/":l.pathname,u;if(d==null)u=n;else{let p=t.length-1;if(!a&&d.startsWith("..")){let b=d.split("/");for(;b[0]==="..";)b.shift(),p-=1;l.pathname=b.join("/")}u=p>=0?t[p]:"/"}let m=yM(l,u),h=d&&d!=="/"&&d.endsWith("/"),x=(o||d===".")&&n.endsWith("/");return!m.pathname.endsWith("/")&&(h||x)&&(m.pathname+="/"),m}var xs=e=>e.join("/").replace(/\/\/+/g,"/"),jM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),NM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,wM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,SM=class{constructor(e,t,n,a=!1){this.status=e,this.statusText=t||"",this.internal=a,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function EM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}function CM(e){return e.map(t=>t.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Nk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function wk(e,t){let n=e;if(typeof n!="string"||!jk.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let a=n,l=!1;if(Nk)try{let o=new URL(window.location.href),d=n.startsWith("//")?new URL(o.protocol+n):new URL(n),u=bs(d.pathname,t);d.origin===o.origin&&u!=null?n=u+d.search+d.hash:l=!0}catch{Un(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:a,isExternal:l,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Sk=["POST","PUT","PATCH","DELETE"];new Set(Sk);var AM=["GET",...Sk];new Set(AM);var Ho=g.createContext(null);Ho.displayName="DataRouter";var Wh=g.createContext(null);Wh.displayName="DataRouterState";var kM=g.createContext(!1),Ek=g.createContext({isTransitioning:!1});Ek.displayName="ViewTransition";var _M=g.createContext(new Map);_M.displayName="Fetchers";var OM=g.createContext(null);OM.displayName="Await";var Nn=g.createContext(null);Nn.displayName="Navigation";var Kd=g.createContext(null);Kd.displayName="Location";var oa=g.createContext({outlet:null,matches:[],isDataRoute:!1});oa.displayName="Route";var wv=g.createContext(null);wv.displayName="RouteError";var Ck="REACT_ROUTER_ERROR",TM="REDIRECT",RM="ROUTE_ERROR_RESPONSE";function PM(e){if(e.startsWith(`${Ck}:${TM}:{`))try{let t=JSON.parse(e.slice(28));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.location=="string"&&typeof t.reloadDocument=="boolean"&&typeof t.replace=="boolean")return t}catch{}}function DM(e){if(e.startsWith(`${Ck}:${RM}:{`))try{let t=JSON.parse(e.slice(40));if(typeof t=="object"&&t&&typeof t.status=="number"&&typeof t.statusText=="string")return new SM(t.status,t.statusText,t.data)}catch{}}function MM(e,{relative:t}={}){Ot(Ko(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:a}=g.useContext(Nn),{hash:l,pathname:o,search:d}=Gd(e,{relative:t}),u=o;return n!=="/"&&(u=o==="/"?n:xs([n,o])),a.createHref({pathname:u,search:d,hash:l})}function Ko(){return g.useContext(Kd)!=null}function ks(){return Ot(Ko(),"useLocation() may be used only in the context of a <Router> component."),g.useContext(Kd).location}var Ak="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function kk(e){g.useContext(Nn).static||g.useLayoutEffect(e)}function ca(){let{isDataRoute:e}=g.useContext(oa);return e?WM():IM()}function IM(){Ot(Ko(),"useNavigate() may be used only in the context of a <Router> component.");let e=g.useContext(Ho),{basename:t,navigator:n}=g.useContext(Nn),{matches:a}=g.useContext(oa),{pathname:l}=ks(),o=JSON.stringify(jv(a)),d=g.useRef(!1);return kk(()=>{d.current=!0}),g.useCallback((m,h={})=>{if(Un(d.current,Ak),!d.current)return;if(typeof m=="number"){n.go(m);return}let x=Nv(m,JSON.parse(o),l,h.relative==="path");e==null&&t!=="/"&&(x.pathname=x.pathname==="/"?t:xs([t,x.pathname])),(h.replace?n.replace:n.push)(x,h.state,h)},[t,n,o,l,e])}var LM=g.createContext(null);function zM(e){let t=g.useContext(oa).outlet;return g.useMemo(()=>t&&g.createElement(LM.Provider,{value:e},t),[t,e])}function Gd(e,{relative:t}={}){let{matches:n}=g.useContext(oa),{pathname:a}=ks(),l=JSON.stringify(jv(n));return g.useMemo(()=>Nv(e,JSON.parse(l),a,t==="path"),[e,l,a,t])}function BM(e,t){return _k(e,t)}function _k(e,t,n,a,l){Ot(Ko(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=g.useContext(Nn),{matches:d}=g.useContext(oa),u=d[d.length-1],m=u?u.params:{},h=u?u.pathname:"/",x=u?u.pathnameBase:"/",p=u&&u.route;{let E=p&&p.path||"";Tk(h,!p||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let b=ks(),N;if(t){let E=typeof t=="string"?Fo(t):t;Ot(x==="/"||E.pathname?.startsWith(x),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${E.pathname}" was given in the \`location\` prop.`),N=E}else N=b;let v=N.pathname||"/",w=v;if(x!=="/"){let E=x.replace(/^\//,"").split("/");w="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let S=bk(e,{pathname:w});Un(p||S!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Un(S==null||S[S.length-1].route.element!==void 0||S[S.length-1].route.Component!==void 0||S[S.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let A=HM(S&&S.map(E=>Object.assign({},E,{params:Object.assign({},m,E.params),pathname:xs([x,o.encodeLocation?o.encodeLocation(E.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?x:xs([x,o.encodeLocation?o.encodeLocation(E.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:E.pathnameBase])})),d,n,a,l);return t&&A?g.createElement(Kd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},A):A}function $M(){let e=QM(),t=EM(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},o={padding:"2px 4px",backgroundColor:a},d=null;return console.error("Error handled by React Router default ErrorBoundary:",e),d=g.createElement(g.Fragment,null,g.createElement("p",null," Hey developer "),g.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",g.createElement("code",{style:o},"ErrorBoundary")," or"," ",g.createElement("code",{style:o},"errorElement")," prop on your route.")),g.createElement(g.Fragment,null,g.createElement("h2",null,"Unexpected Application Error!"),g.createElement("h3",{style:{fontStyle:"italic"}},t),n?g.createElement("pre",{style:l},n):null,d)}var UM=g.createElement($M,null),Ok=class extends g.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.onError?this.props.onError(e,t):console.error("React Router caught the following error during render",e)}render(){let e=this.state.error;if(this.context&&typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){const n=DM(e.digest);n&&(e=n)}let t=e!==void 0?g.createElement(oa.Provider,{value:this.props.routeContext},g.createElement(wv.Provider,{value:e,children:this.props.component})):this.props.children;return this.context?g.createElement(qM,{error:e},t):t}};Ok.contextType=kM;var vg=new WeakMap;function qM({children:e,error:t}){let{basename:n}=g.useContext(Nn);if(typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){let a=PM(t.digest);if(a){let l=vg.get(t);if(l)throw l;let o=wk(a.location,n);if(Nk&&!vg.get(t))if(o.isExternal||a.reloadDocument)window.location.href=o.absoluteURL||o.to;else{const d=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(o.to,{replace:a.replace}));throw vg.set(t,d),d}return g.createElement("meta",{httpEquiv:"refresh",content:`0;url=${o.absoluteURL||o.to}`})}}return e}function FM({routeContext:e,match:t,children:n}){let a=g.useContext(Ho);return a&&a.static&&a.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=t.route.id),g.createElement(oa.Provider,{value:e},n)}function HM(e,t=[],n=null,a=null,l=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,d=n?.errors;if(d!=null){let x=o.findIndex(p=>p.route.id&&d?.[p.route.id]!==void 0);Ot(x>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,x+1))}let u=!1,m=-1;if(n)for(let x=0;x<o.length;x++){let p=o[x];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(m=x),p.route.id){let{loaderData:b,errors:N}=n,v=p.route.loader&&!b.hasOwnProperty(p.route.id)&&(!N||N[p.route.id]===void 0);if(p.route.lazy||v){u=!0,m>=0?o=o.slice(0,m+1):o=[o[0]];break}}}let h=n&&a?(x,p)=>{a(x,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:CM(n.matches),errorInfo:p})}:void 0;return o.reduceRight((x,p,b)=>{let N,v=!1,w=null,S=null;n&&(N=d&&p.route.id?d[p.route.id]:void 0,w=p.route.errorElement||UM,u&&(m<0&&b===0?(Tk("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):m===b&&(v=!0,S=p.route.hydrateFallbackElement||null)));let A=t.concat(o.slice(0,b+1)),E=()=>{let C;return N?C=w:v?C=S:p.route.Component?C=g.createElement(p.route.Component,null):p.route.element?C=p.route.element:C=x,g.createElement(FM,{match:p,routeContext:{outlet:x,matches:A,isDataRoute:n!=null},children:C})};return n&&(p.route.ErrorBoundary||p.route.errorElement||b===0)?g.createElement(Ok,{location:n.location,revalidation:n.revalidation,component:w,error:N,children:E(),routeContext:{outlet:null,matches:A,isDataRoute:!0},onError:h}):E()},null)}function Sv(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function KM(e){let t=g.useContext(Ho);return Ot(t,Sv(e)),t}function GM(e){let t=g.useContext(Wh);return Ot(t,Sv(e)),t}function VM(e){let t=g.useContext(oa);return Ot(t,Sv(e)),t}function Ev(e){let t=VM(e),n=t.matches[t.matches.length-1];return Ot(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function YM(){return Ev("useRouteId")}function QM(){let e=g.useContext(wv),t=GM("useRouteError"),n=Ev("useRouteError");return e!==void 0?e:t.errors?.[n]}function WM(){let{router:e}=KM("useNavigate"),t=Ev("useNavigate"),n=g.useRef(!1);return kk(()=>{n.current=!0}),g.useCallback(async(l,o={})=>{Un(n.current,Ak),n.current&&(typeof l=="number"?await e.navigate(l):await e.navigate(l,{fromRouteId:t,...o}))},[e,t])}var SS={};function Tk(e,t,n){!t&&!SS[e]&&(SS[e]=!0,Un(!1,n))}g.memo(XM);function XM({routes:e,future:t,state:n,onError:a}){return _k(e,void 0,n,a,t)}function Pm({to:e,replace:t,state:n,relative:a}){Ot(Ko(),"<Navigate> may be used only in the context of a <Router> component.");let{static:l}=g.useContext(Nn);Un(!l,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=g.useContext(oa),{pathname:d}=ks(),u=ca(),m=Nv(e,jv(o),d,a==="path"),h=JSON.stringify(m);return g.useEffect(()=>{u(JSON.parse(h),{replace:t,state:n,relative:a})},[u,h,a,t,n]),null}function ZM(e){return zM(e.context)}function lt(e){Ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function JM({basename:e="/",children:t=null,location:n,navigationType:a="POP",navigator:l,static:o=!1,unstable_useTransitions:d}){Ot(!Ko(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),m=g.useMemo(()=>({basename:u,navigator:l,static:o,unstable_useTransitions:d,future:{}}),[u,l,o,d]);typeof n=="string"&&(n=Fo(n));let{pathname:h="/",search:x="",hash:p="",state:b=null,key:N="default"}=n,v=g.useMemo(()=>{let w=bs(h,u);return w==null?null:{location:{pathname:w,search:x,hash:p,state:b,key:N},navigationType:a}},[u,h,x,p,b,N,a]);return Un(v!=null,`<Router basename="${u}"> is not able to match the URL "${h}${x}${p}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:g.createElement(Nn.Provider,{value:m},g.createElement(Kd.Provider,{children:t,value:v}))}function Rk({children:e,location:t}){return BM(uy(e),t)}function uy(e,t=[]){let n=[];return g.Children.forEach(e,(a,l)=>{if(!g.isValidElement(a))return;let o=[...t,l];if(a.type===g.Fragment){n.push.apply(n,uy(a.props.children,o));return}Ot(a.type===lt,`[${typeof a.type=="string"?a.type:a.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Ot(!a.props.index||!a.props.children,"An index route cannot have child routes.");let d={id:a.props.id||o.join("-"),caseSensitive:a.props.caseSensitive,element:a.props.element,Component:a.props.Component,index:a.props.index,path:a.props.path,middleware:a.props.middleware,loader:a.props.loader,action:a.props.action,hydrateFallbackElement:a.props.hydrateFallbackElement,HydrateFallback:a.props.HydrateFallback,errorElement:a.props.errorElement,ErrorBoundary:a.props.ErrorBoundary,hasErrorBoundary:a.props.hasErrorBoundary===!0||a.props.ErrorBoundary!=null||a.props.errorElement!=null,shouldRevalidate:a.props.shouldRevalidate,handle:a.props.handle,lazy:a.props.lazy};a.props.children&&(d.children=uy(a.props.children,o)),n.push(d)}),n}var pm="get",gm="application/x-www-form-urlencoded";function Xh(e){return typeof HTMLElement<"u"&&e instanceof HTMLElement}function eI(e){return Xh(e)&&e.tagName.toLowerCase()==="button"}function tI(e){return Xh(e)&&e.tagName.toLowerCase()==="form"}function rI(e){return Xh(e)&&e.tagName.toLowerCase()==="input"}function nI(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function aI(e,t){return e.button===0&&(!t||t==="_self")&&!nI(e)}var $f=null;function sI(){if($f===null)try{new FormData(document.createElement("form"),0),$f=!1}catch{$f=!0}return $f}var lI=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function jg(e){return e!=null&&!lI.has(e)?(Un(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gm}"`),null):e}function iI(e,t){let n,a,l,o,d;if(tI(e)){let u=e.getAttribute("action");a=u?bs(u,t):null,n=e.getAttribute("method")||pm,l=jg(e.getAttribute("enctype"))||gm,o=new FormData(e)}else if(eI(e)||rI(e)&&(e.type==="submit"||e.type==="image")){let u=e.form;if(u==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let m=e.getAttribute("formaction")||u.getAttribute("action");if(a=m?bs(m,t):null,n=e.getAttribute("formmethod")||u.getAttribute("method")||pm,l=jg(e.getAttribute("formenctype"))||jg(u.getAttribute("enctype"))||gm,o=new FormData(u,e),!sI()){let{name:h,type:x,value:p}=e;if(x==="image"){let b=h?`${h}.`:"";o.append(`${b}x`,"0"),o.append(`${b}y`,"0")}else h&&o.append(h,p)}}else{if(Xh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pm,a=null,l=gm,d=e}return o&&l==="text/plain"&&(d=o,o=void 0),{action:a,method:n.toLowerCase(),encType:l,formData:o,body:d}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Cv(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function oI(e,t,n,a){let l=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n?l.pathname.endsWith("/")?l.pathname=`${l.pathname}_.${a}`:l.pathname=`${l.pathname}.${a}`:l.pathname==="/"?l.pathname=`_root.${a}`:t&&bs(l.pathname,t)==="/"?l.pathname=`${t.replace(/\/$/,"")}/_root.${a}`:l.pathname=`${l.pathname.replace(/\/$/,"")}.${a}`,l}async function cI(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function dI(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function uI(e,t,n){let a=await Promise.all(e.map(async l=>{let o=t.routes[l.route.id];if(o){let d=await cI(o,n);return d.links?d.links():[]}return[]}));return xI(a.flat(1).filter(dI).filter(l=>l.rel==="stylesheet"||l.rel==="preload").map(l=>l.rel==="stylesheet"?{...l,rel:"prefetch",as:"style"}:{...l,rel:"prefetch"}))}function ES(e,t,n,a,l,o){let d=(m,h)=>n[h]?m.route.id!==n[h].route.id:!0,u=(m,h)=>n[h].pathname!==m.pathname||n[h].route.path?.endsWith("*")&&n[h].params["*"]!==m.params["*"];return o==="assets"?t.filter((m,h)=>d(m,h)||u(m,h)):o==="data"?t.filter((m,h)=>{let x=a.routes[m.route.id];if(!x||!x.hasLoader)return!1;if(d(m,h)||u(m,h))return!0;if(m.route.shouldRevalidate){let p=m.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:m.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function fI(e,t,{includeHydrateFallback:n}={}){return mI(e.map(a=>{let l=t.routes[a.route.id];if(!l)return[];let o=[l.module];return l.clientActionModule&&(o=o.concat(l.clientActionModule)),l.clientLoaderModule&&(o=o.concat(l.clientLoaderModule)),n&&l.hydrateFallbackModule&&(o=o.concat(l.hydrateFallbackModule)),l.imports&&(o=o.concat(l.imports)),o}).flat(1))}function mI(e){return[...new Set(e)]}function hI(e){let t={},n=Object.keys(e).sort();for(let a of n)t[a]=e[a];return t}function xI(e,t){let n=new Set;return new Set(t),e.reduce((a,l)=>{let o=JSON.stringify(hI(l));return n.has(o)||(n.add(o),a.push({key:o,link:l})),a},[])}function Pk(){let e=g.useContext(Ho);return Cv(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function pI(){let e=g.useContext(Wh);return Cv(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Av=g.createContext(void 0);Av.displayName="FrameworkContext";function Dk(){let e=g.useContext(Av);return Cv(e,"You must render this element inside a <HydratedRouter> element"),e}function gI(e,t){let n=g.useContext(Av),[a,l]=g.useState(!1),[o,d]=g.useState(!1),{onFocus:u,onBlur:m,onMouseEnter:h,onMouseLeave:x,onTouchStart:p}=t,b=g.useRef(null);g.useEffect(()=>{if(e==="render"&&d(!0),e==="viewport"){let w=A=>{A.forEach(E=>{d(E.isIntersecting)})},S=new IntersectionObserver(w,{threshold:.5});return b.current&&S.observe(b.current),()=>{S.disconnect()}}},[e]),g.useEffect(()=>{if(a){let w=setTimeout(()=>{d(!0)},100);return()=>{clearTimeout(w)}}},[a]);let N=()=>{l(!0)},v=()=>{l(!1),d(!1)};return n?e!=="intent"?[o,b,{}]:[o,b,{onFocus:td(u,N),onBlur:td(m,v),onMouseEnter:td(h,N),onMouseLeave:td(x,v),onTouchStart:td(p,N)}]:[!1,b,{}]}function td(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function bI({page:e,...t}){let{router:n}=Pk(),a=g.useMemo(()=>bk(n.routes,e,n.basename),[n.routes,e,n.basename]);return a?g.createElement(vI,{page:e,matches:a,...t}):null}function yI(e){let{manifest:t,routeModules:n}=Dk(),[a,l]=g.useState([]);return g.useEffect(()=>{let o=!1;return uI(e,t,n).then(d=>{o||l(d)}),()=>{o=!0}},[e,t,n]),a}function vI({page:e,matches:t,...n}){let a=ks(),{future:l,manifest:o,routeModules:d}=Dk(),{basename:u}=Pk(),{loaderData:m,matches:h}=pI(),x=g.useMemo(()=>ES(e,t,h,o,a,"data"),[e,t,h,o,a]),p=g.useMemo(()=>ES(e,t,h,o,a,"assets"),[e,t,h,o,a]),b=g.useMemo(()=>{if(e===a.pathname+a.search+a.hash)return[];let w=new Set,S=!1;if(t.forEach(E=>{let C=o.routes[E.route.id];!C||!C.hasLoader||(!x.some(O=>O.route.id===E.route.id)&&E.route.id in m&&d[E.route.id]?.shouldRevalidate||C.hasClientLoader?S=!0:w.add(E.route.id))}),w.size===0)return[];let A=oI(e,u,l.unstable_trailingSlashAwareDataRequests,"data");return S&&w.size>0&&A.searchParams.set("_routes",t.filter(E=>w.has(E.route.id)).map(E=>E.route.id).join(",")),[A.pathname+A.search]},[u,l.unstable_trailingSlashAwareDataRequests,m,a,o,x,t,e,d]),N=g.useMemo(()=>fI(p,o),[p,o]),v=yI(p);return g.createElement(g.Fragment,null,b.map(w=>g.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...n})),N.map(w=>g.createElement("link",{key:w,rel:"modulepreload",href:w,...n})),v.map(({key:w,link:S})=>g.createElement("link",{key:w,nonce:n.nonce,...S})))}function jI(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var NI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{NI&&(window.__reactRouterVersion="7.12.0")}catch{}function wI({basename:e,children:t,unstable_useTransitions:n,window:a}){let l=g.useRef();l.current==null&&(l.current=tM({window:a,v5Compat:!0}));let o=l.current,[d,u]=g.useState({action:o.action,location:o.location}),m=g.useCallback(h=>{n===!1?u(h):g.startTransition(()=>u(h))},[n]);return g.useLayoutEffect(()=>o.listen(m),[o,m]),g.createElement(JM,{basename:e,children:t,location:d.location,navigationType:d.action,navigator:o,unstable_useTransitions:n})}var Mk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Co=g.forwardRef(function({onClick:t,discover:n="render",prefetch:a="none",relative:l,reloadDocument:o,replace:d,state:u,target:m,to:h,preventScrollReset:x,viewTransition:p,unstable_defaultShouldRevalidate:b,...N},v){let{basename:w,unstable_useTransitions:S}=g.useContext(Nn),A=typeof h=="string"&&Mk.test(h),E=wk(h,w);h=E.to;let C=MM(h,{relative:l}),[O,k,_]=gI(a,N),T=CI(h,{replace:d,state:u,target:m,preventScrollReset:x,relative:l,viewTransition:p,unstable_defaultShouldRevalidate:b,unstable_useTransitions:S});function P(z){t&&t(z),z.defaultPrevented||T(z)}let L=g.createElement("a",{...N,..._,href:E.absoluteURL||C,onClick:E.isExternal||o?t:P,ref:jI(v,k),target:m,"data-discover":!A&&n==="render"?"true":void 0});return O&&!A?g.createElement(g.Fragment,null,L,g.createElement(bI,{page:C})):L});Co.displayName="Link";var kv=g.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:a="",end:l=!1,style:o,to:d,viewTransition:u,children:m,...h},x){let p=Gd(d,{relative:h.relative}),b=ks(),N=g.useContext(Wh),{navigator:v,basename:w}=g.useContext(Nn),S=N!=null&&TI(p)&&u===!0,A=v.encodeLocation?v.encodeLocation(p).pathname:p.pathname,E=b.pathname,C=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;n||(E=E.toLowerCase(),C=C?C.toLowerCase():null,A=A.toLowerCase()),C&&w&&(C=bs(C,w)||C);const O=A!=="/"&&A.endsWith("/")?A.length-1:A.length;let k=E===A||!l&&E.startsWith(A)&&E.charAt(O)==="/",_=C!=null&&(C===A||!l&&C.startsWith(A)&&C.charAt(A.length)==="/"),T={isActive:k,isPending:_,isTransitioning:S},P=k?t:void 0,L;typeof a=="function"?L=a(T):L=[a,k?"active":null,_?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let z=typeof o=="function"?o(T):o;return g.createElement(Co,{...h,"aria-current":P,className:L,ref:x,style:z,to:d,viewTransition:u},typeof m=="function"?m(T):m)});kv.displayName="NavLink";var SI=g.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:a,replace:l,state:o,method:d=pm,action:u,onSubmit:m,relative:h,preventScrollReset:x,viewTransition:p,unstable_defaultShouldRevalidate:b,...N},v)=>{let{unstable_useTransitions:w}=g.useContext(Nn),S=_I(),A=OI(u,{relative:h}),E=d.toLowerCase()==="get"?"get":"post",C=typeof u=="string"&&Mk.test(u),O=k=>{if(m&&m(k),k.defaultPrevented)return;k.preventDefault();let _=k.nativeEvent.submitter,T=_?.getAttribute("formmethod")||d,P=()=>S(_||k.currentTarget,{fetcherKey:t,method:T,navigate:n,replace:l,state:o,relative:h,preventScrollReset:x,viewTransition:p,unstable_defaultShouldRevalidate:b});w&&n!==!1?g.startTransition(()=>P()):P()};return g.createElement("form",{ref:v,method:E,action:A,onSubmit:a?m:O,...N,"data-discover":!C&&e==="render"?"true":void 0})});SI.displayName="Form";function EI(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ik(e){let t=g.useContext(Ho);return Ot(t,EI(e)),t}function CI(e,{target:t,replace:n,state:a,preventScrollReset:l,relative:o,viewTransition:d,unstable_defaultShouldRevalidate:u,unstable_useTransitions:m}={}){let h=ca(),x=ks(),p=Gd(e,{relative:o});return g.useCallback(b=>{if(aI(b,t)){b.preventDefault();let N=n!==void 0?n:wd(x)===wd(p),v=()=>h(e,{replace:N,state:a,preventScrollReset:l,relative:o,viewTransition:d,unstable_defaultShouldRevalidate:u});m?g.startTransition(()=>v()):v()}},[x,h,p,n,a,t,e,l,o,d,u,m])}var AI=0,kI=()=>`__${String(++AI)}__`;function _I(){let{router:e}=Ik("useSubmit"),{basename:t}=g.useContext(Nn),n=YM(),a=e.fetch,l=e.navigate;return g.useCallback(async(o,d={})=>{let{action:u,method:m,encType:h,formData:x,body:p}=iI(o,t);if(d.navigate===!1){let b=d.fetcherKey||kI();await a(b,n,d.action||u,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:p,formMethod:d.method||m,formEncType:d.encType||h,flushSync:d.flushSync})}else await l(d.action||u,{unstable_defaultShouldRevalidate:d.unstable_defaultShouldRevalidate,preventScrollReset:d.preventScrollReset,formData:x,body:p,formMethod:d.method||m,formEncType:d.encType||h,replace:d.replace,state:d.state,fromRouteId:n,flushSync:d.flushSync,viewTransition:d.viewTransition})},[a,l,t,n])}function OI(e,{relative:t}={}){let{basename:n}=g.useContext(Nn),a=g.useContext(oa);Ot(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),o={...Gd(e||".",{relative:t})},d=ks();if(e==null){o.search=d.search;let u=new URLSearchParams(o.search),m=u.getAll("index");if(m.some(x=>x==="")){u.delete("index"),m.filter(p=>p).forEach(p=>u.append("index",p));let x=u.toString();o.search=x?`?${x}`:""}}return(!e||e===".")&&l.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(o.pathname=o.pathname==="/"?n:xs([n,o.pathname])),wd(o)}function TI(e,{relative:t}={}){let n=g.useContext(Ek);Ot(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=Ik("useViewTransitionState"),l=Gd(e,{relative:t});if(!n.isTransitioning)return!1;let o=bs(n.currentLocation.pathname,a)||n.currentLocation.pathname,d=bs(n.nextLocation.pathname,a)||n.nextLocation.pathname;return Rm(l.pathname,d)!=null||Rm(l.pathname,o)!=null}var ys=gk();const Lk=g.createContext(),RI=()=>{const e=g.useContext(Lk);if(!e)throw new Error("useGlobalNotification must be used within GlobalNotificationProvider");return e},PI=({children:e})=>{const[t,n]=g.useState([]),[a,l]=g.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger",confirmText:"Confirm",cancelText:"Cancel"}),[o,d]=g.useState({isOpen:!1,title:"",message:"",onConfirm:null,placeholder:"",confirmText:"Submit",cancelText:"Cancel"}),u=g.useCallback((A,E="info",C=4e3)=>{const O=Date.now()+Math.random(),k={id:O,message:A,type:E,duration:C};n(_=>[..._,k]),C>0&&setTimeout(()=>{m(O)},C)},[]),m=g.useCallback(A=>{n(E=>E.filter(C=>C.id!==A))},[]),h=g.useCallback((A,E=4e3)=>{u(A,"success",E)},[u]),x=g.useCallback((A,E=5e3)=>{u(A,"error",E)},[u]),p=g.useCallback((A,E=4e3)=>{u(A,"warning",E)},[u]),b=g.useCallback((A,E=4e3)=>{u(A,"info",E)},[u]),N=g.useCallback((A,E,C="danger",O="Confirm",k="Cancel")=>new Promise(_=>{l({isOpen:!0,title:A,message:E,type:C,confirmText:O,cancelText:k,onConfirm:()=>_(!0)})}),[]),v=g.useCallback((A,E,C="",O="Submit",k="Cancel")=>new Promise(_=>{d({isOpen:!0,title:A,message:E,placeholder:C,confirmText:O,cancelText:k,onConfirm:T=>_(T)})}),[]),w=g.useCallback(()=>{l({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger",confirmText:"Confirm",cancelText:"Cancel"})},[]),S=g.useCallback(()=>{d({isOpen:!1,title:"",message:"",onConfirm:null,placeholder:"",confirmText:"Submit",cancelText:"Cancel"})},[]);return r.jsx(Lk.Provider,{value:{notifications:t,showNotification:u,removeNotification:m,success:h,error:x,warning:p,info:b,confirm:N,prompt:v,confirmDialog:a,promptDialog:o,closeConfirmDialog:w,closePromptDialog:S},children:e})};const DI=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MI=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase()),CS=e=>{const t=MI(e);return t.charAt(0).toUpperCase()+t.slice(1)},zk=(...e)=>e.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim(),II=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};var LI={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const zI=g.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:l="",children:o,iconNode:d,...u},m)=>g.createElement("svg",{ref:m,...LI,width:t,height:t,stroke:e,strokeWidth:a?Number(n)*24/Number(t):n,className:zk("lucide",l),...!o&&!II(u)&&{"aria-hidden":"true"},...u},[...d.map(([h,x])=>g.createElement(h,x)),...Array.isArray(o)?o:[o]]));const ge=(e,t)=>{const n=g.forwardRef(({className:a,...l},o)=>g.createElement(zI,{ref:o,iconNode:t,className:zk(`lucide-${DI(CS(e))}`,`lucide-${e}`,a),...l}));return n.displayName=CS(e),n};const BI=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ma=ge("activity",BI);const $I=[["path",{d:"M12 6v16",key:"nqf5sj"}],["path",{d:"m19 13 2-1a9 9 0 0 1-18 0l2 1",key:"y7qv08"}],["path",{d:"M9 11h6",key:"1fldmi"}],["circle",{cx:"12",cy:"4",r:"2",key:"muu5ef"}]],Dm=ge("anchor",$I);const UI=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],Oa=ge("archive",UI);const qI=[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]],Vd=ge("arrow-down-left",qI);const FI=[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]],oi=ge("arrow-down-right",FI);const HI=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],KI=ge("arrow-down",HI);const GI=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ao=ge("arrow-left",GI);const VI=[["path",{d:"m16 3 4 4-4 4",key:"1x1c3m"}],["path",{d:"M20 7H4",key:"zbl0bi"}],["path",{d:"m8 21-4-4 4-4",key:"h9nckh"}],["path",{d:"M4 17h16",key:"g4d7ey"}]],AS=ge("arrow-right-left",VI);const YI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Yd=ge("arrow-right",YI);const QI=[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]],_s=ge("arrow-up-right",QI);const WI=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],XI=ge("arrow-up",WI);const ZI=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kS=ge("award",ZI);const JI=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uf=ge("ban",JI);const eL=[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]],Xr=ge("banknote",eL);const tL=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],ko=ge("bell",tL);const rL=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],nL=ge("book-open",rL);const aL=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],vd=ge("box",aL);const sL=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],Mm=ge("briefcase",sL);const lL=[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]],_o=ge("building-2",lL);const iL=[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],_v=ge("building",iL);const oL=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],cL=ge("calculator",oL);const dL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],da=ge("calendar",dL);const uL=[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Im=ge("camera",uL);const fL=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ci=ge("chart-column",fL);const mL=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],hL=ge("chart-no-axes-column",mL);const xL=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],pL=ge("chart-pie",xL);const gL=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Lm=ge("check",gL);const bL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],na=ge("chevron-down",bL);const yL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],wo=ge("chevron-right",yL);const vL=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Bk=ge("chevron-up",vL);const jL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],lr=ge("circle-alert",jL);const NL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],et=ge("circle-check-big",NL);const wL=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],SL=ge("circle-user-round",wL);const EL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ia=ge("circle-x",EL);const CL=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Rr=ge("clock",CL);const AL=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],zm=ge("coffee",AL);const kL=[["rect",{x:"2",y:"6",width:"20",height:"8",rx:"1",key:"1estib"}],["path",{d:"M17 14v7",key:"7m2elx"}],["path",{d:"M7 14v7",key:"1cm7wv"}],["path",{d:"M17 3v3",key:"1v4jwn"}],["path",{d:"M7 3v3",key:"7o6guu"}],["path",{d:"M10 14 2.3 6.3",key:"1023jk"}],["path",{d:"m14 6 7.7 7.7",key:"1s8pl2"}],["path",{d:"m8 6 8 8",key:"hl96qh"}]],_L=ge("construction",kL);const OL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],TL=ge("copy",OL);const RL=[["path",{d:"M20 20v-7a4 4 0 0 0-4-4H4",key:"1nkjon"}],["path",{d:"M9 14 4 9l5-5",key:"102s5s"}]],$k=ge("corner-up-left",RL);const PL=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Fa=ge("credit-card",PL);const DL=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],fy=ge("crown",DL);const ML=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],IL=ge("disc",ML);const LL=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],gn=ge("dollar-sign",LL);const zL=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],ua=ge("download",zL);const BL=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Zh=ge("ellipsis-vertical",BL);const $L=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],my=ge("eye-off",$L);const UL=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],di=ge("eye",UL);const qL=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sa=ge("file-text",qL);const FL=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],HL=ge("folder-plus",FL);const KL=[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]],GL=ge("folder-tree",KL);const VL=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],Jh=ge("funnel",VL);const YL=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Oo=ge("gift",YL);const QL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],Bm=ge("globe",QL);const WL=[["path",{d:"M18 11V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2",key:"1fvzgz"}],["path",{d:"M14 10V4a2 2 0 0 0-2-2a2 2 0 0 0-2 2v2",key:"1kc0my"}],["path",{d:"M10 10.5V6a2 2 0 0 0-2-2a2 2 0 0 0-2 2v8",key:"10h0bg"}],["path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15",key:"1s1gnw"}]],XL=ge("hand",WL);const ZL=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],$m=ge("headphones",ZL);const JL=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],Um=ge("heart",JL);const e7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],To=ge("history",e7);const t7=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],Qd=ge("info",t7);const r7=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],qm=ge("key-round",r7);const n7=[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]],Fm=ge("key",n7);const a7=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Hm=ge("layers",a7);const s7=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ov=ge("layout-dashboard",s7);const l7=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],Uk=ge("layout-grid",l7);const i7=[["path",{d:"M2 5h20",key:"1fs1ex"}],["path",{d:"M6 12h12",key:"8npq4p"}],["path",{d:"M9 19h6",key:"456am0"}]],o7=ge("list-filter",i7);const c7=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Ve=ge("loader-circle",c7);const d7=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ui=ge("lock",d7);const u7=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],_S=ge("log-in",u7);const f7=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],fi=ge("log-out",f7);const m7=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],Wd=ge("mail",m7);const h7=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Km=ge("map-pin",h7);const x7=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],Gm=ge("map",x7);const p7=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],Tv=ge("message-square",p7);const g7=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ex=ge("monitor",g7);const b7=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],Vm=ge("moon",b7);const y7=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],Ym=ge("music",y7);const v7=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Tt=ge("package",v7);const j7=[["path",{d:"M15.707 21.293a1 1 0 0 1-1.414 0l-1.586-1.586a1 1 0 0 1 0-1.414l5.586-5.586a1 1 0 0 1 1.414 0l1.586 1.586a1 1 0 0 1 0 1.414z",key:"nt11vn"}],["path",{d:"m18 13-1.375-6.874a1 1 0 0 0-.746-.776L3.235 2.028a1 1 0 0 0-1.207 1.207L5.35 15.879a1 1 0 0 0 .776.746L13 18",key:"15qc1e"}],["path",{d:"m2.3 2.3 7.286 7.286",key:"1wuzzi"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]],N7=ge("pen-tool",j7);const w7=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],qk=ge("pen",w7);const S7=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],Sd=ge("percent",S7);const E7=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Qm=ge("phone",E7);const C7=[["path",{d:"M11 17h3v2a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1v-3a3.16 3.16 0 0 0 2-2h1a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1h-1a5 5 0 0 0-2-4V3a4 4 0 0 0-3.2 1.6l-.3.4H11a6 6 0 0 0-6 6v1a5 5 0 0 0 2 4v3a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1z",key:"1piglc"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M2 8v1a2 2 0 0 0 2 2h1",key:"1env43"}]],A7=ge("piggy-bank",C7);const k7=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yn=ge("plus",k7);const _7=[["path",{d:"M12 2v10",key:"mnfbl"}],["path",{d:"M18.4 6.6a9 9 0 1 1-12.77.04",key:"obofu9"}]],Ed=ge("power",_7);const O7=[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]],mi=ge("printer",O7);const T7=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],tx=ge("qr-code",T7);const R7=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],ps=ge("receipt",R7);const P7=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ir=ge("refresh-cw",P7);const D7=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],M7=ge("rocket",D7);const I7=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Cd=ge("rotate-ccw",I7);const L7=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],z7=ge("rotate-cw",L7);const B7=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Rv=ge("save",B7);const $7=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]],U7=ge("scan-barcode",$7);const q7=[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]],F7=ge("scan-line",q7);const H7=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],er=ge("search",H7);const K7=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Pv=ge("send",K7);const G7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],Ng=ge("shield-alert",G7);const V7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Si=ge("shield-check",V7);const Y7=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Ro=ge("shield",Y7);const Q7=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],Wm=ge("shirt",Q7);const W7=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],Po=ge("shopping-bag",W7);const X7=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qn=ge("shopping-cart",X7);const Z7=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],Xm=ge("smartphone",Z7);const J7=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Fn=ge("square-pen",J7);const e8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],hi=ge("star",e8);const t8=[["path",{d:"M15 21v-5a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v5",key:"slp6dd"}],["path",{d:"M17.774 10.31a1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.451 0 1.12 1.12 0 0 0-1.548 0 2.5 2.5 0 0 1-3.452 0 1.12 1.12 0 0 0-1.549 0 2.5 2.5 0 0 1-3.77-3.248l2.889-4.184A2 2 0 0 1 7 2h10a2 2 0 0 1 1.653.873l2.895 4.192a2.5 2.5 0 0 1-3.774 3.244",key:"o0xfot"}],["path",{d:"M4 10.95V19a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8.05",key:"wn3emo"}]],Dv=ge("store",t8);const r8=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],Zm=ge("sun",r8);const n8=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],mn=ge("tag",n8);const a8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Fk=ge("target",a8);const s8=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],en=ge("trash-2",s8);const l8=[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]],Mv=ge("trending-down",l8);const i8=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Hn=ge("trending-up",i8);const o8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Bt=ge("triangle-alert",o8);const c8=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],d8=ge("user-check",c8);const u8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Iv=ge("user-plus",u8);const f8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],tn=ge("user",f8);const m8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vs=ge("users",m8);const h8=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],Jm=ge("utensils",h8);const x8=[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]],p8=ge("wallet",x8);const g8=[["path",{d:"M12 10v2.2l1.6 1",key:"n3r21l"}],["path",{d:"m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05",key:"18k57s"}],["path",{d:"m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05",key:"16ny36"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}]],eh=ge("watch",g8);const b8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$e=ge("x",b8);const y8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ad=ge("zap",y8),v8=({isOpen:e,onClose:t,onConfirm:n,title:a,message:l,confirmText:o="Confirm",cancelText:d="Cancel",type:u="danger"})=>{if(!e)return null;const m={danger:{icon:"text-red-600",iconBg:"bg-red-100",button:"bg-red-600 hover:bg-red-700"},warning:{icon:"text-yellow-600",iconBg:"bg-yellow-100",button:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:"text-blue-600",iconBg:"bg-blue-100",button:"bg-blue-600 hover:bg-blue-700"}},h=m[u]||m.danger;return r.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 animate-in fade-in duration-200",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex items-start gap-4 p-6 pb-4",children:[r.jsx("div",{className:`${h.iconBg} p-3 rounded-full flex-shrink-0`,children:r.jsx(Bt,{className:h.icon,size:24,strokeWidth:2.5})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:l})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0",children:r.jsx($e,{size:20})})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-xl",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:d}),r.jsx("button",{onClick:()=>{n(),t()},className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors ${h.button}`,children:o})]})]})]})},j8=({isOpen:e,onClose:t,onConfirm:n,title:a,message:l,placeholder:o="",confirmText:d="Submit",cancelText:u="Cancel"})=>{const[m,h]=El.useState("");if(!e)return null;const x=()=>{m.trim()&&(n(m),t(),h(""))};return r.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 animate-in fade-in duration-200",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-6 pb-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx($e,{size:20})})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l}),r.jsx("input",{type:"text",value:m,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&x(),placeholder:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",autoFocus:!0})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-xl",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:u}),r.jsx("button",{onClick:x,disabled:!m.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d})]})]})]})},N8=()=>{const{notifications:e,removeNotification:t,confirmDialog:n,promptDialog:a,closeConfirmDialog:l,closePromptDialog:o}=RI(),d=u=>{switch(u){case"success":return{container:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",icon:"text-green-600",text:"text-green-800",progress:"bg-green-500",IconComponent:et};case"error":return{container:"bg-gradient-to-r from-red-50 to-rose-50 border-red-200",icon:"text-red-600",text:"text-red-800",progress:"bg-red-500",IconComponent:Ia};case"warning":return{container:"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200",icon:"text-yellow-600",text:"text-yellow-800",progress:"bg-yellow-500",IconComponent:Bt};default:return{container:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",icon:"text-blue-600",text:"text-blue-800",progress:"bg-blue-500",IconComponent:Qd}}};return r.jsxs(r.Fragment,{children:[e.length>0&&r.jsx("div",{className:"fixed top-20 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(u=>{const m=d(u.type),h=m.IconComponent;return r.jsxs("div",{className:`${m.container} pointer-events-auto min-w-[320px] max-w-md border-l-4 rounded-lg shadow-lg backdrop-blur-sm animate-in slide-in-from-right-5 fade-in duration-300`,children:[r.jsxs("div",{className:"p-4 flex items-start gap-3",children:[r.jsx("div",{className:`${m.icon} flex-shrink-0 mt-0.5`,children:r.jsx(h,{size:20,strokeWidth:2.5})}),r.jsx("div",{className:`flex-1 ${m.text} text-sm font-medium leading-relaxed`,children:u.message}),r.jsx("button",{onClick:()=>t(u.id),className:`${m.icon} hover:opacity-70 transition-opacity flex-shrink-0`,children:r.jsx($e,{size:16})})]}),u.duration>0&&r.jsx("div",{className:"h-1 bg-white/30 rounded-b-lg overflow-hidden",children:r.jsx("div",{className:`h-full ${m.progress} animate-shrink-width`,style:{animation:`shrinkWidth ${u.duration}ms linear forwards`}})})]},u.id)})}),r.jsx(v8,{isOpen:n.isOpen,onClose:l,onConfirm:n.onConfirm||(()=>{}),title:n.title,message:n.message,type:n.type,confirmText:n.confirmText,cancelText:n.cancelText}),r.jsx(j8,{isOpen:a.isOpen,onClose:o,onConfirm:a.onConfirm||(()=>{}),title:a.title,message:a.message,placeholder:a.placeholder,confirmText:a.confirmText,cancelText:a.cancelText}),r.jsx("style",{children:`
                @keyframes shrinkWidth {
                    from {
                        width: 100%;
                    }
                    to {
                        width: 0%;
                    }
                }
                .animate-shrink-width {
                    animation: shrinkWidth linear forwards;
                }
            `})]})},Lv="/assets/registration-bg-Ch9zxLMz.png",qf="http://localhost:8080/api/v1",bl={getBranches:async()=>{try{const e=await fetch(`${qf}/auth/branches`);if(!e.ok)throw new Error("Failed to fetch branch list");return await e.json()}catch(e){throw console.error("API Error:",e),e}},registerUser:async e=>{try{const t=await fetch(`${qf}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.message||"Registration failed");return n}catch(t){throw console.error("API Error:",t),t}},login:async e=>{try{const t=await fetch(`${qf}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.message||"Login failed");return n}catch(t){throw console.error("API Error:",t),t}},forgotPassword:async e=>{try{const t=await fetch(`${qf}/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await t.json();if(!t.ok)throw new Error(n.message||"Failed to submit password reset request");return n}catch(t){throw console.error("API Error:",t),t}}},OS=({children:e})=>r.jsxs("div",{className:"relative min-h-screen flex items-center justify-center p-4 font-sans overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("img",{src:Lv,alt:"Background",className:"w-full h-full object-cover blur-sm scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-brand-deep/80 mix-blend-multiply"})]}),r.jsx("div",{className:"relative z-10 w-full flex justify-center",children:e})]});function w8(){const e=ca(),t=ks(),[n,a]=g.useState(t.state?.registrationSuccess||!1),[l,o]=g.useState(!1),[d,u]=g.useState(""),[m,h]=g.useState({username:"",password:""}),{username:x,password:p}=m,b=v=>{h(w=>({...w,[v.target.name]:v.target.value})),d&&u("")},N=async v=>{v.preventDefault(),o(!0),u("");try{const w=await bl.login(m);if(w.token){localStorage.setItem("token",w.token),localStorage.setItem("user",JSON.stringify(w));const S=(w.role||w.userRole||"").toUpperCase();switch(console.log("Login successful. Role:",S),S){case"ADMIN":e("/admin");break;case"BRANCH_MANAGER":e("/manager");break;case"STORE_KEEPER":e("/inventory");break;default:e("/pos");break}}else u("Login failed: No token received.")}catch(w){console.error(w),u(w.message||"Invalid credentials")}finally{o(!1)}};return n?r.jsx(OS,{children:r.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl p-10 text-center animate-in fade-in zoom-in duration-300 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-brand to-emerald-400"}),r.jsxs("div",{className:"mb-8 relative",children:[r.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto relative z-10",children:r.jsx(et,{className:"w-12 h-12 text-emerald-500"})}),r.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-24 h-24 bg-emerald-100 rounded-full animate-ping opacity-25"})]}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-3",children:"Registration Successful!"}),r.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-xl p-4 mb-8",children:[r.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["Your account has been created and is currently",r.jsx("span",{className:"inline-block px-2 py-0.5 mx-1.5 bg-orange-100 text-orange-600 font-bold rounded text-sm border border-orange-200",children:"Pending Approval"})]}),r.jsx("p",{className:"text-xs text-slate-400 mt-2",children:"Please contact your branch manager or system administrator to activate your access."})]}),r.jsxs("button",{onClick:()=>{a(!1),e(t.pathname,{replace:!0,state:{}})},className:"w-full group bg-slate-900 hover:bg-brand text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-slate-200 hover:shadow-brand/25 transition-all duration-300 flex items-center justify-center gap-3",children:["Continue to Login",r.jsx(Yd,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})]})}):r.jsx(OS,{children:r.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row",children:[r.jsxs("div",{className:"hidden md:flex w-5/12 bg-brand-deep p-8 flex-col justify-between text-white relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Si,{className:"w-8 h-8"}),r.jsxs("span",{className:"font-bold text-xl tracking-tight",children:["Smart Retail ",r.jsx("span",{style:{color:"rgb(52 211 153 / var(--tw-text-opacity, 1))"},children:"Pro"})]})]}),r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Welcome Back."}),r.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Sign in to secure terminal to access store operations and reporting."})]}),r.jsx("div",{className:"relative z-10 mt-auto",children:r.jsxs("div",{className:"flex flex-col items-center gap-3 text-center",children:[r.jsx("div",{className:"bg-white/10 p-2.5 rounded-full ring-1 ring-white/20",children:r.jsx(Ro,{className:"h-6 w-6 text-emerald-400"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-white",children:"Secure Access"}),r.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"System activity is monitored and logged for security."})]})]})}),r.jsx("div",{className:"absolute top-[-50px] right-[-50px] w-40 h-40 bg-brand/20 rounded-full blur-2xl"}),r.jsx("div",{className:"absolute bottom-[-20px] left-[-20px] w-24 h-24 bg-brand/20 rounded-full blur-xl"})]}),r.jsxs("div",{className:"w-full md:w-7/12 p-8 md:p-10 bg-pos-bg",children:[r.jsx("h3",{className:"text-2xl font-bold text-pos-text mb-6",children:"Login to Account"}),d&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-600",children:[r.jsx(lr,{className:"w-5 h-5 shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:d})]}),r.jsxs("form",{onSubmit:N,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Username"}),r.jsxs("div",{className:"relative group",children:[r.jsx(tn,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 transition-all duration-300 group-focus-within:text-brand group-focus-within:scale-110"}),r.jsx("input",{type:"text",name:"username",value:x,onChange:b,required:!0,placeholder:"Enter username",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-300 rounded-lg focus:outline-none focus:border-brand transition-all text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Password"}),r.jsxs("div",{className:"relative group",children:[r.jsx(ui,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 transition-all duration-300 group-focus-within:text-brand group-focus-within:scale-110"}),r.jsx("input",{type:"password",name:"password",value:p,onChange:b,required:!0,placeholder:"",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-300 rounded-lg focus:outline-none focus:border-brand transition-all text-sm font-mono"})]})]}),r.jsx("button",{type:"submit",disabled:l,className:"w-full bg-brand hover:bg-brand-hover text-white font-bold py-4 rounded-xl shadow-lg mt-4 active:scale-[0.98] transition-all flex items-center justify-center gap-2",children:l?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):"Login to ROCS"}),r.jsx("div",{className:"mt-4 text-center",children:r.jsx(Co,{to:"/forgot-password",className:"text-xs font-bold text-slate-400 hover:text-brand transition-colors",children:"Forgot Password?"})}),r.jsx("div",{className:"h-px bg-slate-200 my-6"}),r.jsxs("div",{className:"text-center text-sm text-slate-500",children:["Don't have an account?"," ",r.jsx(Co,{to:"/register",className:"font-bold text-brand hover:underline",children:"Register New ID"})]})]})]})]})})}const S8=({children:e})=>r.jsxs("div",{className:"relative min-h-screen flex items-center justify-center p-4 font-sans overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("img",{src:Lv,alt:"Background",className:"w-full h-full object-cover blur-sm scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-brand-deep/80 mix-blend-multiply"})]}),r.jsx("div",{className:"relative z-10 w-full flex justify-center",children:e})]});function E8(){const e=ca(),[t,n]=g.useState(!1),[a,l]=g.useState([]),[o,d]=g.useState({fullName:"",username:"",email:"",password:"",phone:"",employeeId:"",branchId:""}),[u,m]=g.useState({}),[h,x]=g.useState({}),[p,b]=g.useState("");g.useEffect(()=>{(async()=>{try{const C=await bl.getBranches();l(C||[])}catch(C){console.error("Failed to load branches",C)}})()},[]);const N=(E,C)=>{let O="";switch(E){case"fullName":C.trim()?C.length<3&&(O="Must be at least 3 chars"):O="Full Name is required";break;case"username":C.trim()?(C.length<3||C.length>20)&&(O="3-20 characters required"):O="Username is required";break;case"email":C?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(C)||(O="Invalid email format"):O="Email is required";break;case"password":C?C.length<6&&(O="Min 6 characters required"):O="Password is required";break;case"phone":C?/^\+?[0-9]{10,15}$/.test(C)||(O="Invalid phone format (10-15 digits)"):O="Phone is required";break;case"employeeId":C.trim()||(O="Employee ID is required");break;case"branchId":C||(O="Please select a branch");break}return O},v=E=>{const{name:C,value:O}=E.target;d(k=>({...k,[C]:O})),u[C]&&m(k=>({...k,[C]:""}))},w=E=>{const{name:C,value:O}=E.target;x(_=>({..._,[C]:!0}));const k=N(C,O);m(_=>({..._,[C]:k}))},S=async E=>{E.preventDefault(),b("");const C={};let O=!1;if(Object.keys(o).forEach(k=>{const _=N(k,o[k]);_&&(C[k]=_,O=!0)}),O){m(C),x(Object.keys(o).reduce((k,_)=>({...k,[_]:!0}),{}));return}n(!0);try{await bl.registerUser(o),e("/login",{state:{registrationSuccess:!0}})}catch(k){console.error(k);const _=k.response?.data?.message||k.message;if(_&&_.includes(": ")){const T=_.split(": "),P=T[0],L=T.slice(1).join(": ");let z="";P==="EMAIL"?z="email":P==="USERNAME"?z="username":P==="PHONE"?z="phone":P==="EMPLOYEE_ID"&&(z="employeeId"),z?(m(U=>({...U,[z]:L})),b("")):b(_)}else b(_||"Registration failed. Please try again.")}finally{n(!1)}},A=(E,C,O,k="text",_,T=null)=>{const P=h[E]&&u[E],L=O;return r.jsxs("div",{className:"relative mb-5",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1 ml-1",children:C}),r.jsxs("div",{className:"relative group",children:[r.jsx(L,{className:`absolute left-3 top-3 w-5 h-5 transition-all duration-300 ${P?"text-red-400":"text-slate-400 group-focus-within:text-brand"}`}),T?r.jsxs("select",{name:E,value:o[E],onChange:v,onBlur:w,className:`w-full pl-10 pr-4 py-3 bg-white border rounded-lg focus:outline-none transition-all text-sm appearance-none cursor-pointer ${P?"border-red-300 focus:border-red-500 focus:ring-1 focus:ring-red-200":"border-slate-300 focus:border-brand"}`,children:[r.jsx("option",{value:"",children:"Select Branch"}),T.map(z=>r.jsx("option",{value:z.branchId||z.id,children:z.name||z.branchName},z.branchId||z.id))]}):r.jsx("input",{type:k,name:E,value:o[E],onChange:v,onBlur:w,placeholder:_,className:`w-full pl-10 pr-10 py-3 bg-white border rounded-lg focus:outline-none transition-all text-sm ${P?"border-red-300 focus:border-red-500 focus:ring-1 focus:ring-red-200":"border-slate-300 focus:border-brand"}`}),P&&r.jsx("div",{className:"absolute right-3 top-3 text-red-500 animate-in fade-in zoom-in duration-200",children:r.jsx(lr,{className:"w-5 h-5"})})]}),P&&r.jsx("div",{className:"absolute -bottom-5 left-1 text-[10px] font-bold text-red-500 flex items-center gap-1 animate-in slide-in-from-top-1 duration-200 z-10",children:u[E]})]})};return r.jsx(S8,{children:r.jsxs("div",{className:"bg-white w-full max-w-4xl rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row h-auto max-h-[90vh]",children:[r.jsxs("div",{className:"hidden md:flex w-4/12 bg-brand-deep p-8 flex-col justify-between text-white relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Si,{className:"w-8 h-8"}),r.jsxs("span",{className:"font-bold text-xl tracking-tight",children:["Smart Retail ",r.jsx("span",{className:"text-emerald-400",children:"Pro"})]})]}),r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Join the Team."}),r.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Create your secure profile to access the retail operations platform."})]}),r.jsx("div",{className:"relative z-10 mt-auto opacity-80",children:r.jsxs("div",{className:"flex items-center gap-3 bg-white/10 p-3 rounded-lg border border-white/10 backdrop-blur-sm",children:[r.jsx(Iv,{className:"w-8 h-8 text-emerald-400"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-bold text-emerald-300",children:"New Registration"}),r.jsx("p",{className:"text-[10px] text-slate-300",children:"Requires Manager Approval"})]})]})}),r.jsx("div",{className:"absolute top-[-50px] right-[-50px] w-40 h-40 bg-brand/20 rounded-full blur-2xl"}),r.jsx("div",{className:"absolute bottom-[-20px] left-[-20px] w-24 h-24 bg-brand/20 rounded-full blur-xl"})]}),r.jsx("div",{className:"w-full md:w-8/12 bg-pos-bg overflow-y-auto",children:r.jsxs("div",{className:"p-8 md:p-10",children:[r.jsxs("div",{className:"flex justify-between items-center mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-pos-text",children:"Register Account"}),r.jsx(Co,{to:"/login",className:"text-sm font-bold text-brand hover:underline",children:"Back to Login"})]}),p&&r.jsxs("div",{className:"mb-6 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-600 animate-in shake",children:[r.jsx(lr,{className:"w-5 h-5 shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:p})]}),r.jsxs("form",{onSubmit:S,className:"grid grid-cols-1 md:grid-cols-2 gap-x-6",children:[r.jsx("div",{className:"col-span-2",children:A("fullName","Full Name",tn,"text","John Doe")}),A("username","Username",tn,"text","johndoe"),A("email","Email Address",Wd,"email","john@example.com"),A("password","Password",ui,"password",""),A("phone","Phone Number",Qm,"tel","+94 7X XXX XXXX"),A("employeeId","Employee ID",Fa,"text","EMP-001"),A("branchId","Assigned Branch",Dv,"text","",a),r.jsxs("div",{className:"col-span-2 mt-4 pt-4 border-t border-slate-200",children:[r.jsx("button",{type:"submit",disabled:t,className:"w-full bg-brand hover:bg-brand-hover text-white font-bold py-4 rounded-xl shadow-lg active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:t?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):"Submit Registration Request"}),r.jsx("p",{className:"text-xs text-center text-slate-400 mt-4",children:"By registering, you agree to the company's internal data policies."})]})]})]})})]})})}const TS=({children:e})=>r.jsxs("div",{className:"relative min-h-screen flex items-center justify-center p-4 font-sans overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 z-0",children:[r.jsx("img",{src:Lv,alt:"Background",className:"w-full h-full object-cover blur-sm scale-110"}),r.jsx("div",{className:"absolute inset-0 bg-brand-deep/80 mix-blend-multiply"})]}),r.jsx("div",{className:"relative z-10 w-full flex justify-center",children:e})]});function C8(){const e=ca(),[t,n]=g.useState(1),[a,l]=g.useState(!1),[o,d]=g.useState(""),[u,m]=g.useState(!1),[h,x]=g.useState(!1),[p,b]=g.useState({username:"",newPassword:"",confirmPassword:"",reason:""}),{username:N,newPassword:v,confirmPassword:w,reason:S}=p,A=k=>{b(_=>({..._,[k.target.name]:k.target.value})),o&&d("")},C=(k=>{if(!k)return{score:0,label:"",color:""};let _=0;return k.length>=8&&_++,/[A-Z]/.test(k)&&_++,/[a-z]/.test(k)&&_++,/[0-9]/.test(k)&&_++,/[^A-Za-z0-9]/.test(k)&&_++,_<=2?{score:_,label:"Weak",color:"bg-red-500"}:_<=3?{score:_,label:"Fair",color:"bg-orange-500"}:_<=4?{score:_,label:"Good",color:"bg-yellow-500"}:{score:_,label:"Strong",color:"bg-emerald-500"}})(v),O=async k=>{if(k.preventDefault(),!N.trim()){d("Username is required.");return}if(!v){d("New password is required.");return}if(v.length<6){d("Password must be at least 6 characters.");return}if(v!==w){d("Passwords do not match.");return}l(!0),d("");try{await bl.forgotPassword({username:N.trim(),newPassword:v,reason:S.trim()||"Password reset requested"}),n(2)}catch(_){d(_.message||"Failed to submit request. Please try again.")}finally{l(!1)}};return t===2?r.jsx(TS,{children:r.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl p-10 text-center animate-in fade-in zoom-in duration-300 relative overflow-hidden",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-brand to-emerald-400"}),r.jsxs("div",{className:"mb-8 relative",children:[r.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto relative z-10",children:r.jsx(et,{className:"w-12 h-12 text-emerald-500"})}),r.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-24 h-24 bg-emerald-100 rounded-full animate-ping opacity-25"})]}),r.jsx("h2",{className:"text-3xl font-bold text-slate-800 mb-3",children:"Request Submitted!"}),r.jsxs("div",{className:"bg-slate-50 border border-slate-100 rounded-xl p-4 mb-6",children:[r.jsxs("p",{className:"text-slate-600 leading-relaxed",children:["Your password reset request has been sent to the",r.jsx("span",{className:"inline-block px-2 py-0.5 mx-1.5 bg-blue-100 text-blue-600 font-bold rounded text-sm border border-blue-200",children:"System Administrator"}),"for approval."]}),r.jsx("p",{className:"text-xs text-slate-400 mt-3",children:"You will receive an email notification once your request has been reviewed. Once approved, you can log in with your new password."})]}),r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3 mb-6",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(lr,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-xs text-amber-700 text-left",children:[r.jsx("strong",{children:"Important:"})," Do not share your new password with anyone. If you did not make this request, contact your administrator immediately."]})]})}),r.jsxs("button",{onClick:()=>e("/login"),className:"w-full group bg-slate-900 hover:bg-brand text-white py-4 rounded-xl font-bold text-lg shadow-lg shadow-slate-200 hover:shadow-brand/25 transition-all duration-300 flex items-center justify-center gap-3",children:[r.jsx(Ao,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),"Back to Login"]})]})}):r.jsx(TS,{children:r.jsxs("div",{className:"bg-white w-full max-w-3xl rounded-2xl shadow-2xl overflow-hidden flex flex-col md:flex-row",children:[r.jsxs("div",{className:"hidden md:flex w-5/12 bg-brand-deep p-8 flex-col justify-between text-white relative overflow-hidden",children:[r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(Si,{className:"w-8 h-8"}),r.jsxs("span",{className:"font-bold text-xl tracking-tight",children:["Smart Retail ",r.jsx("span",{style:{color:"rgb(52 211 153 / var(--tw-text-opacity, 1))"},children:"Pro"})]})]}),r.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Reset Password"}),r.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:"Submit a password reset request. Your new password will take effect once the system administrator approves it."})]}),r.jsx("div",{className:"relative z-10 mt-auto",children:r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-3 rounded-xl border border-white/10",children:[r.jsx("div",{className:"bg-blue-500/20 p-2 rounded-full",children:r.jsx(qm,{className:"h-4 w-4 text-blue-300"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold text-white",children:"Secure Process"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Password is encrypted before storage."})]})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-white/5 p-3 rounded-xl border border-white/10",children:[r.jsx("div",{className:"bg-emerald-500/20 p-2 rounded-full",children:r.jsx(Ro,{className:"h-4 w-4 text-emerald-300"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs font-semibold text-white",children:"Admin Approved"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Requires administrator verification."})]})]})]})}),r.jsx("div",{className:"absolute top-[-50px] right-[-50px] w-40 h-40 bg-brand/20 rounded-full blur-2xl"}),r.jsx("div",{className:"absolute bottom-[-20px] left-[-20px] w-24 h-24 bg-brand/20 rounded-full blur-xl"})]}),r.jsxs("div",{className:"w-full md:w-7/12 p-8 md:p-10 bg-pos-bg",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx(qm,{className:"w-6 h-6 text-brand"}),r.jsx("h3",{className:"text-2xl font-bold text-pos-text",children:"Forgot Password"})]}),r.jsx("p",{className:"text-sm text-slate-400 mb-6",children:"Enter your username and choose a new password. The request will be sent to admin for approval."}),o&&r.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2 text-red-600",children:[r.jsx(lr,{className:"w-5 h-5 shrink-0"}),r.jsx("span",{className:"text-sm font-medium",children:o})]}),r.jsxs("form",{onSubmit:O,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Username"}),r.jsxs("div",{className:"relative group",children:[r.jsx(tn,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 transition-all duration-300 group-focus-within:text-brand group-focus-within:scale-110"}),r.jsx("input",{type:"text",name:"username",value:N,onChange:A,required:!0,placeholder:"Enter your username",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-300 rounded-lg focus:outline-none focus:border-brand transition-all text-sm"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"New Password"}),r.jsxs("div",{className:"relative group",children:[r.jsx(ui,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 transition-all duration-300 group-focus-within:text-brand group-focus-within:scale-110"}),r.jsx("input",{type:u?"text":"password",name:"newPassword",value:v,onChange:A,required:!0,placeholder:"Choose a new password",className:"w-full pl-10 pr-12 py-3 bg-white border border-slate-300 rounded-lg focus:outline-none focus:border-brand transition-all text-sm font-mono"}),r.jsx("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600 transition-colors",children:u?r.jsx(my,{className:"w-5 h-5"}):r.jsx(di,{className:"w-5 h-5"})})]}),v&&r.jsxs("div",{className:"mt-2",children:[r.jsx("div",{className:"flex gap-1 mb-1",children:[1,2,3,4,5].map(k=>r.jsx("div",{className:`h-1.5 flex-1 rounded-full transition-all duration-300 ${k<=C.score?C.color:"bg-slate-200"}`},k))}),r.jsx("p",{className:`text-xs font-semibold ${C.score<=2?"text-red-500":C.score<=3?"text-orange-500":C.score<=4?"text-yellow-600":"text-emerald-600"}`,children:C.label})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Confirm Password"}),r.jsxs("div",{className:"relative group",children:[r.jsx(ui,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 transition-all duration-300 group-focus-within:text-brand group-focus-within:scale-110"}),r.jsx("input",{type:h?"text":"password",name:"confirmPassword",value:w,onChange:A,required:!0,placeholder:"Re-enter new password",className:`w-full pl-10 pr-12 py-3 bg-white border rounded-lg focus:outline-none transition-all text-sm font-mono ${w&&w!==v?"border-red-400 focus:border-red-500":w&&w===v?"border-emerald-400 focus:border-emerald-500":"border-slate-300 focus:border-brand"}`}),r.jsx("button",{type:"button",onClick:()=>x(!h),className:"absolute right-3 top-3 text-slate-400 hover:text-slate-600 transition-colors",children:h?r.jsx(my,{className:"w-5 h-5"}):r.jsx(di,{className:"w-5 h-5"})})]}),w&&w!==v&&r.jsx("p",{className:"text-xs text-red-500 mt-1 font-medium",children:"Passwords don't match"}),w&&w===v&&r.jsxs("p",{className:"text-xs text-emerald-500 mt-1 font-medium flex items-center gap-1",children:[r.jsx(et,{className:"w-3 h-3"})," Passwords match"]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:["Reason ",r.jsx("span",{className:"text-slate-300 normal-case",children:"(Optional)"})]}),r.jsxs("div",{className:"relative group",children:[r.jsx(Tv,{className:"absolute left-3 top-3 w-5 h-5 text-slate-400 transition-all duration-300 group-focus-within:text-brand group-focus-within:scale-110"}),r.jsx("input",{type:"text",name:"reason",value:S,onChange:A,placeholder:"e.g., Forgot my password",className:"w-full pl-10 pr-4 py-3 bg-white border border-slate-300 rounded-lg focus:outline-none focus:border-brand transition-all text-sm"})]})]}),r.jsx("button",{type:"submit",disabled:a||w&&w!==v,className:"w-full bg-brand hover:bg-brand-hover text-white font-bold py-4 rounded-xl shadow-lg mt-4 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:a?r.jsx(Ve,{className:"w-5 h-5 animate-spin"}):"Submit Reset Request"}),r.jsx("div",{className:"h-px bg-slate-200 my-4"}),r.jsx("div",{className:"text-center",children:r.jsxs(Co,{to:"/login",className:"text-sm font-bold text-slate-400 hover:text-brand transition-colors flex items-center justify-center gap-1",children:[r.jsx(Ao,{className:"w-4 h-4"})," Back to Login"]})})]})]})]})})}function A8({cart:e,customer:t,onItemClick:n,onDetachCustomer:a,totals:l,editingIndex:o,selectedIndex:d,onQuantityCommit:u,onQuantityCancel:m,billDiscount:h=0}){const x=g.useRef(null),p=g.useRef(null),[b,N]=g.useState("");g.useEffect(()=>{x.current&&(x.current.scrollTop=x.current.scrollHeight)},[e]),g.useEffect(()=>{if(o==null)return;const A=e[o];A&&(N(String(A.qty??1)),requestAnimationFrame(()=>{const E=p.current;E&&(E.focus(),E.select())}))},[o,e]);const v=g.useMemo(()=>{if(l)return l;let A=0,E=0,C=0,O=0;return e.forEach(k=>{const _=k.qty||1,T=parseFloat(k.price)||0,P=parseFloat(k.discount)||0,L=parseFloat(k.taxRate)||0,z=T*_,U=P*_,ee=(z-U)*(L/100);A+=z,E+=U,C+=ee,O+=_}),{grossTotal:A,discountAmount:E+h,itemDiscountAmount:E,billDiscountAmount:h,taxAmount:C,netTotal:A-E-h+C,itemCount:e.length,totalQty:O}},[e,l,h]),w=A=>A.toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2}),S=A=>{const E=A.qty||1,C=parseFloat(A.price)||0,O=parseFloat(A.discount)||0;return C*E-O*E};return r.jsxs("div",{className:"w-4/12 bg-white flex flex-col border-r border-slate-300 shadow-xl z-20 h-full",children:[r.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 p-2 flex justify-between items-center shrink-0",children:[r.jsxs("div",{className:"text-xs font-bold text-slate-600 uppercase flex items-center gap-2",children:[r.jsx(qn,{className:"w-4 h-4 text-slate-400"})," Current Bill",h>0&&r.jsxs("span",{className:"bg-yellow-100 border border-yellow-300 text-yellow-700 text-[9px] font-bold px-1.5 py-0.5 rounded flex items-center gap-1",children:[r.jsx(Sd,{className:"w-2.5 h-2.5"}),"-",w(h)]})]}),t&&r.jsxs("div",{className:"bg-purple-100 border border-purple-200 rounded px-2 py-0.5 flex items-center gap-1.5",children:[r.jsx(fy,{className:"w-3 h-3 text-purple-600"}),r.jsx("span",{className:"text-[10px] font-bold text-purple-800 uppercase truncate max-w-[100px]",children:t.name}),t.loyaltyPoints>0&&r.jsxs("span",{className:"text-[9px] font-mono text-purple-600 bg-purple-50 px-1 rounded",children:[t.loyaltyPoints.toLocaleString()," pts"]}),r.jsx("button",{onClick:a,className:"ml-1 text-purple-400 hover:text-red-500 transition-colors",children:r.jsx($e,{className:"w-3 h-3"})})]})]}),r.jsxs("div",{className:"bg-slate-50 border-b border-slate-200 px-3 pb-2 grid grid-cols-12 gap-1 text-[10px] font-bold text-slate-600 uppercase tracking-wider shrink-0",children:[r.jsx("div",{className:"col-span-1 text-center",children:"#"}),r.jsx("div",{className:"col-span-4",children:"Description"}),r.jsx("div",{className:"col-span-2 text-center",children:"Qty"}),r.jsx("div",{className:"col-span-2 text-right",children:"Price"}),r.jsx("div",{className:"col-span-3 text-right",children:"Amount"})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-0 bg-white relative custom-scroll",ref:x,children:e.length===0?r.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-slate-300 opacity-40 pointer-events-none",children:[r.jsx(ps,{className:"w-16 h-16 mb-3"}),r.jsx("span",{className:"text-lg font-bold uppercase",children:"Ready to Scan"}),r.jsx("span",{className:"text-xs mt-1",children:"Scan barcode or enter item code"})]}):e.map((A,E)=>r.jsxs("div",{onClick:()=>n(E),className:`grid grid-cols-12 gap-1 px-3 py-2.5 border-b border-slate-100 text-sm items-start cursor-pointer group transition-colors ${d===E?"bg-blue-100 ring-1 ring-blue-300":"hover:bg-blue-50"}`,children:[r.jsx("div",{className:"col-span-1 text-center text-slate-400 font-mono text-xs group-hover:text-blue-500 pt-0.5",children:E+1}),r.jsxs("div",{className:"col-span-4",children:[r.jsx("div",{className:"font-semibold text-slate-800 truncate leading-tight group-hover:text-blue-700",children:A.name}),A.sku&&r.jsx("div",{className:"text-[9px] font-mono text-slate-400",children:A.sku}),r.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[A.discount>0&&r.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] font-bold text-orange-600 bg-orange-50 px-1 py-0.5 rounded",children:[r.jsx(Sd,{className:"w-2 h-2"}),"-",w(A.discount)]}),A.taxRate>0&&r.jsxs("span",{className:"inline-flex items-center gap-0.5 text-[9px] font-bold text-slate-500 bg-slate-100 px-1 py-0.5 rounded",children:[r.jsx(mn,{className:"w-2 h-2"}),A.taxRate,"%"]})]})]}),r.jsx("div",{className:"col-span-2 text-center pt-0.5",children:o===E?r.jsx("input",{ref:p,type:"number",min:"1",step:"1",value:b,onClick:C=>C.stopPropagation(),onFocus:C=>C.target.select(),onChange:C=>N(C.target.value),onKeyDown:C=>{C.key==="Enter"&&(C.preventDefault(),u(E,b)),C.key==="Escape"&&(C.preventDefault(),m?.())},className:"w-14 text-center bg-white border border-blue-400 rounded text-xs font-mono font-bold text-blue-900 focus:outline-none focus:ring-2 focus:ring-blue-300"}):r.jsx("span",{className:"bg-slate-100 px-2 py-0.5 rounded font-mono font-bold text-xs group-hover:bg-blue-200 group-hover:text-blue-800 transition-colors",children:A.qty})}),r.jsx("div",{className:"col-span-2 text-right font-mono text-slate-600 text-xs pt-0.5",children:w(A.price)}),r.jsx("div",{className:"col-span-3 text-right font-mono font-bold text-slate-900 group-hover:text-blue-700 pt-0.5",children:w(S(A))})]},E))}),r.jsxs("div",{className:"bg-slate-900 text-white p-4 shrink-0 shadow-[0_-4px_8px_-1px_rgba(0,0,0,0.2)]",children:[r.jsxs("div",{className:"flex justify-between items-start mb-2 border-b border-slate-700 pb-2",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("span",{className:"text-slate-400 text-xs font-medium block",children:"Items"}),r.jsx("span",{className:"text-white font-mono font-bold text-lg",children:v.totalQty||e.reduce((A,E)=>A+E.qty,0)})]}),r.jsxs("div",{className:"text-right space-y-0.5",children:[r.jsxs("div",{className:"flex justify-between gap-4 text-xs",children:[r.jsx("span",{className:"text-slate-400",children:"Subtotal:"}),r.jsx("span",{className:"font-mono text-slate-300",children:w(v.grossTotal)})]}),(v.itemDiscountAmount||0)>0&&r.jsxs("div",{className:"flex justify-between gap-4 text-xs",children:[r.jsx("span",{className:"text-orange-400",children:"Item Disc:"}),r.jsxs("span",{className:"font-mono text-orange-400",children:["-",w(v.itemDiscountAmount)]})]}),(v.billDiscountAmount||0)>0&&r.jsxs("div",{className:"flex justify-between gap-4 text-xs",children:[r.jsx("span",{className:"text-yellow-400",children:"Bill Disc:"}),r.jsxs("span",{className:"font-mono text-yellow-400",children:["-",w(v.billDiscountAmount)]})]}),v.taxAmount>0&&r.jsxs("div",{className:"flex justify-between gap-4 text-xs",children:[r.jsx("span",{className:"text-slate-400",children:"Tax:"}),r.jsxs("span",{className:"font-mono text-slate-300",children:["+",w(v.taxAmount)]})]})]})]}),r.jsxs("div",{className:"bg-slate-800 rounded-lg px-3 py-3 flex justify-between items-center border border-slate-600",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xl font-bold tracking-tight text-white",children:"TOTAL"}),r.jsx("span",{className:"text-[10px] text-slate-400 block uppercase",children:"LKR"})]}),r.jsx("span",{className:"text-4xl font-bold font-mono text-green-400",children:w(v.netTotal)})]})]})]})}function Hk(e,t){return function(){return e.apply(t,arguments)}}const{toString:k8}=Object.prototype,{getPrototypeOf:zv}=Object,{iterator:rx,toStringTag:Kk}=Symbol,nx=(e=>t=>{const n=k8.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),fa=e=>(e=e.toLowerCase(),t=>nx(t)===e),ax=e=>t=>typeof t===e,{isArray:Go}=Array,Do=ax("undefined");function Xd(e){return e!==null&&!Do(e)&&e.constructor!==null&&!Do(e.constructor)&&Zr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Gk=fa("ArrayBuffer");function _8(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Gk(e.buffer),t}const O8=ax("string"),Zr=ax("function"),Vk=ax("number"),Zd=e=>e!==null&&typeof e=="object",T8=e=>e===!0||e===!1,bm=e=>{if(nx(e)!=="object")return!1;const t=zv(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Kk in e)&&!(rx in e)},R8=e=>{if(!Zd(e)||Xd(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},P8=fa("Date"),D8=fa("File"),M8=fa("Blob"),I8=fa("FileList"),L8=e=>Zd(e)&&Zr(e.pipe),z8=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Zr(e.append)&&((t=nx(e))==="formdata"||t==="object"&&Zr(e.toString)&&e.toString()==="[object FormData]"))},B8=fa("URLSearchParams"),[$8,U8,q8,F8]=["ReadableStream","Request","Response","Headers"].map(fa),H8=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Jd(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let a,l;if(typeof e!="object"&&(e=[e]),Go(e))for(a=0,l=e.length;a<l;a++)t.call(null,e[a],a,e);else{if(Xd(e))return;const o=n?Object.getOwnPropertyNames(e):Object.keys(e),d=o.length;let u;for(a=0;a<d;a++)u=o[a],t.call(null,e[u],u,e)}}function Yk(e,t){if(Xd(e))return null;t=t.toLowerCase();const n=Object.keys(e);let a=n.length,l;for(;a-- >0;)if(l=n[a],t===l.toLowerCase())return l;return null}const Jl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Qk=e=>!Do(e)&&e!==Jl;function hy(){const{caseless:e,skipUndefined:t}=Qk(this)&&this||{},n={},a=(l,o)=>{const d=e&&Yk(n,o)||o;bm(n[d])&&bm(l)?n[d]=hy(n[d],l):bm(l)?n[d]=hy({},l):Go(l)?n[d]=l.slice():(!t||!Do(l))&&(n[d]=l)};for(let l=0,o=arguments.length;l<o;l++)arguments[l]&&Jd(arguments[l],a);return n}const K8=(e,t,n,{allOwnKeys:a}={})=>(Jd(t,(l,o)=>{n&&Zr(l)?Object.defineProperty(e,o,{value:Hk(l,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,o,{value:l,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:a}),e),G8=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),V8=(e,t,n,a)=>{e.prototype=Object.create(t.prototype,a),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Y8=(e,t,n,a)=>{let l,o,d;const u={};if(t=t||{},e==null)return t;do{for(l=Object.getOwnPropertyNames(e),o=l.length;o-- >0;)d=l[o],(!a||a(d,e,t))&&!u[d]&&(t[d]=e[d],u[d]=!0);e=n!==!1&&zv(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Q8=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const a=e.indexOf(t,n);return a!==-1&&a===n},W8=e=>{if(!e)return null;if(Go(e))return e;let t=e.length;if(!Vk(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},X8=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&zv(Uint8Array)),Z8=(e,t)=>{const a=(e&&e[rx]).call(e);let l;for(;(l=a.next())&&!l.done;){const o=l.value;t.call(e,o[0],o[1])}},J8=(e,t)=>{let n;const a=[];for(;(n=e.exec(t))!==null;)a.push(n);return a},ez=fa("HTMLFormElement"),tz=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,a,l){return a.toUpperCase()+l}),RS=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),rz=fa("RegExp"),Wk=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),a={};Jd(n,(l,o)=>{let d;(d=t(l,o,e))!==!1&&(a[o]=d||l)}),Object.defineProperties(e,a)},nz=e=>{Wk(e,(t,n)=>{if(Zr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const a=e[n];if(Zr(a)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},az=(e,t)=>{const n={},a=l=>{l.forEach(o=>{n[o]=!0})};return Go(e)?a(e):a(String(e).split(t)),n},sz=()=>{},lz=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function iz(e){return!!(e&&Zr(e.append)&&e[Kk]==="FormData"&&e[rx])}const oz=e=>{const t=new Array(10),n=(a,l)=>{if(Zd(a)){if(t.indexOf(a)>=0)return;if(Xd(a))return a;if(!("toJSON"in a)){t[l]=a;const o=Go(a)?[]:{};return Jd(a,(d,u)=>{const m=n(d,l+1);!Do(m)&&(o[u]=m)}),t[l]=void 0,o}}return a};return n(e,0)},cz=fa("AsyncFunction"),dz=e=>e&&(Zd(e)||Zr(e))&&Zr(e.then)&&Zr(e.catch),Xk=((e,t)=>e?setImmediate:t?((n,a)=>(Jl.addEventListener("message",({source:l,data:o})=>{l===Jl&&o===n&&a.length&&a.shift()()},!1),l=>{a.push(l),Jl.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Zr(Jl.postMessage)),uz=typeof queueMicrotask<"u"?queueMicrotask.bind(Jl):typeof process<"u"&&process.nextTick||Xk,fz=e=>e!=null&&Zr(e[rx]),ue={isArray:Go,isArrayBuffer:Gk,isBuffer:Xd,isFormData:z8,isArrayBufferView:_8,isString:O8,isNumber:Vk,isBoolean:T8,isObject:Zd,isPlainObject:bm,isEmptyObject:R8,isReadableStream:$8,isRequest:U8,isResponse:q8,isHeaders:F8,isUndefined:Do,isDate:P8,isFile:D8,isBlob:M8,isRegExp:rz,isFunction:Zr,isStream:L8,isURLSearchParams:B8,isTypedArray:X8,isFileList:I8,forEach:Jd,merge:hy,extend:K8,trim:H8,stripBOM:G8,inherits:V8,toFlatObject:Y8,kindOf:nx,kindOfTest:fa,endsWith:Q8,toArray:W8,forEachEntry:Z8,matchAll:J8,isHTMLForm:ez,hasOwnProperty:RS,hasOwnProp:RS,reduceDescriptors:Wk,freezeMethods:nz,toObjectSet:az,toCamelCase:tz,noop:sz,toFiniteNumber:lz,findKey:Yk,global:Jl,isContextDefined:Qk,isSpecCompliantForm:iz,toJSONObject:oz,isAsyncFn:cz,isThenable:dz,setImmediate:Xk,asap:uz,isIterable:fz};let ze=class Zk extends Error{static from(t,n,a,l,o,d){const u=new Zk(t.message,n||t.code,a,l,o);return u.cause=t,u.name=t.name,d&&Object.assign(u,d),u}constructor(t,n,a,l,o){super(t),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),a&&(this.config=a),l&&(this.request=l),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ue.toJSONObject(this.config),code:this.code,status:this.status}}};ze.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";ze.ERR_BAD_OPTION="ERR_BAD_OPTION";ze.ECONNABORTED="ECONNABORTED";ze.ETIMEDOUT="ETIMEDOUT";ze.ERR_NETWORK="ERR_NETWORK";ze.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";ze.ERR_DEPRECATED="ERR_DEPRECATED";ze.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";ze.ERR_BAD_REQUEST="ERR_BAD_REQUEST";ze.ERR_CANCELED="ERR_CANCELED";ze.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";ze.ERR_INVALID_URL="ERR_INVALID_URL";const mz=null;function xy(e){return ue.isPlainObject(e)||ue.isArray(e)}function Jk(e){return ue.endsWith(e,"[]")?e.slice(0,-2):e}function PS(e,t,n){return e?e.concat(t).map(function(l,o){return l=Jk(l),!n&&o?"["+l+"]":l}).join(n?".":""):t}function hz(e){return ue.isArray(e)&&!e.some(xy)}const xz=ue.toFlatObject(ue,{},null,function(t){return/^is[A-Z]/.test(t)});function sx(e,t,n){if(!ue.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ue.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,S){return!ue.isUndefined(S[w])});const a=n.metaTokens,l=n.visitor||x,o=n.dots,d=n.indexes,m=(n.Blob||typeof Blob<"u"&&Blob)&&ue.isSpecCompliantForm(t);if(!ue.isFunction(l))throw new TypeError("visitor must be a function");function h(v){if(v===null)return"";if(ue.isDate(v))return v.toISOString();if(ue.isBoolean(v))return v.toString();if(!m&&ue.isBlob(v))throw new ze("Blob is not supported. Use a Buffer instead.");return ue.isArrayBuffer(v)||ue.isTypedArray(v)?m&&typeof Blob=="function"?new Blob([v]):Buffer.from(v):v}function x(v,w,S){let A=v;if(v&&!S&&typeof v=="object"){if(ue.endsWith(w,"{}"))w=a?w:w.slice(0,-2),v=JSON.stringify(v);else if(ue.isArray(v)&&hz(v)||(ue.isFileList(v)||ue.endsWith(w,"[]"))&&(A=ue.toArray(v)))return w=Jk(w),A.forEach(function(C,O){!(ue.isUndefined(C)||C===null)&&t.append(d===!0?PS([w],O,o):d===null?w:w+"[]",h(C))}),!1}return xy(v)?!0:(t.append(PS(S,w,o),h(v)),!1)}const p=[],b=Object.assign(xz,{defaultVisitor:x,convertValue:h,isVisitable:xy});function N(v,w){if(!ue.isUndefined(v)){if(p.indexOf(v)!==-1)throw Error("Circular reference detected in "+w.join("."));p.push(v),ue.forEach(v,function(A,E){(!(ue.isUndefined(A)||A===null)&&l.call(t,A,ue.isString(E)?E.trim():E,w,b))===!0&&N(A,w?w.concat(E):[E])}),p.pop()}}if(!ue.isObject(e))throw new TypeError("data must be an object");return N(e),t}function DS(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(a){return t[a]})}function Bv(e,t){this._pairs=[],e&&sx(e,this,t)}const e3=Bv.prototype;e3.append=function(t,n){this._pairs.push([t,n])};e3.toString=function(t){const n=t?function(a){return t.call(this,a,DS)}:DS;return this._pairs.map(function(l){return n(l[0])+"="+n(l[1])},"").join("&")};function pz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function t3(e,t,n){if(!t)return e;const a=n&&n.encode||pz,l=ue.isFunction(n)?{serialize:n}:n,o=l&&l.serialize;let d;if(o?d=o(t,l):d=ue.isURLSearchParams(t)?t.toString():new Bv(t,l).toString(a),d){const u=e.indexOf("#");u!==-1&&(e=e.slice(0,u)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class MS{constructor(){this.handlers=[]}use(t,n,a){return this.handlers.push({fulfilled:t,rejected:n,synchronous:a?a.synchronous:!1,runWhen:a?a.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ue.forEach(this.handlers,function(a){a!==null&&t(a)})}}const r3={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gz=typeof URLSearchParams<"u"?URLSearchParams:Bv,bz=typeof FormData<"u"?FormData:null,yz=typeof Blob<"u"?Blob:null,vz={isBrowser:!0,classes:{URLSearchParams:gz,FormData:bz,Blob:yz},protocols:["http","https","file","blob","url","data"]},$v=typeof window<"u"&&typeof document<"u",py=typeof navigator=="object"&&navigator||void 0,jz=$v&&(!py||["ReactNative","NativeScript","NS"].indexOf(py.product)<0),Nz=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",wz=$v&&window.location.href||"http://localhost",Sz=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:$v,hasStandardBrowserEnv:jz,hasStandardBrowserWebWorkerEnv:Nz,navigator:py,origin:wz},Symbol.toStringTag,{value:"Module"})),Tr={...Sz,...vz};function Ez(e,t){return sx(e,new Tr.classes.URLSearchParams,{visitor:function(n,a,l,o){return Tr.isNode&&ue.isBuffer(n)?(this.append(a,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function Cz(e){return ue.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Az(e){const t={},n=Object.keys(e);let a;const l=n.length;let o;for(a=0;a<l;a++)o=n[a],t[o]=e[o];return t}function n3(e){function t(n,a,l,o){let d=n[o++];if(d==="__proto__")return!0;const u=Number.isFinite(+d),m=o>=n.length;return d=!d&&ue.isArray(l)?l.length:d,m?(ue.hasOwnProp(l,d)?l[d]=[l[d],a]:l[d]=a,!u):((!l[d]||!ue.isObject(l[d]))&&(l[d]=[]),t(n,a,l[d],o)&&ue.isArray(l[d])&&(l[d]=Az(l[d])),!u)}if(ue.isFormData(e)&&ue.isFunction(e.entries)){const n={};return ue.forEachEntry(e,(a,l)=>{t(Cz(a),l,n,0)}),n}return null}function kz(e,t,n){if(ue.isString(e))try{return(t||JSON.parse)(e),ue.trim(e)}catch(a){if(a.name!=="SyntaxError")throw a}return(n||JSON.stringify)(e)}const eu={transitional:r3,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const a=n.getContentType()||"",l=a.indexOf("application/json")>-1,o=ue.isObject(t);if(o&&ue.isHTMLForm(t)&&(t=new FormData(t)),ue.isFormData(t))return l?JSON.stringify(n3(t)):t;if(ue.isArrayBuffer(t)||ue.isBuffer(t)||ue.isStream(t)||ue.isFile(t)||ue.isBlob(t)||ue.isReadableStream(t))return t;if(ue.isArrayBufferView(t))return t.buffer;if(ue.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let u;if(o){if(a.indexOf("application/x-www-form-urlencoded")>-1)return Ez(t,this.formSerializer).toString();if((u=ue.isFileList(t))||a.indexOf("multipart/form-data")>-1){const m=this.env&&this.env.FormData;return sx(u?{"files[]":t}:t,m&&new m,this.formSerializer)}}return o||l?(n.setContentType("application/json",!1),kz(t)):t}],transformResponse:[function(t){const n=this.transitional||eu.transitional,a=n&&n.forcedJSONParsing,l=this.responseType==="json";if(ue.isResponse(t)||ue.isReadableStream(t))return t;if(t&&ue.isString(t)&&(a&&!this.responseType||l)){const d=!(n&&n.silentJSONParsing)&&l;try{return JSON.parse(t,this.parseReviver)}catch(u){if(d)throw u.name==="SyntaxError"?ze.from(u,ze.ERR_BAD_RESPONSE,this,null,this.response):u}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Tr.classes.FormData,Blob:Tr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ue.forEach(["delete","get","head","post","put","patch"],e=>{eu.headers[e]={}});const _z=ue.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Oz=e=>{const t={};let n,a,l;return e&&e.split(`
`).forEach(function(d){l=d.indexOf(":"),n=d.substring(0,l).trim().toLowerCase(),a=d.substring(l+1).trim(),!(!n||t[n]&&_z[n])&&(n==="set-cookie"?t[n]?t[n].push(a):t[n]=[a]:t[n]=t[n]?t[n]+", "+a:a)}),t},IS=Symbol("internals");function rd(e){return e&&String(e).trim().toLowerCase()}function ym(e){return e===!1||e==null?e:ue.isArray(e)?e.map(ym):String(e)}function Tz(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let a;for(;a=n.exec(e);)t[a[1]]=a[2];return t}const Rz=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function wg(e,t,n,a,l){if(ue.isFunction(a))return a.call(this,t,n);if(l&&(t=n),!!ue.isString(t)){if(ue.isString(a))return t.indexOf(a)!==-1;if(ue.isRegExp(a))return a.test(t)}}function Pz(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,a)=>n.toUpperCase()+a)}function Dz(e,t){const n=ue.toCamelCase(" "+t);["get","set","has"].forEach(a=>{Object.defineProperty(e,a+n,{value:function(l,o,d){return this[a].call(this,t,l,o,d)},configurable:!0})})}let Jr=class{constructor(t){t&&this.set(t)}set(t,n,a){const l=this;function o(u,m,h){const x=rd(m);if(!x)throw new Error("header name must be a non-empty string");const p=ue.findKey(l,x);(!p||l[p]===void 0||h===!0||h===void 0&&l[p]!==!1)&&(l[p||m]=ym(u))}const d=(u,m)=>ue.forEach(u,(h,x)=>o(h,x,m));if(ue.isPlainObject(t)||t instanceof this.constructor)d(t,n);else if(ue.isString(t)&&(t=t.trim())&&!Rz(t))d(Oz(t),n);else if(ue.isObject(t)&&ue.isIterable(t)){let u={},m,h;for(const x of t){if(!ue.isArray(x))throw TypeError("Object iterator must return a key-value pair");u[h=x[0]]=(m=u[h])?ue.isArray(m)?[...m,x[1]]:[m,x[1]]:x[1]}d(u,n)}else t!=null&&o(n,t,a);return this}get(t,n){if(t=rd(t),t){const a=ue.findKey(this,t);if(a){const l=this[a];if(!n)return l;if(n===!0)return Tz(l);if(ue.isFunction(n))return n.call(this,l,a);if(ue.isRegExp(n))return n.exec(l);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=rd(t),t){const a=ue.findKey(this,t);return!!(a&&this[a]!==void 0&&(!n||wg(this,this[a],a,n)))}return!1}delete(t,n){const a=this;let l=!1;function o(d){if(d=rd(d),d){const u=ue.findKey(a,d);u&&(!n||wg(a,a[u],u,n))&&(delete a[u],l=!0)}}return ue.isArray(t)?t.forEach(o):o(t),l}clear(t){const n=Object.keys(this);let a=n.length,l=!1;for(;a--;){const o=n[a];(!t||wg(this,this[o],o,t,!0))&&(delete this[o],l=!0)}return l}normalize(t){const n=this,a={};return ue.forEach(this,(l,o)=>{const d=ue.findKey(a,o);if(d){n[d]=ym(l),delete n[o];return}const u=t?Pz(o):String(o).trim();u!==o&&delete n[o],n[u]=ym(l),a[u]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ue.forEach(this,(a,l)=>{a!=null&&a!==!1&&(n[l]=t&&ue.isArray(a)?a.join(", "):a)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const a=new this(t);return n.forEach(l=>a.set(l)),a}static accessor(t){const a=(this[IS]=this[IS]={accessors:{}}).accessors,l=this.prototype;function o(d){const u=rd(d);a[u]||(Dz(l,d),a[u]=!0)}return ue.isArray(t)?t.forEach(o):o(t),this}};Jr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ue.reduceDescriptors(Jr.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(a){this[n]=a}}});ue.freezeMethods(Jr);function Sg(e,t){const n=this||eu,a=t||n,l=Jr.from(a.headers);let o=a.data;return ue.forEach(e,function(u){o=u.call(n,o,l.normalize(),t?t.status:void 0)}),l.normalize(),o}function a3(e){return!!(e&&e.__CANCEL__)}let tu=class extends ze{constructor(t,n,a){super(t??"canceled",ze.ERR_CANCELED,n,a),this.name="CanceledError",this.__CANCEL__=!0}};function s3(e,t,n){const a=n.config.validateStatus;!n.status||!a||a(n.status)?e(n):t(new ze("Request failed with status code "+n.status,[ze.ERR_BAD_REQUEST,ze.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function Mz(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Iz(e,t){e=e||10;const n=new Array(e),a=new Array(e);let l=0,o=0,d;return t=t!==void 0?t:1e3,function(m){const h=Date.now(),x=a[o];d||(d=h),n[l]=m,a[l]=h;let p=o,b=0;for(;p!==l;)b+=n[p++],p=p%e;if(l=(l+1)%e,l===o&&(o=(o+1)%e),h-d<t)return;const N=x&&h-x;return N?Math.round(b*1e3/N):void 0}}function Lz(e,t){let n=0,a=1e3/t,l,o;const d=(h,x=Date.now())=>{n=x,l=null,o&&(clearTimeout(o),o=null),e(...h)};return[(...h)=>{const x=Date.now(),p=x-n;p>=a?d(h,x):(l=h,o||(o=setTimeout(()=>{o=null,d(l)},a-p)))},()=>l&&d(l)]}const th=(e,t,n=3)=>{let a=0;const l=Iz(50,250);return Lz(o=>{const d=o.loaded,u=o.lengthComputable?o.total:void 0,m=d-a,h=l(m),x=d<=u;a=d;const p={loaded:d,total:u,progress:u?d/u:void 0,bytes:m,rate:h||void 0,estimated:h&&u&&x?(u-d)/h:void 0,event:o,lengthComputable:u!=null,[t?"download":"upload"]:!0};e(p)},n)},LS=(e,t)=>{const n=e!=null;return[a=>t[0]({lengthComputable:n,total:e,loaded:a}),t[1]]},zS=e=>(...t)=>ue.asap(()=>e(...t)),zz=Tr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Tr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Tr.origin),Tr.navigator&&/(msie|trident)/i.test(Tr.navigator.userAgent)):()=>!0,Bz=Tr.hasStandardBrowserEnv?{write(e,t,n,a,l,o,d){if(typeof document>"u")return;const u=[`${e}=${encodeURIComponent(t)}`];ue.isNumber(n)&&u.push(`expires=${new Date(n).toUTCString()}`),ue.isString(a)&&u.push(`path=${a}`),ue.isString(l)&&u.push(`domain=${l}`),o===!0&&u.push("secure"),ue.isString(d)&&u.push(`SameSite=${d}`),document.cookie=u.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function $z(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Uz(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function l3(e,t,n){let a=!$z(t);return e&&(a||n==!1)?Uz(e,t):t}const BS=e=>e instanceof Jr?{...e}:e;function xi(e,t){t=t||{};const n={};function a(h,x,p,b){return ue.isPlainObject(h)&&ue.isPlainObject(x)?ue.merge.call({caseless:b},h,x):ue.isPlainObject(x)?ue.merge({},x):ue.isArray(x)?x.slice():x}function l(h,x,p,b){if(ue.isUndefined(x)){if(!ue.isUndefined(h))return a(void 0,h,p,b)}else return a(h,x,p,b)}function o(h,x){if(!ue.isUndefined(x))return a(void 0,x)}function d(h,x){if(ue.isUndefined(x)){if(!ue.isUndefined(h))return a(void 0,h)}else return a(void 0,x)}function u(h,x,p){if(p in t)return a(h,x);if(p in e)return a(void 0,h)}const m={url:o,method:o,data:o,baseURL:d,transformRequest:d,transformResponse:d,paramsSerializer:d,timeout:d,timeoutMessage:d,withCredentials:d,withXSRFToken:d,adapter:d,responseType:d,xsrfCookieName:d,xsrfHeaderName:d,onUploadProgress:d,onDownloadProgress:d,decompress:d,maxContentLength:d,maxBodyLength:d,beforeRedirect:d,transport:d,httpAgent:d,httpsAgent:d,cancelToken:d,socketPath:d,responseEncoding:d,validateStatus:u,headers:(h,x,p)=>l(BS(h),BS(x),p,!0)};return ue.forEach(Object.keys({...e,...t}),function(x){const p=m[x]||l,b=p(e[x],t[x],x);ue.isUndefined(b)&&p!==u||(n[x]=b)}),n}const i3=e=>{const t=xi({},e);let{data:n,withXSRFToken:a,xsrfHeaderName:l,xsrfCookieName:o,headers:d,auth:u}=t;if(t.headers=d=Jr.from(d),t.url=t3(l3(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),u&&d.set("Authorization","Basic "+btoa((u.username||"")+":"+(u.password?unescape(encodeURIComponent(u.password)):""))),ue.isFormData(n)){if(Tr.hasStandardBrowserEnv||Tr.hasStandardBrowserWebWorkerEnv)d.setContentType(void 0);else if(ue.isFunction(n.getHeaders)){const m=n.getHeaders(),h=["content-type","content-length"];Object.entries(m).forEach(([x,p])=>{h.includes(x.toLowerCase())&&d.set(x,p)})}}if(Tr.hasStandardBrowserEnv&&(a&&ue.isFunction(a)&&(a=a(t)),a||a!==!1&&zz(t.url))){const m=l&&o&&Bz.read(o);m&&d.set(l,m)}return t},qz=typeof XMLHttpRequest<"u",Fz=qz&&function(e){return new Promise(function(n,a){const l=i3(e);let o=l.data;const d=Jr.from(l.headers).normalize();let{responseType:u,onUploadProgress:m,onDownloadProgress:h}=l,x,p,b,N,v;function w(){N&&N(),v&&v(),l.cancelToken&&l.cancelToken.unsubscribe(x),l.signal&&l.signal.removeEventListener("abort",x)}let S=new XMLHttpRequest;S.open(l.method.toUpperCase(),l.url,!0),S.timeout=l.timeout;function A(){if(!S)return;const C=Jr.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),k={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:C,config:e,request:S};s3(function(T){n(T),w()},function(T){a(T),w()},k),S=null}"onloadend"in S?S.onloadend=A:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(A)},S.onabort=function(){S&&(a(new ze("Request aborted",ze.ECONNABORTED,e,S)),S=null)},S.onerror=function(O){const k=O&&O.message?O.message:"Network Error",_=new ze(k,ze.ERR_NETWORK,e,S);_.event=O||null,a(_),S=null},S.ontimeout=function(){let O=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded";const k=l.transitional||r3;l.timeoutErrorMessage&&(O=l.timeoutErrorMessage),a(new ze(O,k.clarifyTimeoutError?ze.ETIMEDOUT:ze.ECONNABORTED,e,S)),S=null},o===void 0&&d.setContentType(null),"setRequestHeader"in S&&ue.forEach(d.toJSON(),function(O,k){S.setRequestHeader(k,O)}),ue.isUndefined(l.withCredentials)||(S.withCredentials=!!l.withCredentials),u&&u!=="json"&&(S.responseType=l.responseType),h&&([b,v]=th(h,!0),S.addEventListener("progress",b)),m&&S.upload&&([p,N]=th(m),S.upload.addEventListener("progress",p),S.upload.addEventListener("loadend",N)),(l.cancelToken||l.signal)&&(x=C=>{S&&(a(!C||C.type?new tu(null,e,S):C),S.abort(),S=null)},l.cancelToken&&l.cancelToken.subscribe(x),l.signal&&(l.signal.aborted?x():l.signal.addEventListener("abort",x)));const E=Mz(l.url);if(E&&Tr.protocols.indexOf(E)===-1){a(new ze("Unsupported protocol "+E+":",ze.ERR_BAD_REQUEST,e));return}S.send(o||null)})},Hz=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let a=new AbortController,l;const o=function(h){if(!l){l=!0,u();const x=h instanceof Error?h:this.reason;a.abort(x instanceof ze?x:new tu(x instanceof Error?x.message:x))}};let d=t&&setTimeout(()=>{d=null,o(new ze(`timeout of ${t}ms exceeded`,ze.ETIMEDOUT))},t);const u=()=>{e&&(d&&clearTimeout(d),d=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),e=null)};e.forEach(h=>h.addEventListener("abort",o));const{signal:m}=a;return m.unsubscribe=()=>ue.asap(u),m}},Kz=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let a=0,l;for(;a<n;)l=a+t,yield e.slice(a,l),a=l},Gz=async function*(e,t){for await(const n of Vz(e))yield*Kz(n,t)},Vz=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:a}=await t.read();if(n)break;yield a}}finally{await t.cancel()}},$S=(e,t,n,a)=>{const l=Gz(e,t);let o=0,d,u=m=>{d||(d=!0,a&&a(m))};return new ReadableStream({async pull(m){try{const{done:h,value:x}=await l.next();if(h){u(),m.close();return}let p=x.byteLength;if(n){let b=o+=p;n(b)}m.enqueue(new Uint8Array(x))}catch(h){throw u(h),h}},cancel(m){return u(m),l.return()}},{highWaterMark:2})},US=64*1024,{isFunction:Ff}=ue,Yz=(({Request:e,Response:t})=>({Request:e,Response:t}))(ue.global),{ReadableStream:qS,TextEncoder:FS}=ue.global,HS=(e,...t)=>{try{return!!e(...t)}catch{return!1}},Qz=e=>{e=ue.merge.call({skipUndefined:!0},Yz,e);const{fetch:t,Request:n,Response:a}=e,l=t?Ff(t):typeof fetch=="function",o=Ff(n),d=Ff(a);if(!l)return!1;const u=l&&Ff(qS),m=l&&(typeof FS=="function"?(v=>w=>v.encode(w))(new FS):async v=>new Uint8Array(await new n(v).arrayBuffer())),h=o&&u&&HS(()=>{let v=!1;const w=new n(Tr.origin,{body:new qS,method:"POST",get duplex(){return v=!0,"half"}}).headers.has("Content-Type");return v&&!w}),x=d&&u&&HS(()=>ue.isReadableStream(new a("").body)),p={stream:x&&(v=>v.body)};l&&["text","arrayBuffer","blob","formData","stream"].forEach(v=>{!p[v]&&(p[v]=(w,S)=>{let A=w&&w[v];if(A)return A.call(w);throw new ze(`Response type '${v}' is not supported`,ze.ERR_NOT_SUPPORT,S)})});const b=async v=>{if(v==null)return 0;if(ue.isBlob(v))return v.size;if(ue.isSpecCompliantForm(v))return(await new n(Tr.origin,{method:"POST",body:v}).arrayBuffer()).byteLength;if(ue.isArrayBufferView(v)||ue.isArrayBuffer(v))return v.byteLength;if(ue.isURLSearchParams(v)&&(v=v+""),ue.isString(v))return(await m(v)).byteLength},N=async(v,w)=>{const S=ue.toFiniteNumber(v.getContentLength());return S??b(w)};return async v=>{let{url:w,method:S,data:A,signal:E,cancelToken:C,timeout:O,onDownloadProgress:k,onUploadProgress:_,responseType:T,headers:P,withCredentials:L="same-origin",fetchOptions:z}=i3(v),U=t||fetch;T=T?(T+"").toLowerCase():"text";let B=Hz([E,C&&C.toAbortSignal()],O),ee=null;const X=B&&B.unsubscribe&&(()=>{B.unsubscribe()});let be;try{if(_&&h&&S!=="get"&&S!=="head"&&(be=await N(P,A))!==0){let I=new n(w,{method:"POST",body:A,duplex:"half"}),M;if(ue.isFormData(A)&&(M=I.headers.get("content-type"))&&P.setContentType(M),I.body){const[H,oe]=LS(be,th(zS(_)));A=$S(I.body,US,H,oe)}}ue.isString(L)||(L=L?"include":"omit");const G=o&&"credentials"in n.prototype,J={...z,signal:B,method:S.toUpperCase(),headers:P.normalize().toJSON(),body:A,duplex:"half",credentials:G?L:void 0};ee=o&&new n(w,J);let $=await(o?U(ee,z):U(w,J));const q=x&&(T==="stream"||T==="response");if(x&&(k||q&&X)){const I={};["status","statusText","headers"].forEach(K=>{I[K]=$[K]});const M=ue.toFiniteNumber($.headers.get("content-length")),[H,oe]=k&&LS(M,th(zS(k),!0))||[];$=new a($S($.body,US,H,()=>{oe&&oe(),X&&X()}),I)}T=T||"text";let se=await p[ue.findKey(p,T)||"text"]($,v);return!q&&X&&X(),await new Promise((I,M)=>{s3(I,M,{data:se,headers:Jr.from($.headers),status:$.status,statusText:$.statusText,config:v,request:ee})})}catch(G){throw X&&X(),G&&G.name==="TypeError"&&/Load failed|fetch/i.test(G.message)?Object.assign(new ze("Network Error",ze.ERR_NETWORK,v,ee),{cause:G.cause||G}):ze.from(G,G&&G.code,v,ee)}}},Wz=new Map,o3=e=>{let t=e&&e.env||{};const{fetch:n,Request:a,Response:l}=t,o=[a,l,n];let d=o.length,u=d,m,h,x=Wz;for(;u--;)m=o[u],h=x.get(m),h===void 0&&x.set(m,h=u?new Map:Qz(t)),x=h;return h};o3();const Uv={http:mz,xhr:Fz,fetch:{get:o3}};ue.forEach(Uv,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const KS=e=>`- ${e}`,Xz=e=>ue.isFunction(e)||e===null||e===!1;function Zz(e,t){e=ue.isArray(e)?e:[e];const{length:n}=e;let a,l;const o={};for(let d=0;d<n;d++){a=e[d];let u;if(l=a,!Xz(a)&&(l=Uv[(u=String(a)).toLowerCase()],l===void 0))throw new ze(`Unknown adapter '${u}'`);if(l&&(ue.isFunction(l)||(l=l.get(t))))break;o[u||"#"+d]=l}if(!l){const d=Object.entries(o).map(([m,h])=>`adapter ${m} `+(h===!1?"is not supported by the environment":"is not available in the build"));let u=n?d.length>1?`since :
`+d.map(KS).join(`
`):" "+KS(d[0]):"as no adapter specified";throw new ze("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return l}const c3={getAdapter:Zz,adapters:Uv};function Eg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new tu(null,e)}function GS(e){return Eg(e),e.headers=Jr.from(e.headers),e.data=Sg.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),c3.getAdapter(e.adapter||eu.adapter,e)(e).then(function(a){return Eg(e),a.data=Sg.call(e,e.transformResponse,a),a.headers=Jr.from(a.headers),a},function(a){return a3(a)||(Eg(e),a&&a.response&&(a.response.data=Sg.call(e,e.transformResponse,a.response),a.response.headers=Jr.from(a.response.headers))),Promise.reject(a)})}const d3="1.13.4",lx={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{lx[e]=function(a){return typeof a===e||"a"+(t<1?"n ":" ")+e}});const VS={};lx.transitional=function(t,n,a){function l(o,d){return"[Axios v"+d3+"] Transitional option '"+o+"'"+d+(a?". "+a:"")}return(o,d,u)=>{if(t===!1)throw new ze(l(d," has been removed"+(n?" in "+n:"")),ze.ERR_DEPRECATED);return n&&!VS[d]&&(VS[d]=!0,console.warn(l(d," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,d,u):!0}};lx.spelling=function(t){return(n,a)=>(console.warn(`${a} is likely a misspelling of ${t}`),!0)};function Jz(e,t,n){if(typeof e!="object")throw new ze("options must be an object",ze.ERR_BAD_OPTION_VALUE);const a=Object.keys(e);let l=a.length;for(;l-- >0;){const o=a[l],d=t[o];if(d){const u=e[o],m=u===void 0||d(u,o,e);if(m!==!0)throw new ze("option "+o+" must be "+m,ze.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ze("Unknown option "+o,ze.ERR_BAD_OPTION)}}const vm={assertOptions:Jz,validators:lx},Sa=vm.validators;let ni=class{constructor(t){this.defaults=t||{},this.interceptors={request:new MS,response:new MS}}async request(t,n){try{return await this._request(t,n)}catch(a){if(a instanceof Error){let l={};Error.captureStackTrace?Error.captureStackTrace(l):l=new Error;const o=l.stack?l.stack.replace(/^.+\n/,""):"";try{a.stack?o&&!String(a.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(a.stack+=`
`+o):a.stack=o}catch{}}throw a}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=xi(this.defaults,n);const{transitional:a,paramsSerializer:l,headers:o}=n;a!==void 0&&vm.assertOptions(a,{silentJSONParsing:Sa.transitional(Sa.boolean),forcedJSONParsing:Sa.transitional(Sa.boolean),clarifyTimeoutError:Sa.transitional(Sa.boolean)},!1),l!=null&&(ue.isFunction(l)?n.paramsSerializer={serialize:l}:vm.assertOptions(l,{encode:Sa.function,serialize:Sa.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),vm.assertOptions(n,{baseUrl:Sa.spelling("baseURL"),withXsrfToken:Sa.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let d=o&&ue.merge(o.common,o[n.method]);o&&ue.forEach(["delete","get","head","post","put","patch","common"],v=>{delete o[v]}),n.headers=Jr.concat(d,o);const u=[];let m=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(n)===!1||(m=m&&w.synchronous,u.unshift(w.fulfilled,w.rejected))});const h=[];this.interceptors.response.forEach(function(w){h.push(w.fulfilled,w.rejected)});let x,p=0,b;if(!m){const v=[GS.bind(this),void 0];for(v.unshift(...u),v.push(...h),b=v.length,x=Promise.resolve(n);p<b;)x=x.then(v[p++],v[p++]);return x}b=u.length;let N=n;for(;p<b;){const v=u[p++],w=u[p++];try{N=v(N)}catch(S){w.call(this,S);break}}try{x=GS.call(this,N)}catch(v){return Promise.reject(v)}for(p=0,b=h.length;p<b;)x=x.then(h[p++],h[p++]);return x}getUri(t){t=xi(this.defaults,t);const n=l3(t.baseURL,t.url,t.allowAbsoluteUrls);return t3(n,t.params,t.paramsSerializer)}};ue.forEach(["delete","get","head","options"],function(t){ni.prototype[t]=function(n,a){return this.request(xi(a||{},{method:t,url:n,data:(a||{}).data}))}});ue.forEach(["post","put","patch"],function(t){function n(a){return function(o,d,u){return this.request(xi(u||{},{method:t,headers:a?{"Content-Type":"multipart/form-data"}:{},url:o,data:d}))}}ni.prototype[t]=n(),ni.prototype[t+"Form"]=n(!0)});let eB=class u3{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const a=this;this.promise.then(l=>{if(!a._listeners)return;let o=a._listeners.length;for(;o-- >0;)a._listeners[o](l);a._listeners=null}),this.promise.then=l=>{let o;const d=new Promise(u=>{a.subscribe(u),o=u}).then(l);return d.cancel=function(){a.unsubscribe(o)},d},t(function(o,d,u){a.reason||(a.reason=new tu(o,d,u),n(a.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=a=>{t.abort(a)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new u3(function(l){t=l}),cancel:t}}};function tB(e){return function(n){return e.apply(null,n)}}function rB(e){return ue.isObject(e)&&e.isAxiosError===!0}const gy={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(gy).forEach(([e,t])=>{gy[t]=e});function f3(e){const t=new ni(e),n=Hk(ni.prototype.request,t);return ue.extend(n,ni.prototype,t,{allOwnKeys:!0}),ue.extend(n,t,null,{allOwnKeys:!0}),n.create=function(l){return f3(xi(e,l))},n}const Rt=f3(eu);Rt.Axios=ni;Rt.CanceledError=tu;Rt.CancelToken=eB;Rt.isCancel=a3;Rt.VERSION=d3;Rt.toFormData=sx;Rt.AxiosError=ze;Rt.Cancel=Rt.CanceledError;Rt.all=function(t){return Promise.all(t)};Rt.spread=tB;Rt.isAxiosError=rB;Rt.mergeConfig=xi;Rt.AxiosHeaders=Jr;Rt.formToJSON=e=>n3(ue.isHTMLForm(e)?new FormData(e):e);Rt.getAdapter=c3.getAdapter;Rt.HttpStatusCode=gy;Rt.default=Rt;const{Axios:Zle,AxiosError:Jle,CanceledError:eie,isCancel:tie,CancelToken:rie,VERSION:nie,all:aie,Cancel:sie,isAxiosError:lie,spread:iie,toFormData:oie,AxiosHeaders:cie,HttpStatusCode:die,formToJSON:uie,getAdapter:fie,mergeConfig:mie}=Rt,nB="http://localhost:8080/api/v1/pos",Ze=Rt.create({baseURL:nB,headers:{"Content-Type":"application/json"}});Ze.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));Ze.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(e)));const vt={openShift:e=>{const t={cashierId:e.cashierId,branchId:e.branchId,terminalId:e.terminalId,openingCash:e.openingCash,supervisorUsername:e.supervisorUsername,supervisorPassword:e.supervisorPassword,status:"OPEN"};return e.denominations&&e.denominations.length>0&&(t.denominations=e.denominations),console.log("POS Service - Opening Shift:",t),Ze.post("/shift/open",t)},closeShift:(e,t)=>Ze.put(`/shift/${e}/close`,{closingCash:t.closingCash,denominations:t.denominations,notes:t.notes,supervisorUsername:t.supervisorUsername,supervisorPassword:t.supervisorPassword}),getShiftTotals:e=>Ze.get(`/shift/${e}/totals`),getCurrentShift:async(e,t)=>{let n=`/shift/active?terminalId=${e}`;t&&(n+=`&cashierId=${t}`);try{return await Ze.get(n)}catch(a){if(a.response&&a.response.status===404)return{data:null};throw a}},getCashiers:e=>Ze.get(`/cashiers?branchId=${e}`),getProduct:async e=>{const t=[{url:"/products/scan",params:{code:e}},{url:"/products/barcode",params:{barcode:e}},{url:"/products/sku",params:{sku:e}},{url:"/products/search",params:{q:e}}];for(const n of t)try{const a=await Ze.get(n.url,{params:n.params}),l=a.data?.data||a.data;if(Array.isArray(l)){const o=l.find(d=>d.barcode===e||d.sku===e||String(d.productId)===e||String(d.id)===e);if(o)return{data:o};if(l.length>0)return{data:l[0]};continue}if(l&&(l.productId||l.id||l.name))return{data:l}}catch{console.log(`Endpoint ${n.url} failed, trying next...`)}throw new Error("Product not found")},searchInventory:e=>Ze.get("/products/search",{params:{q:e}}),getQuickItems:e=>Ze.get("/products/quick",{params:{branchId:e}}),getProductStock:(e,t)=>Ze.get(`/stock/${e}`,{params:{branchId:t}}),checkPrice:async e=>{const t=[{url:"/products/price-check",params:{code:e}},{url:"/products/scan",params:{code:e}},{url:"/products/barcode",params:{barcode:e}},{url:"/products/search",params:{q:e}}];for(const n of t)try{const a=await Ze.get(n.url,{params:n.params}),l=a.data?.data||a.data;if(Array.isArray(l)){const o=l.find(d=>d.barcode===e||d.sku===e||String(d.productId)===e||String(d.id)===e);if(o)return{data:o};if(l.length>0)return{data:l[0]};continue}if(l&&(l.productId||l.id||l.name))return{data:l}}catch{console.log(`Price check endpoint ${n.url} failed, trying next...`)}throw new Error("Product not found")},submitOrder:e=>{const t={saleId:e.saleId||null,branchId:e.branchId||1,cashierId:e.cashierId||1,customerId:e.customerId||null,shiftId:e.shiftId,grossTotal:parseFloat(e.grossTotal)||0,discount:parseFloat(e.discount)||0,taxAmount:parseFloat(e.taxAmount)||0,netTotal:parseFloat(e.netTotal)||0,paidAmount:parseFloat(e.paidAmount)||0,changeAmount:parseFloat(e.changeAmount)||0,saleType:e.saleType||"RETAIL",notes:e.notes||"",items:(e.items||[]).map(n=>({productId:n.productId,serialId:n.serialId||null,quantity:parseInt(n.qty)||parseInt(n.quantity)||1,unitPrice:parseFloat(n.unitPrice)||0,discount:parseFloat(n.discount)||0,taxRate:parseFloat(n.taxRate)||0,lineTotal:parseFloat(n.unitPrice*(parseInt(n.qty)||1)-(n.discount||0))||0})),payments:(e.payments||[]).map(n=>({paymentType:n.paymentType||"CASH",amount:parseFloat(n.amount)||0,referenceNo:n.referenceNo||null,cardLast4:n.cardLast4||null,bankName:n.bankName||null}))};return console.log("Submitting sale:",JSON.stringify(t,null,2)),Ze.post("/orders",t)},getSaleById:e=>Ze.get(`/sales/${e}`),getLastInvoiceNumber:e=>Ze.get("/sales/last-invoice",{params:{branchId:e}}),getSales:e=>Ze.get("/sales",{params:e}),getHeldBills:e=>Ze.get("/sales/held",{params:{branchId:e}}),holdBill:e=>Ze.post("/sales/hold",e),recallBill:e=>Ze.post(`/sales/${e}/recall`),voidSale:(e,t,n)=>Ze.post(`/sales/${e}/void`,{reason:t,supervisorUsername:n.username,supervisorPassword:n.password}),getReturnableSales:(e=7)=>Ze.get("/sales/returnable",{params:{days:e}}),getSaleForReturn:e=>Ze.get(`/sales/invoice/${e}`),processReturn:e=>Ze.post("/returns",{saleId:e.saleId,branchId:e.branchId,reason:e.reason,refundMethod:e.refundMethod,items:e.items,supervisorUsername:e.supervisorUsername,supervisorPassword:e.supervisorPassword}),findCustomer:e=>Ze.get("/customers/search",{params:{query:e}}),findCustomerByCode:e=>Ze.get(`/customers/code/${e}`),createCustomer:e=>Ze.post("/customers",{name:e.name,phone:e.phone,email:e.email||null,address:e.address||null,city:e.city||null,dateOfBirth:e.dateOfBirth||null}),updateLoyaltyPoints:(e,t)=>Ze.patch(`/customers/${e}/loyalty`,{points:t}),recordCashFlow:e=>Ze.post("/cash-flows",{shiftId:e.shiftId,amount:e.amount,type:e.type,reason:e.reason,referenceNo:e.referenceNo||null}),getShiftCashFlows:e=>Ze.get(`/cash-flows/shift/${e}`),getTerminal:e=>Ze.get(`/terminals/${e}`),getTerminals:e=>Ze.get("/terminals",{params:{branchId:e}}),requestDiscountApproval:e=>Ze.post("/approvals/discount",{branchId:e.branchId,saleId:e.saleId,discountAmount:e.discountAmount,discountPercent:e.discountPercent,reason:e.reason}),verifySupervisor:e=>Ze.post("/auth/verify-supervisor",e),getShiftReport:e=>Ze.get(`/reports/shift/${e}`),getDailySummary:(e,t)=>Ze.get("/reports/daily",{params:{branchId:e,date:t}})};function aB({inputRef:e,inputBuffer:t,setInputBuffer:n,onScan:a,onOpenModal:l,onVoid:o,onAction:d,isEnabled:u,onSelectProduct:m}){const[h,x]=g.useState([]),[p,b]=g.useState(!1),[N,v]=g.useState(-1),w=g.useRef(null),S=g.useRef(null);g.useEffect(()=>{if(S.current&&clearTimeout(S.current),!t||t.trim().length<2){x([]),b(!1);return}return S.current=setTimeout(async()=>{try{const _=await vt.searchInventory(t.trim()),T=_.data?.data||_.data||[],P=t.trim(),L=T.find(U=>U.barcode===P||U.sku===P||String(U.id)===P);if(L&&P.length>=3){k(L);return}const z=Array.isArray(T)?T.slice(0,8):[];x(z),b(z.length>0),v(-1)}catch(_){console.error("Search error:",_),x([]),b(!1)}},200),()=>{S.current&&clearTimeout(S.current)}},[t]),g.useEffect(()=>{if(N>=0&&w.current){const T=w.current.children[N];T&&T.scrollIntoView({block:"nearest",behavior:"smooth"})}},[N]);const A=g.useRef(Date.now()),E=g.useRef(null),C=_=>{const T=_.target.value,P=Date.now(),L=P-A.current;n(T),T.length>t.length&&T.length>2&&L<100&&(E.current&&clearTimeout(E.current),E.current=setTimeout(()=>{T.trim().length>=3&&a(T.trim())},200)),A.current=P},O=_=>{if(_.key==="Enter"){if(_.ctrlKey||_.metaKey)return;E.current&&clearTimeout(E.current)}if(!p||h.length===0){_.key==="Enter"&&a();return}_.key==="ArrowDown"?(_.preventDefault(),v(T=>{const P=T+1;return P>=h.length?0:P})):_.key==="ArrowUp"?(_.preventDefault(),v(T=>{const P=T-1;return P<0?h.length-1:P})):_.key==="Enter"?(_.preventDefault(),N>=0&&h[N]?k(h[N]):a()):_.key==="Escape"&&(b(!1),x([]))},k=_=>{n(""),x([]),b(!1),v(-1),m&&m(_)};return r.jsxs("div",{className:"w-4/12 bg-slate-50 flex flex-col h-full border-r border-slate-200 z-10",children:[r.jsxs("div",{className:"p-3 bg-white border-b border-slate-200 shrink-0 relative",children:[r.jsxs("div",{className:"flex gap-0 rounded-md shadow-sm border border-blue-300 overflow-hidden h-14",children:[r.jsx("div",{className:"bg-blue-50 px-3 flex items-center border-r border-blue-200",children:r.jsx(U7,{className:"w-6 h-6 text-blue-700"})}),r.jsx("input",{ref:e,type:"text",value:t,onChange:C,onKeyDown:O,onFocus:()=>h.length>0&&b(!0),onBlur:()=>setTimeout(()=>b(!1),200),className:"flex-1 px-3 text-xl font-mono text-slate-800 focus:outline-none focus:bg-white transition font-bold",placeholder:"Scan / PLU...",disabled:!u,autoComplete:"off"}),r.jsx("button",{onClick:a,className:"bg-blue-600 text-white px-5 font-bold hover:bg-blue-700 transition active:bg-blue-800 text-sm tracking-wide",children:"ENTER"})]}),p&&h.length>0&&r.jsx("div",{ref:w,className:"absolute left-3 right-3 top-[72px] bg-white border border-slate-300 rounded-lg shadow-xl z-50 max-h-64 overflow-y-auto",children:h.map((_,T)=>r.jsxs("div",{className:`px-3 py-2 cursor-pointer border-b border-slate-100 last:border-0 flex justify-between items-center transition-colors ${T===N?"bg-blue-50":"hover:bg-slate-50"}`,onMouseDown:()=>k(_),onMouseEnter:()=>v(T),children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-medium text-slate-800 text-sm truncate",children:_.name||_.productName}),r.jsx("div",{className:"text-xs text-slate-500 font-mono",children:_.sku||_.barcode})]}),r.jsx("div",{className:"text-right ml-2",children:r.jsxs("div",{className:"font-bold text-green-600 text-sm",children:["LKR ",parseFloat(_.sellingPrice||_.price||0).toFixed(2)]})})]},_.productId||_.id||T))})]}),r.jsxs("div",{className:"flex-1 flex flex-col p-2 gap-2 overflow-hidden min-h-0",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-[2] min-h-0",children:[r.jsxs("button",{onClick:()=>l("PRICE_CHECK"),className:"bg-white border-2 border-slate-200 rounded-lg shadow-sm hover:bg-slate-50 flex flex-col items-center justify-center p-1 transition-colors h-full active:scale-95",children:[r.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Price Check"}),r.jsx("span",{className:"text-slate-400 text-[10px] font-mono",children:"(F1)"})]}),r.jsxs("button",{onClick:o,className:"bg-red-50 border-2 border-red-200 rounded-lg shadow-sm hover:bg-red-100 flex flex-col items-center justify-center p-1 transition-colors h-full active:scale-95",children:[r.jsx("span",{className:"text-sm font-bold text-red-700",children:"Void Item"}),r.jsx("span",{className:"text-red-600/60 text-[10px] font-mono",children:"(Del)"})]}),r.jsxs("button",{onClick:()=>d("RECALL"),className:"col-span-2 bg-white border-2 border-slate-200 rounded-lg shadow-sm hover:bg-slate-50 flex flex-col items-center justify-center p-1 transition-colors h-full active:scale-95",children:[r.jsx("span",{className:"text-sm font-bold text-slate-700",children:"Recall Bill"}),r.jsx("span",{className:"text-slate-400 text-[10px] font-mono",children:"(F3)"})]}),r.jsxs("button",{onClick:()=>d("CANCEL"),className:"col-span-2 bg-red-50 border-2 border-red-200 rounded-lg shadow-sm hover:bg-red-100 flex flex-col items-center justify-center p-1 transition-colors h-full active:scale-95",children:[r.jsx("span",{className:"text-sm font-bold text-red-700",children:"Cancel Transaction"}),r.jsx("span",{className:"text-red-600/60 text-[10px] font-mono",children:"(F4)"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2 h-14 shrink-0",children:[r.jsxs("button",{onClick:()=>d("HOLD"),className:"bg-yellow-50 border border-yellow-200 rounded shadow-sm hover:bg-yellow-100 flex items-center justify-center gap-1 h-full active:scale-95",children:[r.jsx(XL,{className:"w-4 h-4 text-yellow-600"}),r.jsx("span",{className:"text-xs font-bold text-yellow-800",children:"Hold"})]}),r.jsxs("button",{onClick:()=>d("RETURN"),className:"bg-rose-50 border border-rose-200 rounded shadow-sm hover:bg-rose-100 flex items-center justify-center gap-1 h-full active:scale-95",children:[r.jsx($k,{className:"w-4 h-4 text-rose-600"}),r.jsx("span",{className:"text-xs font-bold text-rose-800",children:"Return"})]}),r.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-blue-50 border border-blue-200 rounded shadow-sm hover:bg-blue-100 flex items-center justify-center gap-1 h-full active:scale-95",children:[r.jsx(z7,{className:"w-4 h-4 text-blue-600"}),r.jsx("span",{className:"text-xs font-bold text-blue-800",children:"Reset"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 flex-1 min-h-0",children:[r.jsx("button",{onClick:()=>l("PAID_IN"),className:"bg-slate-100 border border-slate-200 rounded shadow-sm hover:bg-slate-200 flex items-center justify-center h-full active:scale-95",children:r.jsx("span",{className:"text-xs font-bold text-slate-700",children:"Paid In"})}),r.jsx("button",{onClick:()=>l("PAID_OUT"),className:"bg-slate-100 border border-slate-200 rounded shadow-sm hover:bg-slate-200 flex items-center justify-center h-full active:scale-95",children:r.jsx("span",{className:"text-xs font-bold text-slate-700",children:"Paid Out"})}),r.jsx("button",{onClick:()=>l("LOYALTY"),className:"bg-purple-50 border border-purple-200 rounded shadow-sm hover:bg-purple-100 flex items-center justify-center h-full active:scale-95",children:r.jsx("span",{className:"text-xs font-bold text-purple-800",children:"Loyalty"})}),r.jsx("button",{onClick:()=>l("REGISTER"),className:"bg-purple-50 border border-purple-200 rounded shadow-sm hover:bg-purple-100 flex items-center justify-center h-full active:scale-95",children:r.jsx("span",{className:"text-xs font-bold text-purple-800",children:"Register"})})]})]}),r.jsxs("div",{className:"mt-auto p-3 border-t border-slate-300 bg-white shrink-0 shadow-[0_-4px_10px_rgba(0,0,0,0.05)]",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-2",children:[r.jsxs("button",{className:"h-10 bg-slate-50 border border-slate-300 rounded shadow-sm flex items-center justify-center gap-1 hover:bg-slate-100 active:scale-95",children:[r.jsx(mi,{className:"w-4 h-4 text-slate-600"}),r.jsx("span",{className:"text-[10px] font-bold text-slate-700",children:"Print"})]}),r.jsxs("button",{className:"h-10 bg-slate-50 border border-slate-300 rounded shadow-sm flex items-center justify-center gap-1 hover:bg-slate-100 active:scale-95",children:[r.jsx(IL,{className:"w-4 h-4 text-slate-600"}),r.jsx("span",{className:"text-[10px] font-bold text-slate-700",children:"No Sale"})]}),r.jsxs("button",{onClick:()=>l("DISCOUNT"),className:"h-10 bg-yellow-50 border border-yellow-200 rounded shadow-sm flex items-center justify-center gap-1 hover:bg-yellow-100 active:scale-95",children:[r.jsx(Sd,{className:"w-4 h-4 text-yellow-600"}),r.jsx("span",{className:"text-[10px] font-bold text-yellow-800",children:"Disc"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("button",{onClick:()=>d("PAY_CASH"),className:"h-20 bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white rounded-xl shadow-[0_4px_0_rgb(21,128,61)] active:shadow-none active:translate-y-[4px] flex flex-col items-center justify-center transition-all col-span-2 border border-green-400/20",children:[r.jsx("span",{className:"font-bold text-3xl tracking-wider drop-shadow-sm",children:"CASH"}),r.jsx("span",{className:"text-xs opacity-90 uppercase font-mono mt-0.5 font-bold tracking-widest bg-black/10 px-2 rounded",children:"Space"})]}),r.jsxs("button",{onClick:()=>d("PAY_CARD"),className:"h-16 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl shadow-[0_4px_0_rgb(29,78,216)] active:shadow-none active:translate-y-[4px] flex flex-col items-center justify-center transition-all border border-blue-400/20",children:[r.jsx("span",{className:"font-bold text-xl tracking-wider drop-shadow-sm",children:"CARD"}),r.jsx("span",{className:"text-[10px] opacity-90 uppercase font-mono mt-0.5 font-bold bg-black/10 px-2 rounded",children:"F10"})]}),r.jsxs("button",{onClick:()=>d("PAY_QR"),className:"h-16 bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-800 hover:to-slate-900 text-white rounded-xl shadow-[0_4px_0_rgb(15,23,42)] active:shadow-none active:translate-y-[4px] flex flex-col items-center justify-center transition-all border border-slate-600/20",children:[r.jsx("span",{className:"font-bold text-xl tracking-wider drop-shadow-sm",children:"QR"}),r.jsx("span",{className:"text-[10px] opacity-90 uppercase font-mono mt-0.5 font-bold bg-black/10 px-2 rounded",children:"F11"})]})]})]})]})}const rh={quickItems:"pos_quick_pick_items"};function sB(e,t){try{return JSON.parse(e)}catch{return t}}function lB(e,t){const n=localStorage.getItem(e);return n?sB(n,t):t}function iB(e,t){localStorage.setItem(e,JSON.stringify(t))}function m3(e){const t=e?`${rh.quickItems}_${e}`:rh.quickItems;return lB(t,[])}function h3(e,t){const n=e?`${rh.quickItems}_${e}`:rh.quickItems;iB(n,t)}function oB({onAddToCart:e,onAddQuickItemClick:t,refreshTrigger:n,branchId:a,terminalId:l}){const[o,d]=g.useState([]),[u,m]=g.useState(!1),[h,x]=g.useState(!1);g.useEffect(()=>{p()},[n,l]);const p=()=>{m(!0);try{const A=m3(l);d(A)}catch(A){console.error("Failed to load quick items from storage",A),d([])}finally{m(!1)}},b=A=>{try{h3(l,A),d(A)}catch(E){console.error("Failed to save quick items",E)}},N=A=>{const E=o.filter(C=>C.id!==A);b(E)},v=()=>{b([]),x(!1)},w=A=>{e(A)},S=A=>A.toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2});return r.jsxs("div",{className:"flex-1 bg-slate-100 p-4 overflow-y-auto custom-scroll",children:[r.jsxs("div",{className:"mb-3 flex justify-between items-center",children:[r.jsxs("h2",{className:"text-sm font-bold text-slate-500 uppercase tracking-widest flex items-center gap-2",children:[r.jsx(Tt,{className:"w-4 h-4"})," Quick Pick Items",r.jsx("span",{className:"text-[10px] bg-slate-200 px-1.5 py-0.5 rounded-full text-slate-600",children:o.length})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[u&&r.jsx(Ve,{className:"w-4 h-4 text-blue-500 animate-spin"}),o.length>0&&r.jsx("button",{onClick:()=>x(!h),className:`text-xs font-bold px-2 py-1 rounded transition-colors ${h?"bg-red-100 text-red-600 hover:bg-red-200":"bg-slate-200 text-slate-600 hover:bg-slate-300"}`,children:h?"Done":"Edit"}),h&&o.length>0&&r.jsxs("button",{onClick:v,className:"text-xs font-bold px-2 py-1 rounded bg-red-600 text-white hover:bg-red-700 flex items-center gap-1",children:[r.jsx(en,{className:"w-3 h-3"})," Clear All"]})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-3 content-start",children:[o.map(A=>r.jsxs("div",{className:"relative",children:[h&&r.jsx("button",{onClick:()=>N(A.id),className:"absolute -top-2 -right-2 z-10 w-6 h-6 bg-red-500 hover:bg-red-600 text-white rounded-full flex items-center justify-center shadow-lg transition-colors",children:r.jsx($e,{className:"w-4 h-4"})}),r.jsxs("button",{onClick:()=>!h&&w(A),disabled:h,className:`w-full bg-white border rounded-xl p-3 h-28 flex flex-col justify-between shadow-sm transition-all active:scale-[0.98] group ${h?"border-red-200 bg-red-50 cursor-default animate-pulse":"border-slate-200 hover:shadow-md hover:border-blue-400 hover:bg-blue-50"}`,children:[r.jsx("div",{className:"w-full flex justify-between items-start",children:r.jsx("span",{className:"text-[10px] font-bold text-slate-400 bg-slate-100 px-1.5 py-0.5 rounded group-hover:bg-white group-hover:text-blue-500 transition-colors font-mono",children:A.sku||`P${A.id}`})}),r.jsx("div",{className:"text-sm font-bold text-slate-700 leading-tight line-clamp-2 group-hover:text-blue-700 text-left",children:A.name}),r.jsx("div",{className:"w-full flex justify-end",children:r.jsx("span",{className:"text-sm font-mono font-bold text-slate-900 bg-slate-100 px-2 py-1 rounded group-hover:bg-blue-600 group-hover:text-white transition-colors",children:S(A.price)})})]})]},A.id)),r.jsxs("button",{onClick:t,className:"border-2 border-dashed border-slate-300 rounded-xl p-3 h-28 flex flex-col items-center justify-center gap-2 text-slate-400 hover:text-blue-600 hover:border-blue-400 hover:bg-blue-50 transition-all active:scale-[0.98]",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center",children:r.jsx(yn,{className:"w-6 h-6"})}),r.jsx("span",{className:"text-xs font-bold uppercase tracking-wide",children:"Add item"})]})]}),!u&&o.length===0&&r.jsxs("div",{className:"text-center py-8 text-slate-400",children:[r.jsx(Tt,{className:"w-12 h-12 mx-auto mb-2 opacity-30"}),r.jsx("p",{className:"text-sm",children:"No quick pick items yet"}),r.jsx("p",{className:"text-xs mt-1",children:'Click "Add item" to search and add products'})]})]})}const cB="http://localhost:8080/api/v1/grn-payments",zn=Rt.create({baseURL:cB,headers:{"Content-Type":"application/json"}});zn.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e));zn.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user")),Promise.reject(e)));const Bn={getPaymentRequestsByBranch:e=>zn.get("/branch",{params:{branchId:e}}),getPendingCount:e=>zn.get("/branch/pending-count",{params:{branchId:e}}),getPaymentRequestsByStatus:e=>zn.get(`/status/${e}`),getManagerPaymentRequests:()=>zn.get("/manager"),getManagerPendingCount:()=>zn.get("/manager/pending-count"),getPaymentRequestById:e=>zn.get(`/${e}`),transferToManager:(e,t)=>zn.post(`/${e}/transfer-to-manager`,{supervisorUsername:t.supervisorUsername,supervisorPassword:t.supervisorPassword,notes:t.notes,priority:t.priority}),requestPayout:(e,t)=>zn.post(`/${e}/transfer-to-manager`,{supervisorUsername:t.supervisorUsername,supervisorPassword:t.supervisorPassword,notes:`[PAYOUT REQUEST] Payment Method: ${t.paymentMethod}${t.paymentReference?` | Ref: ${t.paymentReference}`:""}
${t.notes||""}`.trim(),priority:"HIGH"}),processPayment:(e,t)=>zn.post(`/${e}/process-payment`,{paymentMethod:t.paymentMethod,paymentReference:t.paymentReference,amountPaid:t.amountPaid,notes:t.notes}),rejectRequest:(e,t)=>zn.post(`/${e}/reject`,{reason:t})},x3=g.createContext();function qv({children:e}){const[t,n]=g.useState([]),[a,l]=g.useState([]),[o,d]=g.useState(!1),[u,m]=g.useState(0),[h,x]=g.useState(!1);g.useEffect(()=>{const S=localStorage.getItem("pos_notifications");if(S)try{const A=JSON.parse(S),E=(A.list||[]).map(C=>({...C,time:new Date(C.time)}));n(E),m(A.unread||0)}catch(A){console.error("Failed to load notifications",A)}x(!0)},[]),g.useEffect(()=>{h&&localStorage.setItem("pos_notifications",JSON.stringify({list:t,unread:u}))},[t,u,h]);const p=g.useCallback((S,A,E)=>{const C=Date.now(),O={id:C,type:S,title:A,message:E,time:new Date,read:!1};n(k=>[O,...k].slice(0,50)),m(k=>k+1),l(k=>[...k.slice(-2),O]),setTimeout(()=>{l(k=>k.filter(_=>_.id!==C))},4e3)},[]),b=()=>{n(S=>S.map(A=>({...A,read:!0}))),m(0)},N=()=>{n([]),m(0),localStorage.removeItem("pos_notifications")},v=S=>{n(A=>{const E=A.map(O=>O.id===S?{...O,read:!0}:O),C=E.filter(O=>!O.read).length;return m(C),E})},w=S=>{n(A=>{const E=A.filter(O=>O.id!==S),C=E.filter(O=>!O.read).length;return m(C),E})};return r.jsxs(x3.Provider,{value:{notifications:t,unreadCount:u,isOpen:o,setIsOpen:d,addNotification:p,markAllRead:b,clearNotifications:N,markAsRead:v,removeNotification:w},children:[e,r.jsx("div",{className:"fixed bottom-6 right-6 z-[100] flex flex-col gap-3 pointer-events-none",children:a.map(S=>r.jsxs("div",{className:"animate-in slide-in-from-right fade-in duration-300 pointer-events-auto bg-white border border-slate-200 shadow-2xl rounded-lg p-4 w-80 flex items-start gap-3 border-l-4",style:{borderLeftColor:S.type==="success"?"#22C55E":S.type==="error"?"#EF4444":"#3B82F6"},children:[r.jsx("div",{className:`mt-0.5 ${S.type==="success"?"text-green-500":S.type==="error"?"text-red-500":"text-blue-500"}`,children:S.type==="success"?r.jsx(et,{className:"w-5 h-5"}):S.type==="error"?r.jsx(Bt,{className:"w-5 h-5"}):r.jsx(Qd,{className:"w-5 h-5"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-slate-800 text-sm",children:S.title}),r.jsx("p",{className:"text-slate-500 text-xs mt-0.5",children:S.message})]}),r.jsx("button",{onClick:()=>l(A=>A.filter(E=>E.id!==S.id)),className:"text-slate-400 hover:text-slate-600",children:r.jsx($e,{className:"w-4 h-4"})})]},S.id))})]})}const ru=()=>{const e=g.useContext(x3);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e},p3=()=>{const{notifications:e,unreadCount:t,isOpen:n,setIsOpen:a,markAsRead:l,markAllRead:o,removeNotification:d,clearNotifications:u}=ru();if(!n)return null;const m=x=>{switch(x){case"success":return r.jsx(Lm,{className:"text-green-600",size:20});case"error":return r.jsx(lr,{className:"text-red-600",size:20});case"warning":return r.jsx(lr,{className:"text-yellow-600",size:20});default:return r.jsx(Qd,{className:"text-blue-600",size:20})}},h=x=>{const p=new Date(x),N=new Date-p,v=Math.floor(N/6e4),w=Math.floor(N/36e5),S=Math.floor(N/864e5);return v<1?"Just now":v<60?`${v}m ago`:w<24?`${w}h ago`:`${S}d ago`};return r.jsx("div",{className:"fixed inset-0 z-[9999] flex items-start justify-end p-4 pointer-events-none",children:r.jsxs("div",{className:"pointer-events-auto w-full max-w-md bg-white rounded-lg shadow-2xl border border-gray-200 animate-in slide-in-from-right-5 fade-in duration-300",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ko,{size:20,className:"text-gray-700"}),r.jsx("h3",{className:"font-semibold text-gray-900",children:"Notifications"}),t>0&&r.jsx("span",{className:"px-2 py-0.5 text-xs font-semibold bg-red-500 text-white rounded-full",children:t})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[e.length>0&&r.jsxs(r.Fragment,{children:[t>0&&r.jsx("button",{onClick:o,className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:"Mark all read"}),r.jsx("button",{onClick:u,className:"text-xs text-gray-600 hover:text-gray-700 font-medium",children:"Clear all"})]}),r.jsx("button",{onClick:()=>a(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx($e,{size:20})})]})]}),r.jsx("div",{className:"max-h-[500px] overflow-y-auto",children:e.length===0?r.jsxs("div",{className:"p-8 text-center text-gray-500",children:[r.jsx(ko,{size:48,className:"mx-auto mb-2 text-gray-300"}),r.jsx("p",{children:"No notifications"})]}):r.jsx("div",{className:"divide-y divide-gray-100",children:e.map(x=>r.jsx("div",{className:`p-4 hover:bg-gray-50 transition-colors ${x.read?"":"bg-blue-50"}`,onClick:()=>!x.read&&l(x.id),children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:m(x.type)}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.title}),x.message&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.message}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:h(x.time)})]}),r.jsx("button",{onClick:p=>{p.stopPropagation(),d(x.id)},className:"flex-shrink-0 text-gray-400 hover:text-gray-600",children:r.jsx($e,{size:16})})]})},x.id))})})]})})};function dB({onClose:e}){const[t,n]=g.useState(""),[a,l]=g.useState(null),[o,d]=g.useState(!1),[u,m]=g.useState(!1),[h,x]=g.useState([]),[p,b]=g.useState(!1),[N,v]=g.useState(-1),w=g.useRef(null),S=g.useRef(null),A=g.useRef(null);g.useEffect(()=>{w.current?.focus()},[]),g.useEffect(()=>{if(A.current&&clearTimeout(A.current),!t||t.trim().length<2){x([]),b(!1);return}return A.current=setTimeout(async()=>{try{const k=await vt.searchInventory(t.trim()),_=k.data?.data||k.data||[],T=Array.isArray(_)?_.slice(0,6):[];x(T),b(T.length>0),v(-1)}catch(k){console.error("Search error:",k),x([]),b(!1)}},300),()=>{A.current&&clearTimeout(A.current)}},[t]);const E=k=>{x([]),b(!1),v(-1),n(""),d(!1);const _=k.sellingPrice??k.price??k.unitPrice??0,T=k.stockQty??k.quantity??k.stock??0;l({id:k.productId||k.id||k.sku||k.barcode,name:k.name||k.productName||"Unknown Product",price:parseFloat(_)||0,sku:k.sku,barcode:k.barcode,stockQty:parseInt(T)||0,inStock:T>0||k.inStock!==!1})};g.useEffect(()=>{if(N>=0&&S.current){const _=S.current.children[N];_&&_.scrollIntoView({block:"nearest",behavior:"smooth"})}},[N]);const C=k=>{!p||h.length===0||(k.key==="ArrowDown"?(k.preventDefault(),v(_=>{const T=_+1;return T>=h.length?0:T})):k.key==="ArrowUp"?(k.preventDefault(),v(_=>{const T=_-1;return T<0?h.length-1:T})):k.key==="Enter"?N>=0&&h[N]&&(k.preventDefault(),E(h[N])):k.key==="Escape"&&(b(!1),x([])))},O=async k=>{if(k?.preventDefault(),!!t.trim()){if(N>=0&&h[N]){E(h[N]);return}m(!0),d(!1),l(null),x([]),b(!1);try{const _=await vt.checkPrice(t.trim()),T=_.data?.data||_.data;if(console.log("Price check result:",T),T){const P=T.sellingPrice??T.price??T.unitPrice??0,L=T.stockQty??T.quantity??T.stock??0;l({id:T.productId||T.id||T.sku||T.barcode,name:T.name||T.productName||"Unknown Product",price:parseFloat(P)||0,sku:T.sku,barcode:T.barcode,stockQty:parseInt(L)||0,inStock:L>0||T.inStock!==!1})}else d(!0)}catch(_){console.error("Price check error:",_),d(!0)}m(!1),n("")}};return r.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-[480px] rounded-xl shadow-2xl transform transition-all",children:[r.jsxs("div",{className:"bg-slate-800 px-5 py-4 flex justify-between items-center rounded-t-xl",children:[r.jsxs("h3",{className:"text-white font-bold text-xl flex items-center gap-2",children:[r.jsx(mn,{className:"w-6 h-6 text-blue-400"})," Price Verifier"]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:r.jsx($e,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:"Scan Item / Enter Code"}),r.jsxs("div",{className:"relative mb-4",children:[r.jsx("form",{onSubmit:O,children:r.jsxs("div",{className:"flex gap-0 border-2 border-slate-300 rounded-lg overflow-hidden focus-within:border-blue-500 transition-colors",children:[r.jsx("input",{ref:w,type:"text",value:t,onChange:k=>n(k.target.value),onKeyDown:C,onFocus:()=>h.length>0&&b(!0),onBlur:()=>setTimeout(()=>b(!1),200),className:"flex-1 px-4 py-3 text-xl font-mono font-bold focus:outline-none text-slate-800",placeholder:"Type to search...",autoComplete:"off"}),r.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white px-5 font-bold hover:bg-blue-700 transition-colors",children:u?"...":r.jsx(er,{className:"w-6 h-6"})})]})}),p&&h.length>0&&r.jsx("div",{ref:S,className:"absolute left-0 right-0 top-full mt-1 bg-white border-2 border-slate-300 rounded-lg shadow-2xl z-[100] max-h-80 overflow-y-auto",children:h.map((k,_)=>r.jsxs("div",{className:`px-4 py-3 cursor-pointer border-b border-slate-100 last:border-0 flex justify-between items-center transition-colors ${_===N?"bg-blue-100":"hover:bg-slate-50"}`,onMouseDown:()=>E(k),onMouseEnter:()=>v(_),children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"font-semibold text-slate-800 truncate",children:k.name||k.productName}),r.jsx("div",{className:"text-sm text-slate-500 font-mono mt-0.5",children:k.sku||k.barcode})]}),r.jsx("div",{className:"text-right ml-3",children:r.jsxs("div",{className:"font-bold text-green-600 text-lg",children:["LKR ",parseFloat(k.sellingPrice||k.price||0).toFixed(2)]})})]},k.productId||k.id||_))})]}),a&&r.jsxs("div",{className:"text-center space-y-4 pt-4 fade-enter-active",children:[r.jsx("div",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:"Item Price"}),r.jsxs("div",{className:"text-6xl font-bold font-mono text-slate-900",children:[r.jsx("span",{className:"text-3xl align-top text-slate-400",children:"LKR"})," ",(a.price||0).toFixed(2)]}),r.jsxs("div",{className:"bg-slate-50 rounded-xl p-4 border border-slate-200 text-left",children:[r.jsx("div",{className:"text-base font-bold text-slate-800 leading-tight mb-2",children:a.name}),r.jsxs("div",{className:"flex justify-between items-center mt-3",children:[r.jsx("span",{className:"text-sm font-mono text-slate-600 bg-white px-3 py-1 rounded-lg border border-slate-200",children:a.sku||a.barcode||a.id}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("span",{className:`text-sm font-bold px-3 py-1 rounded-lg ${a.stockQty>10?"bg-green-100 text-green-700":a.stockQty>0?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:[a.stockQty," units"]}),r.jsxs("span",{className:`text-sm font-bold flex items-center gap-1.5 ${a.inStock?"text-green-600":"text-red-600"}`,children:[r.jsx(Tt,{className:"w-4 h-4"})," ",a.inStock?"In Stock":"Out of Stock"]})]})]})]})]}),o&&r.jsxs("div",{className:"text-center py-8 fade-enter-active",children:[r.jsx(lr,{className:"w-16 h-16 text-red-300 mx-auto mb-3"}),r.jsx("p",{className:"text-red-600 font-bold text-lg",children:"Item Not Found"}),r.jsx("p",{className:"text-sm text-red-400 mt-1",children:"Check the code and try again."})]})]})]})})}function uB({onClose:e,onAttach:t}){const[n,a]=g.useState(""),[l,o]=g.useState([]),[d,u]=g.useState(-1),[m,h]=g.useState(!1),[x,p]=g.useState(null),[b,N]=g.useState(!1),[v,w]=g.useState(null),S=g.useRef(null);g.useEffect(()=>{S.current?.focus()},[]),g.useEffect(()=>{const k=setTimeout(async()=>{if(!n.trim()||x){o([]);return}try{const _=await vt.findCustomer(n.trim()),T=_.data?.data||_.data,P=Array.isArray(T)?T:T?[T]:[];o(P),h(P.length>0),u(-1)}catch(_){console.debug("Suggestion search failed",_)}},300);return()=>clearTimeout(k)},[n,x]);const A=k=>{p({id:k.customerId||k.id,code:k.code,name:k.name,phone:k.phone,email:k.email,address:k.address,city:k.city,loyaltyPoints:k.loyaltyPoints||k.loyalty_points||0,totalPurchases:k.totalPurchases||k.total_purchases||0,isActive:k.isActive!==!1}),o([]),h(!1),a("")},E=async k=>{if(k?.preventDefault(),!!n.trim()){N(!0),w(null),o([]);try{const _=await vt.findCustomer(n.trim()),T=_.data?.data||_.data;if(!T||Array.isArray(T)&&T.length===0){w("Customer not found"),p(null);return}const P=Array.isArray(T)?T[0]:T;A(P)}catch(_){console.error("Customer search failed:",_),w("Customer not found. Try a different query."),p(null)}finally{N(!1)}}},C=k=>{m&&l.length>0?k.key==="ArrowDown"?(k.preventDefault(),u(_=>_<l.length-1?_+1:0)):k.key==="ArrowUp"?(k.preventDefault(),u(_=>_>0?_-1:l.length-1)):k.key==="Enter"?(k.preventDefault(),d>=0?A(l[d]):E(k)):k.key==="Escape"&&h(!1):k.key==="Enter"&&x&&(k.preventDefault(),t(x))},O=k=>k>=1e3?{name:"PLATINUM",color:"text-purple-700",bg:"bg-purple-100"}:k>=500?{name:"GOLD",color:"text-yellow-700",bg:"bg-yellow-100"}:k>=100?{name:"SILVER",color:"text-slate-600",bg:"bg-slate-100"}:{name:"BRONZE",color:"text-orange-600",bg:"bg-orange-100"};return r.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-[420px] rounded-xl shadow-2xl overflow-hidden min-h-[400px] flex flex-col",children:[r.jsxs("div",{className:"bg-purple-900 px-4 py-3 flex justify-between items-center shrink-0",children:[r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(fy,{className:"w-5 h-5 text-yellow-400"})," Loyalty Lookup"]}),r.jsx("button",{onClick:e,className:"text-purple-300 hover:text-white transition-colors",children:r.jsx($e,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-5 flex-1 relative",children:[r.jsxs("div",{className:"relative z-20",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Customer Phone or Name"}),r.jsxs("form",{onSubmit:E,className:"flex gap-2 mb-2",children:[r.jsxs("div",{className:"flex-1 flex items-center border border-slate-300 rounded-lg px-3 focus-within:border-purple-500 focus-within:ring-2 focus-within:ring-purple-100 bg-white",children:[r.jsx(er,{className:"w-4 h-4 text-slate-400 mr-2"}),r.jsx("input",{ref:S,type:"text",value:n,onChange:k=>{a(k.target.value),p(null)},onKeyDown:C,className:"flex-1 py-2 text-sm font-mono focus:outline-none bg-transparent",placeholder:"Search by phone or name...",autoComplete:"off"})]}),r.jsx("button",{type:"submit",disabled:b||!n.trim(),className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-bold text-sm hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:b?r.jsx(Ve,{className:"w-4 h-4 animate-spin"}):r.jsx(Yd,{className:"w-4 h-4"})})]}),m&&l.length>0&&r.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-slate-200 rounded-lg shadow-xl max-h-60 overflow-y-auto z-30",children:l.map((k,_)=>r.jsxs("div",{onClick:()=>A(k),className:`px-4 py-3 cursor-pointer border-b border-slate-50 last:border-none flex justify-between items-center transition-colors ${_===d?"bg-purple-50":"hover:bg-slate-50"}`,children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-700 text-sm",children:k.name}),r.jsx("div",{className:"text-xs text-slate-500 font-mono",children:k.phone})]}),r.jsx("div",{className:"text-right",children:r.jsx("span",{className:`text-[10px] font-bold px-1.5 py-0.5 rounded ${O(k.loyaltyPoints).bg} ${O(k.loyaltyPoints).color}`,children:O(k.loyaltyPoints).name})})]},k.id||k.customerId||_))})]}),v&&r.jsx("div",{className:"bg-red-50 border border-red-100 rounded-lg p-3 mb-4 text-center mt-4",children:r.jsx("p",{className:"text-red-600 text-sm",children:v})}),x&&r.jsxs("div",{className:"bg-purple-50 border border-purple-100 rounded-lg p-4 animate-in fade-in duration-200 mt-4 relative z-10",children:[r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"bg-purple-200 p-2.5 rounded-full",children:r.jsx(tn,{className:"w-6 h-6 text-purple-700"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-slate-800 text-lg",children:x.name}),x.code&&r.jsx("span",{className:"text-xs font-mono text-slate-500 bg-white px-2 py-0.5 rounded border border-slate-200",children:x.code}),r.jsxs("div",{className:"mt-2 space-y-1 text-xs text-slate-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Qm,{className:"w-3 h-3 text-slate-400"}),x.phone]}),x.email&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Wd,{className:"w-3 h-3 text-slate-400"}),x.email]})]}),r.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-2",children:[r.jsxs("div",{className:"bg-white rounded-lg p-2 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center gap-1 text-purple-600 mb-1",children:[r.jsx(Oo,{className:"w-3 h-3"}),r.jsx("span",{className:"text-[10px] font-bold uppercase",children:"Points"})]}),r.jsx("div",{className:"font-mono font-bold text-lg text-purple-700",children:x.loyaltyPoints.toLocaleString()})]}),r.jsxs("div",{className:"bg-white rounded-lg p-2 border border-purple-200",children:[r.jsx("div",{className:"text-[10px] font-bold uppercase text-slate-500 mb-1",children:"Tier"}),r.jsx("div",{className:`font-bold text-sm ${O(x.loyaltyPoints).color}`,children:r.jsx("span",{className:`px-2 py-0.5 rounded ${O(x.loyaltyPoints).bg}`,children:O(x.loyaltyPoints).name})})]})]}),x.totalPurchases>0&&r.jsxs("div",{className:"mt-2 text-xs text-slate-500",children:["Total Purchases: ",r.jsxs("span",{className:"font-mono font-bold text-slate-700",children:["LKR ",x.totalPurchases.toLocaleString()]})]})]})]}),r.jsxs("button",{onClick:()=>t(x),className:"w-full mt-4 bg-purple-600 hover:bg-purple-700 text-white py-2.5 rounded-lg text-sm font-bold uppercase tracking-wide flex items-center justify-center gap-2 transition-colors shadow-md focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 outline-none",children:[r.jsx(fy,{className:"w-4 h-4"})," Attach to Bill ",r.jsx("span",{className:"text-white/60 text-[10px] ml-1 font-mono",children:"(ENTER)"})]})]}),!x&&!v&&!b&&!n&&r.jsxs("div",{className:"text-center py-8 text-slate-400 mt-8",children:[r.jsx(tn,{className:"w-12 h-12 mx-auto mb-2 opacity-20"}),r.jsx("p",{className:"text-sm",children:"Start typing to search..."})]})]})]})})}function YS({type:e,shiftId:t,onClose:n,onNotify:a}){const l=g.useRef(null),[o,d]=g.useState(""),[u,m]=g.useState(""),[h,x]=g.useState(""),[p,b]=g.useState(!1),N=e==="PAID_IN",v=N?_s:Vd;g.useEffect(()=>{l.current?.focus()},[]);const w=async S=>{S.preventDefault();const A=parseFloat(o);if(!o||isNaN(A)||A<=0){a("error","Invalid Amount","Please enter a valid amount greater than 0.");return}if(!u.trim()){a("error","Reason Required","Please enter a reason for this transaction.");return}if(!t){a("error","No Active Shift","Cannot record cash flow without an active shift.");return}b(!0);try{await vt.recordCashFlow({shiftId:t,amount:A,type:e,reason:u.trim(),referenceNo:h.trim()||null});const E=N?"Cash In Recorded":"Cash Out Recorded",C=`Amount: LKR ${A.toFixed(2)} | Reason: ${u}`;a("success",E,C),n()}catch(E){console.error("Cash flow error:",E);const C=E.response?.data?.message||"Failed to record cash flow";a("error","Transaction Failed",C),b(!1)}};return r.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-[420px] rounded-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:`px-4 py-3 flex justify-between items-center ${N?"bg-blue-900":"bg-red-900"}`,children:[r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(v,{className:`w-5 h-5 ${N?"text-blue-300":"text-red-300"}`}),N?"Paid In (Cash In)":"Paid Out (Cash Out)"]}),r.jsx("button",{onClick:n,className:"text-white/60 hover:text-white",children:r.jsx($e,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:w,className:"p-6 space-y-4",children:[r.jsx("div",{className:`p-3 rounded-lg border ${N?"bg-blue-50 border-blue-100":"bg-red-50 border-red-100"}`,children:r.jsx("p",{className:`text-xs ${N?"text-blue-700":"text-red-700"}`,children:N?"Record cash being added to the register (e.g., change from bank, petty cash)":"Record cash being removed from the register (e.g., expenses, cash pickups)"})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Amount *"}),r.jsxs("div",{className:`flex items-center border rounded-lg bg-white px-3 py-2 focus-within:ring-2 ${N?"border-blue-300 focus-within:border-blue-500 focus-within:ring-blue-100":"border-red-300 focus-within:border-red-500 focus-within:ring-red-100"}`,children:[r.jsx("span",{className:"text-slate-400 font-mono mr-2",children:"LKR"}),r.jsx("input",{ref:l,type:"number",step:"0.01",min:"0",value:o,onChange:S=>d(S.target.value),disabled:p,className:"bg-transparent w-full text-xl font-mono font-bold text-slate-900 focus:outline-none",placeholder:"0.00"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Reason / Description *"}),r.jsx("textarea",{rows:"2",value:u,onChange:S=>m(S.target.value),disabled:p,className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"Enter reason for this transaction..."})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:["Reference No. ",r.jsx("span",{className:"text-slate-400 font-normal",children:"(Optional)"})]}),r.jsx("input",{type:"text",value:h,onChange:S=>x(S.target.value),disabled:p,className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"Receipt/Voucher number..."})]}),r.jsxs("div",{className:"flex gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:n,disabled:p,className:"flex-1 py-2.5 border border-slate-300 rounded-lg text-slate-700 font-bold text-sm hover:bg-slate-50 disabled:opacity-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:p,className:`flex-1 py-2.5 text-white rounded-lg font-bold text-sm shadow-md flex items-center justify-center gap-2 disabled:opacity-50 transition-colors ${N?"bg-blue-600 hover:bg-blue-700":"bg-red-600 hover:bg-red-700"}`,children:p?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-4 h-4 animate-spin"})," Recording..."]}):r.jsxs(r.Fragment,{children:[r.jsx(v,{className:"w-4 h-4"})," Confirm ",N?"Paid In":"Paid Out"]})})]})]})]})})}function fB({onClose:e}){const t=g.useRef(null),n=g.useRef(null),a=g.useRef(null),l=g.useRef(null),o=g.useRef(null),d=g.useRef(null),u=g.useRef(null),[m,h]=g.useState({name:"",phone:"",email:""}),[x,p]=g.useState(!1);g.useEffect(()=>{t.current?.focus()},[]);const b=(v,w)=>{v.key==="Enter"&&(v.preventDefault(),w?.current?.focus())},N=async v=>{v.preventDefault(),p(!0);try{await vt.createCustomer(m),alert("New Customer Registered Successfully!"),e()}catch{alert("Failed to register customer.")}p(!1)};return r.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-96 rounded-xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-blue-900 px-4 py-3 flex justify-between items-center",children:[r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(Iv,{className:"w-5 h-5"})," New Customer"]}),r.jsx("button",{onClick:e,className:"text-blue-300 hover:text-white",children:r.jsx($e,{className:"w-5 h-5"})})]}),r.jsxs("form",{onSubmit:N,className:"p-6 space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Full Name"}),r.jsx("input",{ref:t,type:"text",required:!0,className:"w-full border border-slate-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"John Doe",value:m.name,onChange:v=>h({...m,name:v.target.value}),onKeyDown:v=>b(v,n)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Phone Number"}),r.jsx("input",{ref:n,type:"text",required:!0,className:"w-full border border-slate-300 rounded px-3 py-2 text-sm font-mono focus:outline-none focus:border-blue-500",placeholder:"07XXXXXXXX",value:m.phone,onChange:v=>h({...m,phone:v.target.value}),onKeyDown:v=>b(v,a)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Email Address"}),r.jsx("input",{ref:a,type:"email",required:!0,className:"w-full border border-slate-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"john@example.com",value:m.email,onChange:v=>h({...m,email:v.target.value}),onKeyDown:v=>b(v,l)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"City"}),r.jsx("input",{ref:l,type:"text",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"Colombo",value:m.city||"",onChange:v=>h({...m,city:v.target.value}),onKeyDown:v=>b(v,o)})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Date of Birth"}),r.jsx("input",{ref:o,type:"date",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500",value:m.dateOfBirth||"",onChange:v=>h({...m,dateOfBirth:v.target.value}),onKeyDown:v=>b(v,d)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Address"}),r.jsx("textarea",{ref:d,rows:"2",className:"w-full border border-slate-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-blue-500 resize-none",placeholder:"123, Main Street...",value:m.address||"",onChange:v=>h({...m,address:v.target.value}),onKeyDown:v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),u.current?.focus())}})]}),r.jsx("button",{ref:u,type:"submit",disabled:x,className:"w-full mt-2 bg-blue-600 text-white py-2.5 rounded font-bold text-sm hover:bg-blue-700 shadow-md focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 outline-none",children:x?"Creating...":"Create Account"})]})]})})}function mB({title:e,message:t,onConfirm:n,onCancel:a,isAlert:l=!1}){return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-80 rounded-lg shadow-2xl overflow-hidden transform transition-all scale-100",children:[r.jsxs("div",{className:"p-5 text-center",children:[r.jsx("div",{className:`mx-auto flex items-center justify-center h-12 w-12 rounded-full mb-4 ${l?"bg-green-100":"bg-yellow-100"}`,children:l?r.jsx(et,{className:"h-6 w-6 text-green-600"}):r.jsx(Bt,{className:"h-6 w-6 text-yellow-600"})}),r.jsx("h3",{className:"text-lg leading-6 font-bold text-slate-900",children:e}),r.jsx("div",{className:"mt-2",children:r.jsx("p",{className:"text-sm text-slate-500 whitespace-pre-line",children:t})})]}),r.jsxs("div",{className:"bg-slate-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6 gap-2",children:[r.jsx("button",{onClick:n,className:`w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 text-base font-medium text-white focus:outline-none sm:text-sm ${l?"bg-blue-600 hover:bg-blue-700":"bg-red-600 hover:bg-red-700"}`,children:l?"OK":"Yes, Proceed"}),!l&&r.jsx("button",{onClick:a,className:"mt-3 w-full inline-flex justify-center rounded-md border border-slate-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-slate-700 hover:bg-slate-50 focus:outline-none sm:mt-0 sm:text-sm",children:"No"})]})]})})}function hB({type:e,onClose:t,onSelect:n,branchId:a}){const[l,o]=g.useState(""),[d,u]=g.useState([]),[m,h]=g.useState(!0),[x,p]=g.useState(null),[b,N]=g.useState(-1),v=El.useRef(null),w=e==="RECALL",S=w?"Recall Held Bill":"Return Sale",A=w?Cd:$k;g.useEffect(()=>{E()},[e,a]);const E=async()=>{h(!0),p(null);try{let T;if(w)T=await vt.getHeldBills(a);else{const z=new Date,U=new Date;U.setDate(U.getDate()-7),T=await vt.getSales({branchId:a,status:"COMPLETED",limit:100,startDate:U.toISOString(),endDate:z.toISOString()})}const P=T.data?.data||T.data||[],L=(Array.isArray(P)?P:[]).map(z=>({id:z.saleId||z.id,invoiceNo:z.invoiceNo||z.invoice_no||z.id||`INV-${z.saleId}`,saleDate:z.saleDate||z.sale_date||z.createdAt||new Date,customerName:z.customer&&z.customer.name?z.customer.name:z.customerName||"Walk-in Customer",customerId:z.customerId||z.customer_id,itemCount:typeof z.items=="number"?z.items:z.itemCount||(z.items?z.items.length:0),grossTotal:parseFloat(z.grossTotal||z.gross_total||0),discountAmount:parseFloat(z.discountAmount||z.discount_amount||0),taxAmount:parseFloat(z.taxAmount||z.tax_amount||0),netTotal:parseFloat(z.netTotal||z.net_total||0),status:z.status||"COMPLETED",cashierName:z.cashier&&z.cashier.name?z.cashier.name:z.cashierName||"",items:z.items||[],payments:z.payments||[]}));u(L)}catch(T){console.error("Failed to fetch bills:",T),p(T.response?.data?.message||"Failed to load bills")}finally{h(!1)}},C=d.filter(T=>T.invoiceNo.toLowerCase().includes(l.toLowerCase())||T.customerName.toLowerCase().includes(l.toLowerCase()));g.useEffect(()=>{N(-1)},[l,d]);const O=T=>{C.length!==0&&(T.key==="ArrowDown"?(T.preventDefault(),N(P=>P<C.length-1?P+1:P)):T.key==="ArrowUp"?(T.preventDefault(),N(P=>P>0?P-1:P)):T.key==="Enter"&&(T.preventDefault(),b>=0&&b<C.length&&n(C[b])))};g.useEffect(()=>{if(b>=0&&v.current){const P=v.current.children[b];P&&P.scrollIntoView({block:"nearest",behavior:"smooth"})}},[b]);const k=T=>T?new Date(T).toLocaleString("en-LK",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",_=T=>({HELD:"bg-amber-100 text-amber-700 border-amber-200",COMPLETED:"bg-green-100 text-green-700 border-green-200",VOIDED:"bg-red-100 text-red-700 border-red-200",RETURNED:"bg-purple-100 text-purple-700 border-purple-200"})[T]||"bg-slate-100 text-slate-700 border-slate-200";return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-[680px] h-[560px] rounded-xl shadow-2xl flex flex-col overflow-hidden",children:[r.jsxs("div",{className:`px-4 py-3 flex justify-between items-center shrink-0 ${w?"bg-amber-600":"bg-rose-600"}`,children:[r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(A,{className:"w-5 h-5"})," ",S]}),r.jsx("button",{onClick:t,className:"text-white/70 hover:text-white transition-colors",children:r.jsx($e,{className:"w-6 h-6"})})]}),r.jsx("div",{className:"p-3 bg-slate-50 border-b border-slate-200 shrink-0",children:r.jsxs("div",{className:"relative",children:[r.jsx(er,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),r.jsx("input",{autoFocus:!0,type:"text",value:l,onChange:T=>o(T.target.value),className:"w-full pl-9 pr-4 py-2 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"Search by Invoice No or Customer Name...",onKeyDown:O})]})}),r.jsxs("div",{className:"flex-1 overflow-y-auto custom-scroll",children:[m&&r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Ve,{className:"w-8 h-8 animate-spin text-slate-400 mx-auto mb-2"}),r.jsxs("p",{className:"text-sm text-slate-500",children:["Loading ",w?"held bills":"sales","..."]})]})}),x&&!m&&r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center p-4",children:[r.jsx(lr,{className:"w-10 h-10 text-red-400 mx-auto mb-2"}),r.jsx("p",{className:"text-red-600 font-medium mb-2",children:x}),r.jsx("button",{onClick:E,className:"text-sm text-blue-600 hover:underline",children:"Try again"})]})}),!m&&!x&&C.length===0&&r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center p-8",children:[r.jsx(ps,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500 font-medium",children:l?"No matching records found":`No ${w?"held bills":"completed sales"} available`}),l&&r.jsx("button",{onClick:()=>o(""),className:"mt-2 text-sm text-blue-600 hover:underline",children:"Clear search"})]})}),!m&&!x&&C.length>0&&r.jsx("div",{className:"divide-y divide-slate-100",ref:v,children:C.map((T,P)=>r.jsxs("div",{className:`flex justify-between items-center p-4 cursor-pointer transition-colors group ${P===b?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-slate-50"}`,onClick:()=>n(T),children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("div",{className:"bg-slate-100 rounded px-2 py-0.5 font-mono flex items-center gap-0.5",children:(()=>{const L=T.invoiceNo.split("-");return L.length>=3?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-xs text-blue-600 font-bold",children:L[0]}),r.jsx("span",{className:"text-slate-400",children:"-"}),r.jsx("span",{className:"text-xs text-cyan-600 font-bold",children:L[1]}),r.jsx("span",{className:"text-slate-400",children:"-"}),r.jsx("span",{className:"text-base text-slate-800 font-black",children:L[2]})]}):r.jsx("span",{className:"text-sm font-bold text-slate-800",children:T.invoiceNo})})()}),r.jsx("span",{className:`text-[10px] font-bold uppercase px-1.5 py-0.5 rounded border ${_(T.status)}`,children:T.status})]}),r.jsxs("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Rr,{className:"w-3 h-3"}),k(T.saleDate)]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"w-3 h-3"}),T.customerName]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"w-3 h-3"}),T.itemCount," items"]})]})]}),r.jsxs("div",{className:"text-right ml-4",children:[r.jsxs("div",{className:"font-mono font-bold text-slate-900 text-lg",children:["LKR ",T.netTotal.toLocaleString("en-LK",{minimumFractionDigits:2})]}),r.jsx("button",{className:`mt-1 text-[10px] px-3 py-1.5 rounded font-bold uppercase tracking-wide transition-colors ${w?"bg-amber-100 text-amber-700 hover:bg-amber-200 border border-amber-200":"bg-rose-100 text-rose-700 hover:bg-rose-200 border border-rose-200"}`,children:w?"Recall":"Return"})]})]},T.id))})]}),r.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-2 text-xs text-slate-500 flex justify-between items-center shrink-0",children:[r.jsxs("span",{children:["Showing ",C.length," of ",d.length," ",w?"held bills":"sales"]}),r.jsxs("button",{onClick:E,disabled:m,className:"text-blue-600 hover:underline flex items-center gap-1",children:[r.jsx(Cd,{className:`w-3 h-3 ${m?"animate-spin":""}`}),"Refresh"]})]})]})})}const Cg=[5e3,1e3,500,100,50,20,10,5,2,1];function xB({onApprove:e,branchId:t,terminalId:n}){const[a,l]=g.useState({id:null,name:"Loading..."}),[o,d]=g.useState(""),[u,m]=g.useState(""),[h,x]=g.useState(""),[p,b]=g.useState(!1),[N,v]=g.useState(!1),[w,S]=g.useState({}),{addNotification:A}=ru(),E=g.useMemo(()=>Cg.reduce((k,_)=>k+_*(parseInt(w[_])||0),0),[w]);g.useEffect(()=>{N&&E>0&&d(E.toString())},[E,N]),g.useEffect(()=>{try{const k=localStorage.getItem("user");if(k){const _=JSON.parse(k);l({id:_.userId||_.id,name:_.username||_.fullName||_.name})}else A("error","Session Error","No logged in user found. Please re-login.")}catch(k){console.error("Failed to parse user session",k),A("error","Session Error","Failed to load user session.")}},[]);const C=(k,_)=>{const T=parseInt(_)||0;T<0||S(P=>({...P,[k]:T}))},O=async k=>{if(k.preventDefault(),!a.id){A("error","System Error","Cashier ID not identified. Please re-login.");return}const _=parseFloat(o);if(!o||_<0){A("warning","Float Required","Please enter a valid opening cash amount.");return}if(!u||!h){A("warning","Supervisor Required","Supervisor credentials are required to open the shift.");return}b(!0);try{const T=N?Cg.filter(P=>(w[P]||0)>0).map(P=>({denominationValue:P,quantity:w[P],type:"OPENING"})):null;await e(a,o,{username:u,password:h},T)}catch{b(!1)}};return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white w-[420px] rounded-xl shadow-2xl overflow-hidden border border-slate-200",children:[r.jsxs("div",{className:"bg-slate-900 p-4 text-center",children:[r.jsxs("h2",{className:"text-white font-bold text-lg tracking-wide uppercase flex items-center justify-center gap-2",children:[r.jsx(ui,{className:"w-5 h-5 text-yellow-400"})," Open Terminal"]}),r.jsxs("div",{className:"flex justify-center gap-4 mt-2 text-[13px] text-slate-400 font-mono uppercase",children:[r.jsxs("span",{children:["Branch: ",r.jsx("span",{className:"text-white",children:t})]}),r.jsxs("span",{children:["Terminal: ",r.jsx("span",{className:"text-white",children:n})]})]})]}),r.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Cashier"}),r.jsxs("div",{className:"flex items-center border border-slate-200 rounded bg-slate-100 px-3 py-2",children:[r.jsx(tn,{className:"w-4 h-4 text-slate-500 mr-2"}),r.jsx("input",{type:"text",disabled:!0,value:a.name,className:"bg-transparent w-full text-sm font-bold text-slate-700 focus:outline-none uppercase cursor-not-allowed"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Opening Float Amount"}),r.jsxs("div",{className:"flex items-center border border-blue-300 rounded bg-white px-3 py-2 shadow-sm",children:[r.jsx("span",{className:"text-slate-400 font-mono mr-2",children:"LKR"}),r.jsx("input",{autoFocus:!0,type:"number",step:"0.01",value:o,onChange:k=>{d(k.target.value),N&&S({})},disabled:p||N,className:"bg-transparent w-full text-lg font-mono font-bold text-slate-900 focus:outline-none disabled:text-slate-600",placeholder:"0.00"})]})]}),r.jsxs("button",{type:"button",onClick:()=>v(!N),className:"w-full flex items-center justify-between text-xs text-slate-500 hover:text-slate-700 py-1",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Xr,{className:"w-3 h-3"}),"Count by Denomination"]}),N?r.jsx(Bk,{className:"w-4 h-4"}):r.jsx(na,{className:"w-4 h-4"})]}),N&&r.jsxs("div",{className:"bg-slate-50 rounded-lg border border-slate-200 p-3 space-y-2 max-h-48 overflow-y-auto custom-scroll",children:[r.jsx("div",{className:"grid grid-cols-2 gap-2",children:Cg.map(k=>r.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded px-2 py-1",children:[r.jsx("span",{className:"w-12 text-right font-mono text-sm font-bold text-slate-700",children:k}),r.jsx("span",{className:"text-slate-400 text-xs",children:"x"}),r.jsx("input",{type:"number",min:"0",className:"flex-1 bg-slate-50 border border-slate-200 rounded px-2 py-1 text-center font-mono text-sm focus:outline-none focus:border-blue-400 w-16",placeholder:"0",value:w[k]||"",onChange:_=>C(k,_.target.value),onFocus:_=>_.target.select()}),r.jsxs("span",{className:"text-xs text-slate-400 w-16 text-right font-mono",children:["= ",(k*(w[k]||0)).toLocaleString()]})]},k))}),r.jsxs("div",{className:"border-t border-slate-200 pt-2 flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-bold text-slate-600 uppercase",children:"Total"}),r.jsxs("span",{className:"font-mono font-bold text-lg text-green-700",children:["LKR ",E.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]}),r.jsx("div",{className:"h-px bg-slate-200 my-2"}),r.jsxs("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-100",children:[r.jsxs("p",{className:"text-[10px] font-bold text-yellow-800 uppercase mb-2 flex items-center gap-1",children:[r.jsx(Si,{className:"w-3 h-3"})," Supervisor Approval Required"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:u,onChange:k=>m(k.target.value),disabled:p,className:"w-full border border-yellow-200 rounded px-3 py-2 text-sm focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100",placeholder:"Supervisor Username"}),r.jsx("input",{type:"password",value:h,onChange:k=>x(k.target.value),disabled:p,className:"w-full border border-yellow-200 rounded px-3 py-2 text-sm focus:outline-none focus:border-yellow-400 focus:ring-2 focus:ring-yellow-100",placeholder:"Supervisor Password"})]})]}),r.jsx("button",{type:"submit",disabled:p||!a.id,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-slate-400 text-white font-bold py-3 rounded-lg shadow-md uppercase tracking-wider text-sm transition-all flex items-center justify-center gap-2",children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Verifying..."]}):"Approve & Open Shift"}),r.jsxs("button",{type:"button",onClick:()=>window.location.href="/",className:"w-full bg-slate-100 hover:bg-slate-200 text-slate-600 font-bold py-3 rounded-lg border border-slate-300 uppercase tracking-wider text-sm transition-all flex items-center justify-center gap-2",children:[r.jsx(fi,{className:"w-4 h-4"})," Exit"]})]})]})})}const Ag=[5e3,1e3,500,100,50,20,10,5,2,1];function pB({cashierName:e,shiftId:t,expectedTotals:n,onClose:a,onConfirm:l,onRefresh:o}){const[d,u]=g.useState(1),[m,h]=g.useState({}),[x,p]=g.useState(""),[b,N]=g.useState(""),[v,w]=g.useState(!1),[S,A]=g.useState(null),[E,C]=g.useState(!1),O=async()=>{o&&(C(!0),await o(),C(!1))},k=g.useMemo(()=>Ag.reduce((B,ee)=>B+ee*(parseInt(m[ee])||0),0),[m]),_=(B,ee)=>{const X=parseInt(ee)||0;X<0||h(be=>({...be,[B]:X}))},T=async()=>{if(!x||!b){A("Supervisor approval is required to finalize the shift.");return}w(!0),A(null);try{const B=Ag.filter(ee=>(m[ee]||0)>0).map(ee=>({denominationValue:ee,quantity:m[ee],type:"CLOSING"}));await l(k,{username:x,password:b},B)}catch(B){console.error("Logout Error:",B),A(B.message||"Failed to close shift. Please try again."),w(!1)}},P=!!n,L=P&&n.expectedCash||0,z=k-L,U=Math.abs(z)<1;return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/80 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-white w-[750px] rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[r.jsxs("div",{className:"bg-slate-900 p-4 shrink-0 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-white font-bold text-lg tracking-wide uppercase flex items-center gap-2",children:[r.jsx(Ed,{className:"w-5 h-5 text-red-500"})," End of Shift"]}),r.jsxs("div",{className:"flex gap-4 mt-1",children:[r.jsxs("p",{className:"text-slate-400 text-xs",children:["Cashier: ",r.jsx("span",{className:"text-white font-bold",children:e})]}),t&&r.jsxs("p",{className:"text-slate-400 text-xs",children:["Shift: ",r.jsxs("span",{className:"text-green-400 font-bold",children:["#",t]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-4",children:[o&&r.jsxs("button",{onClick:O,disabled:E,className:"px-3 py-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors flex flex-col items-center disabled:opacity-50",title:"Refresh Status",children:[r.jsx(ir,{className:`w-4 h-4 ${E?"animate-spin":""}`}),r.jsx("span",{className:"text-[9px] font-bold uppercase mt-1",children:"Sync"})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-[10px] text-slate-500 uppercase font-bold",children:"Step"}),r.jsxs("div",{className:"text-white font-mono font-bold text-xl leading-none",children:[d," / 2"]})]}),r.jsx("button",{onClick:a,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg transition-colors",children:r.jsx($e,{className:"w-5 h-5"})})]})]}),S&&r.jsxs("div",{className:"bg-red-50 border-b border-red-200 px-4 py-2 flex items-center gap-2",children:[r.jsx(Bt,{className:"w-4 h-4 text-red-500"}),r.jsx("span",{className:"text-sm text-red-700",children:S}),r.jsx("button",{onClick:()=>A(null),className:"ml-auto text-red-400 hover:text-red-600",children:r.jsx($e,{className:"w-4 h-4"})})]}),d===1&&r.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-slate-50 p-3 border-b border-slate-200",children:[r.jsxs("h3",{className:"text-sm font-bold text-slate-700 uppercase flex items-center gap-2",children:[r.jsx(Xr,{className:"w-4 h-4 text-blue-600"})," Cash Declaration"]}),r.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Count all cash in the drawer and enter the quantities below"})]}),r.jsx("div",{className:"overflow-y-auto overflow-x-hidden p-4 custom-scroll grid grid-cols-2 gap-3",children:Ag.map(B=>r.jsxs("div",{className:"flex items-center gap-2 bg-white border border-slate-200 rounded-lg p-2 hover:border-blue-300 transition-colors",children:[r.jsx("div",{className:"w-16 shrink-0 font-mono font-bold text-slate-700 text-right",children:B.toLocaleString()}),r.jsx("span",{className:"text-slate-400 text-xs",children:"x"}),r.jsx("input",{type:"number",min:"0",className:"flex-1 min-w-0 bg-slate-50 border border-slate-300 rounded px-2 py-1.5 text-center font-bold text-slate-900 focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-100",placeholder:"0",value:m[B]||"",onChange:ee=>_(B,ee.target.value),onFocus:ee=>ee.target.select()}),r.jsxs("span",{className:"w-20 text-right text-xs font-mono text-slate-500",children:["= ",(B*(m[B]||0)).toLocaleString()]})]},B))}),r.jsxs("div",{className:"p-4 bg-slate-100 border-t border-slate-200 shrink-0",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("span",{className:"text-sm font-bold text-slate-600 uppercase",children:"Total Declared Cash"}),r.jsxs("span",{className:"text-3xl font-mono font-bold text-slate-900",children:[r.jsx("span",{className:"text-sm text-slate-400 mr-1",children:"LKR"}),k.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:a,className:"flex-1 py-3 border border-slate-300 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:()=>u(2),className:"flex-[2] py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 transition-colors",children:["Next: View Summary ",r.jsx(Yd,{className:"w-4 h-4"})]})]})]})]}),d===2&&r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[r.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-5 custom-scroll",children:[r.jsxs("div",{className:`rounded-xl border-2 p-4 ${P?U?"bg-green-50 border-green-300":"bg-red-50 border-red-300":"bg-slate-50 border-slate-200"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("h3",{className:`text-sm font-bold uppercase flex items-center gap-2 ${P?U?"text-green-800":"text-red-800":"text-slate-600"}`,children:[P?U?r.jsx(et,{className:"w-5 h-5"}):r.jsx(Bt,{className:"w-5 h-5"}):r.jsx(cL,{className:"w-5 h-5"}),P?U?"Shift Balanced ":"Cash Discrepancy Detected":"Syncing..."]}),P&&r.jsxs("div",{className:`px-3 py-1.5 rounded-lg text-sm font-bold ${U?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:[z>0?"+":"",z.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsx("span",{className:"text-xs text-slate-500 uppercase font-bold",children:"System Expected"}),r.jsx("div",{className:"font-mono font-bold text-xl text-slate-900 mt-1",children:P?`LKR ${L.toLocaleString("en-US",{minimumFractionDigits:2})}`:"---"})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsx("span",{className:"text-xs text-slate-500 uppercase font-bold",children:"You Declared"}),r.jsxs("div",{className:"font-mono font-bold text-xl text-slate-900 mt-1",children:["LKR ",k.toLocaleString("en-US",{minimumFractionDigits:2})]})]})]})]}),P&&r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-green-50 rounded-lg p-3 border border-green-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-700 mb-1",children:[r.jsx(Xr,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold uppercase",children:"Cash Sales"})]}),r.jsx("div",{className:"font-mono font-bold text-lg text-green-800",children:(n.cashSales||0).toLocaleString()})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-3 border border-purple-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-purple-700 mb-1",children:[r.jsx(Fa,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold uppercase",children:"Card Sales"})]}),r.jsx("div",{className:"font-mono font-bold text-lg text-purple-800",children:(n.cardTotal||0).toLocaleString()})]}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 border border-blue-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-700 mb-1",children:[r.jsx(tx,{className:"w-4 h-4"}),r.jsx("span",{className:"text-xs font-bold uppercase",children:"QR/Other"})]}),r.jsx("div",{className:"font-mono font-bold text-lg text-blue-800",children:(n.otherPayments||0).toLocaleString()})]})]}),P&&r.jsxs("div",{children:[r.jsx("h4",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Shift History & Cash Flow"}),r.jsxs("div",{className:"bg-slate-50 rounded-lg border border-slate-200 text-sm overflow-hidden",children:[r.jsxs("div",{className:"flex justify-between p-3 border-b border-slate-100 bg-white",children:[r.jsx("span",{className:"text-slate-600",children:"Opening Float"}),r.jsx("span",{className:"font-mono font-bold text-slate-700",children:(n.openingFloat||n.openingCash||0).toLocaleString()})]}),r.jsxs("div",{className:"flex justify-between p-3 border-b border-slate-100",children:[r.jsxs("span",{className:"text-slate-600",children:["Total Sales (",n.transactionCount||0,")"]}),r.jsxs("span",{className:"font-mono font-bold text-green-600",children:["+",(n.totalSales||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between p-3 border-b border-slate-100 bg-white",children:[r.jsx("span",{className:"text-slate-600",children:"Total Returns"}),r.jsxs("span",{className:"font-mono font-bold text-red-500",children:["-",(n.totalReturns||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between p-3 border-b border-slate-100",children:[r.jsxs("span",{className:"text-slate-600 flex items-center gap-1",children:[r.jsx(_s,{className:"w-3 h-3 text-blue-500"})," Paid In"]}),r.jsxs("span",{className:"font-mono font-bold text-blue-600",children:["+",(n.paidIn||n.totalPaidIn||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between p-3 border-b border-slate-100",children:[r.jsxs("span",{className:"text-slate-600 flex items-center gap-1",children:[r.jsx(Vd,{className:"w-3 h-3 text-red-500"})," Paid Out"]}),r.jsxs("span",{className:"font-mono font-bold text-red-600",children:["-",(n.paidOut||n.totalPaidOut||0).toLocaleString()]})]}),r.jsxs("div",{className:"flex justify-between p-3 bg-slate-100 font-bold",children:[r.jsx("span",{className:"text-slate-800",children:"Expected Cash in Drawer"}),r.jsxs("span",{className:"font-mono text-slate-900",children:["LKR ",L.toLocaleString()]})]})]})]}),!P&&r.jsxs("div",{className:"text-center p-6 bg-slate-50 rounded-lg border border-slate-200 border-dashed",children:[r.jsx(ir,{className:"w-8 h-8 text-slate-300 mx-auto mb-2 animate-spin"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Loading shift details..."})]}),P&&n.pendingRequests>0&&r.jsxs("div",{className:"bg-orange-50 rounded-xl border border-orange-200 p-4 flex items-start gap-3",children:[r.jsx(Bt,{className:"w-5 h-5 text-orange-600 shrink-0 mt-0.5"}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-orange-800 text-sm uppercase",children:"Approvals Pending"}),r.jsxs("p",{className:"text-xs text-orange-700 mt-1",children:["There are ",r.jsxs("span",{className:"font-bold",children:[n.pendingRequests," pending cash flow requests"]})," (Paid In/Out) that require Manager approval."]}),r.jsx("p",{className:"text-xs text-orange-700 mt-1 font-semibold",children:"You cannot close the shift until these are approved or rejected."})]})]}),r.jsxs("div",{className:"bg-amber-50 rounded-xl border border-amber-200 p-4",children:[r.jsxs("h3",{className:"text-xs font-bold text-amber-800 uppercase mb-3 flex items-center gap-2",children:[r.jsx(Si,{className:"w-4 h-4"})," Supervisor Approval Required"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{type:"text",value:x,onChange:B=>p(B.target.value),className:"border border-amber-200 bg-white rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:border-amber-400 focus:ring-2 focus:ring-amber-100",placeholder:"Supervisor Username"}),r.jsx("input",{type:"password",value:b,onChange:B=>N(B.target.value),className:"border border-amber-200 bg-white rounded-lg px-3 py-2.5 text-sm focus:outline-none focus:border-amber-400 focus:ring-2 focus:ring-amber-100",placeholder:"Supervisor Password"})]})]})]}),r.jsxs("div",{className:"p-4 bg-white border-t border-slate-100 grid grid-cols-2 gap-3 shrink-0",children:[r.jsx("button",{onClick:()=>u(1),disabled:v,className:"py-3 rounded-xl font-bold text-slate-500 hover:bg-slate-100 transition-colors text-sm uppercase border border-slate-200",children:" Back to Count"}),r.jsx("button",{onClick:T,disabled:v||!x||!b||n.pendingRequests>0,className:"py-3 bg-red-600 hover:bg-red-700 disabled:bg-slate-400 disabled:cursor-not-allowed text-white rounded-xl font-bold shadow-lg shadow-red-200 flex items-center justify-center gap-2 transition-all active:scale-[0.98] disabled:shadow-none",children:v?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-4 h-4 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Verifying..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ed,{className:"w-4 h-4"})," Close Shift"]})})]})]})]})})}const QS=[{key:"CASH",label:"Cash",icon:Xr,color:"green"},{key:"CARD",label:"Card",icon:Fa,color:"purple"},{key:"QR",label:"QR Pay",icon:tx,color:"blue"},{key:"TRANSFER",label:"Transfer",icon:_o,color:"slate"}];function gB({total:e,cart:t=[],invoiceId:n,cashierName:a,branchInfo:l,totals:o,customer:d,initialMethod:u="CASH",onClose:m,onProcess:h}){const[x,p]=g.useState([]),[b,N]=g.useState(""),[v,w]=g.useState(u),[S,A]=g.useState(""),[E,C]=g.useState(""),[O,k]=g.useState(""),[_,T]=g.useState(!1),P=g.useRef(null),L=g.useMemo(()=>{if(o)return o;const M=t.reduce((pe,V)=>pe+V.price*V.qty,0),H=t.reduce((pe,V)=>pe+(V.discount||0),0),oe=t.reduce((pe,V)=>{const xe=V.price*V.qty-(V.discount||0);return pe+xe*(V.taxRate||0)/100},0),K=M-H+oe;return{grossTotal:M,totalDiscount:H,taxAmount:oe,netTotal:K}},[t,o,d]),z=M=>Number(M||0).toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2}),U=x.reduce((M,H)=>M+parseFloat(H.amount),0),B=Math.max(0,e-U),ee=U>e?U-e:0,X=d?Math.floor(L.netTotal/100):0,be=d?.loyaltyPoints||0;g.useEffect(()=>{B>0?N(B.toFixed(2)):N(""),P.current?.focus()},[x.length,e]);const G=(M=null)=>{const H=M||x,oe=H.reduce((V,xe)=>V+parseFloat(xe.amount),0),K=Math.max(0,e-oe),pe=oe>e?oe-e:0;if(K>.01){alert(`Cannot finalize. LKR ${K.toFixed(2)} still pending.`);return}T(!0),h({payments:H,totalPaid:oe,change:pe,paidAmount:oe,changeAmount:pe})},J=M=>{M.key==="Enter"&&(M.preventDefault(),b&&parseFloat(b)>0?$():B<=.01&&G())},$=()=>{const M=parseFloat(b);if(!M||M<=0)return;const H={paymentType:v,amount:M,referenceNo:v!=="CASH"?S||`REF-${Date.now().toString().slice(-6)}`:null,cardLast4:v==="CARD"?E:null,bankName:["CARD","TRANSFER"].includes(v)?O:null},oe=[...x,H];p(oe),N(""),A(""),C(""),k(""),w("CASH"),P.current?.focus()},q=M=>{const H=[...x];H.splice(M,1),p(H)},se=M=>{const H=QS.find(K=>K.key===M);if(!H)return r.jsx(Xr,{className:"w-4 h-4 text-slate-600"});const oe=H.icon;return r.jsx(oe,{className:`w-4 h-4 text-${H.color}-600`})},I=g.useRef(null);return g.useEffect(()=>{B<=.01&&x.length>0&&setTimeout(()=>{I.current?.focus()},50)},[B,x.length]),r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white w-[980px] h-[680px] rounded-2xl shadow-2xl flex overflow-hidden",children:[r.jsxs("div",{className:"w-2/5 bg-slate-50 border-r border-slate-200 p-5 flex flex-col",children:[r.jsx("div",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2",children:"Receipt Preview"}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl shadow-sm flex-1 overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-dashed border-slate-200 text-center",children:[r.jsx("div",{className:"text-sm font-bold text-slate-800",children:l?.name||"Store"}),l?.code&&r.jsx("div",{className:"text-[10px] text-slate-400",children:l.code}),r.jsx("div",{className:"text-[10px] text-slate-400 mt-1",children:new Date().toLocaleString()}),r.jsxs("div",{className:"mt-3 mb-2 bg-slate-50 rounded-lg p-2 border border-slate-200",children:[r.jsx("div",{className:"text-[9px] text-slate-400 uppercase font-bold tracking-wider",children:"Invoice No."}),r.jsx("div",{className:"font-mono text-lg font-black text-slate-800 tracking-wide",children:n||"INV-PREVIEW"})]}),r.jsxs("div",{className:"text-[10px] text-slate-500",children:["Cashier: ",a||"--"]}),d&&r.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-100",children:[r.jsx("div",{className:"text-xs font-bold text-purple-700",children:d.name}),r.jsx("div",{className:"text-[10px] text-slate-400",children:d.phone})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto px-3 py-2 text-xs",children:t.length===0?r.jsx("div",{className:"text-center text-slate-400 py-6",children:"No items"}):t.map((M,H)=>r.jsxs("div",{className:"py-2 border-b border-dashed border-slate-100",children:[r.jsxs("div",{className:"flex justify-between gap-2",children:[r.jsx("span",{className:"font-semibold text-slate-700 truncate",children:M.name}),r.jsx("span",{className:"font-mono text-slate-700",children:z(M.price*M.qty)})]}),r.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400 mt-0.5",children:[r.jsxs("span",{children:[M.qty," x ",z(M.price)]}),M.discount>0&&r.jsxs("span",{children:["-",z(M.discount)]})]})]},H))}),r.jsxs("div",{className:"border-t border-dashed border-slate-200 p-3 text-xs space-y-1 bg-slate-50/50",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Subtotal"}),r.jsx("span",{className:"font-mono",children:z(L.grossTotal)})]}),(L.itemDiscountAmount||0)>0&&r.jsxs("div",{className:"flex justify-between text-orange-600",children:[r.jsx("span",{children:"Item Disc"}),r.jsxs("span",{className:"font-mono",children:["-",z(L.itemDiscountAmount)]})]}),(L.billDiscountAmount||0)>0&&r.jsxs("div",{className:"flex justify-between text-yellow-600",children:[r.jsx("span",{children:"Bill Disc"}),r.jsxs("span",{className:"font-mono",children:["-",z(L.billDiscountAmount)]})]}),L.taxAmount>0&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Tax"}),r.jsxs("span",{className:"font-mono",children:["+",z(L.taxAmount)]})]}),d&&r.jsxs("div",{className:"py-1 my-1 border-y border-dashed border-slate-200 text-purple-600",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Loyalty Pts to Earn"}),r.jsx("span",{className:"font-mono",children:X})]}),r.jsxs("div",{className:"flex justify-between text-[10px] text-slate-400",children:[r.jsx("span",{children:"Current Balance"}),r.jsx("span",{className:"font-mono",children:be})]})]}),r.jsxs("div",{className:"flex justify-between font-bold text-slate-800 text-sm pt-2 border-t border-slate-200",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{className:"font-mono text-lg",children:z(L.netTotal)})]})]}),r.jsxs("div",{className:"border-t border-dashed border-slate-200 p-3 text-xs space-y-1",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{children:"Paid"}),r.jsx("span",{className:"font-mono",children:z(U)})]}),B>0?r.jsxs("div",{className:"flex justify-between text-red-600 font-bold",children:[r.jsx("span",{children:"Balance Due"}),r.jsx("span",{className:"font-mono",children:z(B)})]}):r.jsxs("div",{className:"flex justify-between text-blue-600 font-bold text-sm",children:[r.jsx("span",{children:"Change"}),r.jsx("span",{className:"font-mono",children:z(ee)})]})]})]})]}),r.jsxs("div",{className:"w-3/5 p-6 flex flex-col relative",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-lg text-slate-700",children:"Add Payment"}),r.jsx("button",{onClick:m,className:"p-2 hover:bg-slate-100 rounded-full transition-colors",children:r.jsx($e,{className:"w-6 h-6 text-slate-400 hover:text-red-500"})})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto mb-20 px-1",children:[r.jsx("div",{className:"grid grid-cols-4 gap-2 mb-4",children:QS.map(M=>{const H=M.icon;return r.jsxs("button",{onClick:()=>w(M.key),className:`py-3 rounded-lg font-bold text-sm border-2 transition-all flex flex-col items-center gap-1 ${v===M.key?`border-${M.color}-500 bg-${M.color}-50 text-${M.color}-700`:"border-slate-100 bg-white text-slate-500 hover:border-slate-300"}`,children:[r.jsx(H,{className:"w-5 h-5"}),M.label]},M.key)})}),B>0&&r.jsxs("div",{className:"relative mb-3",children:[r.jsx("span",{className:"absolute left-4 top-3.5 text-slate-400 font-bold",children:"LKR"}),r.jsx("input",{ref:P,type:"number",step:"0.01",value:b,onChange:M=>N(M.target.value),onKeyDown:J,className:"w-full pl-14 pr-28 py-3 text-2xl font-bold font-mono border-2 border-slate-200 rounded-xl focus:outline-none focus:border-blue-500 transition-colors",placeholder:"0.00"}),r.jsxs("button",{onClick:$,disabled:!b||parseFloat(b)<=0,className:"absolute right-2 top-2 bottom-2 bg-blue-600 hover:bg-blue-700 text-white px-6 rounded-lg font-bold flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(yn,{className:"w-4 h-4"})," Add"]})]}),v!=="CASH"&&B>0&&r.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[r.jsx("input",{type:"text",value:S,onChange:M=>A(M.target.value),onKeyDown:J,className:"border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"Reference No."}),v==="CARD"&&r.jsx("input",{type:"text",maxLength:4,value:E,onChange:M=>C(M.target.value.replace(/\D/g,"").slice(0,4)),onKeyDown:J,className:"border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"Last 4 Digits"}),["CARD","TRANSFER"].includes(v)&&r.jsx("input",{type:"text",value:O,onChange:M=>k(M.target.value),onKeyDown:J,className:"border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500",placeholder:"Bank Name"})]}),r.jsxs("div",{className:"bg-slate-50 rounded-xl border border-slate-200 p-2 mb-4",children:[x.length===0&&r.jsx("div",{className:"text-center text-slate-400 py-6 text-sm",children:"No payments added yet."}),x.map((M,H)=>r.jsxs("div",{className:"flex justify-between items-center bg-white p-3 rounded-lg shadow-sm mb-2 last:mb-0 border border-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-slate-100 p-2 rounded-full",children:se(M.paymentType)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-sm text-slate-800",children:M.paymentType}),r.jsx("div",{className:"text-[10px] text-slate-400",children:z(M.amount)})]})]}),r.jsx("button",{onClick:()=>q(H),className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors",children:r.jsx(en,{className:"w-4 h-4"})})]},H))]}),r.jsxs("div",{className:`rounded-xl p-6 text-center mb-4 transition-all duration-300 ${B<=0&&ee>0?"bg-green-50 border border-green-200 animate-in zoom-in":"bg-slate-50 border border-slate-200"}`,children:[r.jsx("div",{className:`text-sm font-bold uppercase tracking-widest mb-1 ${B<=0&&ee>0?"text-green-600":"text-slate-500"}`,children:B<=0?"Change Due":"Balance Due"}),r.jsx("div",{className:`text-5xl font-mono font-bold ${B<=0&&ee>0?"text-green-700":"text-slate-400"}`,children:B<=0?z(ee):z(B)})]})]}),r.jsx("div",{className:"absolute bottom-6 left-6 right-6",children:r.jsx("button",{ref:I,onClick:()=>G(null),disabled:B>.01||_||x.length===0,className:"w-full py-4 bg-slate-900 hover:bg-black text-white rounded-xl font-bold shadow-xl flex justify-center items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all focus:ring-4 focus:ring-blue-500 focus:outline-none",children:_?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(et,{className:"w-5 h-5"})," Complete Sale"]})})})]})]})})}function bB({onClose:e,onProductSelected:t,onAddToQuickPick:n}){const[a,l]=g.useState(""),[o,d]=g.useState([]),[u,m]=g.useState(!1),[h,x]=g.useState(new Set),[p,b]=g.useState(-1),N=g.useRef(null),v=g.useRef(null);g.useEffect(()=>{N.current?.focus(),w()},[]);const w=async()=>{m(!0);try{const O=JSON.parse(localStorage.getItem("user")||"{}").branchId||1,k=await vt.getQuickItems(O),_=k.data?.data||k.data||[],T=(Array.isArray(_)?_:[_]).map(P=>({id:P.productId||P.id,sku:P.sku,barcode:P.barcode,name:P.name||P.productName,price:parseFloat(P.sellingPrice!==void 0?P.sellingPrice:P.price||0),taxRate:parseFloat(P.taxRate||0),stock:P.stock||P.availableQty,isTopItem:!0}));d(T)}catch(O){console.error("Failed to load top items",O)}finally{m(!1)}};g.useEffect(()=>{const O=setTimeout(()=>{a.trim().length>=2?S(null):a.trim().length===0&&w()},400);return()=>clearTimeout(O)},[a]);const S=async O=>{if(O?.preventDefault(),!a.trim()){w();return}m(!0),O&&d([]);try{const k=await vt.searchInventory(a),_=k.data?.data||k.data||[],T=(Array.isArray(_)?_:[_]).map(P=>({id:P.productId||P.id,sku:P.sku,barcode:P.barcode,name:P.name||P.productName,price:parseFloat(P.sellingPrice!==void 0?P.sellingPrice:P.price||0),taxRate:parseFloat(P.taxRate||0),stock:P.stock||P.availableQty}));d(T)}catch(k){console.error("Search failed",k),d([])}m(!1)};g.useEffect(()=>{b(-1)},[o]);const A=O=>{o.length!==0&&(O.key==="ArrowDown"?(O.preventDefault(),b(k=>k<o.length-1?k+1:k)):O.key==="ArrowUp"?(O.preventDefault(),b(k=>k>0?k-1:k)):O.key==="Enter"&&(O.preventDefault(),p>=0&&p<o.length?E(o[p]):o.length>0&&E(o[0])))};g.useEffect(()=>{if(p>=0&&v.current){const k=v.current.children[p];k&&k.scrollIntoView({block:"nearest",behavior:"smooth"})}},[p]);const E=O=>{t(O)},C=O=>{n&&n(O)&&x(_=>new Set([..._,O.id]))};return r.jsx("div",{className:"absolute inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-[550px] h-[620px] rounded-xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col",children:[r.jsxs("div",{className:"bg-slate-800 px-4 py-3 flex justify-between items-center shrink-0",children:[r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(er,{className:"w-5 h-5 text-blue-400"})," Search & Add Products"]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:r.jsx($e,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-4 border-b border-slate-100 shrink-0 bg-slate-50",children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Search by Name, SKU, or Barcode"}),r.jsxs("form",{onSubmit:S,className:"flex gap-2",children:[r.jsx("input",{ref:N,type:"text",value:a,onChange:O=>l(O.target.value),className:"flex-1 border border-slate-300 rounded-lg px-3 py-2.5 text-sm font-bold text-slate-700 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-50 transition-all",placeholder:"Type product name or scan barcode...",onKeyDown:A}),r.jsx("button",{type:"submit",disabled:u,className:"bg-blue-600 text-white px-5 py-2 rounded-lg font-bold text-sm hover:bg-blue-700 disabled:opacity-50 transition-colors",children:u?r.jsx(Ve,{className:"w-4 h-4 animate-spin"}):r.jsx(er,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{ref:v,className:"flex-1 overflow-y-auto p-3 bg-slate-50 space-y-2 custom-scroll",children:[o.length===0&&!u&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[r.jsx(Tt,{className:"w-14 h-14 mb-3 opacity-20"}),r.jsx("p",{className:"text-sm font-medium",children:"No results found"}),r.jsx("p",{className:"text-xs mt-1",children:"Try a different search term"})]}),u&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-slate-400",children:[r.jsx(Ve,{className:"w-8 h-8 animate-spin mb-2"}),r.jsx("p",{className:"text-sm",children:"Searching..."})]}),o.map((O,k)=>r.jsx("div",{onClick:()=>E(O),className:`border rounded-lg p-3 cursor-pointer transition-all group ${k===p?"bg-blue-50 border-blue-500 shadow-md ring-1 ring-blue-400":"bg-white border-slate-200 hover:border-blue-300 hover:shadow-md"}`,children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h4",{className:"font-bold text-slate-800 text-sm group-hover:text-blue-700 transition-colors",children:O.name}),r.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-slate-500 mt-1",children:[r.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded font-mono",children:O.sku||O.id}),O.barcode&&r.jsx("span",{className:"bg-slate-100 px-1.5 py-0.5 rounded font-mono text-[10px]",children:O.barcode}),r.jsxs("span",{className:"font-bold text-green-700 bg-green-50 px-1.5 py-0.5 rounded",children:["LKR ",O.price.toLocaleString("en-LK",{minimumFractionDigits:2})]}),O.stock!==void 0&&r.jsxs("span",{className:`px-1.5 py-0.5 rounded ${O.stock>0?"bg-blue-50 text-blue-600":"bg-red-50 text-red-600"}`,children:["Stock: ",O.stock]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-3",children:[n&&r.jsx("button",{onClick:()=>C(O),disabled:h.has(O.id),className:`px-3 py-2 rounded-lg font-bold text-xs flex items-center gap-1.5 transition-colors ${h.has(O.id)?"bg-green-100 text-green-600 cursor-default":"bg-amber-100 text-amber-700 hover:bg-amber-200"}`,title:"Add to Quick Pick panel",children:h.has(O.id)?r.jsxs(r.Fragment,{children:[r.jsx(Lm,{className:"w-3.5 h-3.5"})," Added"]}):r.jsxs(r.Fragment,{children:[r.jsx(hi,{className:"w-3.5 h-3.5"})," Quick Pick"]})}),r.jsxs("button",{onClick:()=>E(O),className:"bg-blue-600 text-white hover:bg-blue-700 px-3 py-2 rounded-lg font-bold text-xs flex items-center gap-1.5 transition-colors",title:"Add to cart",children:[r.jsx(qn,{className:"w-3.5 h-3.5"})," Add to Cart"]})]})]})},O.id))]}),r.jsxs("div",{className:"bg-slate-100 border-t border-slate-200 px-4 py-2 text-xs text-slate-500 flex items-center gap-4 shrink-0",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"w-3 h-3"})," Add to Cart = adds to current bill"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(hi,{className:"w-3 h-3"})," Quick Pick = saves for fast access"]})]})]})})}const cs=e=>Number(e||0).toLocaleString("en-LK",{minimumFractionDigits:2,maximumFractionDigits:2}),Pn=(e,t,n=0)=>{for(const a of t)if(e&&e[a]!==void 0&&e[a]!==null)return e[a];return n};function yB({cashierName:e,shiftId:t,summary:n,loading:a,onClose:l}){const o=Pn(n,["cashSales","cashTotal","cashAmount"]),d=Pn(n,["cardTotal","cardSales","cardAmount"]),u=Pn(n,["otherPayments","otherTotal","qrTotal","qrSales"]);Pn(n,["grossTotal","grossSales"]),Pn(n,["netTotal","netSales"]),Pn(n,["discount","totalDiscount","discountAmount"]),Pn(n,["taxAmount","taxTotal"]);const m=Pn(n,["openingFloat","openingCash"]),h=Pn(n,["paidIn","totalPaidIn"]),x=Pn(n,["paidOut","totalPaidOut"]),p=Pn(n,["expectedCash","expectedCashInDrawer"]),b=Pn(n,["totalBills","totalTransactions","billCount"]);return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/70 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-white w-[640px] rounded-2xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-slate-900 p-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(SL,{className:"w-6 h-6 text-blue-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"text-white font-bold uppercase text-sm",children:"Cashier Summary"}),r.jsxs("div",{className:"text-[11px] text-slate-400",children:[e," ",t?` Shift #${t}`:""]})]})]}),r.jsx("button",{onClick:l,className:"p-2 text-slate-400 hover:text-white hover:bg-slate-800 rounded-lg",children:r.jsx($e,{className:"w-5 h-5"})})]}),a?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading summary..."}):r.jsxs("div",{className:"p-5 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[r.jsxs("div",{className:"text-xs font-bold text-green-700 uppercase flex items-center gap-1",children:[r.jsx(Xr,{className:"w-4 h-4"})," Cash Sales"]}),r.jsxs("div",{className:"text-lg font-mono font-bold text-green-800",children:["LKR ",cs(o)]})]}),r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-3",children:[r.jsxs("div",{className:"text-xs font-bold text-purple-700 uppercase flex items-center gap-1",children:[r.jsx(Fa,{className:"w-4 h-4"})," Card Sales"]}),r.jsxs("div",{className:"text-lg font-mono font-bold text-purple-800",children:["LKR ",cs(d)]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[r.jsxs("div",{className:"text-xs font-bold text-blue-700 uppercase flex items-center gap-1",children:[r.jsx(tx,{className:"w-4 h-4"})," Other/QR"]}),r.jsxs("div",{className:"text-lg font-mono font-bold text-blue-800",children:["LKR ",cs(u)]})]})]}),r.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-lg overflow-hidden",children:[r.jsx("div",{className:"px-4 py-2 text-[10px] uppercase font-bold tracking-wider text-slate-500 bg-white border-b border-slate-200",children:"Cash Flow"}),r.jsxs("div",{className:"p-3 space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-slate-600",children:"Opening Float"}),r.jsxs("span",{className:"font-mono font-bold text-slate-800",children:["LKR ",cs(m)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-slate-600 flex items-center gap-1",children:[r.jsx(_s,{className:"w-3 h-3 text-blue-500"})," Paid In"]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"font-mono font-bold text-blue-700",children:["+",cs(h)]}),n.pendingPaidIn>0&&r.jsxs("div",{className:"text-[10px] text-amber-600 font-medium",children:["+",cs(n.pendingPaidIn)," (Pending)"]})]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-slate-600 flex items-center gap-1",children:[r.jsx(Vd,{className:"w-3 h-3 text-red-500"})," Paid Out"]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"font-mono font-bold text-red-700",children:["-",cs(x)]}),n.pendingPaidOut>0&&r.jsxs("div",{className:"text-[10px] text-amber-600 font-medium",children:["-",cs(n.pendingPaidOut)," (Pending)"]})]})]}),r.jsxs("div",{className:"flex justify-between border-t border-slate-200 pt-2",children:[r.jsx("span",{className:"text-slate-700 font-semibold",children:"Expected Cash"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("span",{className:"font-mono font-bold text-slate-900 block",children:["LKR ",cs(p)]}),(n.pendingPaidIn>0||n.pendingPaidOut>0)&&r.jsx("span",{className:"text-[10px] text-slate-400",children:"(Excl. Pending)"})]})]})]})]}),r.jsxs("div",{className:"flex justify-between text-xs text-slate-500",children:[r.jsx("span",{children:"Total Bills"}),r.jsx("span",{className:"font-mono font-bold text-slate-700",children:Number(b||0).toLocaleString()})]})]})]})})}function vB({sale:e,branchId:t,onClose:n,onNotify:a}){const[l,o]=g.useState({}),[d,u]=g.useState(""),[m,h]=g.useState(!1),[x,p]=g.useState(""),[b,N]=g.useState(""),v=(E,C)=>{o(O=>{const k={...O};return C?k[E.productId]={...E,returnQty:1}:delete k[E.productId],k})},w=(E,C)=>{o(O=>{if(!O[E])return O;const k=e.items.find(P=>(P.productId||P.id)===E),_=k?k.qty:0,T=Math.max(1,Math.min(C,_));return{...O,[E]:{...O[E],returnQty:T}}})},S=g.useMemo(()=>Object.values(l).reduce((E,C)=>{const O=C.unitPrice||C.price||0;return E+O*C.returnQty},0),[l]),A=async()=>{if(Object.keys(l).length===0){a("error","No Items","Select items to return");return}if(!d.trim()){a("error","Reason Required","Enter a reason for return");return}h(!0);try{const E=Object.values(l).map(O=>({saleItemId:O.saleItemId,productId:O.productId,qty:O.returnQty,unitPrice:O.unitPrice,condition:"GOOD"})),C={saleId:e.id||e.saleId,branchId:t,items:E,reason:d,refundMethod:"CASH",supervisorUsername:x,supervisorPassword:b};await vt.processReturn(C),a("success","Return Processed",`Refund: LKR ${S.toFixed(2)}`),n()}catch(E){console.error(E),a("error","Return Failed",E.response?.data?.message||"Failed to process return")}finally{h(!1)}};return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white w-[800px] h-[600px] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-between items-center border-b border-slate-200",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Cd,{className:"w-6 h-6 text-rose-600"}),"Process Return"]}),r.jsxs("div",{className:"text-sm text-slate-500 mt-1",children:["Invoice: ",r.jsx("span",{className:"font-mono font-bold text-slate-700",children:e.invoiceNo})]})]}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-200 rounded-full transition-colors",children:r.jsx($e,{className:"w-6 h-6 text-slate-400"})})]}),r.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[r.jsxs("div",{className:"w-2/3 p-6 flex flex-col gap-4 overflow-hidden",children:[r.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase",children:"Select Items"}),r.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-xl bg-slate-50 p-2 custom-scroll",children:e.items.map((E,C)=>{const O=!!l[E.productId||E.id],k=O?l[E.productId||E.id].returnQty:0;return E.qty,r.jsxs("div",{className:`p-3 mb-2 rounded-lg border flex items-center gap-3 transition-colors ${O?"bg-rose-50 border-rose-200":"bg-white border-slate-200 hover:border-slate-300"}`,children:[r.jsx("input",{type:"checkbox",checked:O,onChange:_=>v(E,_.target.checked),className:"w-5 h-5 accent-rose-600 rounded cursor-pointer"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold text-slate-800 text-sm truncate",children:E.productName||E.name}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Sold at: ",Number(E.unitPrice).toLocaleString()," | Qty: ",E.qty]})]}),O&&r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg border border-rose-200 px-2 py-1",children:[r.jsx("button",{onClick:()=>w(E.productId,k-1),className:"w-6 h-6 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded text-slate-600 font-bold",children:"-"}),r.jsx("span",{className:"w-8 text-center font-bold text-rose-700",children:k}),r.jsx("button",{onClick:()=>w(E.productId,k+1),className:"w-6 h-6 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded text-slate-600 font-bold",children:"+"})]})]},C)})})]}),r.jsxs("div",{className:"w-1/3 bg-slate-50 border-l border-slate-200 p-6 flex flex-col gap-6",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-2",children:"Refund Summary"}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4",children:[r.jsxs("div",{className:"flex justify-between items-center mb-2 text-sm text-slate-500",children:[r.jsx("span",{children:"Items Returning"}),r.jsx("span",{className:"font-bold text-slate-700",children:Object.keys(l).length})]}),r.jsx("div",{className:"border-t border-dashed border-slate-200 my-2"}),r.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-rose-600",children:[r.jsx("span",{children:"Refund Total"}),r.jsxs("span",{className:"font-mono",children:["LKR ",S.toLocaleString(void 0,{minimumFractionDigits:2})]})]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-2",children:"Reason"}),r.jsx("textarea",{value:d,onChange:E=>u(E.target.value),className:"w-full h-24 p-3 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-rose-500 resize-none",placeholder:"Defective, Wrong Item, etc."})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-bold text-slate-500 uppercase mb-2",children:"Supervisor Approval"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("input",{type:"text",value:x,onChange:E=>p(E.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-rose-500",placeholder:"Supervisor Username"}),r.jsx("input",{type:"password",value:b,onChange:E=>N(E.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-rose-500",placeholder:"Supervisor Password"})]})]}),r.jsx("button",{onClick:A,disabled:m||Object.keys(l).length===0||!x||!b,className:"w-full py-4 bg-rose-600 hover:bg-rose-700 text-white rounded-xl font-bold shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"})," Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(et,{className:"w-5 h-5"})," Confirm Refund"]})})]})]})]})})}const WS=[{value:"GOOD",label:"Good Condition",color:"text-green-600 bg-green-50 border-green-200"},{value:"DAMAGED",label:"Damaged",color:"text-amber-600 bg-amber-50 border-amber-200"},{value:"DEFECTIVE",label:"Defective",color:"text-red-600 bg-red-50 border-red-200"},{value:"WRONG_ITEM",label:"Wrong Item",color:"text-purple-600 bg-purple-50 border-purple-200"}],jB=["Product Defective","Wrong Item Delivered","Customer Changed Mind","Size/Color Mismatch","Quality Issues","Expired Product","Price Dispute","Other"];function NB({branchId:e,onClose:t,onNotify:n}){const[a,l]=g.useState("search"),[o,d]=g.useState(""),[u,m]=g.useState([]),[h,x]=g.useState(!0),[p,b]=g.useState(null),[N,v]=g.useState(null),[w,S]=g.useState({}),[A,E]=g.useState(""),[C,O]=g.useState(""),[k,_]=g.useState(!1),[T,P]=g.useState(""),[L,z]=g.useState(""),[U,B]=g.useState("CASH"),ee=g.useRef(null);g.useEffect(()=>{X()},[e]),g.useEffect(()=>{a==="search"&&ee.current&&ee.current.focus()},[a]);const X=async()=>{x(!0),b(null);try{const ne=await vt.getReturnableSales(7),Se=ne.data?.data||ne.data||[],W=(Array.isArray(Se)?Se:[]).map(ae=>({...ae,id:ae.saleId||ae.id,invoiceNo:ae.invoiceNo||`INV-${ae.saleId}`,saleDate:ae.saleDate||new Date().toISOString(),customerName:ae.customerName||"Walk-in Customer",items:(ae.items||[]).map(we=>({...we,saleItemId:we.saleItemId||we.id,productId:we.productId,productName:we.productName||we.name||"Unknown Product",qty:we.quantity||we.qty||1,unitPrice:parseFloat(we.unitPrice||we.price||0),returnableQty:we.quantity||we.qty||1,alreadyReturned:we.returnedQty||0}))}));m(W)}catch(ne){console.error("Failed to fetch returnable sales:",ne),b(ne.response?.data?.message||"Failed to load sales")}finally{x(!1)}},be=async()=>{if(o.trim()){x(!0),b(null);try{const ne=await vt.getSaleForReturn(o.trim()),Se=ne.data?.data||ne.data;if(Se){const W={...Se,id:Se.saleId||Se.id,invoiceNo:Se.invoiceNo,saleDate:Se.saleDate||new Date().toISOString(),customerName:Se.customerName||"Walk-in Customer",items:(Se.items||[]).map(ae=>({...ae,saleItemId:ae.saleItemId||ae.id,productId:ae.productId,productName:ae.productName||ae.name||"Unknown Product",qty:ae.quantity||ae.qty||1,unitPrice:parseFloat(ae.unitPrice||ae.price||0),returnableQty:ae.quantity||ae.qty||1,alreadyReturned:ae.returnedQty||0}))};J(W)}else b("Invoice not found")}catch(ne){console.error("Invoice search failed:",ne),b("Invoice not found or not eligible for return")}finally{x(!1)}}},G=g.useMemo(()=>{if(!o.trim())return u;const ne=o.toLowerCase();return u.filter(Se=>Se.invoiceNo.toLowerCase().includes(ne)||Se.customerName.toLowerCase().includes(ne))},[u,o]),J=ne=>{v(ne),S({}),l("select")},$=(ne,Se)=>{S(W=>{const ae={...W};return Se?ae[ne.saleItemId]={...ne,returnQty:1,condition:"GOOD"}:delete ae[ne.saleItemId],ae})},q=(ne,Se)=>{S(W=>{if(!W[ne])return W;const ae=N.items.find(tt=>tt.saleItemId===ne),we=ae?ae.returnableQty-ae.alreadyReturned:1,Be=Math.max(1,Math.min(Se,we));return{...W,[ne]:{...W[ne],returnQty:Be}}})},se=(ne,Se)=>{S(W=>W[ne]?{...W,[ne]:{...W[ne],condition:Se}}:W)},I=g.useMemo(()=>Object.values(w).reduce((ne,Se)=>ne+Se.unitPrice*Se.returnQty,0),[w]),M=A==="Other"?C:A,H=()=>{if(Object.keys(w).length===0){n("error","No Items Selected","Please select items to return");return}if(!M.trim()){n("error","Reason Required","Please select or enter a reason for return");return}l("confirm")},oe=async()=>{if(!T||!L){n("error","Approval Required","Supervisor credentials are required");return}_(!0);try{const ne=Object.values(w).map(W=>({saleItemId:W.saleItemId,productId:W.productId,qty:W.returnQty,unitPrice:W.unitPrice,condition:W.condition})),Se={saleId:N.id,branchId:e,items:ne,reason:M,refundMethod:U,supervisorUsername:T,supervisorPassword:L};await vt.processReturn(Se),n("success","Return Processed",`Refund: LKR ${I.toLocaleString(void 0,{minimumFractionDigits:2})}`),t()}catch(ne){console.error("Return processing failed:",ne),n("error","Return Failed",ne.response?.data?.message||"Failed to process return")}finally{_(!1)}},K=ne=>ne?new Date(ne).toLocaleString("en-LK",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",pe=ne=>{if(!ne)return"";const Se=new Date(ne),ae=Math.floor((new Date-Se)/(1e3*60*60*24));return ae===0?"Today":ae===1?"Yesterday":`${ae} days ago`},V=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-200",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(F7,{className:"absolute left-3 top-2.5 w-5 h-5 text-slate-400"}),r.jsx("input",{ref:ee,type:"text",value:o,onChange:ne=>d(ne.target.value),onKeyDown:ne=>ne.key==="Enter"&&be(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:border-rose-500 focus:ring-2 focus:ring-rose-100",placeholder:"Scan barcode or enter invoice number..."})]}),r.jsxs("button",{onClick:be,disabled:!o.trim()||h,className:"px-4 py-2 bg-rose-600 text-white rounded-lg font-medium hover:bg-rose-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[r.jsx(er,{className:"w-4 h-4"}),"Search"]})]}),r.jsxs("div",{className:"mt-2 flex items-center gap-2 text-xs text-slate-500",children:[r.jsx(da,{className:"w-3 h-3"}),"Showing sales from last 7 days eligible for return"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto",children:[h&&r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-rose-500"})}),p&&!h&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-4",children:[r.jsx(lr,{className:"w-12 h-12 text-red-400 mb-3"}),r.jsx("p",{className:"text-red-600 font-medium mb-2",children:p}),r.jsx("button",{onClick:X,className:"text-sm text-blue-600 hover:underline",children:"Try again"})]}),!h&&!p&&G.length===0&&r.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center p-8",children:[r.jsx(ps,{className:"w-16 h-16 text-slate-200 mb-4"}),r.jsx("p",{className:"text-slate-500 font-medium",children:o?"No matching sales found":"No returnable sales in last 7 days"}),o&&r.jsx("button",{onClick:()=>d(""),className:"mt-2 text-sm text-blue-600 hover:underline",children:"Clear search"})]}),!h&&!p&&G.length>0&&r.jsx("div",{className:"divide-y divide-slate-100",children:G.map(ne=>r.jsx("div",{onClick:()=>J(ne),className:"p-4 hover:bg-rose-50 cursor-pointer transition-colors group",children:r.jsxs("div",{className:"flex justify-between items-start",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("span",{className:"font-mono font-bold text-slate-800 text-sm bg-slate-100 px-2 py-0.5 rounded",children:ne.invoiceNo}),r.jsx("span",{className:"text-xs font-medium text-green-600 bg-green-50 px-2 py-0.5 rounded border border-green-200",children:"PAID"})]}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mt-2",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Rr,{className:"w-3 h-3"}),K(ne.saleDate),r.jsxs("span",{className:"text-slate-400",children:["(",pe(ne.saleDate),")"]})]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"w-3 h-3"}),ne.customerName]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(qn,{className:"w-3 h-3"}),ne.items?.length||0," items"]})]})]}),r.jsxs("div",{className:"text-right flex items-center gap-3",children:[r.jsx("div",{children:r.jsxs("div",{className:"font-mono font-bold text-slate-900 text-lg",children:["LKR ",parseFloat(ne.netTotal||0).toLocaleString("en-LK",{minimumFractionDigits:2})]})}),r.jsx(wo,{className:"w-5 h-5 text-slate-300 group-hover:text-rose-500 transition-colors"})]})]})},ne.id))})]}),r.jsxs("div",{className:"bg-slate-50 border-t border-slate-200 px-4 py-2 text-xs text-slate-500 flex justify-between items-center",children:[r.jsxs("span",{children:["Showing ",G.length," of ",u.length," returnable sales"]}),r.jsxs("button",{onClick:X,disabled:h,className:"text-blue-600 hover:underline flex items-center gap-1",children:[r.jsx(Cd,{className:`w-3 h-3 ${h?"animate-spin":""}`}),"Refresh"]})]})]}),xe=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:[r.jsxs("button",{onClick:()=>l("search"),className:"flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900 mb-2",children:[r.jsx(Ao,{className:"w-4 h-4"}),"Back to Sales"]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:"Select Items to Return"}),r.jsxs("div",{className:"text-sm text-slate-500",children:["Invoice: ",r.jsx("span",{className:"font-mono font-bold text-slate-700",children:N?.invoiceNo}),r.jsx("span",{className:"mx-2",children:""}),K(N?.saleDate)]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-sm text-slate-500",children:"Original Total"}),r.jsxs("div",{className:"font-mono font-bold text-slate-800",children:["LKR ",parseFloat(N?.netTotal||0).toLocaleString("en-LK",{minimumFractionDigits:2})]})]})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:r.jsx("div",{className:"space-y-3",children:N?.items?.map(ne=>{const Se=!!w[ne.saleItemId],W=w[ne.saleItemId],ae=ne.returnableQty-ne.alreadyReturned;return r.jsx("div",{className:`p-4 rounded-xl border-2 transition-all ${Se?"bg-rose-50 border-rose-300 shadow-sm":"bg-white border-slate-200 hover:border-slate-300"}`,children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("input",{type:"checkbox",checked:Se,onChange:we=>$(ne,we.target.checked),disabled:ae<=0,className:"mt-1 w-5 h-5 accent-rose-600 rounded cursor-pointer disabled:opacity-50"}),r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-800",children:ne.productName}),r.jsxs("div",{className:"text-sm text-slate-500 mt-0.5",children:["LKR ",ne.unitPrice.toLocaleString(),"  ",ne.qty," qty",ne.alreadyReturned>0&&r.jsxs("span",{className:"ml-2 text-amber-600",children:["(",ne.alreadyReturned," already returned)"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("div",{className:"font-mono font-bold text-slate-700",children:["LKR ",(ne.unitPrice*ne.qty).toLocaleString("en-LK",{minimumFractionDigits:2})]})})]}),Se&&r.jsxs("div",{className:"mt-4 pt-4 border-t border-rose-200 grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Return Qty"}),r.jsxs("div",{className:"flex items-center gap-2 bg-white rounded-lg border border-rose-200 px-2 py-1 w-fit",children:[r.jsx("button",{onClick:()=>q(ne.saleItemId,W.returnQty-1),className:"w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded text-slate-600 font-bold",children:"-"}),r.jsx("span",{className:"w-10 text-center font-bold text-rose-700 text-lg",children:W.returnQty}),r.jsx("button",{onClick:()=>q(ne.saleItemId,W.returnQty+1),className:"w-7 h-7 flex items-center justify-center bg-slate-100 hover:bg-slate-200 rounded text-slate-600 font-bold",children:"+"}),r.jsxs("span",{className:"text-xs text-slate-400 ml-2",children:["of ",ae]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Condition"}),r.jsx("select",{value:W.condition,onChange:we=>se(ne.saleItemId,we.target.value),className:"w-full border border-rose-200 rounded-lg px-3 py-2 text-sm bg-white focus:outline-none focus:border-rose-500",children:WS.map(we=>r.jsx("option",{value:we.value,children:we.label},we.value))})]})]})]})]})},ne.saleItemId)})})}),r.jsx("div",{className:"bg-slate-50 border-t border-slate-200 p-4",children:r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-1",children:"Return Reason"}),r.jsxs("select",{value:A,onChange:ne=>E(ne.target.value),className:"w-full border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-rose-500",children:[r.jsx("option",{value:"",children:"Select reason..."}),jB.map(ne=>r.jsx("option",{value:ne,children:ne},ne))]}),A==="Other"&&r.jsx("input",{type:"text",value:C,onChange:ne=>O(ne.target.value),placeholder:"Specify reason...",className:"w-full mt-2 border border-slate-300 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-rose-500"})]}),r.jsxs("div",{className:"flex flex-col justify-between",children:[r.jsxs("div",{className:"bg-white border border-rose-200 rounded-lg p-3",children:[r.jsxs("div",{className:"flex justify-between text-sm text-slate-500 mb-1",children:[r.jsx("span",{children:"Items to Return"}),r.jsx("span",{className:"font-bold text-slate-700",children:Object.keys(w).length})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold text-rose-600",children:[r.jsx("span",{children:"Refund Total"}),r.jsxs("span",{className:"font-mono",children:["LKR ",I.toLocaleString("en-LK",{minimumFractionDigits:2})]})]})]}),r.jsxs("button",{onClick:H,disabled:Object.keys(w).length===0||!M.trim(),className:"mt-2 w-full py-3 bg-rose-600 hover:bg-rose-700 text-white rounded-lg font-bold flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(et,{className:"w-5 h-5"}),"Continue to Approval"]})]})]})})]}),Z=()=>r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"px-6 py-4 bg-slate-50 border-b border-slate-200",children:[r.jsxs("button",{onClick:()=>l("select"),className:"flex items-center gap-1 text-sm text-slate-600 hover:text-slate-900 mb-2",children:[r.jsx(Ao,{className:"w-4 h-4"}),"Back to Items"]}),r.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(ui,{className:"w-5 h-5 text-rose-600"}),"Supervisor Approval Required"]})]}),r.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[r.jsxs("div",{className:"bg-gradient-to-br from-rose-50 to-rose-100 border border-rose-200 rounded-xl p-5 mb-6",children:[r.jsx("h4",{className:"text-sm font-bold text-rose-700 uppercase mb-3",children:"Return Summary"}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Invoice"}),r.jsx("span",{className:"font-mono font-bold text-slate-800",children:N?.invoiceNo})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Customer"}),r.jsx("span",{className:"font-medium text-slate-800",children:N?.customerName})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Items Returning"}),r.jsx("span",{className:"font-medium text-slate-800",children:Object.keys(w).length})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-slate-600",children:"Reason"}),r.jsx("span",{className:"font-medium text-slate-800",children:M})]})]}),r.jsx("div",{className:"border-t border-rose-200 pt-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-rose-700 font-bold",children:"Total Refund"}),r.jsxs("span",{className:"font-mono font-black text-2xl text-rose-700",children:["LKR ",I.toLocaleString("en-LK",{minimumFractionDigits:2})]})]})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-bold text-slate-500 uppercase mb-2",children:"Items Being Returned"}),r.jsx("div",{className:"bg-white border border-slate-200 rounded-lg divide-y divide-slate-100",children:Object.values(w).map(ne=>r.jsxs("div",{className:"p-3 flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-800",children:ne.productName}),r.jsxs("div",{className:"text-xs text-slate-500",children:["Qty: ",ne.returnQty,"  Condition: ",WS.find(Se=>Se.value===ne.condition)?.label]})]}),r.jsxs("div",{className:"font-mono font-bold text-slate-700",children:["LKR ",(ne.unitPrice*ne.returnQty).toLocaleString("en-LK",{minimumFractionDigits:2})]})]},ne.saleItemId))})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-sm font-bold text-slate-500 uppercase mb-2",children:"Refund Method"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>B("CASH"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg border-2 font-medium transition-colors ${U==="CASH"?"bg-green-50 border-green-500 text-green-700":"bg-white border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[r.jsx(Xr,{className:"w-5 h-5"}),"Cash"]}),r.jsxs("button",{onClick:()=>B("CARD"),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-lg border-2 font-medium transition-colors ${U==="CARD"?"bg-blue-50 border-blue-500 text-blue-700":"bg-white border-slate-200 text-slate-600 hover:border-slate-300"}`,children:[r.jsx(Fa,{className:"w-5 h-5"}),"Card Refund"]})]})]}),r.jsxs("div",{children:[r.jsxs("h4",{className:"text-sm font-bold text-slate-500 uppercase mb-2 flex items-center gap-2",children:[r.jsx(Bt,{className:"w-4 h-4 text-amber-500"}),"Supervisor Authorization"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx("input",{type:"text",value:T,onChange:ne=>P(ne.target.value),placeholder:"Supervisor Username",className:"w-full border border-slate-300 rounded-lg px-4 py-3 text-sm focus:outline-none focus:border-rose-500"}),r.jsx("input",{type:"password",value:L,onChange:ne=>z(ne.target.value),placeholder:"Supervisor Password",className:"w-full border border-slate-300 rounded-lg px-4 py-3 text-sm focus:outline-none focus:border-rose-500"})]})]})]}),r.jsx("div",{className:"bg-slate-50 border-t border-slate-200 p-4",children:r.jsx("button",{onClick:oe,disabled:k||!T||!L,className:"w-full py-4 bg-rose-600 hover:bg-rose-700 text-white rounded-xl font-bold text-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-lg",children:k?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-5 h-5 animate-spin"}),"Processing Return..."]}):r.jsxs(r.Fragment,{children:[r.jsx(et,{className:"w-5 h-5"}),"Authorize & Process Return"]})})})]});return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white w-[900px] h-[700px] rounded-2xl shadow-2xl flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"bg-gradient-to-r from-rose-600 to-rose-700 px-6 py-4 flex justify-between items-center shrink-0",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"bg-white/20 p-2 rounded-lg",children:r.jsx(Cd,{className:"w-6 h-6 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-white",children:"Smart Return"}),r.jsxs("p",{className:"text-rose-200 text-sm",children:[a==="search"&&"Search or scan invoice to start return",a==="select"&&"Select items and quantities to return",a==="confirm"&&"Review and authorize the return"]})]})]}),r.jsx("button",{onClick:t,className:"p-2 hover:bg-white/10 rounded-full transition-colors",children:r.jsx($e,{className:"w-6 h-6 text-white"})})]}),r.jsxs("div",{className:"bg-rose-50 px-6 py-2 flex items-center gap-2 border-b border-rose-100",children:[r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold ${a==="search"?"bg-rose-600 text-white":"bg-white text-slate-400 border border-slate-200"}`,children:[r.jsx("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center",children:"1"}),"Find Sale"]}),r.jsx(wo,{className:"w-4 h-4 text-slate-300"}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold ${a==="select"?"bg-rose-600 text-white":"bg-white text-slate-400 border border-slate-200"}`,children:[r.jsx("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center",children:"2"}),"Select Items"]}),r.jsx(wo,{className:"w-4 h-4 text-slate-300"}),r.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-xs font-bold ${a==="confirm"?"bg-rose-600 text-white":"bg-white text-slate-400 border border-slate-200"}`,children:[r.jsx("span",{className:"w-5 h-5 rounded-full bg-current/20 flex items-center justify-center",children:"3"}),"Authorize"]})]}),r.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a==="search"&&V(),a==="select"&&xe(),a==="confirm"&&Z()]})]})})}function wB({onClose:e,onApply:t,selectedItem:n,cartTotal:a}){const[l,o]=g.useState("amount"),[d,u]=g.useState(""),[m,h]=g.useState(n?"item":"bill"),x=g.useRef(null);g.useEffect(()=>{x.current?.focus(),x.current?.select()},[]);const p=()=>{const w=parseFloat(d)||0;return l==="percent"?(m==="item"&&n?n.price*n.qty:a)*w/100:w},b=()=>{const w=p();if(w<=0){e();return}t({scope:m,discountType:l,value:parseFloat(d)||0,discountAmount:w}),e()},N=w=>{w.key==="Enter"&&b(),w.key==="Escape"&&e()},v=[5,10,15,20,25];return r.jsx("div",{className:"absolute inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-[2px]",children:r.jsxs("div",{className:"bg-white w-[420px] rounded-xl shadow-2xl overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-yellow-500 to-amber-500 px-4 py-3 flex justify-between items-center",children:[r.jsxs("h3",{className:"text-white font-bold text-lg flex items-center gap-2",children:[r.jsx(Sd,{className:"w-5 h-5"})," Apply Discount"]}),r.jsx("button",{onClick:e,className:"text-white/70 hover:text-white transition-colors",children:r.jsx($e,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-4 space-y-4",children:[n&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2 block",children:"Apply To"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsxs("button",{onClick:()=>h("item"),className:`py-2 px-3 rounded-lg border-2 text-sm font-bold transition-colors ${m==="item"?"bg-yellow-100 border-yellow-400 text-yellow-800":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:[r.jsx(mn,{className:"w-4 h-4 inline mr-1"}),"Selected Item"]}),r.jsxs("button",{onClick:()=>h("bill"),className:`py-2 px-3 rounded-lg border-2 text-sm font-bold transition-colors ${m==="bill"?"bg-yellow-100 border-yellow-400 text-yellow-800":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:[r.jsx(gn,{className:"w-4 h-4 inline mr-1"}),"Whole Bill"]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2 block",children:"Discount Type"}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>o("amount"),className:`py-2 px-3 rounded-lg border-2 text-sm font-bold transition-colors ${l==="amount"?"bg-green-100 border-green-400 text-green-800":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:"LKR Amount"}),r.jsx("button",{onClick:()=>o("percent"),className:`py-2 px-3 rounded-lg border-2 text-sm font-bold transition-colors ${l==="percent"?"bg-green-100 border-green-400 text-green-800":"bg-slate-50 border-slate-200 text-slate-600 hover:bg-slate-100"}`,children:"% Percentage"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2 block",children:l==="percent"?"Percentage":"Amount (LKR)"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{ref:x,type:"number",value:d,onChange:w=>u(w.target.value),onKeyDown:N,className:"w-full px-4 py-3 text-2xl font-mono font-bold text-center border-2 border-slate-300 rounded-lg focus:outline-none focus:border-yellow-500 focus:ring-2 focus:ring-yellow-100",placeholder:"0",min:"0",max:l==="percent"?100:void 0}),r.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:l==="percent"?"%":"LKR"})]})]}),l==="percent"&&r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase tracking-wide mb-2 block",children:"Quick Select"}),r.jsx("div",{className:"grid grid-cols-5 gap-2",children:v.map(w=>r.jsxs("button",{onClick:()=>u(String(w)),className:`py-2 rounded-lg text-sm font-bold transition-colors ${d===String(w)?"bg-yellow-500 text-white":"bg-slate-100 text-slate-700 hover:bg-slate-200"}`,children:[w,"%"]},w))})]}),r.jsx("div",{className:"bg-slate-50 border border-slate-200 rounded-lg p-3",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-slate-600",children:"Discount Amount:"}),r.jsxs("span",{className:"text-xl font-bold text-green-600",children:["LKR ",p().toFixed(2)]})]})})]}),r.jsxs("div",{className:"p-4 bg-slate-50 border-t border-slate-200 flex gap-3",children:[r.jsx("button",{onClick:e,className:"flex-1 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 font-bold rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:b,disabled:!d||parseFloat(d)<=0,className:"flex-1 py-3 bg-gradient-to-r from-yellow-500 to-amber-500 hover:from-yellow-600 hover:to-amber-600 text-white font-bold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Apply Discount"})]})]})})}const Hf={PENDING:{label:"Pending",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Rr},SUPERVISOR_APPROVED:{label:"Supervisor Approved",color:"bg-blue-100 text-blue-700 border-blue-200",icon:Ro},TRANSFERRED_TO_MANAGER:{label:"Sent to Manager",color:"bg-purple-100 text-purple-700 border-purple-200",icon:Pv},PROCESSING:{label:"Processing",color:"bg-cyan-100 text-cyan-700 border-cyan-200",icon:Ve},PAID:{label:"Paid",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:et},REJECTED:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Bt}},XS={URGENT:{label:"Urgent",color:"bg-red-500 text-white"},HIGH:{label:"High",color:"bg-orange-500 text-white"},NORMAL:{label:"Normal",color:"bg-blue-500 text-white"},LOW:{label:"Low",color:"bg-gray-500 text-white"}},SB=[{value:"CASH",label:"Cash",icon:Xr},{value:"BANK_TRANSFER",label:"Bank Transfer",icon:_v},{value:"CHEQUE",label:"Cheque",icon:sa},{value:"CARD",label:"Card",icon:Fa}];function EB({isOpen:e,onClose:t,branchId:n,onNotification:a}){const[l,o]=g.useState([]),[d,u]=g.useState(!0),[m,h]=g.useState(null),[x,p]=g.useState(!1),[b,N]=g.useState(!1),[v,w]=g.useState(!1),[S,A]=g.useState(!1),[E,C]=g.useState({username:"",password:""}),[O,k]=g.useState(""),[_,T]=g.useState("NORMAL"),[P,L]=g.useState({paymentMethod:"CASH",paymentReference:"",amountPaid:0,notes:""}),z=g.useCallback(async()=>{u(!0);try{const q=await Bn.getPaymentRequestsByBranch(n),se=q.data?.data||q.data||[];o(Array.isArray(se)?se:[])}catch(q){console.error("Failed to fetch payment requests:",q),a?.("error","Error","Failed to load payment requests")}finally{u(!1)}},[n,a]);g.useEffect(()=>{e&&z()},[e,z]);const U=async()=>{if(m){if(!E.username||!E.password){a?.("error","Validation Error","Please enter supervisor credentials");return}w(!0);try{await Bn.transferToManager(m.requestId,{supervisorUsername:E.username,supervisorPassword:E.password,notes:O,priority:_}),a?.("success","Transferred","Payment request sent to manager"),p(!1),h(null),C({username:"",password:""}),k(""),T("NORMAL"),z()}catch(q){const se=q.response?.data?.message||q.message||"Transfer failed";a?.("error","Transfer Failed",se)}finally{w(!1)}}},B=async()=>{if(m){if(!E.username||!E.password){a?.("error","Validation Error","Please enter supervisor credentials");return}A(!0);try{await Bn.transferToManager(m.requestId,{supervisorUsername:E.username,supervisorPassword:E.password,notes:`PAYOUT REQUEST
${P.notes}
Payment Method: ${P.paymentMethod}
Reference: ${P.paymentReference||"N/A"}`,priority:"HIGH"}),a?.("success","Payout Requested","Payment request sent to manager for payout approval"),N(!1),h(null),C({username:"",password:""}),L({paymentMethod:"CASH",paymentReference:"",amountPaid:0,notes:""}),z()}catch(q){const se=q.response?.data?.message||q.message||"Payout request failed";a?.("error","Payout Failed",se)}finally{A(!1)}}},ee=q=>{h(q),p(!0)},X=q=>{h(q),L({paymentMethod:"CASH",paymentReference:"",amountPaid:q.amount,notes:""}),N(!0)},be=q=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR",minimumFractionDigits:2}).format(q||0),G=q=>q?new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"-";if(!e)return null;const J=l.filter(q=>q.status==="PENDING"||q.status==="SUPERVISOR_APPROVED"),$=l.filter(q=>!["PENDING","SUPERVISOR_APPROVED"].includes(q.status));return r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 px-6 py-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-xl bg-white/20 flex items-center justify-center",children:r.jsx(ps,{className:"w-5 h-5 text-white"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-lg font-bold text-white",children:"GRN Payment Requests"}),r.jsxs("p",{className:"text-sm text-indigo-100",children:[J.length," pending request",J.length!==1?"s":""]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:z,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",title:"Refresh",children:r.jsx(ir,{className:"w-4 h-4"})}),r.jsx("button",{onClick:t,className:"p-2 rounded-lg bg-white/10 hover:bg-white/20 text-white transition-colors",children:r.jsx($e,{className:"w-5 h-5"})})]})]}),r.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:d?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(Ve,{className:"w-8 h-8 text-indigo-600 animate-spin"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading payment requests..."})]}):l.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:r.jsx(ps,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Payment Requests"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"When GRNs are approved, payment requests will appear here."})]}):r.jsxs("div",{className:"space-y-6",children:[J.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:["Pending Requests (",J.length,")"]}),r.jsx("div",{className:"space-y-3",children:J.map(q=>{const se=Hf[q.status]||Hf.PENDING,I=se.icon,M=XS[q.priority]||XS.NORMAL;return r.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-4 hover:shadow-md transition-all",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[r.jsx("span",{className:"font-bold text-gray-800",children:q.grnNo}),r.jsx("span",{className:`px-2 py-0.5 text-xs font-bold rounded ${M.color}`,children:M.label}),r.jsxs("span",{className:`px-2 py-0.5 text-xs font-medium rounded-full border ${se.color}`,children:[r.jsx(I,{className:"w-3 h-3 inline mr-1"}),se.label]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(_v,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:q.supplierName})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(gn,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"font-semibold text-gray-800",children:be(q.amount)})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(da,{className:"w-4 h-4 text-gray-400"}),r.jsxs("span",{children:["Due: ",G(q.dueDate)]})]}),r.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[r.jsx(ps,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{children:q.invoiceNo||"-"})]})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:H=>{H.stopPropagation(),X(q)},className:"flex items-center gap-2 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium transition-colors",children:[r.jsx(Xr,{className:"w-4 h-4"}),"Pay"]}),r.jsxs("button",{onClick:H=>{H.stopPropagation(),ee(q)},className:"flex items-center gap-2 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-medium transition-colors",children:[r.jsx(Pv,{className:"w-4 h-4"}),"Transfer"]})]})]})},q.requestId)})})]}),$.length>0&&r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:["Processed (",$.length,")"]}),r.jsx("div",{className:"space-y-2",children:$.slice(0,5).map(q=>{const se=Hf[q.status]||Hf.PENDING,I=se.icon;return r.jsxs("div",{className:"bg-gray-50 border border-gray-100 rounded-lg p-3 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"font-medium text-gray-700",children:q.grnNo}),r.jsx("span",{className:"text-gray-500",children:q.supplierName}),r.jsx("span",{className:"font-semibold text-gray-800",children:be(q.amount)})]}),r.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full border ${se.color}`,children:[r.jsx(I,{className:"w-3 h-3 inline mr-1"}),se.label]})]},q.requestId)})})]})]})})]}),b&&m&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("h3",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[r.jsx(Xr,{className:"w-5 h-5 text-emerald-600"}),"Process Payout"]}),r.jsx("button",{onClick:()=>N(!1),className:"p-1 rounded hover:bg-gray-100",children:r.jsx($e,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"bg-emerald-50 rounded-lg p-3 mb-4",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:m.grnNo})," - ",m.supplierName]}),r.jsx("div",{className:"text-lg font-bold text-emerald-700 mt-1",children:be(m.amount)})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Payment Method"}),r.jsx("div",{className:"grid grid-cols-2 gap-2",children:SB.map(q=>{const se=q.icon;return r.jsxs("button",{onClick:()=>L(I=>({...I,paymentMethod:q.value})),className:`p-3 rounded-lg border-2 transition-all flex items-center gap-2 ${P.paymentMethod===q.value?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300"}`,children:[r.jsx(se,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:q.label})]},q.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Reference Number"}),r.jsx("input",{type:"text",value:P.paymentReference,onChange:q=>{const se=q.target.value;L(I=>({...I,paymentReference:se}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Cheque no, transfer ref, etc."})]}),r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx(Ro,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"text-sm text-amber-800 font-medium",children:"Supervisor approval required for payout"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Supervisor Username"}),r.jsx("input",{type:"text",value:E.username,onChange:q=>{const se=q.target.value;C(I=>({...I,username:se}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter supervisor username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Supervisor Password"}),r.jsx("input",{type:"password",value:E.password,onChange:q=>{const se=q.target.value;C(I=>({...I,password:se}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter supervisor password"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Notes (Optional)"}),r.jsx("textarea",{value:P.notes,onChange:q=>{const se=q.target.value;L(I=>({...I,notes:se}))},rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Payment notes..."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>N(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:B,disabled:S||!E.username||!E.password,className:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:S?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Xr,{className:"w-4 h-4"}),"Request Payout"]})})]})]})}),x&&m&&r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/40",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Transfer to Manager"}),r.jsx("button",{onClick:()=>p(!1),className:"p-1 rounded hover:bg-gray-100",children:r.jsx($e,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("div",{className:"bg-indigo-50 rounded-lg p-3 mb-4",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:[r.jsx("strong",{children:m.grnNo})," - ",m.supplierName]}),r.jsx("div",{className:"text-lg font-bold text-indigo-700 mt-1",children:be(m.amount)})]}),r.jsxs("div",{className:"space-y-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-2 p-3 bg-amber-50 border border-amber-200 rounded-lg",children:[r.jsx(Ro,{className:"w-5 h-5 text-amber-600"}),r.jsx("span",{className:"text-sm text-amber-800 font-medium",children:"Supervisor approval required"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Supervisor Username"}),r.jsx("input",{type:"text",value:E.username,onChange:q=>{const se=q.target.value;C(I=>({...I,username:se}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter supervisor username"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Supervisor Password"}),r.jsx("input",{type:"password",value:E.password,onChange:q=>{const se=q.target.value;C(I=>({...I,password:se}))},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter supervisor password"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Priority"}),r.jsxs("select",{value:_,onChange:q=>T(q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[r.jsx("option",{value:"LOW",children:"Low"}),r.jsx("option",{value:"NORMAL",children:"Normal"}),r.jsx("option",{value:"HIGH",children:"High"}),r.jsx("option",{value:"URGENT",children:"Urgent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Notes (Optional)"}),r.jsx("textarea",{value:O,onChange:q=>k(q.target.value),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Add any notes for the manager..."})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:U,disabled:v||!E.username||!E.password,className:"flex-1 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-indigo-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:v?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-4 h-4 animate-spin"}),"Transferring..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Yd,{className:"w-4 h-4"}),"Transfer to Manager"]})})]})]})})]})}const CB=()=>{const e=localStorage.getItem("user");return e&&JSON.parse(e).branchId||1},Ea=1;function AB(){const[e]=g.useState(CB()),[t,n]=g.useState({isOpen:!1,cashier:"--",shiftId:null,userId:null,terminalCode:`POS-${String(Ea).padStart(2,"0")}`}),[a,l]=g.useState([]),[o,d]=g.useState(null),[u,m]=g.useState(""),[h,x]=g.useState("INV-READY"),[p,b]=g.useState(1),[N,v]=g.useState(null),[w,S]=g.useState({name:"Loading...",code:""}),[A,E]=g.useState(null),[C,O]=g.useState(null),[k,_]=g.useState(null),[T,P]=g.useState(null),[L,z]=g.useState(null),[U,B]=g.useState(null),[ee,X]=g.useState(null),[be,G]=g.useState(0),[J,$]=g.useState(new Date),[q,se]=g.useState(null),[I,M]=g.useState(!1),[H,oe]=g.useState(0),[K,pe]=g.useState(0),[V,xe]=g.useState(!1),Z=g.useMemo(()=>{const fe=a.reduce((Ee,Le)=>Ee+Le.price*Le.qty,0),ve=a.reduce((Ee,Le)=>Ee+(Le.discount||0)*Le.qty,0),Ne=a.reduce((Ee,Le)=>{const We=Le.price*Le.qty-(Le.discount||0)*Le.qty;return Ee+We*(Le.taxRate||0)/100},0),Ae=ve+H,Ce=fe-Ae+Ne;return{grossTotal:fe,itemDiscountAmount:ve,billDiscountAmount:H,discountAmount:Ae,totalDiscount:Ae,taxAmount:Ne,netTotal:Ce,itemCount:a.length,totalQty:a.reduce((Ee,Le)=>Ee+Le.qty,0)}},[a,H]),ne=async()=>{if(t.shiftId)try{const fe=await vt.getShiftTotals(t.shiftId);v(fe.data?.data||fe.data)}catch(fe){console.error("Failed to fetch shift totals:",fe),W("error","Sync Failed","Could not refresh shift totals.")}},Se=g.useRef(null),{addNotification:W,setIsOpen:ae,unreadCount:we}=ru();g.useEffect(()=>{let fe=!0;return bl.getBranches().then(ve=>{if(!fe)return;const Ne=ve?.find(Ae=>String(Ae.id??Ae.branchId)===String(e));S({name:Ne?.name||Ne?.branchName||`Branch ${e}`,code:Ne?.code||Ne?.branchCode||""})}).catch(()=>{fe&&S({name:`Branch ${e}`,code:""})}),()=>{fe=!1}},[e]),g.useEffect(()=>{const fe=setInterval(()=>$(new Date),1e3);return()=>clearInterval(fe)},[]),g.useEffect(()=>{const fe=async()=>{try{const Ae=(await Bn.getPendingCount(e)).data?.data?.count||0;pe(Ae)}catch(Ne){console.error("Failed to fetch GRN payment count:",Ne)}};fe();const ve=setInterval(fe,3e4);return()=>clearInterval(ve)},[e]),g.useEffect(()=>{ee!=null&&(ee<0||ee>=a.length)&&X(null)},[a,ee]);const Be=g.useRef(!1);g.useEffect(()=>{if(Be.current)return;Be.current=!0,(async()=>{try{if(t.isOpen)return;let ve=null,Ne=null;const Ae=localStorage.getItem("user");if(Ae)try{Ne=JSON.parse(Ae),ve=Ne.id||Ne.userId}catch(Le){console.error("Error parsing user",Le)}const Ce=await vt.getCurrentShift(Ea,ve),Ee=Ce.data?.data||Ce.data;if(Ee&&Ee.shiftId){console.log("Restoring active shift:",Ee);let Le=Ee.cashierName;(!Le||Le==="Restored User")&&Ne&&(Le=Ne.username||Ne.name),n({isOpen:!0,cashier:Le||"Unknown User",userId:Ee.cashierId,shiftId:Ee.shiftId,shiftNo:Ee.shiftNo,terminalCode:`POS-${String(Ea).padStart(2,"0")}`}),E(null),W("info","Session Restored",`Resumed Shift #${Ee.shiftId}`)}else E("FLOAT")}catch{console.log("No active shift found, waiting for login."),E("FLOAT")}})()},[]),g.useEffect(()=>{(async()=>{if(t.isOpen)try{const ve=await vt.getLastInvoiceNumber(t.branchId||1),Ne=ve.data?.data||ve.data;let Ae=0;if(Ne)if(typeof Ne=="number")Ae=Ne;else if(Ne.nextSequence)Ae=Ne.nextSequence-1;else if(typeof Ne=="string"){const Ce=Ne.match(/(\d+)$/);Ae=Ce?parseInt(Ce[1]):0}else if(Ne.invoiceNo){const Ce=Ne.invoiceNo.match(/(\d+)$/);Ae=Ce?parseInt(Ce[1]):0}else Ne.lastNumber!==void 0&&(Ae=Ne.lastNumber);b(Ae+1)}catch(ve){console.error("Failed to fetch next invoice no",ve)}})()},[t.isOpen]),g.useEffect(()=>{if(t.isOpen){const fe=new Date,ve=fe.getFullYear().toString()+String(fe.getMonth()+1).padStart(2,"0")+String(fe.getDate()).padStart(2,"0"),Ne=String(p).padStart(5,"0"),Ae=`INV-${ve}-${Ne}`;!L&&(h==="INV-READY"||h!==Ae)&&x(Ae)}},[t.isOpen,p,L,h]),g.useEffect(()=>{const fe=Ne=>{t.isOpen&&(Ne.key==="F5"||(Ne.ctrlKey||Ne.metaKey)&&Ne.key==="r")&&(Ne.preventDefault(),W("warning","Action Blocked","Refreshing is disabled while the shift is open."))},ve=Ne=>{if(t.isOpen)return Ne.preventDefault(),Ne.returnValue="",""};return window.addEventListener("keydown",fe),window.addEventListener("beforeunload",ve),()=>{window.removeEventListener("keydown",fe),window.removeEventListener("beforeunload",ve)}},[t.isOpen,W]);const tt=async(fe,ve,Ne,Ae=null)=>{try{const Ce=await bl.login({username:Ne.username,password:Ne.password}),Ee=Ce.data||Ce;console.log("Supervisor Auth Response:",Ee);const Le=["ADMIN","BRANCH_MANAGER","SUPERVISOR"],We=(Ee.role||Ee.userRole||"").toUpperCase();if(!Le.includes(We))throw W("error","Access Denied",`User '${Ee.username||Ne.username}' is a ${We||"CASHIER"} and cannot approve shifts. Only Admin, Branch Manager, or Supervisor can approve.`),new Error("Insufficient Permissions");const Pr={cashierId:fe.id,branchId:e,terminalId:Ea,openingCash:parseFloat(ve),supervisorUsername:Ne.username,supervisorPassword:Ne.password,approvedBy:Ee.userId||Ee.id};Ae&&Ae.length>0&&(Pr.denominations=Ae),console.log("Opening Shift - Payload:",JSON.stringify(Pr,null,2));const Fe=await vt.openShift(Pr),Je=Fe.data?.data||Fe.data;console.log("Shift Open Response:",Je);let Kt=null,Dr=null;if(typeof Je=="number"?Kt=Je:Je&&typeof Je=="object"&&(Kt=Je.shiftId||Je.id||Je.shift_id,Dr=Je.shiftNo||Je.shift_no),!Kt)throw new Error("Invalid Shift ID received.");n({isOpen:!0,cashier:fe.name,shiftId:Kt,shiftNo:Dr||`SH-${Kt}`,userId:fe.id,terminalCode:`POS-${String(Ea).padStart(2,"0")}`});try{const Gt=await vt.getLastInvoiceNumber(e),$t=Gt.data?.data||Gt.data;let pa=0;if($t)if(typeof $t=="number")pa=$t;else if(typeof $t=="string"){const ga=$t.match(/(\d+)$/);pa=ga?parseInt(ga[1]):0}else if($t.invoiceNo){const ga=$t.invoiceNo.match(/(\d+)$/);pa=ga?parseInt(ga[1]):0}else $t.lastNumber!==void 0&&(pa=$t.lastNumber);b(pa+1),console.log("Next Invoice Number:",pa+1)}catch(Gt){console.warn("Could not fetch last invoice number, starting from 1:",Gt),b(1)}E(null),W("success","Terminal Open",`Shift #${Kt} started successfully. Approved by ${Ee.username||Ne.username}.`)}catch(Ce){if(console.error("Shift Open Error:",Ce),console.error("Error Response:",Ce.response?.data),Ce.message!=="Insufficient Permissions")if(Ce.response?.status===401||Ce.response?.status===403)W("error","Verification Failed","Invalid Supervisor Username or Password.");else if(Ce.response?.status===400){const Ee=Ce.response?.data?.message||Ce.response?.data?.error||"Invalid request data";W("error","Validation Error",Ee)}else{const Ee=Ce.response?.data?.message||Ce.message||"Failed to open shift";W("error","Login Error",Ee)}throw Ce}},kr=async(fe,ve,Ne=null)=>{try{const Ae=await bl.login({username:ve.username,password:ve.password}),Ce=Ae.data||Ae,Ee=["ADMIN","BRANCH_MANAGER","SUPERVISOR"],Le=(Ce.role||Ce.userRole||"").toUpperCase();if(!Ee.includes(Le))throw new Error(`Access Denied: ${Le} cannot approve shift end.`);await vt.closeShift(t.shiftId,{closingCash:parseFloat(fe),denominations:Ne,notes:"Shift Closed",supervisorUsername:ve.username,supervisorPassword:ve.password,approvedBy:Ce.userId||Ce.id}),n({isOpen:!1,cashier:"--",shiftId:null,userId:null,terminalCode:`POS-${String(Ea).padStart(2,"0")}`}),localStorage.removeItem("pos_notifications"),W("success","Shift Closed","Redirecting to login..."),setTimeout(()=>{window.location.href="/"},1e3)}catch(Ae){const Ce=Ae.response?.data?.message||Ae.message||"Logout failed";throw W("error","Logout Error",Ce),new Error(Ce)}},tr=async fe=>{if(fe)try{let ve;if(typeof fe=="object"&&fe!==null)ve={id:fe.productId||fe.id,name:fe.name||fe.productName,price:parseFloat(fe.sellingPrice||fe.price||0),costPrice:parseFloat(fe.costPrice||0),sku:fe.sku,barcode:fe.barcode,taxRate:parseFloat(fe.taxRate||0),qty:1,discount:0};else{const Ae=String(fe).trim();if(!Ae)return;console.log("Scanning product code:",Ae);const Ce=await vt.getProduct(Ae),Ee=Ce.data?.data||Ce.data;if(console.log("Product API response:",Ee),!Ee)throw new Error("Product not found");ve={id:Ee.productId||Ee.id,name:Ee.name||Ee.productName,price:parseFloat(Ee.sellingPrice??Ee.price??Ee.unitPrice??0),costPrice:parseFloat(Ee.costPrice||0),sku:Ee.sku,barcode:Ee.barcode,taxRate:parseFloat(Ee.taxRate||0),qty:1,discount:0}}if(!ve.id&&!ve.sku&&!ve.barcode)throw new Error("Invalid product data - no identifier");if(!ve.name)throw new Error("Invalid product data - no name");ve.id||(ve.id=ve.sku||ve.barcode);let Ne=null;l(Ae=>{const Ce=Ae.findIndex(Ee=>Ee.id===ve.id||Ee.barcode&&Ee.barcode===ve.barcode||Ee.sku&&Ee.sku===ve.sku);if(Ce>=0){const Ee=[...Ae],Le=Ee[Ce].qty+1;return Ee[Ce]={...Ee[Ce],qty:Le},Ne={type:"info",title:"Quantity Updated",message:`${ve.name} x${Le}`},Ee}return Ne={type:"success",title:"Item Added",message:`${ve.name} added to cart`},[...Ae,ve]}),Ne&&W(Ne.type,Ne.title,Ne.message),Se.current?.focus()}catch(ve){console.error("Add to cart error:",ve);const Ne=typeof fe=="object"?fe?.sku||fe?.barcode:fe;W("error","Product Not Found",`Code '${Ne}' is invalid or not available.`)}},an=fe=>{const ve=(typeof fe=="string"?fe:u).trim();ve&&(tr(ve),m(""),Se.current?.focus())},Ha=(fe="CASH")=>{if(a.length===0){W("warning","Empty Cart","Add items first.");return}if(!t.shiftId){W("error","System Error","No Active Shift.");return}_({mode:fe}),E("PAYMENT")},kl=async fe=>{const ve=a.reduce((Fe,Je)=>Fe+Je.price*Je.qty,0),Ae=a.reduce((Fe,Je)=>Fe+(Je.discount||0)*Je.qty,0)+H,Ce=a.reduce((Fe,Je)=>{const Kt=Je.price*Je.qty-(Je.discount||0)*Je.qty;return Fe+Kt*(Je.taxRate||0)/100},0),Ee=ve-Ae+Ce,Le=a.map(Fe=>({productId:Fe.id,serialId:Fe.serialId||null,qty:Fe.qty,unitPrice:Fe.price,discount:Fe.discount||0,taxRate:Fe.taxRate||0})),We=fe.payments.map(Fe=>({paymentType:Fe.paymentType,amount:Fe.amount,referenceNo:Fe.referenceNo||null,bankName:Fe.bankName||null,cardLast4:Fe.cardLast4||null})),Pr={saleId:L,branchId:e,cashierId:t.userId,customerId:o?o.customerId||o.id:null,shiftId:t.shiftId,grossTotal:ve,discount:Ae,taxAmount:Ce,netTotal:Ee,paidAmount:fe.totalPaid,changeAmount:fe.changeAmount||0,saleType:"RETAIL",notes:"",items:Le,payments:We};try{const Fe=await vt.submitOrder(Pr),Je=Fe.data?.data||Fe.data,Kt=Je?.invoiceNo||Je?.invoice_no||h;x(Kt);let Dr="";if(o&&o.id){const Gt=Math.floor(Ee/100);if(Gt>0)try{await vt.updateLoyaltyPoints(o.id,Gt),Dr=` | +${Gt} Points`}catch($t){console.error("Failed to update loyalty points",$t)}}if(W("success","Sale Complete",`Invoice: ${Kt} | Change: LKR ${fe.changeAmount?.toFixed(2)||"0.00"}${Dr}`),Kt){const Gt=Kt.match(/(\d+)$/);b(Gt?parseInt(Gt[1])+1:$t=>$t+1)}else b(Gt=>Gt+1);l([]),d(null),z(null),oe(0),E(null),setTimeout(()=>{x("INV-READY")},3e3)}catch(Fe){const Je=Fe.response?.data?.message||Fe.response?.data?.error||"Transaction failed";W("error","Payment Failed",Je)}},nc=fe=>{X(fe),U!==null&&U!==fe&&B(null)},ac=(fe,ve)=>{const Ne=Number(ve);if(!Number.isFinite(Ne)||Ne<=0){W("warning","Invalid Quantity","Enter a quantity greater than 0.");return}l(Ae=>{const Ce=[...Ae];return Ce[fe]?(Ce[fe]={...Ce[fe],qty:Ne},Ce):Ae}),B(null),Se.current?.focus()},br=()=>{B(null),Se.current?.focus()},sc=async()=>{if(!t.shiftId){W("warning","No Active Shift","Open a shift to view summary.");return}E("CASHIER_SUMMARY"),M(!0);try{const fe=await vt.getShiftTotals(t.shiftId),ve=fe.data?.data||fe.data||{};se(ve)}catch(fe){console.error("Failed to load cashier summary:",fe),W("error","Summary Error",fe.response?.data?.message||"Failed to load cashier summary."),se(null)}finally{M(!1)}},_l=fe=>{const Ne=ee??a.length-1;if(Ne<0||Ne>=a.length)return;const Ae=a[Ne];Wn("Void Item",`Remove "${Ae.name}" from cart?`,()=>{const Ce=[...a];Ce.splice(Ne,1),l(Ce),X(Ee=>Ee==null?null:Ee===Ne?Ce.length?Math.min(Ne,Ce.length-1):null:Ee>Ne?Ee-1:Ee),E(null),W("info","Item Voided",`${Ae.name} removed from cart.`)})},Ti=(fe,ve)=>{fe<0||fe>=a.length||(l(Ne=>{const Ae=[...Ne];return Ae[fe]={...Ae[fe],discount:ve},Ae}),W("success","Discount Applied",`LKR ${ve.toFixed(2)} discount applied.`))},Wn=(fe,ve,Ne,Ae=!1)=>{O({title:fe,message:ve,onYes:Ne,isAlert:Ae}),E("CONFIRM")},rr=async fe=>{if(fe==="HOLD"){if(a.length===0)return;Wn("Suspend Transaction","Park this transaction for later?",async()=>{try{const ve=a.reduce((Le,We)=>Le+We.price*We.qty,0),Ae=a.reduce((Le,We)=>Le+(We.discount||0)*We.qty,0)+H,Ce=a.reduce((Le,We)=>{const Pr=We.price*We.qty-(We.discount||0)*We.qty;return Le+Pr*(We.taxRate||0)/100},0),Ee=ve-Ae+Ce;await vt.holdBill({saleId:L,branchId:e,cashierId:t.userId,shiftId:t.shiftId,customerId:o?.customerId||o?.id||null,grossTotal:ve,discount:Ae,taxAmount:Ce,netTotal:Ee,items:a.map(Le=>({productId:Le.id,quantity:Le.qty,unitPrice:Le.price,discount:Le.discount||0,taxRate:Le.taxRate||0}))}),l([]),d(null),z(null),oe(0),E(null),x("INV-READY"),b(Le=>Le),W("info","Bill Held","Transaction parked successfully.")}catch(ve){W("error","Hold Failed",ve.response?.data?.message||"Could not hold bill.")}})}else if(fe==="CANCEL"){if(a.length===0)return;Wn("Cancel Transaction","Void the entire bill?",()=>{l([]),d(null),z(null),oe(0),E(null),x("INV-READY"),W("warning","Bill Cancelled","Transaction cleared.")})}else if(fe==="RECALL")_({type:"RECALL"}),E("LIST");else if(fe==="RETURN")E("SMART_RETURN");else if(fe==="EXIT"){if(a.length>0){Wn("Pending Items","You have items in cart. Cancel them before closing shift.",null,!0);return}v(null),E("END_SHIFT"),v(null),E("END_SHIFT"),ne()}else fe==="PAY_CASH"?Ha("CASH"):fe==="PAY_CARD"?Ha("CARD"):fe==="PAY_QR"&&Ha("QR")},Ri=async fe=>{try{if(k?.type==="RETURN"){P(fe),_(null),E("RETURN_DETAILS");return}const ve=await vt.recallBill(fe.saleId||fe.id),Ne=ve.data?.data||ve.data;if(Ne.items&&Array.isArray(Ne.items)){const Ae=Ne.items.map(Ce=>({id:Ce.productId,name:Ce.productName||Ce.name,price:Ce.unitPrice,qty:Ce.quantity||Ce.qty,discount:Ce.discount||0,taxRate:Ce.taxRate||0}));l(Ae)}Ne.customer?d({id:Ne.customer.id||Ne.customer.customerId,customerId:Ne.customer.id||Ne.customer.customerId,name:Ne.customer.name,phone:Ne.customer.phone,email:Ne.customer.email,loyaltyPoints:Ne.customer.loyaltyPoints||0}):Ne.customerId&&d({id:Ne.customerId,customerId:Ne.customerId,name:Ne.customerName||"Customer"}),fe.invoiceNo&&x(fe.invoiceNo),(fe.saleId||fe.id)&&z(fe.saleId||fe.id),_(null),E(null),W("success","Bill Recalled",`Bill #${fe.invoiceNo||fe.id} loaded.`)}catch(ve){W("error","Recall Failed",ve.response?.data?.message||"Failed to load bill.")}};return g.useEffect(()=>{const fe=ve=>{if(A&&A!=="FLOAT"){ve.key==="Escape"&&(E(null),O(null));return}t.isOpen&&(ve.key==="F1"&&(ve.preventDefault(),E("PRICE_CHECK")),ve.key==="F3"&&(ve.preventDefault(),rr("RECALL")),ve.key==="F4"&&(ve.preventDefault(),rr("CANCEL")),ve.key==="F6"&&(ve.preventDefault(),E("PAID_IN")),ve.key==="F7"&&(ve.preventDefault(),E("PAID_OUT")),(ve.key===" "||ve.code==="Space")&&document.activeElement.tagName!=="INPUT"&&(ve.preventDefault(),rr("PAY_CASH")),ve.key==="F10"&&(ve.preventDefault(),rr("PAY_CARD")),ve.key==="F11"&&(ve.preventDefault(),rr("PAY_QR")),ve.key==="F11"&&(ve.preventDefault(),rr("PAY_QR")),(ve.ctrlKey||ve.metaKey)&&ve.key==="Enter"&&(ve.preventDefault(),rr("PAY_CASH")),ve.key==="Delete"&&(ve.preventDefault(),_l()),(ve.key==="q"||ve.key==="Q")&&ee!=null&&(ve.preventDefault(),B(ee)),!A&&document.activeElement.tagName!=="INPUT"&&Se.current?.focus())};return window.addEventListener("keydown",fe),()=>window.removeEventListener("keydown",fe)},[A,a,t.isOpen,ee]),r.jsxs("div",{className:"h-screen w-screen flex flex-col bg-slate-100 overflow-hidden font-sans relative",children:[r.jsxs("header",{className:"bg-slate-900 text-white h-16 shrink-0 flex items-center justify-between px-4 shadow-md z-30 border-b border-slate-800",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"flex flex-col leading-none",children:[r.jsx("span",{className:"font-bold text-2xl text-green-400 tracking-tight",children:t.terminalCode}),r.jsxs("span",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider flex items-center gap-1",children:[r.jsx(Dv,{className:"w-3 h-3"})," ",w.name||`Branch ${e}`]})]}),r.jsx("div",{className:"h-10 w-px bg-slate-700"}),r.jsx("div",{className:"h-12 flex items-center",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest",children:"Invoice"}),r.jsx("div",{className:"flex items-center gap-1",children:h==="INV-READY"?r.jsx("span",{className:"font-mono text-lg font-bold text-slate-400 animate-pulse",children:"READY"}):r.jsx(r.Fragment,{children:(()=>{const fe=h.split("-");return fe.length>=3?r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"font-mono text-xs font-bold text-blue-400",children:fe[0]}),r.jsx("span",{className:"text-slate-600",children:"-"}),r.jsx("span",{className:"font-mono text-sm font-bold text-cyan-400",children:fe[1]}),r.jsx("span",{className:"text-slate-600",children:"-"}),r.jsx("span",{className:"font-mono text-xl font-black text-green-400 tracking-wider",children:fe[2]})]}):r.jsx("span",{className:"font-mono text-xl font-bold text-white",children:h})})()})})]})}),t.shiftId&&r.jsx("div",{className:"h-12 flex items-center ml-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"text-[9px] text-slate-500 uppercase font-bold tracking-widest",children:"Active Shift"}),r.jsxs("span",{className:"text-lg text-green-400 font-mono font-bold",children:["#",t.shiftId]})]})})]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("button",{onClick:()=>ae(!0),className:"relative p-2 rounded-full hover:bg-slate-800 transition-colors text-slate-300 hover:text-white",children:[r.jsx(ko,{className:"w-5 h-5"}),we>0&&r.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-slate-900 animate-pulse"})]}),r.jsxs("button",{onClick:()=>xe(!0),className:"relative p-2 rounded-full hover:bg-slate-800 transition-colors text-slate-300 hover:text-purple-400",title:"GRN Payment Requests",children:[r.jsx(ps,{className:"w-5 h-5"}),K>0&&r.jsx("span",{className:"absolute -top-1 -right-1 min-w-[18px] h-[18px] flex items-center justify-center bg-purple-500 text-white text-[10px] font-bold rounded-full border-2 border-slate-900 animate-pulse",children:K>9?"9+":K})]}),r.jsxs("button",{onClick:sc,disabled:!t.isOpen,className:"flex items-center gap-3 bg-blue-900/40 border border-blue-500/30 rounded-full py-1.5 px-4 hover:bg-blue-900/60 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[r.jsx(tn,{className:"w-4 h-4 text-blue-400"}),r.jsx("span",{className:"text-sm font-bold tracking-wide uppercase text-blue-100",children:t.cashier})]}),r.jsxs("div",{className:"text-right leading-tight hidden md:block",children:[r.jsx("div",{className:"font-mono text-2xl font-bold text-white tracking-widest",children:J.toLocaleTimeString("en-US",{hour12:!1})}),r.jsx("div",{className:"text-[10px] text-slate-400 uppercase font-bold tracking-wider",children:J.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}).toUpperCase()})]}),r.jsxs("button",{onClick:()=>rr("EXIT"),disabled:!t.isOpen,className:"inline-flex items-center justify-center gap-2 bg-red-600 hover:bg-red-700 disabled:bg-slate-700 disabled:cursor-not-allowed text-white px-6 py-2 rounded-md text-xs font-bold uppercase tracking-widest border border-red-800 disabled:border-slate-600 shadow-lg active:scale-95 transition-all w-auto",children:["EXIT ",r.jsx(fi,{className:"w-4 h-4"})]})]})]}),r.jsxs("div",{className:`flex flex-1 overflow-hidden transition-all duration-500 ${!t.isOpen||A?"blur-[3px] brightness-90":""}`,children:[r.jsx(A8,{cart:a,customer:o,totals:Z,onItemClick:nc,selectedIndex:ee,editingIndex:U,onQuantityCommit:ac,onQuantityCancel:br,onDetachCustomer:()=>d(null),billDiscount:H}),r.jsx(aB,{inputRef:Se,inputBuffer:u,setInputBuffer:m,onScan:an,onOpenModal:E,onAction:rr,onVoid:()=>_l(),isEnabled:t.isOpen,onSelectProduct:tr}),r.jsx(oB,{onAddToCart:tr,onAddQuickItemClick:()=>E("QUICK_ADD"),refreshTrigger:be,branchId:e,terminalId:Ea})]}),r.jsx(p3,{}),A==="FLOAT"&&r.jsx(xB,{onApprove:tt,branchId:e,terminalId:Ea}),A==="END_SHIFT"&&r.jsx(pB,{cashierName:t.cashier,shiftId:t.shiftId,expectedTotals:N,onClose:()=>E(null),onConfirm:kr,onRefresh:ne}),A==="PAYMENT"&&r.jsx(gB,{total:Z.netTotal,cart:a,customer:o,invoiceId:h,cashierName:t.cashier,branchInfo:w,totals:Z,initialMethod:k?.mode||"CASH",onClose:()=>E(null),onProcess:kl}),A==="QUICK_ADD"&&r.jsx(bB,{onClose:()=>E(null),onProductSelected:fe=>{tr(fe),E(null)},onAddToQuickPick:fe=>{try{const ve=m3(Ea),Ne={id:fe.productId||fe.id,sku:fe.sku,barcode:fe.barcode,name:fe.name||fe.productName,price:parseFloat(fe.sellingPrice||fe.price||0),taxRate:parseFloat(fe.taxRate||0),isActive:!0};return ve.some(Ce=>Ce.id===Ne.id)?(W("info","Already Added",`${Ne.name} is already in quick pick.`),!1):(ve.push(Ne),h3(Ea,ve),G(Ce=>Ce+1),W("success","Added to Quick Pick",`${Ne.name} added to quick pick panel.`),!0)}catch(ve){return console.error("Failed to add to quick pick:",ve),!1}}}),A==="PAID_IN"&&r.jsx(YS,{type:"PAID_IN",shiftId:t.shiftId,onClose:()=>E(null),onNotify:W}),A==="PAID_OUT"&&r.jsx(YS,{type:"PAID_OUT",shiftId:t.shiftId,onClose:()=>E(null),onNotify:W}),A==="PRICE_CHECK"&&r.jsx(dB,{onClose:()=>E(null)}),A==="LOYALTY"&&r.jsx(uB,{onClose:()=>E(null),onAttach:fe=>{d(fe),E(null)}}),A==="REGISTER"&&r.jsx(fB,{onClose:()=>E(null)}),A==="CONFIRM"&&C&&r.jsx(mB,{title:C.title,message:C.message,onConfirm:()=>{C.onYes&&C.onYes(),E(null),O(null)},onCancel:()=>{E(null),O(null)},isAlert:C.isAlert}),A==="LIST"&&k&&r.jsx(hB,{type:k.type,branchId:e,onClose:()=>{E(null),_(null)},onSelect:Ri}),A==="CASHIER_SUMMARY"&&r.jsx(yB,{cashierName:t.cashier,shiftId:t.shiftId,summary:q,loading:I,onClose:()=>{E(null),se(null)}}),A==="RETURN_DETAILS"&&T&&r.jsx(vB,{sale:T,branchId:e,onClose:()=>{E(null),P(null)},onNotify:W}),A==="SMART_RETURN"&&r.jsx(NB,{branchId:e,onClose:()=>E(null),onNotify:W}),A==="DISCOUNT"&&r.jsx(wB,{selectedItem:ee!==null?a[ee]:null,cartTotal:a.reduce((fe,ve)=>fe+ve.price*ve.qty-(ve.discount||0)*ve.qty,0),onClose:()=>E(null),onApply:fe=>{fe.scope==="item"&&ee!==null?Ti(ee,fe.discountAmount/a[ee].qty):(oe(fe.discountAmount),W("success","Bill Discount Applied",`LKR ${fe.discountAmount.toFixed(2)} discount applied to bill.`))}}),r.jsx(EB,{isOpen:V,onClose:()=>{xe(!1),Bn.getPendingCount(e).then(fe=>pe(fe.data?.data?.count||0)).catch(()=>{})},branchId:e,onNotification:W})]})}function kB(){return r.jsx(qv,{children:r.jsx(AB,{})})}const g3=e=>{switch(e){case"In Stock":return"bg-green-100 text-green-700";case"Low Stock":return"bg-orange-100 text-orange-700";case"Out of Stock":return"bg-red-100 text-red-700";case"Pending":return"bg-yellow-100 text-yellow-700";case"Approved":return"bg-blue-100 text-blue-700";case"Completed":return"bg-green-100 text-green-700";case"Safe":return"bg-green-100 text-green-700 border-green-300";case"Near Expiry":return"bg-yellow-100 text-yellow-700 border-yellow-300";case"Expired":return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700"}},_B=({items:e,searchQuery:t,setSearchQuery:n,setIsAddModalOpen:a,setSelectedItemId:l,setActiveScreen:o,handleDeleteItem:d,handleEditItem:u,categories:m,onRefresh:h})=>{const[x,p]=g.useState(!1),[b,N]=g.useState({category:"",stockStatus:"",status:""}),[v,w]=g.useState({key:"name",direction:"asc"}),[S,A]=g.useState("table"),[E,C]=g.useState([]),[O,k]=g.useState(!1),[_,T]=g.useState(new Date);g.useEffect(()=>{const $=setInterval(()=>{P(!0)},3e4);return()=>clearInterval($)},[]);const P=g.useCallback(async($=!1)=>{$||k(!0);try{h&&await h(),T(new Date)}catch(q){console.error("Error refreshing items:",q)}finally{k(!1)}},[h]),L=g.useMemo(()=>{const $=e.length,q=e.filter(H=>H.is_active).length,se=e.filter(H=>(H.quantity||0)<=(H.reorder_level||0)&&(H.quantity||0)>0).length,I=e.filter(H=>(H.quantity||0)<=0).length,M=e.reduce((H,oe)=>H+(oe.quantity||0)*(oe.selling_price||0),0);return{totalItems:$,activeItems:q,lowStockItems:se,outOfStock:I,totalValue:M}},[e]),z=g.useMemo(()=>{let $=e.filter(q=>{const se=q.name?.toLowerCase().includes(t.toLowerCase())||q.sku?.toLowerCase().includes(t.toLowerCase())||q.barcode?.toLowerCase().includes(t.toLowerCase()),I=b.category?q.category_id===b.category:!0;let M=!0;b.stockStatus==="low"?M=(q.quantity||0)<=(q.reorder_level||0)&&(q.quantity||0)>0:b.stockStatus==="out"?M=(q.quantity||0)<=0:b.stockStatus==="in"&&(M=(q.quantity||0)>(q.reorder_level||0));const H=b.status==="active"?q.is_active:b.status==="inactive"?!q.is_active:!0;return se&&I&&M&&H});return $.sort((q,se)=>{let I=q[v.key],M=se[v.key];return typeof I=="string"&&(I=I.toLowerCase()),typeof M=="string"&&(M=M.toLowerCase()),I<M?v.direction==="asc"?-1:1:I>M?v.direction==="asc"?1:-1:0}),$},[e,t,b,v]),U=()=>{N({category:"",stockStatus:"",status:""})},B=$=>{w(q=>({key:$,direction:q.key===$&&q.direction==="asc"?"desc":"asc"}))},ee=()=>{E.length===z.length?C([]):C(z.map($=>$.product_id))},X=($,q)=>{q.stopPropagation(),C(se=>se.includes($)?se.filter(I=>I!==$):[...se,$])},be=Object.values(b).filter(Boolean).length,G=$=>{const q=$.quantity||0,se=$.reorder_level||0;return q<=0?{color:"text-red-600 bg-red-50",label:"Out of Stock",icon:Ia}:q<=se?{color:"text-amber-600 bg-amber-50",label:"Low Stock",icon:Bt}:q>se*2?{color:"text-emerald-600 bg-emerald-50",label:"In Stock",icon:et}:{color:"text-blue-600 bg-blue-50",label:"Normal",icon:Tt}},J=()=>{const q=[[" SKU"," Item Name"," Category"," Quantity"," Selling Price"," MRP"," Reorder Level"," Tax Rate"," Status"].join(","),...z.map(H=>{const K=(H.quantity||0)<=(H.reorder_level||0)?` ${H.quantity||0}`:` ${H.quantity||0}`,pe=H.is_active?" Active":" Inactive";return[H.sku,`"${H.name.replace(/"/g,'""')}"`,`"${(m?.find(V=>V.category_id===H.category_id)?.name||H.category_id||"").replace(/"/g,'""')}"`,K,H.selling_price?.toFixed(2),H.mrp?.toFixed(2),H.reorder_level,`${H.tax_rate}%`,pe].join(",")})].join(`
`),se=new Blob(["\uFEFF"+q],{type:"text/csv;charset=utf-8;"}),I=document.createElement("a"),M=URL.createObjectURL(se);I.setAttribute("href",M),I.setAttribute("download",`item_list_${new Date().toISOString().split("T")[0]}.csv`),I.style.visibility="hidden",document.body.appendChild(I),I.click(),document.body.removeChild(I)};return r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Item List"}),r.jsxs("p",{className:"text-gray-600 mt-2 font-medium flex items-center gap-2",children:["Manage your inventory items",r.jsxs("span",{className:"text-xs text-gray-400",children:["Last updated: ",_.toLocaleTimeString()]})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>P(!1),className:`p-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors ${O?"animate-spin":""}`,disabled:O,children:r.jsx(ir,{size:18,className:"text-gray-500"})}),r.jsxs("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-brand-primary text-white rounded-lg flex items-center gap-2 hover:bg-brand-secondary transition-colors btn-hover-scale btn-interactive",children:[r.jsx(yn,{size:20}),"Add New Item"]})]})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:r.jsx(Tt,{className:"w-5 h-5 text-blue-600"})}),r.jsx(Hn,{className:"w-4 h-4 text-blue-500"})]}),r.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-3",children:L.totalItems}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total Items"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:r.jsx(et,{className:"w-5 h-5 text-emerald-600"})})}),r.jsx("p",{className:"text-2xl font-bold text-gray-800 mt-3",children:L.activeItems}),r.jsx("p",{className:"text-sm text-gray-500",children:"Active Items"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:r.jsx(Bt,{className:"w-5 h-5 text-amber-600"})})}),r.jsx("p",{className:"text-2xl font-bold text-amber-600 mt-3",children:L.lowStockItems}),r.jsx("p",{className:"text-sm text-gray-500",children:"Low Stock"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:r.jsx(Ia,{className:"w-5 h-5 text-red-600"})})}),r.jsx("p",{className:"text-2xl font-bold text-red-600 mt-3",children:L.outOfStock}),r.jsx("p",{className:"text-sm text-gray-500",children:"Out of Stock"})]}),r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-4 hover:shadow-md transition-shadow",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center",children:r.jsx(ci,{className:"w-5 h-5 text-purple-600"})})}),r.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-3",children:["LKR ",(L.totalValue/1e3).toFixed(1),"K"]}),r.jsx("p",{className:"text-sm text-gray-500",children:"Total Value"})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(er,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search items by name, SKU, or barcode...",className:"w-full pl-10 pr-4 py-2.5 border border-brand-border rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent outline-none transition-all",value:t,onChange:$=>n($.target.value)}),t&&r.jsx("button",{onClick:()=>n(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(Ia,{size:16})})]}),r.jsxs("div",{className:"relative",children:[r.jsxs("button",{onClick:()=>p(!x),className:`px-4 py-2 border rounded-lg flex items-center gap-2 transition-colors ${x||be>0?"border-brand-primary bg-blue-50 text-brand-primary":"border-gray-300 hover:bg-gray-50"}`,children:[r.jsx(Jh,{size:20}),"Filters",be>0&&r.jsx("span",{className:"flex items-center justify-center bg-brand-primary text-white text-xs font-bold rounded-full w-5 h-5",children:be})]}),x&&r.jsxs("div",{className:"absolute top-full mt-2 right-0 w-72 bg-white rounded-xl shadow-xl border border-gray-200 z-50 p-4 animate-in fade-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Filter Items"}),be>0&&r.jsx("button",{onClick:U,className:"text-xs text-red-600 hover:text-red-700 font-medium",children:"Clear all"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Category"}),r.jsxs("select",{value:b.category,onChange:$=>N({...b,category:$.target.value}),className:"w-full text-sm",children:[r.jsx("option",{value:"",children:"All Categories"}),m?.map($=>r.jsx("option",{value:$.category_id,children:$.name},$.category_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Stock Status"}),r.jsxs("select",{value:b.stockStatus,onChange:$=>N({...b,stockStatus:$.target.value}),className:"w-full text-sm",children:[r.jsx("option",{value:"",children:"All Stock Levels"}),r.jsx("option",{value:"in",children:"In Stock"}),r.jsx("option",{value:"low",children:"Low Stock"}),r.jsx("option",{value:"out",children:"Out of Stock"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Item Status"}),r.jsxs("div",{className:"flex rounded-lg border border-gray-200 p-1",children:[r.jsx("button",{onClick:()=>N({...b,status:""}),className:`flex-1 py-1.5 text-xs font-medium rounded ${b.status?"text-gray-500 hover:text-gray-900":"bg-gray-100 text-gray-900"}`,children:"All"}),r.jsx("button",{onClick:()=>N({...b,status:"active"}),className:`flex-1 py-1.5 text-xs font-medium rounded ${b.status==="active"?"bg-green-100 text-green-700":"text-gray-500 hover:text-gray-900"}`,children:"Active"}),r.jsx("button",{onClick:()=>N({...b,status:"inactive"}),className:`flex-1 py-1.5 text-xs font-medium rounded ${b.status==="inactive"?"bg-red-100 text-red-700":"text-gray-500 hover:text-gray-900"}`,children:"Inactive"})]})]})]})]})]}),r.jsxs("button",{onClick:J,className:"px-4 py-2 border border-gray-300 rounded-lg flex items-center gap-2 hover:bg-gray-50",children:[r.jsx(ua,{size:20}),"Export"]})]}),r.jsxs("div",{className:"flex items-center justify-between px-2 text-sm text-gray-600",children:[r.jsxs("span",{children:["Showing ",z.length," of ",e.length," items",t&&r.jsxs("span",{className:"ml-1",children:['for "',t,'"']})]}),E.length>0&&r.jsxs("span",{className:"text-brand-primary font-medium",children:[E.length," item",E.length!==1?"s":""," selected"]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:E.length===z.length&&z.length>0,onChange:ee,className:"w-4 h-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>B("sku"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["SKU",v.key==="sku"&&r.jsx(na,{className:`w-3 h-3 ${v.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>B("name"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Item Name",v.key==="name"&&r.jsx(na,{className:`w-3 h-3 ${v.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>B("quantity"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Quantity",v.key==="quantity"&&r.jsx(na,{className:`w-3 h-3 ${v.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>B("selling_price"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Selling Price",v.key==="selling_price"&&r.jsx(na,{className:`w-3 h-3 ${v.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"MRP"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Stock Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:z.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:10,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Tt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{className:"font-medium",children:"No items found"}),r.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filters"})]})}):z.map($=>{const q=G($),se=q.icon;return r.jsxs("tr",{onClick:()=>{l($.product_id),o("item-detail")},className:`hover:bg-gray-50 cursor-pointer transition-colors ${E.includes($.product_id)?"bg-blue-50":""}`,children:[r.jsx("td",{className:"px-4 py-4",children:r.jsx("input",{type:"checkbox",checked:E.includes($.product_id),onChange:I=>X($.product_id,I),className:"w-4 h-4 rounded border-gray-300 text-brand-primary focus:ring-brand-primary"})}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:$.sku}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:r.jsx(Tt,{className:"w-4 h-4 text-gray-500"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:$.name})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-gray-100 rounded text-xs text-gray-600",children:[r.jsx(mn,{className:"w-3 h-3"}),m?.find(I=>I.category_id===$.category_id)?.name||$.category_id]})}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:$.quantity||0}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:["LKR ",$.selling_price?.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:["LKR ",$.mrp?.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium ${q.color}`,children:[r.jsx(se,{className:"w-3 h-3"}),q.label]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded ${$.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:$.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:I=>{I.stopPropagation(),l($.product_id),o("item-detail")},className:"p-1.5 text-gray-500 hover:bg-gray-100 rounded transition-colors",title:"View Details",children:r.jsx(di,{size:16})}),r.jsx("button",{onClick:I=>{I.stopPropagation(),u($.product_id)},className:"p-1.5 text-brand-primary hover:bg-blue-50 rounded transition-colors",title:"Edit Item",children:r.jsx(Fn,{size:16})}),r.jsx("button",{onClick:I=>{I.stopPropagation(),o("barcode-print")},className:"p-1.5 text-gray-600 hover:bg-gray-50 rounded transition-colors",title:"Print Barcode",children:r.jsx(mi,{size:16})}),r.jsx("button",{onClick:I=>{I.stopPropagation(),d($.product_id)},className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:r.jsx(en,{size:16})})]})})]},$.product_id)})})]})})]})},OB="http://localhost:8080/api",me=Rt.create({baseURL:OB,headers:{"Content-Type":"application/json"}});me.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),console.log("[API] Request:",e.method?.toUpperCase(),e.baseURL+e.url),e},e=>(console.error("[API] Request error:",e),Promise.reject(e)));me.interceptors.response.use(e=>(console.log("[API] Response:",e.config?.method?.toUpperCase(),e.config?.url,"Status:",e.status),e),e=>(e.response?.status===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),console.error("[API] Error:",e.response?.status,e.response?.data),Promise.reject(e)));const TB=e=>e.replace(/[A-Z]/g,t=>`_${t.toLowerCase()}`),RB=e=>e.replace(/_([a-z])/g,(t,n)=>n.toUpperCase()),vn=e=>{if(e==null)return e;if(Array.isArray(e))return e.map(vn);if(typeof e!="object")return e;const t={};for(const n in e)if(e.hasOwnProperty(n)){const a=TB(n);t[a]=vn(e[n])}return t},Kn=e=>{if(e==null)return e;if(Array.isArray(e))return e.map(Kn);if(typeof e!="object")return e;const t={};for(const n in e)if(e.hasOwnProperty(n)){const a=RB(n);t[a]=Kn(e[n])}return t},jm=e=>e?vn(e):null,ZS=e=>e?Kn(e):null,Kf=e=>Array.isArray(e)?e.map(jm):[],by=e=>e?vn(e):null,JS=e=>e?Kn(e):null,PB=e=>Array.isArray(e)?e.map(by):[],Nm=e=>{if(!e)return null;const t=vn(e);return{...t,icon:t.icon||"Tag",color:t.color||"blue"}},eE=e=>e?Kn(e):null,DB=e=>Array.isArray(e)?e.map(Nm):[],wm=e=>e?vn(e):null,tE=e=>e?Kn(e):null,MB=e=>Array.isArray(e)?e.map(wm):[],Sm=e=>e?vn(e):null,rE=e=>e?Kn(e):null,IB=e=>Array.isArray(e)?e.map(Sm):[],Em=e=>e?vn(e):null,nE=e=>e?Kn(e):null,mo=e=>Array.isArray(e)?e.map(Em):[],yy=e=>e?vn(e):null,LB=e=>e?Kn(e):null,zB=e=>Array.isArray(e)?e.map(yy):[],Cm=e=>e?vn(e):null,aE=e=>e?Kn(e):null,BB=e=>Array.isArray(e)?e.map(Cm):[],vy=e=>e?vn(e):null,$B=e=>e?Kn(e):null,sE=e=>Array.isArray(e)?e.map(vy):[],fl=e=>e?vn(e):null,UB=e=>e?Kn(e):null,nd=e=>Array.isArray(e)?e.map(fl):[],qB=e=>e?vn(e):null,FB=e=>Array.isArray(e)?e.map(qB):[],it={getProducts:async()=>{try{console.log("[InventoryService] GET products");const e=await me.get("/inventory/products");console.log("[InventoryService] GET products response:",e.data);const t=e.data.data||e.data,n=Kf(t);return console.log("[InventoryService] GET products mapped:",n.length,"items"),n}catch(e){throw console.error("[InventoryService] GET products error:",e?.response||e),e}},getProductById:async e=>{try{const t=await me.get(`/inventory/products/${e}`),n=t.data.data||t.data;return jm(n)}catch(t){throw console.error("Error fetching product:",t),t}},searchProducts:async e=>{try{const t=await me.get(`/products/search?q=${e}`),n=t.data.data||t.data;return Kf(n)}catch(t){throw console.error("Error searching products:",t),t}},createProduct:async e=>{try{const t=ZS(e),n=await me.post("/inventory/products",t),a=n.data.data||n.data;return jm(a)}catch(t){throw console.error("Error creating product:",t),t}},updateProduct:async(e,t)=>{try{const n=ZS(t),a=await me.put(`/inventory/products/${e}`,n),l=a.data.data||a.data;return jm(l)}catch(n){throw console.error("Error updating product:",n),n}},deleteProduct:async e=>{try{return(await me.delete(`/inventory/products/${e}`)).data}catch(t){throw console.error("Error deleting product:",t),t}},getProductsByCategory:async e=>{try{const t=await me.get(`/products/category/${e}`),n=t.data.data||t.data;return Kf(n)}catch(t){throw console.error("Error fetching products by category:",t),t}},getProductsByBrand:async e=>{try{const t=await me.get(`/products/brand/${e}`),n=t.data.data||t.data;return Kf(n)}catch(t){throw console.error("Error fetching products by brand:",t),t}},getCategories:async()=>{try{console.log("[InventoryService] GET categories");const e=await me.get("/inventory/categories");console.log("[InventoryService] GET categories response:",e.data);const t=e.data.data||e.data,n=DB(t);return console.log("[InventoryService] GET categories mapped:",n.length,"items"),n}catch(e){throw console.error("[InventoryService] GET categories error:",e?.response||e),e}},getCategoryById:async e=>{try{const t=await me.get(`/inventory/categories/${e}`),n=t.data.data||t.data;return Nm(n)}catch(t){throw console.error("Error fetching category:",t),t}},createCategory:async e=>{try{const{category_id:t,...n}=e;console.log("[InventoryService] POST category:",n);const a=eE(n);console.log("[InventoryService] POST category (mapped):",a);const l=await me.post("/inventory/categories",a);console.log("[InventoryService] POST category response:",l.data);const o=l.data.data||l.data;return Nm(o)}catch(t){throw console.error("[InventoryService] POST category error:",t?.response||t),t}},updateCategory:async(e,t)=>{try{const n=eE(t),a=await me.put(`/categories/${e}`,n),l=a.data.data||a.data;return Nm(l)}catch(n){throw console.error("Error updating category:",n),n}},deleteCategory:async e=>{try{return(await me.delete(`/inventory/categories/${e}`)).data}catch(t){throw console.error("Error deleting category:",t),t}},getSubCategories:async()=>{try{const e=await me.get("/inventory/subcategories"),t=e.data.data||e.data;return PB(t)}catch(e){throw console.error("Error fetching subcategories:",e),e}},createSubCategory:async e=>{try{const{subcategory_id:t,...n}=e,a=JS(n),l=await me.post("/inventory/subcategories",a),o=l.data.data||l.data;return by(o)}catch(t){throw console.error("Error creating subcategory:",t),t}},updateSubCategory:async(e,t)=>{try{const n=JS(t),a=await me.put(`/subcategories/${e}`,n),l=a.data.data||a.data;return by(l)}catch(n){throw console.error("Error updating subcategory:",n),n}},deleteSubCategory:async e=>{try{return(await me.delete(`/inventory/subcategories/${e}`)).data}catch(t){throw console.error("Error deleting subcategory:",t),t}},getBrands:async()=>{try{console.log("[InventoryService] GET brands");const e=await me.get("/inventory/brands");console.log("[InventoryService] GET brands response:",e.data);const t=e.data.data||e.data,n=MB(t);return console.log("[InventoryService] GET brands mapped:",n.length,"items"),n}catch(e){throw console.error("[InventoryService] GET brands error:",e?.response||e),e}},getBrandById:async e=>{try{const t=await me.get(`/inventory/brands/${e}`),n=t.data.data||t.data;return wm(n)}catch(t){throw console.error("Error fetching brand:",t),t}},createBrand:async e=>{try{const{brand_id:t,...n}=e,a=tE(n),l=await me.post("/inventory/brands",a),o=l.data.data||l.data;return wm(o)}catch(t){throw console.error("Error creating brand:",t),t}},updateBrand:async(e,t)=>{try{const n=tE(t),a=await me.put(`/brands/${e}`,n),l=a.data.data||a.data;return wm(l)}catch(n){throw console.error("Error updating brand:",n),n}},deleteBrand:async e=>{try{return(await me.delete(`/inventory/brands/${e}`)).data}catch(t){throw console.error("Error deleting brand:",t),t}},getBranches:async()=>{try{console.log("[InventoryService] GET branches");const e=await me.get("/inventory/branches");console.log("[InventoryService] GET branches response:",e.data);const t=e.data.data||e.data,n=FB(t);return console.log("[InventoryService] GET branches mapped:",n.length,"items"),n}catch(e){throw console.error("[InventoryService] GET branches error:",e?.response||e),e}},getGRNs:async e=>{try{console.log("[InventoryService] GET GRNs for branch:",e);const t=JSON.parse(localStorage.getItem("user")||"{}"),n=e||t.branchId||1,a=await me.get(`/inventory/grn/branch/${n}`),l=a.data.data||a.data,o=nd(l);return console.log("[InventoryService] GET GRNs mapped:",o.length,"items"),o}catch(t){throw console.error("[InventoryService] Error fetching GRNs:",t),t}},searchGRNs:async(e={})=>{try{console.log("[InventoryService] Search GRNs with filter:",e);const t=UB(e),n=await me.post("/inventory/grn/search",t),a=n.data.data||n.data;return nd(a)}catch(t){throw console.error("[InventoryService] Error searching GRNs:",t),t}},getPendingGRNs:async e=>{try{console.log("[InventoryService] GET pending GRNs for branch:",e);const t=await me.get("/inventory/grn/pending",{params:e?{branchId:e}:{}}),n=t.data.data||t.data;return nd(n)}catch(t){throw console.error("[InventoryService] Error fetching pending GRNs:",t),t}},getGRNById:async e=>{try{console.log("[InventoryService] GET GRN by ID:",e);const t=await me.get(`/inventory/grn/${e}`),n=t.data.data||t.data;return fl(n)}catch(t){throw console.error("[InventoryService] Error fetching GRN:",t),t}},createGRN:async e=>{try{console.log("[InventoryService] Create GRN:",e);const t={branchId:e.branch_id,supplierId:e.supplier_id,poId:e.po_id||null,grnDate:e.grn_date,invoiceNo:e.invoice_no,invoiceDate:e.invoice_date,items:e.items.map(d=>({productId:d.product_id,batchCode:d.batch_code||null,expiryDate:d.expiry_date||null,qtyReceived:d.quantity,unitPrice:d.unit_price}))};console.log("[InventoryService] Create GRN backend data:",t);const n=JSON.parse(localStorage.getItem("user")||"{}"),a=n.userId||n.id||1,l=await me.post("/inventory/grn",t,{headers:{"User-ID":a}}),o=l.data.data||l.data;return console.log("[InventoryService] Create GRN response:",o),fl(o)}catch(t){throw console.error("[InventoryService] Error creating GRN:",t),console.error("[InventoryService] Error details:",t.response?.data),t}},updateGRN:async(e,t)=>{try{console.log("[InventoryService] Update GRN:",e,t);const n={grnDate:t.grn_date,invoiceNo:t.invoice_no,invoiceDate:t.invoice_date,items:t.items?.map(o=>({productId:o.product_id,batchCode:o.batch_code||null,expiryDate:o.expiry_date||null,qtyReceived:o.quantity,unitPrice:o.unit_price}))},a=await me.put(`/inventory/grn/${e}`,n),l=a.data.data||a.data;return fl(l)}catch(n){throw console.error("[InventoryService] Error updating GRN:",n),n}},approveGRN:async e=>{try{console.log("[InventoryService] Approve GRN:",e);const t=JSON.parse(localStorage.getItem("user")||"{}"),n=t.userId||t.id||1,a=await me.put(`/inventory/grn/${e}/approve`,{},{headers:{"User-ID":n}}),l=a.data.data||a.data;return fl(l)}catch(t){throw console.error("[InventoryService] Error approving GRN:",t),t}},rejectGRN:async(e,t)=>{try{console.log("[InventoryService] Reject GRN:",e,t);const n=JSON.parse(localStorage.getItem("user")||"{}"),a=n.userId||n.id||1,l=await me.put(`/inventory/grn/${e}/reject`,{},{headers:{"User-ID":a},params:{reason:t}}),o=l.data.data||l.data;return fl(o)}catch(n){throw console.error("[InventoryService] Error rejecting GRN:",n),n}},updateGRNPaymentStatus:async(e,t)=>{try{console.log("[InventoryService] Update GRN payment status:",e,t);const n=await me.put(`/inventory/grn/${e}/payment-status`,null,{params:{paymentStatus:t}}),a=n.data.data||n.data;return fl(a)}catch(n){throw console.error("[InventoryService] Error updating GRN payment status:",n),n}},deleteGRN:async e=>{try{return console.log("[InventoryService] Delete GRN:",e),(await me.delete(`/inventory/grn/${e}`)).data}catch(t){throw console.error("[InventoryService] Error deleting GRN:",t),t}},getGRNStats:async(e,t)=>{try{console.log("[InventoryService] GET GRN stats:",e,t);const n=t?{period:t}:{},a=await me.get(`/inventory/grn/branch/${e}/stats`,{params:n}),l=a.data.data||a.data;return fl(l)}catch(n){throw console.error("[InventoryService] Error fetching GRN stats:",n),n}},getGRNItemsByProduct:async(e,t)=>{try{console.log("[InventoryService] GET GRN items by product:",e,t);const n=t?{branchId:t}:{},a=await me.get(`/inventory/grn/product/${e}/items`,{params:n}),l=a.data.data||a.data;return nd(l)}catch(n){throw console.error("[InventoryService] Error fetching GRN items by product:",n),n}},getGRNsBySupplier:async e=>{try{console.log("[InventoryService] GET GRNs by supplier:",e);const t=await me.get(`/inventory/grn/supplier/${e}`),n=t.data.data||t.data;return nd(n)}catch(t){throw console.error("[InventoryService] Error fetching GRNs by supplier:",t),t}},checkGRNNumber:async e=>{try{console.log("[InventoryService] Check GRN number:",e);const t=await me.get(`/inventory/grn/check-number/${e}`);return t.data.data||t.data}catch(t){throw console.error("[InventoryService] Error checking GRN number:",t),t}},getGrnListPdf:async()=>{try{return(await me.get("/inventory/grn/reports/pdf",{responseType:"blob"})).data}catch(e){throw console.error("Error downloading GRN List PDF:",e),e}},getSuppliers:async()=>{try{console.log("[InventoryService] GET suppliers");const e=await me.get("/inventory/suppliers");console.log("[InventoryService] GET suppliers response:",e.data);const t=e.data.data||e.data,n=IB(t);return console.log("[InventoryService] GET suppliers mapped:",n.length,"items"),n}catch(e){throw console.error("[InventoryService] GET suppliers error:",e?.response||e),e}},getSupplierById:async e=>{try{const t=await me.get(`/inventory/suppliers/${e}`),n=t.data.data||t.data;return Sm(n)}catch(t){throw console.error("Error fetching supplier:",t),t}},createSupplier:async e=>{try{const{supplier_id:t,...n}=e,a=rE(n),l=await me.post("/inventory/suppliers",a),o=l.data.data||l.data;return Sm(o)}catch(t){throw console.error("Error creating supplier:",t),t}},updateSupplier:async(e,t)=>{try{const n=rE(t),a=await me.put(`/inventory/suppliers/${e}`,n),l=a.data.data||a.data;return Sm(l)}catch(n){throw console.error("Error updating supplier:",n),n}},deleteSupplier:async e=>{try{return(await me.delete(`/inventory/suppliers/${e}`)).data}catch(t){throw console.error("Error deleting supplier:",t),t}}},b3=g.createContext(),ix=()=>{const e=g.useContext(b3);if(!e)throw new Error("useInventoryNotification must be used within InventoryNotificationProvider");return e},HB=({children:e})=>{const[t,n]=g.useState([]),a=g.useCallback((A,E="info",C=4e3)=>{const O=Date.now()+Math.random(),k={id:O,message:A,type:E,duration:C};n(_=>[..._,k]),C>0&&setTimeout(()=>{l(O)},C)},[]),l=g.useCallback(A=>{n(E=>E.filter(C=>C.id!==A))},[]),o=g.useCallback((A,E)=>{a(A,"success",E)},[a]),d=g.useCallback((A,E)=>{a(A,"error",E)},[a]),u=g.useCallback((A,E)=>{a(A,"warning",E)},[a]),m=g.useCallback((A,E)=>{a(A,"info",E)},[a]),[h,x]=g.useState({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"}),[p,b]=g.useState({isOpen:!1,title:"",message:"",onConfirm:null,placeholder:""}),N=g.useCallback((A,E,C="danger")=>new Promise(O=>{x({isOpen:!0,title:A,message:E,type:C,onConfirm:()=>O(!0)})}),[]),v=g.useCallback((A,E,C="")=>new Promise(O=>{b({isOpen:!0,title:A,message:E,placeholder:C,onConfirm:k=>O(k)})}),[]),w=g.useCallback(()=>{x({isOpen:!1,title:"",message:"",onConfirm:null,type:"danger"})},[]),S=g.useCallback(()=>{b({isOpen:!1,title:"",message:"",onConfirm:null,placeholder:""})},[]);return r.jsx(b3.Provider,{value:{notifications:t,showNotification:a,removeNotification:l,success:o,error:d,warning:u,info:m,confirm:N,prompt:v,confirmDialog:h,promptDialog:p,closeConfirmDialog:w,closePromptDialog:S},children:e})},Ta=(e=null)=>g.useCallback(n=>{if(n.key==="Enter"&&n.target.tagName!=="BUTTON"){n.preventDefault();const a=n.target.form;if(!a)return;const l=Array.from(a.querySelectorAll('input:not([disabled]):not([type="button"]):not([type="submit"]):not([type="reset"]), select:not([disabled]), textarea:not([disabled])')),d=l.indexOf(n.target)+1;d<l.length?l[d].focus():e&&typeof e=="function"&&e()}},[e]),lE=({onClose:e,setActiveScreen:t,categories:n,subCategories:a=[],brands:l,onSaved:o,itemToEdit:d})=>{const{success:u,error:m,warning:h}=ix(),[x,p]=g.useState({sku:"",barcode:"",name:"",description:"",category_id:"",subcategory_id:"",brand_id:"",unit:"",cost_price:"",selling_price:"",mrp:"",tax_rate:"0",reorder_level:"10",is_active:!0});El.useEffect(()=>{d&&p({sku:d.sku||"",barcode:d.barcode||"",name:d.name||"",description:d.description||"",category_id:d.category_id||"",subcategory_id:d.subcategory_id||"",brand_id:d.brand_id||"",unit:d.unit||"",cost_price:d.cost_price||"",selling_price:d.selling_price||"",mrp:d.mrp||"",tax_rate:d.tax_rate||"0",reorder_level:d.reorder_level||"10",is_active:d.is_active!==void 0?d.is_active:!0})},[d]);const[b,N]=g.useState(!1),v=E=>{const{name:C,value:O,type:k,checked:_}=E.target;p(T=>({...T,[C]:k==="checkbox"?_:O}))},w=()=>x.sku.trim()?x.name.trim()?x.category_id?!x.cost_price||parseFloat(x.cost_price)<=0?(h("Valid Cost Price is required"),!1):!x.selling_price||parseFloat(x.selling_price)<=0?(h("Valid Selling Price is required"),!1):!0:(h("Category is required"),!1):(h("Product Name is required"),!1):(h("SKU is required"),!1),S=async()=>{if(w()){N(!0);try{const E={...x,category_id:parseInt(x.category_id),subcategory_id:x.subcategory_id?parseInt(x.subcategory_id):null,brand_id:x.brand_id?parseInt(x.brand_id):null,cost_price:parseFloat(x.cost_price),selling_price:parseFloat(x.selling_price),mrp:x.mrp?parseFloat(x.mrp):parseFloat(x.selling_price),tax_rate:parseFloat(x.tax_rate),reorder_level:parseInt(x.reorder_level)};let C;d?C=await it.updateProduct(d.product_id,E):C=await it.createProduct(E),o&&o(C),u(d?"Product updated successfully!":"Product created successfully!"),e?e():t("item-list")}catch(E){console.error("Error saving product:",E),m("Failed to save product. Please try again.")}finally{N(!1)}}},A=Ta(S);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add New Item"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new inventory item"})]}),e&&r.jsx("button",{onClick:e,className:"text-gray-500 hover:text-gray-700",children:""})]}),r.jsxs("form",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6 overflow-y-auto max-h-[70vh]",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SKU *"}),r.jsx("input",{type:"text",name:"sku",value:x.sku,onChange:v,onKeyDown:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent",placeholder:"BEV-CC-001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Barcode"}),r.jsx("input",{type:"text",name:"barcode",value:x.barcode,onChange:v,onKeyDown:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"1234567890123"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product Name *"}),r.jsx("input",{type:"text",name:"name",value:x.name,onChange:v,onKeyDown:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter product name"})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{name:"description",value:x.description,onChange:v,onKeyDown:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Product description",rows:"2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category *"}),r.jsxs("select",{name:"category_id",value:x.category_id,onChange:v,onKeyDown:A,className:"w-full text-base",children:[r.jsx("option",{value:"",children:"Select category"}),n&&n.map(E=>r.jsx("option",{value:E.category_id,children:E.name},E.category_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subcategory"}),r.jsxs("select",{name:"subcategory_id",value:x.subcategory_id,onChange:v,onKeyDown:A,className:"w-full text-base",disabled:!x.category_id,children:[r.jsx("option",{value:"",children:"Select subcategory"}),a.filter(E=>E.category_id===parseInt(x.category_id)).map(E=>r.jsx("option",{value:E.subcategory_id,children:E.name},E.subcategory_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand"}),r.jsxs("select",{name:"brand_id",value:x.brand_id,onChange:v,onKeyDown:A,className:"w-full text-base",children:[r.jsx("option",{value:"",children:"Select brand"}),l&&l.map(E=>r.jsx("option",{value:E.brand_id,children:E.name},E.brand_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Unit"}),r.jsxs("select",{name:"unit",value:x.unit,onChange:v,onKeyDown:A,className:"w-full text-base",children:[r.jsx("option",{value:"",children:"Select unit"}),r.jsx("option",{value:"PIECE",children:"Piece"}),r.jsx("option",{value:"BOX",children:"Box"}),r.jsx("option",{value:"PACK",children:"Pack"}),r.jsx("option",{value:"LITER",children:"Liter"}),r.jsx("option",{value:"KG",children:"Kilogram"}),r.jsx("option",{value:"GRAM",children:"Gram"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Level"}),r.jsx("input",{type:"number",name:"reorder_level",value:x.reorder_level,onChange:v,onKeyDown:A,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost Price *"}),r.jsx("input",{type:"number",name:"cost_price",value:x.cost_price,onChange:v,onKeyDown:A,step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Selling Price *"}),r.jsx("input",{type:"number",name:"selling_price",value:x.selling_price,onChange:v,onKeyDown:A,step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"MRP (Maximum Retail Price)"}),r.jsx("input",{type:"number",name:"mrp",value:x.mrp,onChange:v,onKeyDown:A,step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0.00"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),r.jsx("input",{type:"number",name:"tax_rate",value:x.tax_rate,onChange:v,onKeyDown:A,step:"0.01",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"10"})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>e?e():t("item-list"),className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",disabled:b,children:"Cancel"}),r.jsx("button",{type:"button",onClick:S,className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:b,children:b?"Saving...":"Save Item"})]})]})]})},KB=({items:e,itemDetails:t,selectedItemId:n,setSelectedItemId:a,setActiveScreen:l,selectedItemTab:o,setSelectedItemTab:d,batches:u,categories:m,brands:h,subCategories:x})=>{const p=n||e[0]?.product_id,b=e.find(E=>E.product_id===p),N=t[p],v=m?.find(E=>E.category_id===b?.category_id)?.name||b?.category_id||"N/A",w=x?.find(E=>E.subcategory_id===b?.subcategory_id)?.name||b?.subcategory_id||"N/A",S=h?.find(E=>E.brand_id===b?.brand_id)?.name||b?.brand_id||"N/A",A=()=>{const E=window.open("","_blank"),C=u.filter(P=>P.product_id===p).map(P=>`
            <tr>
                <td>${P.batch_code}</td>
                <td style="text-align: center">${P.qty}</td>
                <td>${P.manufacturing_date}</td>
                <td>${P.expiry_date}</td>
                <td>${P.branch_id}</td>
            </tr>
        `).join(""),O=(N?.stockHistory||[]).map(P=>`
            <tr>
                <td>${P.date}</td>
                <td>${P.type}</td>
                <td>${P.reference}</td>
                <td style="text-align: center; color: ${P.quantity>0?"green":"red"}">${P.quantity>0?"+":""}${P.quantity}</td>
                <td>${P.notes}</td>
            </tr>
        `).join(""),k=(N?.supplierHistory||[]).map(P=>`
            <tr>
                <td>${P.name}</td>
                <td>${P.lastPO}</td>
                <td>${P.leadTime}</td>
                <td style="text-align: right">LKR ${P.cost_price.toFixed(2)}</td>
            </tr>
        `).join(""),_=(N?.salesData||[]).map(P=>`
            <tr>
                <td>${P.date}</td>
                <td style="text-align: center">${P.quantity}</td>
                <td style="text-align: right">LKR ${P.revenue.toFixed(2)}</td>
            </tr>
        `).join(""),T=`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Item Report - ${b.name}</title>
                <style>
                    body { font-family: sans-serif; margin: 20px; color: #111827; }
                    .container { max-width: 900px; margin: 0 auto; }
                    h1 { margin-bottom: 5px; color: #1e3a8a; }
                    .subtitle { color: #6b7280; font-size: 14px; margin-bottom: 20px; }
                    
                    .section { margin-bottom: 30px; page-break-inside: avoid; }
                    .section-title { 
                        font-size: 16px; font-weight: bold; border-bottom: 2px solid #e5e7eb; 
                        padding-bottom: 8px; margin-bottom: 15px; color: #374151;
                    }
                    
                    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
                    .card { border: 1px solid #e5e7eb; padding: 15px; border-radius: 6px; }
                    .label { font-size: 11px; color: #6b7280; text-transform: uppercase; font-weight: 600; }
                    .value { font-size: 15px; font-weight: 600; margin-top: 2px; }
                    
                    table { width: 100%; border-collapse: collapse; font-size: 13px; }
                    th { background: #f9fafb; padding: 8px 12px; text-align: left; border-bottom: 2px solid #e5e7eb; font-weight: 600; color: #374151; }
                    td { padding: 8px 12px; border-bottom: 1px solid #e5e7eb; }
                    
                    .badge { display: inline-block; padding: 2px 8px; border-radius: 99px; font-size: 11px; font-weight: 600; }
                    .badge-active { background: #dcfce7; color: #166534; }
                    .badge-inactive { background: #fee2e2; color: #991b1b; }
                    
                    @media print {
                        body { margin: 0; }
                        .no-print { display: none; }
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
                        <div>
                            <h1>${b.name}</h1>
                            <div class="subtitle">SKU: ${b.sku} &bull; Barcode: ${b.barcode}</div>
                        </div>
                        <div style="text-align: right;">
                             <span class="badge ${b.is_active?"badge-active":"badge-inactive"}">
                                ${b.is_active?"ACTIVE":"INACTIVE"}
                            </span>
                            <div style="margin-top: 5px; font-size: 12px; color: #6b7280;">${new Date().toLocaleDateString()}</div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">Overview</div>
                        <div class="grid-2">
                            <div class="card">
                                <div class="label">Price Information</div>
                                <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                                    <div>
                                        <div class="label">Cost Price</div>
                                        <div class="value">LKR ${(b.cost_price||0).toFixed(2)}</div>
                                    </div>
                                    <div>
                                        <div class="label">Selling Price</div>
                                        <div class="value">LKR ${(b.selling_price||0).toFixed(2)}</div>
                                    </div>
                                    <div>
                                        <div class="label">MRP</div>
                                        <div class="value">LKR ${(b.mrp||0).toFixed(2)}</div>
                                    </div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="label">Stock Information</div>
                                <div style="display: flex; justify-content: space-between; margin-top: 8px;">
                                    <div>
                                        <div class="label">Current Stock</div>
                                        <div class="value" style="font-size: 18px;">${b.quantity||0}</div>
                                    </div>
                                    <div>
                                        <div class="label">Reorder Level</div>
                                        <div class="value">${b.reorder_level}</div>
                                    </div>
                                    <div>
                                        <div class="label">Category</div>
                                        <div class="value" style="font-size: 13px;">${v}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    ${C?`
                    <div class="section">
                        <div class="section-title">Active Batches</div>
                        <table>
                            <thead><tr><th>Batch Code</th><th style="text-align: center">Qty</th><th>Mfg Date</th><th>Expiry Date</th><th>Branch</th></tr></thead>
                            <tbody>${C}</tbody>
                        </table>
                    </div>`:""}

                    ${O?`
                    <div class="section">
                        <div class="section-title">Stock History (Last 10 Actions)</div>
                        <table>
                            <thead><tr><th>Date</th><th>Type</th><th>Reference</th><th style="text-align: center">Qty Change</th><th>Notes</th></tr></thead>
                            <tbody>${O}</tbody>
                        </table>
                    </div>`:""}

                    ${k?`
                    <div class="section">
                        <div class="section-title">Supplier Information</div>
                        <table>
                            <thead><tr><th>Supplier</th><th>Last PO</th><th>Lead Time</th><th style="text-align: right">Cost Price</th></tr></thead>
                            <tbody>${k}</tbody>
                        </table>
                    </div>`:""}
                    
                    ${_?`
                    <div class="section">
                        <div class="section-title">Recent Sales</div>
                        <table>
                            <thead><tr><th>Date</th><th style="text-align: center">Qty</th><th style="text-align: right">Revenue</th></tr></thead>
                            <tbody>${_}</tbody>
                        </table>
                    </div>`:""}

                </div>
                <script>
                    setTimeout(() => {
                        window.print();
                        window.close();
                    }, 500);
                <\/script>
            </body>
            </html>
        `;E.document.write(T),E.document.close()};return b?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("button",{onClick:()=>{a(null),l("item-list")},className:"text-blue-600 hover:text-blue-700 flex items-center gap-1",children:" Back to List"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:b.name}),r.jsxs("button",{onClick:A,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors flex items-center gap-2",title:"Print Item Details",children:[r.jsx(mi,{size:20}),r.jsx("span",{className:"text-sm",children:"Print"})]})]}),r.jsx("div",{className:"flex gap-2 border-b border-gray-200",children:["summary","prices","stock-history","batches","suppliers","sales","reorder"].map(E=>r.jsxs("button",{onClick:()=>d(E),className:`px-4 py-3 font-medium border-b-2 ${o===E?"border-blue-600 text-blue-600":"border-transparent text-gray-600 hover:text-gray-900"}`,children:[E==="summary"&&"Summary",E==="prices"&&"Prices",E==="stock-history"&&"Stock History",E==="batches"&&"Batch & Expiry",E==="suppliers"&&"Suppliers",E==="sales"&&"Sales",E==="reorder"&&"Reorder Alerts"]},E))}),o==="summary"&&r.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Item Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Product ID:"}),r.jsx("p",{className:"font-mono",children:b.product_id})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Barcode:"}),r.jsx("p",{className:"font-mono",children:b.barcode})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"SKU:"}),r.jsx("p",{className:"font-mono",children:b.sku})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Category:"}),r.jsx("p",{children:v})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Subcategory:"}),r.jsx("p",{children:w})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Brand:"}),r.jsx("p",{children:S})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Description:"}),r.jsx("p",{children:b.description})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing Details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Cost Price:"}),r.jsxs("p",{className:"text-lg font-bold",children:["LKR ",b.cost_price.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Selling Price:"}),r.jsxs("p",{className:"text-lg font-bold",children:["LKR ",b.selling_price.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"MRP:"}),r.jsxs("p",{className:"text-lg font-bold",children:["LKR ",b.mrp.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Tax Rate:"}),r.jsxs("p",{className:"text-lg font-bold",children:[b.tax_rate,"%"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Reorder Level:"}),r.jsxs("p",{className:"text-lg font-bold",children:[b.reorder_level," units"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm text-gray-600",children:"Status:"}),r.jsx("p",{children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${b.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.is_active?"Active":"Inactive"})})]})]})]})]}),o==="prices"&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Price"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Change"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Reason"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:(N?.priceHistory||[]).map((E,C)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.date}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-right",children:["LKR ",E.selling_price.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-sm text-center",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${E.change.includes("+")?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}`,children:E.change})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:E.reason})]},C))})]})}),o==="stock-history"&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Reference"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Quantity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Notes"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:(N?.stockHistory||[]).map((E,C)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:E.date}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E.type==="GRN"?"bg-green-100 text-green-700":E.type==="Sales"?"bg-blue-100 text-blue-700":E.type==="Adjustment"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700"}`,children:E.type})}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono",children:E.reference}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-mono",children:r.jsxs("span",{className:E.quantity>0?"text-green-600":"text-red-600",children:[E.quantity>0?"+":"",E.quantity]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:E.notes})]},C))})]})}),o==="batches"&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Batch Code"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Quantity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Mfg Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Expiry Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Branch"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Cost Price"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:u.filter(E=>E.product_id===p).map(E=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono",children:E.batch_code}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:E.qty}),r.jsx("td",{className:"px-6 py-4 text-sm",children:E.manufacturing_date}),r.jsx("td",{className:"px-6 py-4 text-sm",children:E.expiry_date}),r.jsx("td",{className:"px-6 py-4 text-sm",children:E.branch_id}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono",children:["LKR ",E.cost_price.toFixed(2)]})]},E.batch_id))})]})}),o==="suppliers"&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Supplier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Last PO"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Last Delivery"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Lead Time"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Cost Price"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Reliability"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:(N?.supplierHistory||[]).map((E,C)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium",children:E.name}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono",children:E.lastPO}),r.jsx("td",{className:"px-6 py-4 text-sm",children:E.lastDelivery}),r.jsx("td",{className:"px-6 py-4 text-sm",children:E.leadTime}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-right",children:["LKR ",E.cost_price.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-700",children:E.reliability})})]},C))})]})}),o==="sales"&&r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Quantity Sold"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Revenue"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:N?.salesData&&N.salesData.length>0?N.salesData.map((E,C)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm",children:E.date}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-mono",children:E.quantity}),r.jsxs("td",{className:"px-6 py-4 text-right text-sm font-mono text-green-600",children:["LKR ",E.revenue.toFixed(2)]})]},C)):r.jsx("tr",{children:r.jsx("td",{colSpan:"3",className:"px-6 py-4 text-center text-sm text-gray-500",children:"No sales data available"})})})]})}),o==="reorder"&&r.jsx("div",{className:"space-y-4",children:r.jsxs("div",{className:`${b.reorder_level>0?"bg-orange-50 border-orange-200":"bg-green-50 border-green-200"} border rounded-lg p-6`,children:[r.jsx("p",{className:`text-sm ${b.reorder_level>0?"text-orange-600":"text-green-600"} font-semibold`,children:b.reorder_level>0?"MONITOR STOCK":"IN STOCK"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Reorder Level"}),r.jsx("p",{className:"text-2xl font-bold mt-1",children:b.reorder_level})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Minimum Order Qty"}),r.jsx("p",{className:"text-2xl font-bold mt-1",children:"-"})]})]})]})})]}):r.jsxs("div",{className:"p-6",children:[r.jsx("p",{className:"text-gray-900 font-semibold mb-4",children:"Item not found or no item selected"}),r.jsx("button",{onClick:()=>l("item-list"),className:"text-blue-600 hover:text-blue-700",children:" Back to List"})]})},GB=({categories:e,subCategories:t,categoryForm:n,setCategoryForm:a,isAddCategoryOpen:l,setIsAddCategoryOpen:o,handleAddCategory:d,handleDeleteCategory:u,handleEditCategory:m,isEditMode:h,handleSaveEdit:x,subCategoryForm:p,setSubCategoryForm:b,isAddSubCategoryOpen:N,setIsAddSubCategoryOpen:v,handleAddSubCategory:w,setSelectedParentCategory:S,handleDeleteSubCategory:A,handleEditSubCategory:E})=>{const[C,O]=g.useState(null),[k,_]=g.useState(""),[T,P]=g.useState(null),L=e.filter(X=>X.name.toLowerCase().includes(k.toLowerCase())||X.description?.toLowerCase().includes(k.toLowerCase())),z=X=>{P(T===X?null:X)},U=X=>t?t.filter(be=>be.category_id===X):[],B={Tag:mn,Box:vd,Archive:Oa,Layers:Hm,ShoppingBag:Po,Coffee:zm,Smartphone:Xm,Headphones:$m,Shirt:Wm,Watch:eh,Utensils:Jm,Zap:Ad,Gift:Oo,Briefcase:Mm,Camera:Im,Music:Ym,Anchor:Dm,Globe:Bm,Key:Fm,Map:Gm,Sun:Zm,Moon:Vm,Star:hi,Heart:Um},ee={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",yellow:"bg-yellow-100 text-yellow-600",purple:"bg-purple-100 text-purple-600",pink:"bg-pink-100 text-pink-600",orange:"bg-orange-100 text-orange-600",indigo:"bg-indigo-100 text-indigo-600",teal:"bg-teal-100 text-teal-600",cyan:"bg-cyan-100 text-cyan-600"};return r.jsxs("div",{className:"flex h-full gap-6",onClick:()=>P(null),children:[r.jsxs("div",{className:`flex-1 flex flex-col space-y-6 transition-all duration-300 ${C?"w-2/3":"w-full"}`,children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Category Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Organize your inventory categories"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search categories...",value:k,onChange:X=>_(X.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary w-full sm:w-64"})]}),r.jsxs("button",{onClick:()=>o(!0),className:"px-4 py-2 bg-brand-primary text-white rounded-lg flex items-center gap-2 hover:bg-brand-secondary transition-colors btn-hover-scale btn-interactive",children:[r.jsx(yn,{size:20}),"Add Category"]})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden flex-1",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider w-16",children:"No."}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider w-1/3",children:"Category Name"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider w-1/3",children:"Description"}),r.jsx("th",{className:"px-6 py-4 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider w-1/6",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider w-1/6",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:L.length>0?L.map((X,be)=>{const G=U(X.category_id),J=C?.category_id===X.category_id,$=B[X.icon]||mn,q=ee[X.color]||"bg-gray-100 text-gray-500";return r.jsxs("tr",{className:`hover:bg-gray-50 transition-colors cursor-pointer ${J?"bg-blue-50/50 ring-1 ring-inset ring-blue-500/20":""}`,onClick:()=>O(J?null:X),children:[r.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-500",children:be+1}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${J?"bg-blue-100 text-blue-600":q}`,children:r.jsx($,{size:18})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:`font-medium ${J?"text-blue-700":"text-gray-900"}`,children:X.name}),r.jsxs("span",{className:"text-xs text-gray-500",children:[G.length," subcategories"]})]})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 truncate max-w-xs",children:X.description||"-"}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-medium ${X.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:X.is_active?"Active":"Inactive"})}),r.jsxs("td",{className:"px-6 py-4 text-right relative",children:[r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:se=>{se.stopPropagation(),z(X.category_id)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:r.jsx(Zh,{size:16})}),C?.category_id!==X.category_id&&r.jsx("button",{onClick:se=>{se.stopPropagation(),O(X)},className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full transition-colors",children:r.jsx(wo,{size:18})})]}),T===X.category_id&&r.jsxs("div",{className:"absolute right-8 top-8 w-48 bg-white rounded-lg shadow-xl border border-gray-100 z-20 py-1 animate-in fade-in zoom-in duration-200",children:[r.jsxs("button",{onClick:se=>{se.stopPropagation(),m(X.category_id),P(null)},className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Fn,{size:14})," Edit Category"]}),r.jsx("div",{className:"h-px bg-gray-100 my-1"}),r.jsxs("button",{onClick:se=>{se.stopPropagation(),u(X.category_id),P(null)},className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(en,{size:14})," Delete"]})]})]})]},X.category_id)}):r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[r.jsx(mn,{size:48,className:"mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No Categories Found"}),r.jsx("p",{className:"text-sm mt-1",children:"Get started by creating a new category."})]})})})})]})})})]}),C&&r.jsxs("div",{className:"w-1/3 bg-white border border-gray-200 rounded-xl shadow-lg flex flex-col animate-in slide-in-from-right-10 duration-300",children:[r.jsxs("div",{className:"p-4 border-b border-gray-200 flex justify-between items-center bg-gray-50 rounded-t-xl",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-bold text-gray-900",children:C.name}),r.jsx("p",{className:"text-xs text-gray-500",children:"Subcategories"})]}),r.jsx("button",{onClick:()=>O(null),className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-lg transition-colors",children:r.jsx($e,{size:18})})]}),r.jsxs("div",{className:"p-4 flex-1 overflow-y-auto",children:[r.jsxs("button",{onClick:()=>{v(!0),S(C.category_id)},className:"w-full mb-4 py-2 px-4 border border-dashed border-blue-300 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 hover:border-blue-400 transition-all flex items-center justify-center gap-2 text-sm font-medium",children:[r.jsx(yn,{size:16})," Add New Subcategory"]}),r.jsx("div",{className:"space-y-3",children:U(C.category_id).length>0?U(C.category_id).map(X=>r.jsxs("div",{className:"group flex items-center justify-between p-3 bg-white border border-gray-100 rounded-lg shadow-sm hover:shadow-md hover:border-blue-200 transition-all",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-900 text-sm",children:X.name}),X.description&&r.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:X.description})]}),r.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx("button",{onClick:()=>E(X.subcategory_id),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:r.jsx(Fn,{size:14})}),r.jsx("button",{onClick:()=>A(X.subcategory_id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:r.jsx(en,{size:14})})]})]},X.subcategory_id)):r.jsxs("div",{className:"text-center py-8 text-gray-400",children:[r.jsx("div",{className:"bg-gray-50 w-12 h-12 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx(HL,{size:24,className:"text-gray-300"})}),r.jsx("p",{className:"text-sm",children:"No subcategories yet"})]})})]})]})]})},VB=({brands:e,setBrands:t,isAddBrandOpen:n,setIsAddBrandOpen:a,brandForm:l,setBrandForm:o,suppliers:d,handleDeleteBrand:u,handleEditBrand:m,isEditMode:h,handleSaveEdit:x})=>{const[p,b]=El.useState(""),N=e.filter(S=>S.name.toLowerCase().includes(p.toLowerCase())||S.description?.toLowerCase().includes(p.toLowerCase())),v={Archive:Oa,Tag:mn,Box:vd,Layers:Hm,ShoppingBag:Po,Coffee:zm,Smartphone:Xm,Headphones:$m,Shirt:Wm,Watch:eh,Utensils:Jm,Zap:Ad,Gift:Oo,Briefcase:Mm,Camera:Im,Music:Ym,Anchor:Dm,Globe:Bm,Key:Fm,Map:Gm,Sun:Zm,Moon:Vm,Star:hi,Heart:Um},w={blue:"bg-blue-100 text-blue-600",green:"bg-green-100 text-green-600",red:"bg-red-100 text-red-600",yellow:"bg-yellow-100 text-yellow-600",purple:"bg-purple-100 text-purple-600",pink:"bg-pink-100 text-pink-600",orange:"bg-orange-100 text-orange-600",indigo:"bg-indigo-100 text-indigo-600",teal:"bg-teal-100 text-teal-600",cyan:"bg-cyan-100 text-cyan-600"};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Brand Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage brand list, suppliers and units"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search brands...",value:p,onChange:S=>b(S.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary w-full sm:w-64"})]}),r.jsxs("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-brand-primary text-white rounded-lg flex items-center gap-2 hover:bg-brand-secondary transition-colors",children:[r.jsx(yn,{size:20})," Add Brand"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase w-16",children:"No."}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Brand Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Description"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:N.length>0?N.map((S,A)=>{const E=v[S.icon]||Oa,C=w[S.color]||"bg-gray-100 text-gray-500";return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-500",children:A+1}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-lg ${C}`,children:r.jsx(E,{size:18})}),r.jsx("span",{className:"font-medium text-gray-900",children:S.name})]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600 truncate max-w-xs",children:S.description||"-"}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-medium ${S.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:S.is_active?"Active":"Inactive"})}),r.jsx("td",{className:"px-6 py-4 text-right text-sm",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>m(S.brand_id),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:r.jsx(Fn,{size:16})}),r.jsx("button",{onClick:()=>u(S.brand_id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:r.jsx(en,{size:16})})]})})]},S.brand_id)}):r.jsx("tr",{children:r.jsx("td",{colSpan:"5",className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[r.jsx(Oa,{size:48,className:"mb-4 text-gray-300"}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No Brands Found"}),r.jsx("p",{className:"text-sm mt-1",children:"Get started by creating a new brand."})]})})})})]})})]})},YB=({suppliers:e,setSuppliers:t,isAddSupplierOpen:n,setIsAddSupplierOpen:a,supplierForm:l,setSupplierForm:o,categories:d,handleDeleteSupplier:u,handleEditSupplier:m,isEditMode:h,handleSaveEdit:x})=>{const[p,b]=El.useState(""),N=e.filter(v=>v.name.toLowerCase().includes(p.toLowerCase())||v.code.toLowerCase().includes(p.toLowerCase())||v.company_name.toLowerCase().includes(p.toLowerCase()));return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Supplier Management"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your suppliers"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search suppliers...",value:p,onChange:v=>b(v.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary w-full sm:w-64"})]}),r.jsxs("button",{onClick:()=>a(!0),className:"px-4 py-2 bg-brand-primary text-white rounded-lg flex items-center gap-2 hover:bg-brand-secondary transition-colors btn-hover-scale btn-interactive",children:[r.jsx(yn,{size:20}),"Add Supplier"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase w-16",children:"No."}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Supplier Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Company & Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Phone"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:N.length>0?N.map((v,w)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-center text-sm font-medium text-gray-500",children:w+1}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-50",children:r.jsx(Oa,{size:16,className:"text-brand-primary"})}),v.name]})}),r.jsxs("td",{className:"px-6 py-4 text-sm",children:[r.jsx("div",{className:"text-gray-900 font-medium",children:v.company_name}),r.jsx("div",{className:"text-xs text-gray-500 font-mono",children:v.code})]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:v.supplier_type}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:v.phone}),r.jsx("td",{className:"px-6 py-4 text-right text-sm",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>m(v.supplier_id),className:"p-1.5 text-blue-600 hover:bg-blue-50 rounded transition-colors",title:"Edit",children:r.jsx(Fn,{size:16})}),r.jsx("button",{onClick:()=>u(v.supplier_id),className:"p-1.5 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete",children:r.jsx(en,{size:16})})]})})]},v.supplier_id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"6",className:"px-6 py-8 text-center text-gray-500",children:"No suppliers found."})})})]})})]})},QB=({items:e,suppliers:t,branches:n,categories:a=[],subCategories:l=[]})=>{const{success:o,error:d,warning:u,confirm:m,prompt:h}=ix(),[x,p]=g.useState("list"),[b,N]=g.useState([]),[v,w]=g.useState(null),[S,A]=g.useState(!1),[E,C]=g.useState(""),[O,k]=g.useState({supplier_id:"",grn_date:new Date().toISOString().split("T")[0],invoice_no:"",invoice_date:new Date().toISOString().split("T")[0],notes:"",branch_id:n?.[0]?.branch_id||1,items:[]}),[_,T]=g.useState({product_id:"",quantity:"",unit_price:"",batch_code:"",expiry_date:"",imei:""}),[P,L]=g.useState(""),[z,U]=g.useState(""),B=P?l.filter(K=>K.category_id===parseInt(P)):[],ee=e.filter(K=>!(P&&K.category_id!==parseInt(P)||z&&K.subcategory_id!==parseInt(z)));g.useEffect(()=>{(async()=>{A(!0);try{const V=JSON.parse(localStorage.getItem("user")||"{}").branchId||n?.[0]?.branch_id||1,xe=await it.getGRNs(V);N(xe||[])}catch(pe){console.error("Failed to fetch GRNs",pe)}finally{A(!1)}})()},[n]);const X=b.filter(K=>K.grn_no?.toLowerCase().includes(E.toLowerCase())||K.invoice_no?.toLowerCase().includes(E.toLowerCase())||t.find(pe=>pe.supplier_id===K.supplier_id)?.name.toLowerCase().includes(E.toLowerCase())),be=()=>{if(!_.product_id||!_.quantity||!_.unit_price){u("Please fill in Product, Quantity and Unit Price");return}const K=e.find(V=>V.product_id===parseInt(_.product_id)),pe={..._,product_name:K?.name||"Unknown",subtotal:parseFloat(_.quantity)*parseFloat(_.unit_price)};k({...O,items:[...O.items,pe]}),T({product_id:"",quantity:"",unit_price:"",batch_code:"",expiry_date:"",imei:""})},G=Ta(),J=Ta(be),$=async K=>{if(await m("Remove Item","Are you sure you want to remove this item from the GRN?","warning")){const V=[...O.items];V.splice(K,1),k({...O,items:V})}},q=()=>O.items.reduce((K,pe)=>K+pe.subtotal,0),se=async()=>{if(!O.supplier_id){u("Please select a supplier");return}if(O.items.length===0){u("Please add at least one item");return}try{const K={...O,branch_id:parseInt(O.branch_id),supplier_id:parseInt(O.supplier_id),items:O.items.map(ne=>({...ne,product_id:parseInt(ne.product_id),quantity:parseFloat(ne.quantity),unit_price:parseFloat(ne.unit_price)}))},pe=await it.createGRN(K);o(`GRN Created Successfully! GRN No: ${pe.grn_no||"N/A"}`),p("list");const xe=JSON.parse(localStorage.getItem("user")||"{}").branchId||n?.[0]?.branch_id||1,Z=await it.getGRNs(xe);N(Z||[]),k({supplier_id:"",grn_date:new Date().toISOString().split("T")[0],invoice_no:"",invoice_date:new Date().toISOString().split("T")[0],notes:"",branch_id:n?.[0]?.branch_id||1,items:[]})}catch(K){console.error("Error creating GRN:",K),d("Failed to create GRN: "+(K.response?.data?.message||K.message))}},I=async K=>{if(await m("Approve GRN","Are you sure you want to approve this GRN? This will update stock levels.","info"))try{await it.approveGRN(K),o("GRN approved successfully!");const xe=JSON.parse(localStorage.getItem("user")||"{}").branchId||n?.[0]?.branch_id||1,Z=await it.getGRNs(xe);if(N(Z||[]),v&&v.grn_id===K){const ne=await it.getGRNById(K);w(ne)}}catch(V){console.error("Error approving GRN:",V),V("Failed to approve GRN: "+(V.response?.data?.message||V.message))}},M=async K=>{const pe=await h("Reject GRN","Please enter rejection reason:","Enter reason...");if(pe)try{await it.rejectGRN(K,pe),o("GRN rejected successfully!");const xe=JSON.parse(localStorage.getItem("user")||"{}").branchId||n?.[0]?.branch_id||1,Z=await it.getGRNs(xe);N(Z||[]),v&&v.grn_id===K&&(p("list"),w(null))}catch(V){console.error("Error rejecting GRN:",V),V("Failed to reject GRN: "+(V.response?.data?.message||V.message))}},H=async K=>{try{const pe=await it.getGRNById(K.grn_id);w(pe),p("detail")}catch(pe){console.error("Error fetching GRN details:",pe),pe("Failed to fetch GRN details")}},oe=async()=>{try{const K=await it.getGrnListPdf(),pe=window.URL.createObjectURL(K),V=document.createElement("a");V.href=pe,V.download=`grn_list_${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(V),V.click(),V.remove(),window.URL.revokeObjectURL(pe),o("GRN List exported successfully")}catch(K){console.error("Failed to export GRN PDF:",K),d("Failed to export GRN List")}};return x==="detail"&&v?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>{p("list"),w(null)},className:"p-2 hover:bg-gray-100 rounded-full",children:r.jsx(Ao,{size:20,className:"text-gray-600"})}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:["GRN Details - ",v.grn_no]}),r.jsx("p",{className:"text-gray-600 text-sm",children:"View and manage GRN"})]})]}),v.status==="PENDING"&&r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>I(v.grn_id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(et,{size:20})," Approve"]}),r.jsx("button",{onClick:()=>M(v.grn_id),className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Reject"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"GRN Information"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"GRN No"}),r.jsx("p",{className:"text-base font-mono font-medium",children:v.grn_no})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Status"}),r.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${v.status==="APPROVED"?"bg-green-100 text-green-700":v.status==="PENDING"?"bg-yellow-100 text-yellow-700":v.status==="REJECTED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:v.status})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Supplier"}),r.jsx("p",{className:"text-base",children:v.supplier_name||t.find(K=>K.supplier_id===v.supplier_id)?.name||"N/A"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"GRN Date"}),r.jsx("p",{className:"text-base",children:v.grn_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Invoice No"}),r.jsx("p",{className:"text-base font-mono",children:v.invoice_no})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Invoice Date"}),r.jsx("p",{className:"text-base",children:v.invoice_date})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Payment Status"}),r.jsx("span",{className:`inline-block px-2 py-1 text-xs font-semibold rounded-full ${v.payment_status==="PAID"?"bg-green-100 text-green-700":v.payment_status==="PARTIALLY_PAID"?"bg-yellow-100 text-yellow-700":v.payment_status==="REJECTED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:v.payment_status||"UNPAID"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-500",children:"Created At"}),r.jsx("p",{className:"text-base text-sm",children:v.created_at?new Date(v.created_at).toLocaleString():"N/A"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Items"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left",children:"Product"}),r.jsx("th",{className:"px-4 py-2 text-left",children:"Batch"}),r.jsx("th",{className:"px-4 py-2 text-left",children:"Expiry"}),r.jsx("th",{className:"px-4 py-2 text-right",children:"Qty"}),r.jsx("th",{className:"px-4 py-2 text-right",children:"Unit Price"}),r.jsx("th",{className:"px-4 py-2 text-right",children:"Total"})]})}),r.jsx("tbody",{className:"divide-y",children:v.items?.map((K,pe)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2",children:K.product_name||e.find(V=>V.product_id===K.product_id)?.name||`Product #${K.product_id}`}),r.jsx("td",{className:"px-4 py-2 text-gray-500",children:K.batch_code||"-"}),r.jsx("td",{className:"px-4 py-2 text-gray-500",children:K.expiry_date||"-"}),r.jsx("td",{className:"px-4 py-2 text-right",children:K.qty_received||K.quantity}),r.jsx("td",{className:"px-4 py-2 text-right font-mono",children:parseFloat(K.unit_price).toFixed(2)}),r.jsx("td",{className:"px-4 py-2 text-right font-mono font-medium",children:parseFloat(K.total||(K.qty_received||K.quantity)*K.unit_price).toFixed(2)})]},pe))})]})})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Items"}),r.jsx("span",{className:"font-medium",children:v.items?.length||0})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["LKR ",(v.total_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Net Amount"}),r.jsxs("span",{className:"font-medium",children:["LKR ",(v.net_amount||0).toFixed(2)]})]})]})]})})]})]}):x==="create"?r.jsxs("div",{className:"space-y-6",children:[r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:()=>p("list"),className:"p-2 hover:bg-gray-100 rounded-full",children:r.jsx(Ao,{size:20,className:"text-gray-600"})}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Create New GRN"}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Receive stock from suppliers"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("form",{className:"bg-white rounded-lg border border-gray-200 p-6",onKeyDown:G,children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Supplier & Invoice Details"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Supplier"}),r.jsxs("select",{className:"w-full",value:O.supplier_id,onChange:K=>k({...O,supplier_id:K.target.value}),children:[r.jsx("option",{value:"",children:"Select Supplier"}),t.map(K=>r.jsx("option",{value:K.supplier_id,children:K.name},K.supplier_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Branch"}),r.jsx("select",{className:"w-full",value:O.branch_id,onChange:K=>k({...O,branch_id:K.target.value}),children:n?.map(K=>r.jsx("option",{value:K.branch_id,children:K.name},K.branch_id))||r.jsx("option",{value:"1",children:"Main Branch"})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice No"}),r.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2.5",value:O.invoice_no,onChange:K=>k({...O,invoice_no:K.target.value}),placeholder:"Enter Invoice Number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Invoice Date"}),r.jsx("input",{type:"date",className:"w-full",value:O.invoice_date,onChange:K=>k({...O,invoice_date:K.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Received Date"}),r.jsx("input",{type:"date",className:"w-full",value:O.grn_date,onChange:K=>k({...O,grn_date:K.target.value})})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add Items"}),r.jsxs("form",{className:"grid grid-cols-1 md:grid-cols-12 gap-3 items-end mb-4",onKeyDown:J,children:[r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{className:"w-full text-sm",value:P,onChange:K=>{L(K.target.value),U("")},children:[r.jsx("option",{value:"",children:"All Categories"}),a.map(K=>r.jsx("option",{value:K.category_id,children:K.name},K.category_id))]})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Subcategory"}),r.jsxs("select",{className:"w-full text-sm",value:z,onChange:K=>U(K.target.value),disabled:!P,children:[r.jsx("option",{value:"",children:"All Subcategories"}),B.map(K=>r.jsx("option",{value:K.subcategory_id,children:K.name},K.subcategory_id))]})]}),r.jsxs("div",{className:"md:col-span-6",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Product"}),r.jsxs("select",{className:"w-full text-sm",value:_.product_id,onChange:K=>{const pe=e.find(V=>V.product_id===parseInt(K.target.value));T({..._,product_id:K.target.value,unit_price:pe?pe.cost_price:"",quantity:""})},children:[r.jsx("option",{value:"",children:"Select Product"}),ee.map(K=>r.jsxs("option",{value:K.product_id,children:[K.name," (",K.sku,")"]},K.product_id))]})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Batch Code"}),r.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2 text-sm",value:_.batch_code,onChange:K=>T({..._,batch_code:K.target.value}),placeholder:"Optional"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Expiry Date"}),r.jsx("input",{type:"date",className:"w-full text-sm",value:_.expiry_date,onChange:K=>T({..._,expiry_date:K.target.value}),placeholder:"Optional"})]}),r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"IMEI / Serial"}),r.jsx("input",{type:"text",className:"w-full border border-gray-300 rounded-lg p-2 text-sm",value:_.imei,onChange:K=>T({..._,imei:K.target.value}),placeholder:"Optional"})]}),r.jsxs("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Qty"}),r.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg p-2 text-sm",value:_.quantity,onChange:K=>T({..._,quantity:K.target.value})})]}),r.jsxs("div",{className:"md:col-span-1",children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Cost"}),r.jsx("input",{type:"number",className:"w-full border border-gray-300 rounded-lg p-2 text-sm",value:_.unit_price,onChange:K=>T({..._,unit_price:K.target.value})})]}),r.jsx("div",{className:"md:col-span-12 flex justify-end",children:r.jsxs("button",{type:"button",onClick:be,className:"bg-blue-600 text-white px-4 py-2 rounded-lg text-sm hover:bg-blue-700 flex items-center gap-2",children:[r.jsx(yn,{size:16})," Add Item"]})})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-gray-50 border-b",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-2 text-left",children:"Product"}),r.jsx("th",{className:"px-4 py-2 text-left",children:"Batch"}),r.jsx("th",{className:"px-4 py-2 text-left",children:"Expiry"}),r.jsx("th",{className:"px-4 py-2 text-left",children:"IMEI"}),r.jsx("th",{className:"px-4 py-2 text-right",children:"Qty"}),r.jsx("th",{className:"px-4 py-2 text-right",children:"Cost"}),r.jsx("th",{className:"px-4 py-2 text-right",children:"Total"}),r.jsx("th",{className:"px-4 py-2 text-center",children:"Action"})]})}),r.jsxs("tbody",{className:"divide-y",children:[O.items.map((K,pe)=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-2",children:K.product_name}),r.jsx("td",{className:"px-4 py-2 text-gray-500",children:K.batch_code||"-"}),r.jsx("td",{className:"px-4 py-2 text-gray-500",children:K.expiry_date||"-"}),r.jsx("td",{className:"px-4 py-2 text-gray-500",children:K.imei||"-"}),r.jsx("td",{className:"px-4 py-2 text-right",children:K.quantity}),r.jsx("td",{className:"px-4 py-2 text-right",children:parseFloat(K.unit_price).toFixed(2)}),r.jsx("td",{className:"px-4 py-2 text-right font-medium",children:K.subtotal.toFixed(2)}),r.jsx("td",{className:"px-4 py-2 text-center",children:r.jsx("button",{onClick:()=>$(pe),className:"text-red-500 hover:text-red-700",children:r.jsx(en,{size:16})})})]},pe)),O.items.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:"8",className:"px-4 py-8 text-center text-gray-500",children:"No items added yet"})})]})]})})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6 sticky top-6",children:[r.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Items"}),r.jsx("span",{className:"font-medium",children:O.items.length})]}),r.jsxs("div",{className:"flex justify-between text-lg font-bold border-t pt-2",children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["LKR ",q().toFixed(2)]})]})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:se,className:"w-full bg-brand-primary text-white py-3 rounded-lg font-semibold hover:bg-brand-secondary flex items-center justify-center gap-2",children:[r.jsx(Rv,{size:20})," Save GRN"]}),r.jsx("button",{onClick:()=>p("list"),className:"w-full border border-gray-300 text-gray-700 py-3 rounded-lg font-semibold hover:bg-gray-50",children:"Cancel"})]})]})})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Goods Received Note (GRN)"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Manage inbound stock"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsx(er,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search...",className:"pl-10 pr-4 py-2 border border-brand-border rounded-lg focus:ring-2 focus:ring-brand-primary focus:border-transparent outline-none w-64",value:E,onChange:K=>C(K.target.value)})]}),r.jsxs("button",{onClick:oe,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(ua,{size:20})," Export PDF"]}),r.jsxs("button",{onClick:()=>p("create"),className:"flex items-center gap-2 px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:[r.jsx(yn,{size:20})," Create GRN"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden shadow-sm",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"GRN No"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Supplier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Invoice"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Amount"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Payment"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:X.length>0?X.map(K=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>H(K),children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono font-medium text-brand-primary",children:K.grn_no}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:K.supplier_name||t.find(pe=>pe.supplier_id===K.supplier_id)?.name||K.supplier_id}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:K.invoice_no}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:K.grn_date}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-right font-medium",children:["LKR ",(K.total_amount||0).toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${K.status==="APPROVED"?"bg-green-100 text-green-700":K.status==="PENDING"?"bg-yellow-100 text-yellow-700":K.status==="REJECTED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:K.status})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${K.payment_status==="PAID"?"bg-green-100 text-green-700":K.payment_status==="PARTIALLY_PAID"?"bg-yellow-100 text-yellow-700":K.payment_status==="REJECTED"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:K.payment_status||"UNPAID"})})]},K.grn_id)):r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center text-gray-500",children:r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsx(sa,{size:48,className:"text-gray-300 mb-4"}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:"No GRNs Found"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Create a new GRN to get started"})]})})})})]})})]})},Br={getBatches:async()=>{try{console.log("[StoreService] GET batches");const e=await me.get("/inventory/batches");console.log("[StoreService] GET batches response:",e.data);const t=e.data.data||e.data,n=mo(t);return console.log("[StoreService] GET batches mapped:",n.length,"items"),n}catch(e){return console.error("[StoreService] GET batches error:",e?.response?.data||e?.response||e),[]}},getBatchById:async e=>{try{const t=await me.get(`/batches/${e}`),n=t.data.data||t.data;return Em(n)}catch(t){throw console.error("Error fetching batch:",t),t}},getBatchesByProduct:async e=>{try{const t=await me.get(`/batches/product/${e}`),n=t.data.data||t.data;return mo(n)}catch(t){throw console.error("Error fetching batches by product:",t),t}},createBatch:async e=>{try{const t=nE(e),n=await me.post("/inventory/batches",t),a=n.data.data||n.data;return Em(a)}catch(t){throw console.error("Error creating batch:",t),t}},updateBatch:async(e,t)=>{try{const n=nE(t),a=await me.put(`/batches/${e}`,n),l=a.data.data||a.data;return Em(l)}catch(n){throw console.error("Error updating batch:",n),n}},deleteBatch:async e=>{try{return(await me.delete(`/batches/${e}`)).data}catch(t){throw console.error("Error deleting batch:",t),t}},getAdjustments:async(e={})=>{try{console.log("[StoreService] GET adjustments with filters:",e);const t=new URLSearchParams;e.branchId&&t.append("branchId",e.branchId),e.productId&&t.append("productId",e.productId);const n=t.toString()?`/inventory/adjustments?${t.toString()}`:"/inventory/adjustments",a=await me.get(n);console.log("[StoreService] GET adjustments response:",a.data);const l=a.data.data||a.data,o=zB(l);return console.log("[StoreService] GET adjustments mapped:",o.length,"items"),o}catch(t){return console.error("[StoreService] GET adjustments error:",t?.response?.data||t?.response||t),[]}},getAdjustmentById:async e=>{try{const t=await me.get(`/inventory/adjustments/${e}`),n=t.data.data||t.data;return yy(n)}catch(t){throw console.error("Error fetching adjustment:",t),t}},createAdjustment:async e=>{try{console.log("[StoreService] POST adjustment:",e);const t=LB(e);console.log("[StoreService] POST adjustment (mapped):",t);const n=await me.post("/inventory/adjustments",t);console.log("[StoreService] POST adjustment response:",n.data);const a=n.data.data||n.data;return yy(a)}catch(t){throw console.error("[StoreService] POST adjustment error:",t?.response||t),t}},getAdjustmentsByProduct:async e=>{try{return await Br.getAdjustments({productId:e})}catch(t){throw console.error("Error fetching adjustments by product:",t),t}},getTransfers:async(e={})=>{try{console.log("[StoreService] GET transfers with filters:",e);const t={};e.status&&(t.status=e.status),e.fromBranchId&&(t.fromBranchId=e.fromBranchId),e.toBranchId&&(t.toBranchId=e.toBranchId),e.requestedBy&&(t.requestedBy=e.requestedBy);const n=await me.get("/inventory/transfers",{params:t});console.log("[StoreService] GET transfers response:",n.data);const a=n.data.data||n.data,l=BB(a);return console.log("[StoreService] GET transfers mapped:",l.length,"items"),l}catch(t){return console.error("[StoreService] GET transfers error:",t?.response||t),[]}},getTransferById:async e=>{try{console.log("[StoreService] GET transfer by ID:",e);const t=await me.get(`/inventory/transfers/${e}`),n=t.data.data||t.data;return Cm(n)}catch(t){throw console.error("[StoreService] GET transfer by ID error:",t?.response?.data||t?.response||t),t}},createTransfer:async e=>{try{console.log("[StoreService] POST create transfer:",e);const t=aE(e);console.log("[StoreService] Mapped backend data:",t);const n=await me.post("/inventory/transfers",t);console.log("[StoreService] Create transfer response:",n.data);const a=n.data.data||n.data;return Cm(a)}catch(t){throw console.error("[StoreService] Create transfer error:",t?.response?.data||t?.response||t),t}},updateTransfer:async(e,t)=>{try{console.log("[StoreService] PUT update transfer:",e,t);const n=aE(t),a=await me.put(`/inventory/transfers/${e}`,n),l=a.data.data||a.data;return Cm(l)}catch(n){throw console.error("Error updating transfer:",n?.response?.data||n),n}},submitTransfer:async e=>{try{console.log("[StoreService] POST submit transfer:",e);const t=await me.post(`/inventory/transfers/${e}/submit`);return console.log("[StoreService] Submit transfer response:",t.data),t.data}catch(t){throw console.error("Error submitting transfer:",t?.response?.data||t),t}},approveTransfer:async(e,t="")=>{try{console.log("[StoreService] POST approve transfer:",e,t);const n=await me.post(`/inventory/transfers/${e}/approve`,null,{params:{approvalNotes:t}});return console.log("[StoreService] Approve transfer response:",n.data),n.data}catch(n){throw console.error("Error approving transfer:",n?.response?.data||n),n}},rejectTransfer:async(e,t)=>{try{console.log("[StoreService] POST reject transfer:",e,t);const n=await me.post(`/inventory/transfers/${e}/reject`,null,{params:{rejectionReason:t}});return console.log("[StoreService] Reject transfer response:",n.data),n.data}catch(n){throw console.error("Error rejecting transfer:",n?.response?.data||n),n}},deleteTransfer:async e=>{try{console.log("[StoreService] DELETE transfer:",e);const t=await me.delete(`/inventory/transfers/${e}`);return console.log("[StoreService] Delete transfer response:",t.data),t.data}catch(t){throw console.error("Error deleting transfer:",t?.response?.data||t),t}},getPendingTransfers:async()=>{try{return console.log("[StoreService] GET pending transfers"),await Br.getTransfers({status:"PENDING"})}catch(e){return console.error("[StoreService] GET pending transfers error:",e?.response?.data||e?.response||e),[]}},getDamages:async()=>{try{console.log("[StoreService] GET damages");const e=await me.get("/inventory/damages");console.log("[StoreService] GET damages response:",e.data);const t=e.data.data||e.data,n=sE(t);return console.log("[StoreService] GET damages mapped:",n.length,"items"),n}catch(e){return console.error("[StoreService] GET damages error:",e?.response?.data||e?.response||e),[]}},getDamageById:async e=>{try{const t=await me.get(`/damages/${e}`),n=t.data.data||t.data;return vy(n)}catch(t){throw console.error("Error fetching damage:",t),t}},createDamage:async e=>{try{const t=$B(e),n=await me.post("/inventory/damages",t),a=n.data.data||n.data;return vy(a)}catch(t){throw console.error("Error creating damage:",t),t}},getDamagesByProduct:async e=>{try{const t=await me.get(`/damages/product/${e}`),n=t.data.data||t.data;return sE(n)}catch(t){throw console.error("Error fetching damages by product:",t),t}},getExpiringProducts:async(e=30)=>{try{const t=await me.get(`/batches/expiring?days=${e}`),n=t.data.data||t.data;return mo(n)}catch(t){throw console.error("Error fetching expiring products:",t),t}},getExpiredProducts:async()=>{try{const e=await me.get("/inventory/batches/expired"),t=e.data.data||e.data;return mo(t)}catch(e){throw console.error("Error fetching expired products:",e),e}},getExpiryCalendar:async(e,t)=>{try{console.log("[StoreService] GET expiry calendar",{startDate:e,endDate:t});const n=await me.get(`/inventory/expiry-calendar?start=${e}&end=${t}`);console.log("[StoreService] GET expiry calendar response:",n.data);const a=n.data.data||n.data,l=mo(a);return console.log("[StoreService] GET expiry calendar mapped:",l.length,"items"),l}catch(n){return console.error("[StoreService] GET expiry calendar error:",n?.response?.data||n?.response||n),[]}},getStockValuation:async()=>{try{const e=await me.get("/reports/stock-valuation");return e.data.data||e.data}catch(e){throw console.error("Error fetching stock valuation:",e),e}},getStockAging:async()=>{try{const e=await me.get("/reports/stock-aging");return e.data.data||e.data}catch(e){throw console.error("Error fetching stock aging:",e),e}},getStockOverview:async()=>{try{console.log("[StoreService] GET stock overview");const e=await me.get("/inventory/stock-overview");return console.log("[StoreService] GET stock overview response:",e.data),e.data.data||e.data}catch(e){return console.error("[StoreService] GET stock overview error:",e?.response?.data||e?.response||e),[]}},getLowStockItems:async()=>{try{const e=await me.get("/inventory/stock-overview/low-stock"),t=e.data.data||e.data;return mo(t)}catch(e){return console.error("Error fetching low stock items:",e),[]}}},WB=({items:e,categories:t,branches:n,stockFilterCategory:a,setStockFilterCategory:l,stockFilterBranch:o,setStockFilterBranch:d,stockFilterDate:u,setStockFilterDate:m})=>{const[h,x]=g.useState(null),[p,b]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const C=await Br.getStockOverview();x(C)}catch(C){console.error("Error loading stock overview:",C)}finally{b(!1)}})()},[]);const N=e.filter(E=>!(a&&E.category_id!==parseInt(a))),v=h?.low_stock_count||N.filter(E=>E.reorder_level&&E.reorder_level>0).length,w=h?.out_of_stock_count||0,S=h?.expiring_soon_count||0,A=h?.total_stock_value||N.reduce((E,C)=>E+(C.selling_price||0),0);return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Stock Overview"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time inventory dashboard"})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Filters"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"By Category"}),r.jsxs("select",{value:a,onChange:E=>l(E.target.value),className:"w-full",children:[r.jsx("option",{value:"",children:"All Categories"}),t.map(E=>r.jsx("option",{value:E.category_id,children:E.name},E.category_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"By Branch / Store"}),r.jsxs("select",{value:o,onChange:E=>d(E.target.value),className:"w-full",children:[r.jsx("option",{value:"",children:"All Locations"}),n.map(E=>r.jsx("option",{value:E.branch_id,children:E.name},E.branch_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry By Date"}),r.jsx("input",{value:u,onChange:E=>m(E.target.value),type:"date",className:"w-full"})]})]}),r.jsx("button",{onClick:()=>{l(""),d(""),m("")},className:"mt-4 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Clear Filters"})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Items"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:N.length})]}),r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx(Tt,{className:"text-blue-600",size:24})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Stock Value"}),r.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-2",children:["LKR ",(A/1e3).toFixed(1),"k"]})]}),r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx(Hn,{className:"text-green-600",size:24})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Low Stock Items"}),r.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:v})]}),r.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:r.jsx(Bt,{className:"text-orange-600",size:24})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Out of Stock"}),r.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:w})]}),r.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:r.jsx(Bt,{className:"text-red-600",size:24})})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Expiring Soon"}),r.jsx("p",{className:"text-3xl font-bold text-purple-600 mt-2",children:S})]}),r.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:r.jsx(da,{className:"text-purple-600",size:24})})]})})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Category"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Warehouse"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Stock"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Price"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Expiry Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:N.map(E=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:E.name}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:E.category_id}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:"-"}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:"-"}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:["LKR ",E.selling_price.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E.is_active?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:E.is_active?"Active":"Inactive"})})]},E.product_id))})]})})]})},XB=({batches:e,items:t,batchFilterItem:n,setBatchFilterItem:a})=>{const[l,o]=g.useState(e||[]),[d,u]=g.useState(!0),[m,h]=g.useState(!1),[x,p]=g.useState(new Date),[b,N]=g.useState(""),[v,w]=g.useState(!1),[S,A]=g.useState(-1),E=g.useRef(null),C=g.useRef(null),[O,k]=g.useState({key:"expiry_date",direction:"asc"}),_=g.useCallback(async($=!1)=>{$?h(!0):u(!0);try{const q=await Br.getBatches();o(q),p(new Date)}catch(q){console.error("Error loading batches:",q)}finally{u(!1),h(!1)}},[]);g.useEffect(()=>{_()},[_]),g.useEffect(()=>{const $=setInterval(()=>{_(!0)},3e4);return()=>clearInterval($)},[_]);const T=g.useMemo(()=>new Date,[]),P=g.useMemo(()=>new Date(T.getTime()+720*60*60*1e3),[T]),L=g.useCallback($=>{const q=new Date($);return q<T?"Expired":q<P?"Near Expiry":"Safe"},[T,P]),z=g.useMemo(()=>{if(!b.trim())return[];const $=b.toLowerCase();return t.filter(q=>q.name?.toLowerCase().includes($)||q.sku?.toLowerCase().includes($)||q.barcode?.toLowerCase().includes($)).slice(0,8)},[b,t]),U=g.useMemo(()=>{let $=l;if(n&&($=$.filter(q=>q.product_id===parseInt(n))),b.trim()&&!n){const q=b.toLowerCase(),se=t.filter(I=>I.name?.toLowerCase().includes(q)||I.sku?.toLowerCase().includes(q)).map(I=>I.product_id);$=$.filter(I=>se.includes(I.product_id))}return $.sort((q,se)=>{let I=q[O.key],M=se[O.key];return(O.key==="expiry_date"||O.key==="manufacturing_date")&&(I=new Date(I),M=new Date(M)),I<M?O.direction==="asc"?-1:1:I>M?O.direction==="asc"?1:-1:0}),$},[l,n,b,t,O]),B=g.useMemo(()=>({expired:U.filter($=>L($.expiry_date)==="Expired").length,nearExpiry:U.filter($=>L($.expiry_date)==="Near Expiry").length,safe:U.filter($=>L($.expiry_date)==="Safe").length,totalQty:U.reduce(($,q)=>$+(q.qty||0),0),totalValue:U.reduce(($,q)=>$+(q.qty||0)*(q.cost_price||0),0)}),[U,L]),ee=$=>{if(!(!v||z.length===0))switch($.key){case"ArrowDown":$.preventDefault(),A(q=>q<z.length-1?q+1:0);break;case"ArrowUp":$.preventDefault(),A(q=>q>0?q-1:z.length-1);break;case"Enter":$.preventDefault(),S>=0&&X(z[S]);break;case"Escape":w(!1),A(-1);break}},X=$=>{a($.product_id.toString()),N($.name),w(!1),A(-1)},be=()=>{N(""),a(""),w(!1),A(-1),E.current?.focus()},G=$=>{k(q=>({key:$,direction:q.key===$&&q.direction==="asc"?"desc":"asc"}))};g.useEffect(()=>{const $=q=>{C.current&&!C.current.contains(q.target)&&E.current&&!E.current.contains(q.target)&&w(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const J=()=>{const q=[[" Product Name"," Batch Code"," Quantity"," Selling Price"," Cost Price"," Expiry Date"," Mfg Date"," Alert Status"].join(","),...U.map(H=>{const oe=t.find(Z=>Z.product_id===H.product_id),K=L(H.expiry_date);let pe=K;K==="Expired"?pe=" Expired":K==="Near Expiry"?pe=" Near Expiry":pe=" Safe";const V=`"${(oe?.name||"").replace(/"/g,'""')}"`,xe=`"${(H.batch_code||"").replace(/"/g,'""')}"`;return[V,xe,H.qty,(oe?.selling_price||0).toFixed(2),(H.cost_price||0).toFixed(2),H.expiry_date,H.manufacturing_date,pe].join(",")})].join(`
`),se=new Blob(["\uFEFF"+q],{type:"text/csv;charset=utf-8;"}),I=window.URL.createObjectURL(se),M=document.createElement("a");M.href=I,M.download=`batch_stock_report_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(M),M.click(),document.body.removeChild(M)};return d?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(ir,{className:"w-8 h-8 text-blue-500 animate-spin"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading batch data..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Batch-wise Stock View"}),r.jsxs("p",{className:"text-gray-600 mt-1 flex items-center gap-2",children:["Track inventory by batch with expiry monitoring",r.jsxs("span",{className:"text-xs text-gray-400",children:["Auto-updates every 30s  Last: ",x.toLocaleTimeString()]})]})]}),r.jsx("button",{onClick:()=>_(!0),disabled:m,className:`p-2 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors ${m?"animate-spin":""}`,children:r.jsx(ir,{size:18,className:"text-gray-500"})})]}),r.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-sm text-red-600 font-semibold",children:"Expired Stock"}),r.jsx("p",{className:"text-2xl font-bold text-red-700 mt-2",children:B.expired})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-sm text-yellow-600 font-semibold",children:"Near Expiry"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-700 mt-2",children:B.nearExpiry})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Safe Stock"}),r.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:B.safe})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:"Total Quantity"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:B.totalQty.toLocaleString()})]}),r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 hover:shadow-md transition-all",children:[r.jsx("p",{className:"text-sm text-purple-600 font-semibold",children:"Stock Value"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-700 mt-2",children:["LKR ",(B.totalValue/1e3).toFixed(1),"K"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-end gap-4",children:[r.jsxs("div",{className:"flex-1 relative",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Product"}),r.jsxs("div",{className:"relative",children:[r.jsx(er,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{ref:E,type:"text",value:b,onChange:$=>{N($.target.value),w(!0),A(-1),$.target.value.trim()||a("")},onFocus:()=>b&&w(!0),onKeyDown:ee,placeholder:"Search by product name, SKU, or barcode...",className:"w-full pl-10 pr-10 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-all"}),b&&r.jsx("button",{onClick:be,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx($e,{size:18})})]}),v&&z.length>0&&r.jsxs("div",{ref:C,className:"absolute z-50 top-full mt-1 w-full bg-white rounded-lg shadow-xl border border-gray-200 max-h-64 overflow-y-auto",children:[r.jsxs("div",{className:"p-2 text-xs text-gray-500 border-b border-gray-100 flex items-center gap-2",children:[r.jsx(XI,{className:"w-3 h-3"}),r.jsx(KI,{className:"w-3 h-3"}),r.jsx("span",{children:"Navigate"}),r.jsx("span",{className:"ml-2 px-1.5 py-0.5 bg-gray-100 rounded text-xs",children:"Enter"}),r.jsx("span",{children:"Select"})]}),z.map(($,q)=>r.jsxs("div",{onClick:()=>X($),className:`px-4 py-3 flex items-center gap-3 cursor-pointer transition-colors ${q===S?"bg-blue-50 border-l-3 border-blue-500":"hover:bg-gray-50"}`,children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:r.jsx(Tt,{className:"w-4 h-4 text-gray-500"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:$.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",$.sku,"  LKR ",$.selling_price?.toFixed(2)]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:`text-sm font-mono ${($.quantity||0)<=($.reorder_level||0)?"text-red-600":"text-green-600"}`,children:[$.quantity||0," in stock"]})})]},$.product_id))]})]}),r.jsxs("div",{className:"w-64",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Product"}),r.jsxs("select",{value:n,onChange:$=>{if(a($.target.value),$.target.value){const q=t.find(se=>se.product_id===parseInt($.target.value));N(q?.name||"")}else N("")},className:"w-full",children:[r.jsx("option",{value:"",children:"All Products"}),t.map($=>r.jsx("option",{value:$.product_id,children:$.name},$.product_id))]})]}),r.jsxs("button",{onClick:J,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center gap-2 transition-colors",children:[r.jsx(ua,{size:18}),"Export Report"]})]})}),r.jsx("div",{className:"flex items-center justify-between px-2 text-sm text-gray-600",children:r.jsxs("span",{children:["Showing ",U.length," batch",U.length!==1?"es":"",n&&r.jsxs("span",{className:"ml-1",children:['for "',t.find($=>$.product_id===parseInt(n))?.name,'"']})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>G("product_id"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Product Name",O.key==="product_id"&&r.jsx(na,{className:`w-3 h-3 ${O.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Batch Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>G("qty"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Quantity",O.key==="qty"&&r.jsx(na,{className:`w-3 h-3 ${O.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Selling Price"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Cost Price"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase cursor-pointer hover:bg-gray-100",onClick:()=>G("expiry_date"),children:r.jsxs("div",{className:"flex items-center gap-1",children:["Expiry Date",O.key==="expiry_date"&&r.jsx(na,{className:`w-3 h-3 ${O.direction==="desc"?"rotate-180":""}`})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Mfg Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Alert"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:U.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:8,className:"px-6 py-12 text-center text-gray-500",children:[r.jsx(Tt,{className:"w-12 h-12 mx-auto mb-3 text-gray-300"}),r.jsx("p",{className:"font-medium",children:"No batches found"}),r.jsx("p",{className:"text-sm mt-1",children:"Try adjusting your search or filter"})]})}):U.map($=>{const q=L($.expiry_date),se=t.find(I=>I.product_id===$.product_id);return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center",children:r.jsx(Tt,{className:"w-4 h-4 text-gray-500"})}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:se?.name})]})}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:$.batch_code}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`text-sm font-mono font-semibold ${$.qty<=0?"text-red-600":$.qty<=10?"text-amber-600":"text-gray-900"}`,children:$.qty})}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-emerald-600 font-semibold",children:["LKR ",se?.selling_price?.toFixed(2)||"0.00"]}),r.jsxs("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:["LKR ",$.cost_price?.toFixed(2)]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(da,{className:"w-3 h-3 text-gray-400"}),$.expiry_date]})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:$.manufacturing_date}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g3(q)}`,children:[q==="Expired"&&r.jsx(Bt,{className:"w-3 h-3 inline mr-1"}),q]})})]},$.batch_id)})})]})})]})},ZB=({batches:e})=>{const[t,n]=g.useState(e||[]),[a,l]=g.useState(!0);g.useEffect(()=>{(async()=>{try{const h=new Date().toISOString().split("T")[0],x=new Date(Date.now()+2160*60*60*1e3).toISOString().split("T")[0],p=await Br.getExpiryCalendar(h,x);n(p)}catch(h){console.error("Error loading expiry data:",h)}finally{l(!1)}})()},[]);const o=new Date("2026-01-11"),d={};t.forEach(m=>{const h=new Date(m.expiry_date),x=new Date(o.getTime()+720*60*60*1e3);let p="safe";h<o?p="expired":h<x&&(p="near-expiry");const b=m.expiry_date;d[b]||(d[b]={safe:0,"near-expiry":0,expired:0,items:[]}),d[b][p]++,d[b].items.push(m)});const u=Object.keys(d).sort();return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Expiry Calendar View"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Monitor inventory by expiry date"})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[r.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),r.jsxs("span",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Green:"})," Safe (",">","30 days)"]})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),r.jsxs("span",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Yellow:"})," Near Expiry (","","30 days)"]})]}),r.jsxs("div",{className:"flex items-center gap-3 bg-white p-4 rounded-lg border border-gray-200",children:[r.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),r.jsxs("span",{className:"text-sm text-gray-700",children:[r.jsx("strong",{children:"Red:"})," Expired"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Expiry Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item Details"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:u.map(m=>{const h=d[m],x=new Date(m),p=new Date(o.getTime()+720*60*60*1e3);let b="bg-green-50",N="bg-green-100 text-green-800",v="Safe";return x<o?(b="bg-red-50",N="bg-red-100 text-red-800",v="Expired"):x<p&&(b="bg-yellow-50",N="bg-yellow-100 text-yellow-800",v="Near Expiry"),r.jsxs("tr",{className:b,children:[r.jsx("td",{className:"px-6 py-4 text-sm font-semibold text-gray-900",children:m}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:r.jsx("div",{className:"space-y-1",children:h.items.map((w,S)=>r.jsxs("div",{className:"text-xs",children:[w.batch_code," - ",w.qty," units"]},S))})}),r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${N}`,children:v})})]},m)})})]})})]})},JB=({adjustmentForm:e,setAdjustmentForm:t,adjustments:n,setAdjustments:a,items:l,batches:o})=>{const[d,u]=g.useState(n||[]),[m,h]=g.useState(!1),x=Ta();g.useEffect(()=>{(async()=>{try{const N=await Br.getAdjustments();u(N),a&&a(N)}catch(N){console.error("Error loading adjustments:",N)}})()},[]);const p=async()=>{if(e.itemId&&e.currentQty&&e.physicalQty){h(!0);try{const b=l.find(E=>E.product_id===parseInt(e.itemId)),N=o.find(E=>E.batch_id===parseInt(e.batchId)),v={product_id:parseInt(e.itemId),batch_id:e.batchId?parseInt(e.batchId):null,adjustment_type:e.adjustmentType,quantity_change:parseInt(e.physicalQty)-parseInt(e.currentQty),reason_code:e.reason,notes:`Approved by ${e.approvedBy}`,approved_by:e.approvedBy},S={...await Br.createAdjustment(v),itemName:b?.name||"",batchNumber:N?.batch_code||"",previousQty:parseInt(e.currentQty),currentQty:parseInt(e.physicalQty)},A=[...d,S];u(A),a&&a(A),t({itemId:"",batchId:"",currentQty:"",physicalQty:"",adjustmentType:"Increase",reason:"Audit",approvedBy:""})}catch(b){console.error("Error creating adjustment:",b),alert("Failed to create adjustment")}finally{h(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Stock Adjustment"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Fix stock mismatches between system and physical count"})]}),r.jsxs("form",{className:"bg-white rounded-lg border border-gray-200 p-6",onKeyDown:x,children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Stock Adjustment"}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Item"}),r.jsxs("select",{value:e.itemId,onChange:b=>t({...e,itemId:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"",children:"Select Item"}),l.map(b=>r.jsx("option",{value:b.product_id,children:b.name},b.product_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch"}),r.jsxs("select",{value:e.batchId,onChange:b=>t({...e,batchId:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"",children:"Select Batch"}),o.filter(b=>!e.itemId||b.product_id===parseInt(e.itemId)).map(b=>r.jsx("option",{value:b.batch_id,children:b.batch_code},b.batch_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current System Qty"}),r.jsx("input",{value:e.currentQty,onChange:b=>t({...e,currentQty:b.target.value}),type:"number",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Physical Count Qty"}),r.jsx("input",{value:e.physicalQty,onChange:b=>t({...e,physicalQty:b.target.value}),type:"number",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adjustment Type"}),r.jsxs("select",{value:e.adjustmentType,onChange:b=>t({...e,adjustmentType:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"Increase",children:"Increase"}),r.jsx("option",{value:"Decrease",children:"Decrease"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),r.jsxs("select",{value:e.reason,onChange:b=>t({...e,reason:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"Damage",children:"Damage"}),r.jsx("option",{value:"Loss",children:"Loss"}),r.jsx("option",{value:"Audit",children:"Audit"})]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Approved By"}),r.jsx("input",{value:e.approvedBy,onChange:b=>t({...e,approvedBy:b.target.value}),type:"text",placeholder:"Enter name",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),r.jsx("button",{type:"button",onClick:p,disabled:m,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating...":"Add Adjustment"})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Batch"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Previous Qty"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Current Qty"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Reason"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Approved By"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(b=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:b.itemName}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:b.batchNumber}),r.jsx("td",{className:"px-6 py-4 text-center text-sm text-gray-600",children:b.previousQty}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-900",children:b.currentQty}),r.jsx("td",{className:"px-6 py-4 text-sm",children:r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${b.adjustmentType==="Increase"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:b.adjustmentType})}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.reason}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.approvedBy}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.date})]},b.id))})]})})]})},e$=({damageForm:e,setDamageForm:t,damageEntries:n,setDamageEntries:a,items:l,batches:o})=>{const[d,u]=g.useState(n||[]),[m,h]=g.useState(!1),x=Ta();g.useEffect(()=>{(async()=>{try{const N=await Br.getDamages();u(N),a&&a(N)}catch(N){console.error("Error loading damages:",N)}})()},[]);const p=async()=>{if(e.product_id&&e.quantity&&e.reason){h(!0);try{const b=l.find(E=>E.product_id===parseInt(e.product_id)),N=o.find(E=>E.batch_id===parseInt(e.batch_id)),v={product_id:parseInt(e.product_id),batch_id:e.batch_id?parseInt(e.batch_id):null,damage_quantity:parseInt(e.quantity),damage_type:e.reason,notes:e.note,damage_date:e.date||new Date().toISOString().split("T")[0]},S={...await Br.createDamage(v),product_name:b?.name||"",batch_code:N?.batch_code||""},A=[...d,S];u(A),a&&a(A),t({product_id:"",batch_id:"",quantity:"",reason:"",date:"",note:""})}catch(b){console.error("Error creating damage entry:",b),alert("Failed to create damage entry")}finally{h(!1)}}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Damage / Wastage Entry"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Log damaged or wasted stock"})]}),r.jsxs("form",{className:"bg-white rounded-lg border border-gray-200 p-6",onKeyDown:x,children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add Damage Entry"}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product"}),r.jsxs("select",{value:e.product_id,onChange:b=>t({...e,product_id:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"",children:"Select Product"}),l.map(b=>r.jsx("option",{value:b.product_id,children:b.name},b.product_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch"}),r.jsxs("select",{value:e.batch_id,onChange:b=>t({...e,batch_id:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"",children:"Select Batch"}),o.filter(b=>!e.product_id||b.product_id===parseInt(e.product_id)).map(b=>r.jsx("option",{value:b.batch_id,children:b.batch_code},b.batch_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),r.jsx("input",{value:e.quantity,onChange:b=>t({...e,quantity:b.target.value}),type:"number",placeholder:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-lg"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason"}),r.jsxs("select",{value:e.reason,onChange:b=>t({...e,reason:b.target.value}),className:"w-full",children:[r.jsx("option",{value:"",children:"Select Reason"}),r.jsx("option",{value:"Breakage",children:"Breakage"}),r.jsx("option",{value:"Expiry",children:"Expiry"}),r.jsx("option",{value:"Spillage",children:"Spillage"}),r.jsx("option",{value:"Other",children:"Other"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),r.jsx("input",{value:e.date,onChange:b=>t({...e,date:b.target.value}),type:"date",className:"w-full"})]}),r.jsx("div",{})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supporting Note"}),r.jsx("textarea",{value:e.note,onChange:b=>t({...e,note:b.target.value}),placeholder:"Enter details...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg",rows:"2"})]}),r.jsx("button",{type:"button",onClick:p,disabled:m,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Creating...":"Log Damage Entry"})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Batch"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Quantity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Reason"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Note"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:d.map(b=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:b.product_name}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:b.batch_code}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-semibold text-red-600",children:b.quantity}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.reason}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.date}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:b.note})]},b.id))})]})})]})},t$=({transferForm:e,setTransferForm:t,transfers:n,setTransfers:a,branches:l,items:o,batches:d})=>{const[u,m]=g.useState(n||[]),[h,x]=g.useState(!1),[p,b]=g.useState(!1);Ta(),g.useEffect(()=>{(async()=>{try{const O=await Br.getTransfers();m(O),a&&a(O)}catch(O){console.error("Error loading transfers:",O)}})()},[]);const N=async()=>{try{const C=await Br.getTransfers();m(C),a&&a(C)}catch(C){console.error("Error refreshing transfers:",C)}},v=async(C=!1)=>{if(e.fromBranch&&e.toBranch&&e.product_id&&e.quantity){x(!0);try{const O=o.find(B=>B.product_id===parseInt(e.product_id)),k=d.find(B=>B.batch_id===parseInt(e.batch_id)),_=JSON.parse(localStorage.getItem("user")||"{}"),T=_.userId||_.id||1,P={from_branch:e.fromBranch,to_branch:e.toBranch,product_id:parseInt(e.product_id),batch_id:e.batch_id?parseInt(e.batch_id):null,quantity:parseInt(e.quantity),transfer_date:e.transferDate||new Date().toISOString().split("T")[0],remarks:e.remarks,transfer_status:C?"PENDING":"DRAFT",requested_by:T},z={...await Br.createTransfer(P),product_name:O?.name||"",batch_code:k?.batch_code||"",requestedBy:"Current User",requested_time:new Date().toISOString()},U=[...u,z];m(U),a&&a(U),t({fromBranch:"",toBranch:"",product_id:"",quantity:"",batch_id:"",transferDate:"",remarks:"",status:"Draft"}),b(!1),alert(C?"Transfer request submitted successfully":"Transfer saved as draft")}catch(O){console.error("Error creating transfer:",O),alert("Failed to create transfer")}finally{x(!1)}}else alert("Please fill all required fields")},w=C=>C?new Date(C).toLocaleString("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):"-",S=C=>l.find(k=>k.branch_id===parseInt(C))?.name||C,A=u.filter(C=>C.transfer_status==="DRAFT"||C.transfer_status==="PENDING"),E=u.filter(C=>C.transfer_status==="APPROVED"||C.transfer_status==="REJECTED");return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("div",{children:r.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Transfer Requests"})}),r.jsxs("button",{onClick:N,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 flex items-center gap-2 text-gray-700",children:[r.jsx(ir,{size:16}),"Refresh Data"]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Create New Transfer"}),r.jsx("button",{onClick:()=>b(!p),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:p?"Cancel":"+ New Transfer"})]})}),p&&r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"From Branch *"}),r.jsxs("select",{value:e.fromBranch,onChange:C=>t({...e,fromBranch:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select Source Branch"}),l.map(C=>r.jsx("option",{value:C.branch_id,children:C.name},C.branch_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"To Branch *"}),r.jsxs("select",{value:e.toBranch,onChange:C=>t({...e,toBranch:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select Destination Branch"}),l.filter(C=>C.branch_id!==parseInt(e.fromBranch)).map(C=>r.jsx("option",{value:C.branch_id,children:C.name},C.branch_id))]})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Product *"}),r.jsxs("select",{value:e.product_id,onChange:C=>t({...e,product_id:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select Product"}),o.map(C=>r.jsx("option",{value:C.product_id,children:C.name},C.product_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Batch"}),r.jsxs("select",{value:e.batch_id,onChange:C=>t({...e,batch_id:C.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"Select Batch (Optional)"}),d.filter(C=>!e.product_id||C.product_id===parseInt(e.product_id)).map(C=>r.jsx("option",{value:C.batch_id,children:C.batch_code},C.batch_id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity *"}),r.jsx("input",{value:e.quantity,onChange:C=>t({...e,quantity:C.target.value}),type:"number",placeholder:"Enter quantity",min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transfer Date"}),r.jsx("input",{value:e.transferDate,onChange:C=>t({...e,transferDate:C.target.value}),type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Remarks"}),r.jsx("input",{value:e.remarks,onChange:C=>t({...e,remarks:C.target.value}),type:"text",placeholder:"Enter remarks (optional)",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsxs("div",{className:"flex gap-3 justify-end",children:[r.jsx("button",{onClick:()=>v(!1),disabled:h,className:"px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:h?"Saving...":"Save as Draft"}),r.jsx("button",{onClick:()=>v(!0),disabled:h,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:h?"Submitting...":"Submit Request"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pending Requests"})}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Reference"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"From  To"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Qty"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:A.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"7",className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[r.jsx(Rr,{size:48,className:"mb-3 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No pending requests found"})]})})}):A.map((C,O)=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Transfer Out"}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600 font-mono",children:["#",C.transfer_id||"N/A"]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[S(C.from_branch),"  ",S(C.to_branch)]}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:C.product_name}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-mono font-semibold text-gray-900",children:C.quantity}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w(C.requested_time||C.transfer_date)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${C.transfer_status==="DRAFT"?"bg-gray-100 text-gray-700":"bg-yellow-100 text-yellow-700"}`,children:C.transfer_status||"Draft"})})]},C.transfer_id||O))})]})})]}),r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center gap-2",children:[r.jsx(Rr,{size:20,className:"text-gray-600"}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Request History"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Reference"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"From  To"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Item"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Qty"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Requested Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Processed Time"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:E.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:"8",className:"px-6 py-12 text-center",children:r.jsxs("div",{className:"flex flex-col items-center justify-center text-gray-400",children:[r.jsx(et,{size:48,className:"mb-3 opacity-50"}),r.jsx("p",{className:"text-sm",children:"No completed requests found"})]})})}):E.map((C,O)=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:"Transfer Out"}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600 font-mono",children:["#",C.transfer_id||"N/A"]}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-600",children:[S(C.from_branch),"  ",S(C.to_branch)]}),r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:C.product_name}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-mono font-semibold text-gray-900",children:C.quantity}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w(C.requested_time||C.transfer_date)}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w(C.approved_time||C.transfer_date)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-3 py-1 text-xs font-medium rounded-full ${C.transfer_status==="APPROVED"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:C.transfer_status})})]},C.transfer_id||O))})]})})]})]})},r$=({stockTransfers:e,branches:t})=>{const[n,a]=g.useState(e||[]),[l,o]=g.useState(!0);g.useEffect(()=>{d()},[]);const d=async()=>{try{const h=await Br.getPendingTransfers();a(h)}catch(h){console.error("Error loading pending transfers:",h)}finally{o(!1)}},u=async h=>{try{await Br.approveTransfer(h),await d(),alert("Transfer approved successfully")}catch(x){console.error("Error approving transfer:",x),alert("Failed to approve transfer")}},m=async h=>{const x=prompt("Enter rejection reason:");if(x)try{await Br.rejectTransfer(h,x),await d(),alert("Transfer rejected")}catch(p){console.error("Error rejecting transfer:",p),alert("Failed to reject transfer")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Transfer Approval"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Review and approve stock transfers"})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Transfer ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"From"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"To"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Items"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:n.map(h=>{const x=t?.find(b=>b.branch_id===h.fromBranch)?.name||"Unknown",p=t?.find(b=>b.branch_id===h.toBranch)?.name||"Unknown";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-900",children:h.id}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:x}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:p}),r.jsxs("td",{className:"px-6 py-4 text-sm text-gray-900",children:[h.product_name," x ",h.quantity]}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:h.date}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${g3(h.status)}`,children:h.status})}),r.jsxs("td",{className:"px-6 py-4 text-right",children:[h.status==="Pending"&&r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>u(h.transfer_id||h.id),className:"px-3 py-1.5 bg-green-600 text-white text-sm rounded hover:bg-green-700",children:"Approve"}),r.jsx("button",{onClick:()=>m(h.transfer_id||h.id),className:"px-3 py-1.5 bg-red-600 text-white text-sm rounded hover:bg-red-700",children:"Reject"})]}),h.status!=="Pending"&&r.jsx("button",{className:"px-3 py-1.5 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200",children:"View Details"})]})]},h.id)})})]})})]})},n$=({batches:e,items:t})=>{const[n,a]=g.useState("FIFO"),o=(m=>e.map(h=>{const p=t.find(N=>N.product_id===h.product_id)?.cost_price||0,b=h.qty*p;return{...h,costPerUnit:p,totalCost:b}}))(),d=o.reduce((m,h)=>m+h.totalCost,0),u=()=>{const m=[["Item","Batch Code","Quantity","Cost/Unit","Total Value"],...o.map(b=>[t.find(N=>N.product_id===b.product_id)?.name||"Unknown",b.batch_code,b.qty,b.costPerUnit.toFixed(2),b.totalCost.toFixed(2)]),["","","","Total:",d.toFixed(2)]].map(b=>b.join(",")).join(`
`),h=new Blob([m],{type:"text/csv"}),x=window.URL.createObjectURL(h),p=document.createElement("a");p.href=x,p.download="stock-valuation-report.csv",p.click()};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Stock Valuation Report"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Calculate inventory value using different methods"})]}),r.jsxs("button",{onClick:u,className:"px-4 py-2 bg-brand-primary text-white rounded-lg flex items-center gap-2 hover:bg-brand-secondary transition-colors",children:[r.jsx(ua,{size:20}),"Export Report"]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Valuation Method:"}),r.jsx("div",{className:"flex gap-2",children:["FIFO","Weighted Average"].map(m=>r.jsx("button",{onClick:()=>a(m),className:`px-4 py-2 rounded-lg ${n===m?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:m},m))})]})}),r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-blue-600 font-semibold",children:"Method"}),r.jsx("p",{className:"text-2xl font-bold text-blue-700 mt-2",children:n})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"Total Items"}),r.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:o.length})]}),r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-purple-600 font-semibold",children:"Total Value"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-700 mt-2",children:["LKR ",(d/1e3).toFixed(1),"k"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Batch"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Quantity"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Cost/Unit"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Total Value"})]})}),r.jsxs("tbody",{className:"divide-y divide-gray-200",children:[o.map(m=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:t.find(h=>h.product_id===m.product_id)?.name||"Unknown"}),r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:m.batch_code}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-mono",children:m.qty}),r.jsxs("td",{className:"px-6 py-4 text-right text-sm font-mono",children:["LKR ",m.costPerUnit.toFixed(2)]}),r.jsxs("td",{className:"px-6 py-4 text-right text-sm font-semibold text-gray-900",children:["LKR ",m.totalCost.toFixed(2)]})]},m.batch_id)),r.jsxs("tr",{className:"bg-gray-50 font-semibold",children:[r.jsx("td",{colSpan:"4",className:"px-6 py-4 text-right text-sm",children:"Total Valuation:"}),r.jsxs("td",{className:"px-6 py-4 text-right text-sm",children:["LKR ",d.toFixed(2)]})]})]})]})})]})},a$=({batches:e})=>{const t=new Date("2026-01-11"),n=o=>{const d=Math.floor((t-new Date(o))/864e5);return d<=30?"0-30 days":d<=60?"31-60 days":d<=90?"61-90 days":"90+ days"},a=e.map(o=>({...o,daysInStock:Math.floor((t-new Date(o.manufacturing_date))/(1e3*60*60*24)),agingBucket:n(o.manufacturing_date)})),l={"0-30 days":0,"31-60 days":0,"61-90 days":0,"90+ days":0};return a.forEach(o=>l[o.agingBucket]++),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-800 to-blue-500 drop-shadow-sm",children:"Stock Aging Report"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Identify dead stock and optimize purchasing decisions"})]}),r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-green-600 font-semibold",children:"0-30 Days"}),r.jsx("p",{className:"text-2xl font-bold text-green-700 mt-2",children:l["0-30 days"]})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-yellow-600 font-semibold",children:"31-60 Days"}),r.jsx("p",{className:"text-2xl font-bold text-yellow-700 mt-2",children:l["31-60 days"]})]}),r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-orange-600 font-semibold",children:"61-90 Days"}),r.jsx("p",{className:"text-2xl font-bold text-orange-700 mt-2",children:l["61-90 days"]})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-red-600 font-semibold",children:"90+ Days"}),r.jsx("p",{className:"text-2xl font-bold text-red-700 mt-2",children:l["90+ days"]})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-50 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Batch Code"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Mfg Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Expiry Date"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Days in Stock"}),r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase",children:"Quantity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Aging Bucket"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:a.map(o=>{let d="bg-green-100 text-green-700";return o.agingBucket==="31-60 days"&&(d="bg-yellow-100 text-yellow-700"),o.agingBucket==="61-90 days"&&(d="bg-orange-100 text-orange-700"),o.agingBucket==="90+ days"&&(d="bg-red-100 text-red-700"),r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-mono text-gray-600",children:o.batch_code}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:o.manufacturing_date}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:o.expiry_date}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-semibold text-gray-900",children:o.daysInStock}),r.jsx("td",{className:"px-6 py-4 text-center text-sm font-mono",children:o.qty}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${d}`,children:o.agingBucket})})]},o.batch_id)})})]})})]})},s$=({isOpen:e,onClose:t,onConfirm:n,title:a,message:l,confirmText:o="Confirm",cancelText:d="Cancel",type:u="danger"})=>{if(!e)return null;const m={danger:{icon:"text-red-600",iconBg:"bg-red-100",button:"bg-red-600 hover:bg-red-700"},warning:{icon:"text-yellow-600",iconBg:"bg-yellow-100",button:"bg-yellow-600 hover:bg-yellow-700"},info:{icon:"text-blue-600",iconBg:"bg-blue-100",button:"bg-blue-600 hover:bg-blue-700"}},h=m[u]||m.danger;return r.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 animate-in fade-in duration-200",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"flex items-start gap-4 p-6 pb-4",children:[r.jsx("div",{className:`${h.iconBg} p-3 rounded-full flex-shrink-0`,children:r.jsx(Bt,{className:h.icon,size:24,strokeWidth:2.5})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:a}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:l})]}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors flex-shrink-0",children:r.jsx($e,{size:20})})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-xl",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:d}),r.jsx("button",{onClick:()=>{n(),t()},className:`px-4 py-2 text-sm font-medium text-white rounded-lg transition-colors ${h.button}`,children:o})]})]})]})},l$=({isOpen:e,onClose:t,onConfirm:n,title:a,message:l,placeholder:o="",confirmText:d="Submit",cancelText:u="Cancel"})=>{const[m,h]=g.useState("");if(!e)return null;const x=()=>{m.trim()&&(n(m),t(),h(""))};return r.jsxs("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center p-4 animate-in fade-in duration-200",children:[r.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:t}),r.jsxs("div",{className:"relative bg-white rounded-xl shadow-2xl max-w-md w-full animate-in zoom-in-95 duration-200",children:[r.jsxs("div",{className:"p-6 pb-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),r.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx($e,{size:20})})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:l}),r.jsx("input",{type:"text",value:m,onChange:p=>h(p.target.value),onKeyDown:p=>p.key==="Enter"&&x(),placeholder:o,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",autoFocus:!0})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 px-6 py-4 bg-gray-50 rounded-b-xl",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:u}),r.jsx("button",{onClick:x,disabled:!m.trim(),className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:d})]})]})]})},i$=()=>{const{notifications:e,removeNotification:t,confirmDialog:n,promptDialog:a,closeConfirmDialog:l,closePromptDialog:o}=ix(),d=u=>{switch(u){case"success":return{container:"bg-gradient-to-r from-green-50 to-emerald-50 border-green-200",icon:"text-green-600",text:"text-green-800",progress:"bg-green-500",IconComponent:et};case"error":return{container:"bg-gradient-to-r from-red-50 to-rose-50 border-red-200",icon:"text-red-600",text:"text-red-800",progress:"bg-red-500",IconComponent:Ia};case"warning":return{container:"bg-gradient-to-r from-yellow-50 to-amber-50 border-yellow-200",icon:"text-yellow-600",text:"text-yellow-800",progress:"bg-yellow-500",IconComponent:Bt};default:return{container:"bg-gradient-to-r from-blue-50 to-indigo-50 border-blue-200",icon:"text-blue-600",text:"text-blue-800",progress:"bg-blue-500",IconComponent:Qd}}};return r.jsxs(r.Fragment,{children:[e.length>0&&r.jsx("div",{className:"fixed top-20 right-6 z-[9999] flex flex-col gap-3 pointer-events-none",children:e.map(u=>{const m=d(u.type),h=m.IconComponent;return r.jsxs("div",{className:`${m.container} pointer-events-auto min-w-[320px] max-w-md border-l-4 rounded-lg shadow-lg backdrop-blur-sm animate-in slide-in-from-right-5 fade-in duration-300`,children:[r.jsxs("div",{className:"p-4 flex items-start gap-3",children:[r.jsx("div",{className:`${m.icon} flex-shrink-0 mt-0.5`,children:r.jsx(h,{size:20,strokeWidth:2.5})}),r.jsx("div",{className:`flex-1 ${m.text} text-sm font-medium leading-relaxed`,children:u.message}),r.jsx("button",{onClick:()=>t(u.id),className:`${m.icon} hover:opacity-70 transition-opacity flex-shrink-0`,children:r.jsx($e,{size:16})})]}),u.duration>0&&r.jsx("div",{className:"h-1 bg-white/30 rounded-b-lg overflow-hidden",children:r.jsx("div",{className:`h-full ${m.progress} animate-shrink-width`,style:{animation:`shrinkWidth ${u.duration}ms linear forwards`}})})]},u.id)})}),r.jsx(s$,{isOpen:n.isOpen,onClose:l,onConfirm:n.onConfirm||(()=>{}),title:n.title,message:n.message,type:n.type}),r.jsx(l$,{isOpen:a.isOpen,onClose:o,onConfirm:a.onConfirm||(()=>{}),title:a.title,message:a.message,placeholder:a.placeholder}),r.jsx("style",{children:`
                @keyframes shrinkWidth {
                    from {
                        width: 100%;
                    }
                    to {
                        width: 0%;
                    }
                }
                .animate-shrink-width {
                    animation: shrinkWidth linear forwards;
                }
            `})]})},y3=6048e5,o$=864e5,iE=Symbol.for("constructDateFrom");function jl(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&iE in e?e[iE](t):e instanceof Date?new e.constructor(t):new Date(t)}function ma(e,t){return jl(t||e,e)}let c$={};function ox(){return c$}function kd(e,t){const n=ox(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=ma(e,t?.in),o=l.getDay(),d=(o<a?7:0)+o-a;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function nh(e,t){return kd(e,{...t,weekStartsOn:1})}function v3(e,t){const n=ma(e,t?.in),a=n.getFullYear(),l=jl(n,0);l.setFullYear(a+1,0,4),l.setHours(0,0,0,0);const o=nh(l),d=jl(n,0);d.setFullYear(a,0,4),d.setHours(0,0,0,0);const u=nh(d);return n.getTime()>=o.getTime()?a+1:n.getTime()>=u.getTime()?a:a-1}function oE(e){const t=ma(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function d$(e,...t){const n=jl.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function cE(e,t){const n=ma(e,t?.in);return n.setHours(0,0,0,0),n}function u$(e,t,n){const[a,l]=d$(n?.in,e,t),o=cE(a),d=cE(l),u=+o-oE(o),m=+d-oE(d);return Math.round((u-m)/o$)}function f$(e,t){const n=v3(e,t),a=jl(e,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),nh(a)}function m$(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function h$(e){return!(!m$(e)&&typeof e!="number"||isNaN(+ma(e)))}function x$(e,t){const n=ma(e,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const p$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},g$=(e,t,n)=>{let a;const l=p$[e];return typeof l=="string"?a=l:t===1?a=l.one:a=l.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function kg(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const b$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},y$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},v$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},j$={date:kg({formats:b$,defaultWidth:"full"}),time:kg({formats:y$,defaultWidth:"full"}),dateTime:kg({formats:v$,defaultWidth:"full"})},N$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},w$=(e,t,n,a)=>N$[e];function ad(e){return(t,n)=>{const a=n?.context?String(n.context):"standalone";let l;if(a==="formatting"&&e.formattingValues){const d=e.defaultFormattingWidth||e.defaultWidth,u=n?.width?String(n.width):d;l=e.formattingValues[u]||e.formattingValues[d]}else{const d=e.defaultWidth,u=n?.width?String(n.width):e.defaultWidth;l=e.values[u]||e.values[d]}const o=e.argumentCallback?e.argumentCallback(t):t;return l[o]}}const S$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},E$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},C$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},A$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},k$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},O$=(e,t)=>{const n=Number(e),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},T$={ordinalNumber:O$,era:ad({values:S$,defaultWidth:"wide"}),quarter:ad({values:E$,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ad({values:C$,defaultWidth:"wide"}),day:ad({values:A$,defaultWidth:"wide"}),dayPeriod:ad({values:k$,defaultWidth:"wide",formattingValues:_$,defaultFormattingWidth:"wide"})};function sd(e){return(t,n={})=>{const a=n.width,l=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(l);if(!o)return null;const d=o[0],u=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(u)?P$(u,p=>p.test(d)):R$(u,p=>p.test(d));let h;h=e.valueCallback?e.valueCallback(m):m,h=n.valueCallback?n.valueCallback(h):h;const x=t.slice(d.length);return{value:h,rest:x}}}function R$(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n}function P$(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n}function D$(e){return(t,n={})=>{const a=t.match(e.matchPattern);if(!a)return null;const l=a[0],o=t.match(e.parsePattern);if(!o)return null;let d=e.valueCallback?e.valueCallback(o[0]):o[0];d=n.valueCallback?n.valueCallback(d):d;const u=t.slice(l.length);return{value:d,rest:u}}}const M$=/^(\d+)(th|st|nd|rd)?/i,I$=/\d+/i,L$={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},z$={any:[/^b/i,/^(a|c)/i]},B$={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},$$={any:[/1/i,/2/i,/3/i,/4/i]},U$={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},q$={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},F$={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},H$={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},K$={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},G$={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},V$={ordinalNumber:D$({matchPattern:M$,parsePattern:I$,valueCallback:e=>parseInt(e,10)}),era:sd({matchPatterns:L$,defaultMatchWidth:"wide",parsePatterns:z$,defaultParseWidth:"any"}),quarter:sd({matchPatterns:B$,defaultMatchWidth:"wide",parsePatterns:$$,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sd({matchPatterns:U$,defaultMatchWidth:"wide",parsePatterns:q$,defaultParseWidth:"any"}),day:sd({matchPatterns:F$,defaultMatchWidth:"wide",parsePatterns:H$,defaultParseWidth:"any"}),dayPeriod:sd({matchPatterns:K$,defaultMatchWidth:"any",parsePatterns:G$,defaultParseWidth:"any"})},Y$={code:"en-US",formatDistance:g$,formatLong:j$,formatRelative:w$,localize:T$,match:V$,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Q$(e,t){const n=ma(e,t?.in);return u$(n,x$(n))+1}function W$(e,t){const n=ma(e,t?.in),a=+nh(n)-+f$(n);return Math.round(a/y3)+1}function j3(e,t){const n=ma(e,t?.in),a=n.getFullYear(),l=ox(),o=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??l.firstWeekContainsDate??l.locale?.options?.firstWeekContainsDate??1,d=jl(t?.in||e,0);d.setFullYear(a+1,0,o),d.setHours(0,0,0,0);const u=kd(d,t),m=jl(t?.in||e,0);m.setFullYear(a,0,o),m.setHours(0,0,0,0);const h=kd(m,t);return+n>=+u?a+1:+n>=+h?a:a-1}function X$(e,t){const n=ox(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,l=j3(e,t),o=jl(t?.in||e,0);return o.setFullYear(l,0,a),o.setHours(0,0,0,0),kd(o,t)}function Z$(e,t){const n=ma(e,t?.in),a=+kd(n,t)-+X$(n,t);return Math.round(a/y3)+1}function ut(e,t){const n=e<0?"-":"",a=Math.abs(e).toString().padStart(t,"0");return n+a}const ul={y(e,t){const n=e.getFullYear(),a=n>0?n:1-n;return ut(t==="yy"?a%100:a,t.length)},M(e,t){const n=e.getMonth();return t==="M"?String(n+1):ut(n+1,2)},d(e,t){return ut(e.getDate(),t.length)},a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return n==="am"?"a.m.":"p.m."}},h(e,t){return ut(e.getHours()%12||12,t.length)},H(e,t){return ut(e.getHours(),t.length)},m(e,t){return ut(e.getMinutes(),t.length)},s(e,t){return ut(e.getSeconds(),t.length)},S(e,t){const n=t.length,a=e.getMilliseconds(),l=Math.trunc(a*Math.pow(10,n-3));return ut(l,t.length)}},ho={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},dE={G:function(e,t,n){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});default:return n.era(a,{width:"wide"})}},y:function(e,t,n){if(t==="yo"){const a=e.getFullYear(),l=a>0?a:1-a;return n.ordinalNumber(l,{unit:"year"})}return ul.y(e,t)},Y:function(e,t,n,a){const l=j3(e,a),o=l>0?l:1-l;if(t==="YY"){const d=o%100;return ut(d,2)}return t==="Yo"?n.ordinalNumber(o,{unit:"year"}):ut(o,t.length)},R:function(e,t){const n=v3(e);return ut(n,t.length)},u:function(e,t){const n=e.getFullYear();return ut(n,t.length)},Q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ut(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,n){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ut(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,n){const a=e.getMonth();switch(t){case"M":case"MM":return ul.M(e,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,n){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return ut(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,n,a){const l=Z$(e,a);return t==="wo"?n.ordinalNumber(l,{unit:"week"}):ut(l,t.length)},I:function(e,t,n){const a=W$(e);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):ut(a,t.length)},d:function(e,t,n){return t==="do"?n.ordinalNumber(e.getDate(),{unit:"date"}):ul.d(e,t)},D:function(e,t,n){const a=Q$(e);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):ut(a,t.length)},E:function(e,t,n){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,n,a){const l=e.getDay(),o=(l-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return ut(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(l,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(l,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(l,{width:"short",context:"formatting"});default:return n.day(l,{width:"wide",context:"formatting"})}},c:function(e,t,n,a){const l=e.getDay(),o=(l-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return ut(o,t.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(l,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(l,{width:"narrow",context:"standalone"});case"cccccc":return n.day(l,{width:"short",context:"standalone"});default:return n.day(l,{width:"wide",context:"standalone"})}},i:function(e,t,n){const a=e.getDay(),l=a===0?7:a;switch(t){case"i":return String(l);case"ii":return ut(l,t.length);case"io":return n.ordinalNumber(l,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,n){const l=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(l,{width:"narrow",context:"formatting"});default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},b:function(e,t,n){const a=e.getHours();let l;switch(a===12?l=ho.noon:a===0?l=ho.midnight:l=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(l,{width:"narrow",context:"formatting"});default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},B:function(e,t,n){const a=e.getHours();let l;switch(a>=17?l=ho.evening:a>=12?l=ho.afternoon:a>=4?l=ho.morning:l=ho.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(l,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(l,{width:"narrow",context:"formatting"});default:return n.dayPeriod(l,{width:"wide",context:"formatting"})}},h:function(e,t,n){if(t==="ho"){let a=e.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return ul.h(e,t)},H:function(e,t,n){return t==="Ho"?n.ordinalNumber(e.getHours(),{unit:"hour"}):ul.H(e,t)},K:function(e,t,n){const a=e.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):ut(a,t.length)},k:function(e,t,n){let a=e.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):ut(a,t.length)},m:function(e,t,n){return t==="mo"?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):ul.m(e,t)},s:function(e,t,n){return t==="so"?n.ordinalNumber(e.getSeconds(),{unit:"second"}):ul.s(e,t)},S:function(e,t){return ul.S(e,t)},X:function(e,t,n){const a=e.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return fE(a);case"XXXX":case"XX":return Ql(a);default:return Ql(a,":")}},x:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"x":return fE(a);case"xxxx":case"xx":return Ql(a);default:return Ql(a,":")}},O:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+uE(a,":");default:return"GMT"+Ql(a,":")}},z:function(e,t,n){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+uE(a,":");default:return"GMT"+Ql(a,":")}},t:function(e,t,n){const a=Math.trunc(+e/1e3);return ut(a,t.length)},T:function(e,t,n){return ut(+e,t.length)}};function uE(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),l=Math.trunc(a/60),o=a%60;return o===0?n+String(l):n+String(l)+t+ut(o,2)}function fE(e,t){return e%60===0?(e>0?"-":"+")+ut(Math.abs(e)/60,2):Ql(e,t)}function Ql(e,t=""){const n=e>0?"-":"+",a=Math.abs(e),l=ut(Math.trunc(a/60),2),o=ut(a%60,2);return n+l+t+o}const mE=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},N3=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},J$=(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],a=n[1],l=n[2];if(!l)return mE(e,t);let o;switch(a){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"});break}return o.replace("{{date}}",mE(a,t)).replace("{{time}}",N3(l,t))},eU={p:N3,P:J$},tU=/^D+$/,rU=/^Y+$/,nU=["D","DD","YY","YYYY"];function aU(e){return tU.test(e)}function sU(e){return rU.test(e)}function lU(e,t,n){const a=iU(e,t,n);if(console.warn(a),nU.includes(e))throw new RangeError(a)}function iU(e,t,n){const a=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const oU=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,cU=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,dU=/^'([^]*?)'?$/,uU=/''/g,fU=/[a-zA-Z]/;function mU(e,t,n){const a=ox(),l=a.locale??Y$,o=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,d=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,u=ma(e,n?.in);if(!h$(u))throw new RangeError("Invalid time value");let m=t.match(cU).map(x=>{const p=x[0];if(p==="p"||p==="P"){const b=eU[p];return b(x,l.formatLong)}return x}).join("").match(oU).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const p=x[0];if(p==="'")return{isToken:!1,value:hU(x)};if(dE[p])return{isToken:!0,value:x};if(p.match(fU))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:x}});l.localize.preprocessor&&(m=l.localize.preprocessor(u,m));const h={firstWeekContainsDate:o,weekStartsOn:d,locale:l};return m.map(x=>{if(!x.isToken)return x.value;const p=x.value;(sU(p)||aU(p))&&lU(p,t,String(e));const b=dE[p[0]];return b(u,p,l.localize,h)}).join("")}function hU(e){const t=e.match(dU);return t?t[1].replace(uU,"'"):e}function xU(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState("ALL"),[d,u]=g.useState("ALL");g.useEffect(()=>{m()},[l,d]);const m=async()=>{a(!0);try{const x=h();t(x)}catch(x){console.error("Error fetching activity logs:",x)}finally{a(!1)}},h=()=>{const x=[{type:"STOCK_IN",label:"Stock Received",icon:Vd,color:"text-emerald-500",bg:"bg-emerald-50"},{type:"STOCK_OUT",label:"Stock Sold",icon:_s,color:"text-blue-500",bg:"bg-blue-50"},{type:"ADJUSTMENT",label:"Stock Adjustment",icon:lr,color:"text-orange-500",bg:"bg-orange-50"},{type:"UPDATE",label:"Item Updated",icon:Fn,color:"text-indigo-500",bg:"bg-indigo-50"},{type:"CREATE",label:"New Item Added",icon:yn,color:"text-green-500",bg:"bg-green-50"},{type:"DELETE",label:"Item Deleted",icon:en,color:"text-red-500",bg:"bg-red-50"}];return Array(20).fill(null).map((p,b)=>{const N=x[Math.floor(Math.random()*x.length)],v=new Date;return v.setHours(v.getHours()-Math.floor(Math.random()*48*b)),{id:`LOG-${1e3+b}`,type:N.type,actionConfig:N,message:`${N.label}: Item #${2e3+b} - "Sample Product ${b+1}"`,user:"Admin User",timestamp:v,details:"Quantity changed from 50 to 45"}}).sort((p,b)=>b.timestamp-p.timestamp)};return r.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(To,{className:"w-6 h-6 text-brand-primary"}),"Activity Log"]}),r.jsx("p",{className:"text-slate-500",children:"Track all inventory movements and updates"})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("button",{className:"flex items-center gap-2 px-3 py-2 bg-white border border-slate-200 rounded-lg text-slate-600 hover:bg-slate-50 font-medium text-sm transition-colors",children:[r.jsx(ua,{size:16}),"Export"]})})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-4 bg-white p-4 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex items-center gap-2 text-slate-600 text-sm font-medium",children:[r.jsx(Jh,{size:16}),"Filters:"]}),r.jsxs("select",{value:l,onChange:x=>o(x.target.value),className:"px-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20",children:[r.jsx("option",{value:"ALL",children:"All Activities"}),r.jsx("option",{value:"STOCK_IN",children:"Stock In"}),r.jsx("option",{value:"STOCK_OUT",children:"Stock Out"}),r.jsx("option",{value:"ADJUSTMENT",children:"Adjustments"}),r.jsx("option",{value:"UPDATE",children:"Updates"}),r.jsx("option",{value:"CREATE",children:"Creates"})]}),r.jsxs("select",{value:d,onChange:x=>u(x.target.value),className:"px-3 py-1.5 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-brand-primary/20",children:[r.jsx("option",{value:"ALL",children:"All Time"}),r.jsx("option",{value:"TODAY",children:"Today"}),r.jsx("option",{value:"7DAYS",children:"Last 7 Days"}),r.jsx("option",{value:"30DAYS",children:"Last 30 Days"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden",children:n?r.jsx("div",{className:"p-8 text-center text-slate-500",children:"Loading logs..."}):r.jsxs("div",{className:"divide-y divide-slate-100",children:[e.map(x=>{const p=x.actionConfig.icon;return r.jsxs("div",{className:"p-4 hover:bg-slate-50 transition-colors flex items-start gap-4",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center shrink-0 ${x.actionConfig.bg} ${x.actionConfig.color}`,children:r.jsx(p,{size:18})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1",children:[r.jsx("h4",{className:"font-semibold text-slate-800 text-sm",children:x.message}),r.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:mU(x.timestamp,"MMM d, yyyy h:mm a")})]}),r.jsx("p",{className:"text-sm text-slate-500 mb-1",children:x.details}),r.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-400",children:[r.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 px-2 py-0.5 rounded-full text-slate-500 font-medium",children:["User: ",x.user]}),r.jsx("span",{children:""}),r.jsxs("span",{children:["ID: ",x.id]})]})]})]},x.id)}),e.length===0&&r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(To,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500 font-medium",children:"No activity logs found"}),r.jsx("p",{className:"text-slate-400 text-sm",children:"Try adjusting your filters"})]})]})})]})}const pU=({branchName:e,userRole:t,userName:n,goToDashboard:a,handleLogout:l})=>{const[o,d]=g.useState(new Date);return g.useEffect(()=>{const u=setInterval(()=>{d(new Date)},1e3);return()=>clearInterval(u)},[]),r.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center px-6 gap-4 shrink-0 shadow-sm",children:[r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"Inventory Management"}),r.jsx("span",{className:"text-xs text-slate-500",children:e})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[(t==="ADMIN"||t==="BRANCH_MANAGER")&&r.jsxs("button",{onClick:a,className:"group flex items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-blue-50 rounded-lg text-sm font-medium transition-all duration-300 hover:shadow-[0_0_15px_rgba(59,130,246,0.3)] hover:border hover:border-blue-200",children:[r.jsx(Ov,{size:16,className:"text-slate-600 group-hover:text-blue-600 transition-colors"}),r.jsx("span",{className:"hidden sm:inline text-slate-700 group-hover:text-blue-700 transition-colors",children:"Dashboard"})]}),r.jsxs("div",{className:"text-right leading-tight",children:[r.jsx("div",{className:"font-mono text-lg font-bold tracking-wider text-slate-700",children:o.toLocaleTimeString("en-US",{hour12:!1})}),r.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:o.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}).toUpperCase()})]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 bg-white/80 backdrop-blur-md rounded-full border border-blue-100 shadow-[0_0_15px_rgba(59,130,246,0.15)] hover:shadow-[0_0_20px_rgba(59,130,246,0.25)] transition-all duration-300 group cursor-default",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white text-xs font-bold shadow-md transform group-hover:scale-110 transition-transform duration-300 ring-2 ring-blue-100",children:n.charAt(0).toUpperCase()}),r.jsx("span",{className:"text-sm font-semibold text-slate-700 group-hover:text-blue-700 transition-colors",children:n})]}),r.jsxs("button",{onClick:l,className:"group relative overflow-hidden flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 hover:border-red-100 text-slate-700 hover:text-red-600 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md hover:-translate-y-0.5",children:[r.jsx("div",{className:"absolute inset-0 bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(fi,{size:18,className:"relative z-10 transition-transform duration-300 group-hover:scale-110 group-hover:-translate-x-0.5"}),r.jsx("span",{className:"relative z-10 hidden sm:inline text-sm font-semibold",children:"Sign Out"})]})]})]})},gU=El.memo(pU),bU=()=>{const e=ca(),[t,n]=g.useState("item-list"),{success:a,error:l,warning:o,info:d,confirm:u}=ix(),m=Ta(),h=Ta(),x=Ta(),p=Ta(),b=localStorage.getItem("user");let N="User",v="Staff",w="Main Branch";if(b)try{const ie=JSON.parse(b);N=ie.username||ie.name||"User",v=ie.role||ie.userRole||"Staff",w=ie.branchName||"Main Branch"}catch{}const S=async()=>{await u("Sign Out","Are you sure you want to sign out?","danger")&&(localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login"))},A=()=>{const ie=localStorage.getItem("user");if(ie)try{const ke=JSON.parse(ie),De=(ke.role||ke.userRole||"").toUpperCase();e(De==="ADMIN"?"/admin":De==="BRANCH_MANAGER"?"/manager":"/pos")}catch{e("/pos")}else e("/login")};g.useEffect(()=>{(async()=>{console.log("=== Inventory API called ==="),console.log("[InventorySystem] Starting to load inventory data...");try{console.log("[InventorySystem] Calling Promise.all for products, categories, brands, suppliers, subcategories, branches");const[ke,De,nr,Bs,$s,Ut]=await Promise.all([it.getProducts(),it.getCategories(),it.getBrands(),it.getSuppliers(),it.getSubCategories(),it.getBranches().catch(Mr=>(console.warn("Failed to fetch branches, using empty list:",Mr),[]))]);console.log("[InventorySystem] Data received:",{products:ke?.length||0,categories:De?.length||0,brands:nr?.length||0,suppliers:Bs?.length||0,branches:Ut?.length||0});const uc=JSON.parse(localStorage.getItem("category_metadata")||"{}"),Cu=De.map(Mr=>({...Mr,icon:uc[Mr.category_id]?.icon||Mr.icon||"Tag",color:uc[Mr.category_id]?.color||Mr.color||"blue"})),ya=JSON.parse(localStorage.getItem("brand_metadata")||"{}"),Us=nr.map(Mr=>({...Mr,icon:ya[Mr.brand_id]?.icon||Mr.icon||"Archive",color:ya[Mr.brand_id]?.color||Mr.color||"blue"}));Pr(ke),K(Cu),I(Us),J(Bs),V($s),Le(Ut),console.log("[InventorySystem] State updated successfully")}catch(ke){console.error("[InventorySystem] Inventory API error:",ke),console.error("[InventorySystem] Error details:",{message:ke.message,response:ke.response,status:ke.response?.status,data:ke.response?.data}),l("Failed to load inventory data. Please refresh the page.")}})()},[]);const[E,C]=g.useState(!1),[O,k]=g.useState(!1),[_,T]=g.useState(!1),[P,L]=g.useState(""),[z,U]=g.useState(!1),[B,ee]=g.useState(null),[X,be]=g.useState(null),[G,J]=g.useState([]),[$,q]=g.useState({supplier_id:"",code:"",name:"",company_name:"",contact_person:"",phone:"",mobile:"",email:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"Sri Lanka",supplier_type:"LOCAL",supplier_category:"PRIMARY",is_active:!0,is_verified:!1}),[se,I]=g.useState([]),[M,H]=g.useState({brand_id:"",name:"",description:"",is_active:!0,icon:"Archive",color:"blue"}),[oe,K]=g.useState([]),[pe,V]=g.useState([]),[xe,Z]=g.useState({category_id:"",name:"",description:"",is_active:!0,icon:"Tag",color:"blue"}),[ne,Se]=g.useState(!1),[W,ae]=g.useState({subcategory_id:"",category_id:"",name:"",description:"",is_active:!0}),[we,Be]=g.useState(!1),[tt,kr]=g.useState(null),tr=async()=>{if(xe.name.trim())try{const ie=await it.createCategory(xe),ke=JSON.parse(localStorage.getItem("category_metadata")||"{}");ke[ie.category_id]={icon:xe.icon,color:xe.color},localStorage.setItem("category_metadata",JSON.stringify(ke));const De={...ie,icon:xe.icon,color:xe.color};K([...oe,De]),Z({category_id:"",name:"",description:"",is_active:!0,icon:"Tag",color:"blue"}),Se(!1)}catch(ie){console.error("Error creating category:",ie),l("Failed to create category. Please try again.")}},an=async()=>{if(W.name.trim()&&tt)try{const ie={...W,category_id:tt},ke=await it.createSubCategory(ie);V([...pe,ke]),ae({subcategory_id:"",category_id:"",name:"",description:"",is_active:!0}),Be(!1),kr(null)}catch(ie){console.error("Error creating subcategory:",ie),l("Failed to create subcategory. Please try again.")}},Ha=async ie=>{if(await u("Delete Subcategory","Are you sure you want to delete this subcategory? This action cannot be undone.","danger"))try{await it.deleteSubCategory(ie),V(pe.filter(De=>De.subcategory_id!==ie)),a("Subcategory deleted successfully!")}catch(De){console.error("Error deleting subcategory:",De),l("Failed to delete subcategory. Please try again.")}},kl=async ie=>{if(await u("Delete Category","Are you sure you want to delete this category? This action cannot be undone.","danger"))try{await it.deleteCategory(ie);const De=JSON.parse(localStorage.getItem("category_metadata")||"{}");De[ie]&&(delete De[ie],localStorage.setItem("category_metadata",JSON.stringify(De))),K(oe.filter(nr=>nr.category_id!==ie)),a("Category deleted successfully!")}catch(De){console.error("Error deleting category:",De),l("Failed to delete category. Please try again.")}},nc=async ie=>{if(await u("Delete Brand","Are you sure you want to delete this brand? This action cannot be undone.","danger"))try{await it.deleteBrand(ie);const De=JSON.parse(localStorage.getItem("brand_metadata")||"{}");De[ie]&&(delete De[ie],localStorage.setItem("brand_metadata",JSON.stringify(De))),I(se.filter(nr=>nr.brand_id!==ie)),a("Brand deleted successfully!")}catch(De){console.error("Error deleting brand:",De),l("Failed to delete brand. Please try again.")}},ac=async ie=>{if(await u("Delete Supplier","Are you sure you want to delete this supplier? This action cannot be undone.","danger"))try{await it.deleteSupplier(ie),J(G.filter(De=>De.supplier_id!==ie)),a("Supplier deleted successfully!")}catch(De){console.error("Error deleting supplier:",De),l("Failed to delete supplier. Please try again.")}},br=async ie=>{if(await u("Delete Product","Are you sure you want to delete this product? This action cannot be undone.","danger"))try{await it.deleteProduct(ie),Pr(We.filter(De=>De.product_id!==ie)),a("Product deleted successfully!")}catch(De){console.error("Error deleting product:",De),l("Failed to delete product. Please try again.")}},sc=ie=>{const ke=oe.find(De=>De.category_id===ie);ke&&(Z({...ke,icon:ke.icon||"Tag",color:ke.color||"blue"}),ee(ie),be("category"),U(!0),Se(!0))},_l=ie=>{const ke=se.find(De=>De.brand_id===ie);ke&&(H({...ke,icon:ke.icon||"Archive",color:ke.color||"blue"}),ee(ie),be("brand"),U(!0),T(!0))},Ti=ie=>{const ke=G.find(De=>De.supplier_id===ie);ke&&(q({...ke}),ee(ie),be("supplier"),U(!0),k(!0))},Wn=ie=>{const ke=pe.find(De=>De.subcategory_id===ie);ke&&(ae({...ke}),ee(ie),be("subcategory"),U(!0),Be(!0))},rr=async()=>{try{if(X==="category"&&xe.name.trim()){const ie=await it.updateCategory(B,xe),ke=JSON.parse(localStorage.getItem("category_metadata")||"{}");ke[B]={icon:xe.icon,color:xe.color},localStorage.setItem("category_metadata",JSON.stringify(ke));const De={...ie,icon:xe.icon,color:xe.color};K(oe.map(nr=>nr.category_id===B?De:nr)),U(!1),ee(null),be(null),Se(!1)}else if(X==="brand"&&M.name.trim()){const ie=await it.updateBrand(B,M),ke=JSON.parse(localStorage.getItem("brand_metadata")||"{}");ke[B]={icon:M.icon,color:M.color},localStorage.setItem("brand_metadata",JSON.stringify(ke));const De={...ie,icon:M.icon,color:M.color};I(se.map(nr=>nr.brand_id===B?De:nr)),U(!1),ee(null),be(null),T(!1)}else if(X==="supplier"&&$.name.trim()){const ie=await it.updateSupplier(B,$);J(G.map(ke=>ke.supplier_id===B?ie:ke)),U(!1),ee(null),be(null),k(!1)}else if(X==="subcategory"&&W.name.trim()){const ie=await it.updateSubCategory(B,W);V(pe.map(ke=>ke.subcategory_id===B?ie:ke)),U(!1),ee(null),be(null),Be(!1)}}catch(ie){console.error("Error updating:",ie),l("Failed to update. Please try again.")}},[Ri,fe]=g.useState(""),[ve,Ne]=g.useState(""),[Ae,Ce]=g.useState(""),[Ee,Le]=g.useState([]),[We,Pr]=g.useState([]),Fe=[],[Je,Kt]=g.useState(""),[Dr,Gt]=g.useState({itemId:"",batchId:"",currentQty:"",physicalQty:"",adjustmentType:"Increase",reason:"Audit",approvedBy:""}),[$t,pa]=g.useState([]),[ga,lc]=g.useState({itemId:"",batchId:"",quantity:"",reason:"",date:"",note:""}),[Ol,n0]=g.useState([]),[ju,Nu]=g.useState({fromBranch:"",toBranch:"",product_id:"",quantity:"",batch_id:"",transferDate:"",remarks:"",status:"Draft"}),[wu,ic]=g.useState([]),[oc,cc]=g.useState(null),[Su,ba]=g.useState("summary"),[Vt,yr]=g.useState(null),zs=ie=>{const ke=We.find(De=>De.product_id===ie);ke&&(yr(ke),C(!0))},dc={},a0=[],s0=[{id:"procurement",label:"Procurement",icon:sa,screens:[{id:"grn-mgmt",label:"GRN Management",icon:et}]},{id:"item-management",label:"Item Management",icon:Tt,screens:[{id:"item-list",label:"Item List",icon:Tt},{id:"item-detail",label:"Item Detail",icon:sa},{id:"barcode-print",label:"Barcode Print",icon:mi}]},{id:"category-master",label:"Category & Master",icon:mn,screens:[{id:"category-mgmt",label:"Category Management",icon:mn},{id:"brand-mgmt",label:"Brand Management",icon:Oa},{id:"supplier-mgmt",label:"Supplier Management",icon:Oa}]},{id:"stock-ops",label:"Stock Operations",icon:vd,screens:[{id:"stock-overview",label:"Stock Overview",icon:ci},{id:"batch-stock",label:"Batch-wise Stock",icon:Tt},{id:"expiry-calendar",label:"Expiry Calendar",icon:da},{id:"stock-adjustment",label:"Stock Adjustment",icon:ir},{id:"damage-entry",label:"Damage Entry",icon:Bt}]},{id:"transfers",label:"Transfers & Valuation",icon:AS,screens:[{id:"transfer-create",label:"Create Transfer",icon:AS},{id:"stock-valuation",label:"Stock Valuation",icon:Hn},{id:"stock-aging",label:"Stock Aging Report",icon:Rr}]},{id:"logs",label:"Activity Logs",icon:To,screens:[{id:"activity-log",label:"Activity Log",icon:To}]}],Eu=()=>{switch(t){case"activity-log":return r.jsx(xU,{});case"item-list":return r.jsx(_B,{items:We,searchQuery:P,setSearchQuery:L,setSelectedItemId:cc,setActiveScreen:n,handleDeleteItem:br,handleEditItem:zs,categories:oe,setIsAddModalOpen:ie=>{ie&&yr(null),C(ie)}});case"item-detail":return r.jsx(KB,{items:We,itemDetails:dc,selectedItemId:oc,setSelectedItemId:cc,setActiveScreen:n,selectedItemTab:Su,setSelectedItemTab:ba,batches:Fe,categories:oe,brands:se,subCategories:pe});case"add-item":return r.jsx(lE,{setActiveScreen:n,categories:oe,brands:se,onSaved:ie=>{Pr([...We,ie]),n("item-list")}});case"stock-overview":return r.jsx(WB,{items:We,categories:oe,branches:Ee,stockFilterCategory:Ri,setStockFilterCategory:fe,stockFilterBranch:ve,setStockFilterBranch:Ne,stockFilterDate:Ae,setStockFilterDate:Ce});case"batch-stock":return r.jsx(XB,{batches:Fe,items:We,batchFilterItem:Je,setBatchFilterItem:Kt});case"expiry-calendar":return r.jsx(ZB,{batches:Fe});case"stock-adjustment":return r.jsx(JB,{adjustmentForm:Dr,setAdjustmentForm:Gt,adjustments:$t,setAdjustments:pa,items:We,batches:Fe});case"damage-entry":return r.jsx(e$,{damageForm:ga,setDamageForm:lc,damageEntries:Ol,setDamageEntries:n0,items:We,batches:Fe});case"category-mgmt":return r.jsx(GB,{categories:oe,subCategories:pe,categoryForm:xe,setCategoryForm:Z,isAddCategoryOpen:ne,setIsAddCategoryOpen:Se,handleAddCategory:tr,subCategoryForm:W,setSubCategoryForm:ae,isAddSubCategoryOpen:we,setIsAddSubCategoryOpen:Be,handleAddSubCategory:an,selectedParentCategory:tt,setSelectedParentCategory:kr,handleDeleteCategory:kl,handleEditCategory:sc,isEditMode:z&&X==="category",handleSaveEdit:rr,handleEditSubCategory:Wn,handleDeleteSubCategory:Ha});case"brand-mgmt":return r.jsx(VB,{brands:se,setBrands:I,isAddBrandOpen:_,setIsAddBrandOpen:T,brandForm:M,setBrandForm:H,suppliers:G,handleDeleteBrand:nc,handleEditBrand:_l,isEditMode:z&&X==="brand",handleSaveEdit:rr});case"supplier-mgmt":return r.jsx(YB,{suppliers:G,setSuppliers:J,isAddSupplierOpen:O,setIsAddSupplierOpen:k,supplierForm:$,setSupplierForm:q,categories:oe,handleDeleteSupplier:ac,handleEditSupplier:Ti,isEditMode:z&&X==="supplier",handleSaveEdit:rr});case"grn-mgmt":return r.jsx(QB,{items:We,suppliers:G,branches:Ee,categories:oe,subCategories:pe});case"transfer-create":return r.jsx(t$,{transferForm:ju,setTransferForm:Nu,transfers:wu,setTransfers:ic,branches:Ee,items:We,batches:Fe});case"approve-transfer":return r.jsx(r$,{stockTransfers:a0,branches:Ee});case"stock-valuation":return r.jsx(n$,{batches:Fe,items:We});case"stock-aging":return r.jsx(a$,{batches:Fe});case"barcode-print":return r.jsxs("div",{className:"flex flex-col items-center justify-center h-full relative overflow-hidden bg-slate-50/50",children:[r.jsxs("div",{className:"absolute top-0 left-0 w-full h-full overflow-hidden z-0 pointer-events-none",children:[r.jsx("div",{className:"absolute top-[20%] left-[20%] w-72 h-72 bg-blue-400/10 rounded-full blur-3xl animate-pulse"}),r.jsx("div",{className:"absolute bottom-[20%] right-[20%] w-96 h-96 bg-indigo-400/10 rounded-full blur-3xl animate-pulse delay-1000"})]}),r.jsxs("div",{className:"relative z-10 text-center p-12 bg-white/70 backdrop-blur-xl rounded-2xl shadow-[0_8px_30px_rgb(0,0,0,0.04)] border border-white max-w-xl mx-auto transform transition-all duration-500 hover:scale-[1.01] hover:shadow-[0_8px_30px_rgb(0,0,0,0.08)]",children:[r.jsxs("div",{className:"relative mb-8 inline-block group",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-tr from-blue-500 to-indigo-600 rounded-2xl blur opacity-20 group-hover:opacity-30 transition-opacity duration-300"}),r.jsx("div",{className:"relative z-10 bg-white p-6 rounded-2xl shadow-sm border border-slate-100 group-hover:border-blue-100 transition-colors",children:r.jsx(mi,{size:48,className:"text-blue-600",strokeWidth:1.5})}),r.jsx("div",{className:"absolute -top-3 -right-3 bg-slate-900 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg border border-white",children:"DEV"})]}),r.jsx("h2",{className:"text-3xl font-bold text-slate-900 mb-2 tracking-tight",children:"Barcode Studio"}),r.jsx("h3",{className:"text-xl font-medium text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-indigo-600 mb-6",children:"Coming Soon"}),r.jsx("p",{className:"text-slate-500 text-[15px] mb-8 leading-relaxed max-w-sm mx-auto",children:"We are building a powerful barcode generation tool. Create custom labels, support multiple formats, and print directly from your browser."}),r.jsxs("div",{className:"max-w-sm mx-auto mb-8 bg-white p-4 rounded-xl border border-slate-100 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between text-xs font-semibold text-slate-500 mb-2",children:[r.jsx("span",{children:"Development Status"}),r.jsx("span",{className:"text-blue-600",children:"In Progress"})]}),r.jsx("div",{className:"h-1.5 w-full bg-slate-100 rounded-full overflow-hidden",children:r.jsx("div",{className:"h-full bg-gradient-to-r from-blue-500 to-indigo-600 rounded-full w-[65%] relative overflow-hidden",children:r.jsx("div",{className:"absolute inset-0 bg-white/30 animate-[shimmer_2s_infinite]"})})})]}),r.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-slate-100/50 rounded-full border border-slate-200/50",children:[r.jsx(Rr,{size:14,className:"text-slate-400"}),r.jsx("span",{className:"text-xs font-medium text-slate-500",children:"Expected Update: Next Release"})]})]})]});default:return r.jsx("div",{className:"flex items-center justify-center h-full",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Tt,{size:64,className:"text-gray-300 mx-auto mb-4"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Screen Coming Soon"}),r.jsx("p",{className:"text-gray-600 mt-2",children:"This feature is under development"})]})})}};return r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsxs("aside",{className:"w-72 shrink-0 bg-gray-900 text-white h-screen flex flex-col min-h-0",children:[r.jsxs("div",{className:"p-6 border-b border-gray-800",children:[r.jsxs("h1",{className:"text-xl font-bold",children:["SmartRetail ",r.jsx("span",{className:"text-emerald-400",children:"Pro"})]}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Inventory Management"})]}),r.jsx("nav",{className:"sidebar-scroll p-4 flex-1 min-h-0 overflow-y-auto",children:s0.map(ie=>r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:ie.label}),r.jsx("div",{className:"mt-2 space-y-1",children:ie.screens.map(ke=>r.jsxs("button",{onClick:()=>n(ke.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${t===ke.id?"bg-brand-primary text-white shadow-lg translate-x-1":"text-gray-300 hover:bg-gray-800 hover:translate-x-1 hover:text-white"}`,children:[r.jsx(ke.icon,{size:18,className:"shrink-0 transition-transform duration-200 group-hover:scale-110"}),r.jsx("span",{className:"text-sm truncate",children:ke.label})]},ke.id))})]},ie.id))})]}),r.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[r.jsx(gU,{branchName:w,userRole:v,userName:N,goToDashboard:A,handleLogout:S}),r.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 p-8 animate-screen-transition",children:Eu()},t)]}),E&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-modal-blur",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>C(!1)}),r.jsx("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-full sm:max-w-2xl md:max-w-3xl mx-4 sm:mx-6 z-10 max-h-[90vh] overflow-y-auto",children:r.jsx("div",{className:"p-4 sm:p-6",children:r.jsx(lE,{onClose:()=>C(!1),setActiveScreen:n,categories:oe,subCategories:pe,brands:se,itemToEdit:Vt,onSaved:ie=>{Pr(Vt?We.map(ke=>ke.product_id===ie.product_id?ie:ke):[...We,ie])}})})})]}),we&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-modal-blur",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>Be(!1)}),r.jsx("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 sm:mx-6 z-10 max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z?"Edit Subcategory":"Add New Subcategory"}),r.jsx("button",{onClick:()=>Be(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx($e,{size:20})})]}),r.jsxs("form",{className:"space-y-4",onKeyDown:h,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subcategory Name"}),r.jsx("input",{type:"text",value:W.name,onChange:ie=>ae({...W,name:ie.target.value}),placeholder:"e.g., Soft Drinks",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:W.description,onChange:ie=>ae({...W,description:ie.target.value}),placeholder:"Description...",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:W.is_active,onChange:ie=>ae({...W,is_active:ie.target.checked}),id:"isSubActive",className:"rounded"}),r.jsx("label",{htmlFor:"isSubActive",className:"text-sm font-medium text-gray-700",children:"Active"})]}),r.jsxs("div",{className:"flex gap-2 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>Be(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"button",onClick:z?rr:an,className:"flex-1 px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary",children:z?"Save Changes":"Add Subcategory"})]})]})]})})]}),ne&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-modal-blur",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>Se(!1)}),r.jsx("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 sm:mx-6 z-10 max-h-[90vh] overflow-y-auto",children:r.jsxs("div",{className:"p-4 sm:p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:z?"Edit Category":"Add New Category"}),r.jsx("button",{onClick:()=>Se(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx($e,{size:20})})]}),r.jsxs("form",{className:"space-y-4",onKeyDown:m,children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name"}),r.jsx("input",{type:"text",value:xe.name,onChange:ie=>Z({...xe,name:ie.target.value}),placeholder:"e.g., Beverages",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:xe.description,onChange:ie=>Z({...xe,description:ie.target.value}),placeholder:"e.g., Drinks and beverages",rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-primary"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"checkbox",checked:xe.is_active,onChange:ie=>Z({...xe,is_active:ie.target.checked}),id:"isActive",className:"rounded"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm font-medium text-gray-700",children:"Active"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Icon"}),r.jsx("div",{className:"grid grid-cols-6 gap-2",children:["Tag","Box","Archive","Layers","ShoppingBag","Coffee","Smartphone","Headphones","Shirt","Watch","Utensils","Zap","Gift","Briefcase","Camera","Music","Anchor","Globe","Key","Map","Sun","Moon","Star","Heart"].map(ie=>{const ke={Tag:mn,Box:vd,Archive:Oa,Layers:Hm,ShoppingBag:Po,Coffee:zm,Smartphone:Xm,Headphones:$m,Shirt:Wm,Watch:eh,Utensils:Jm,Zap:Ad,Gift:Oo,Briefcase:Mm,Camera:Im,Music:Ym,Anchor:Dm,Globe:Bm,Key:Fm,Map:Gm,Sun:Zm,Moon:Vm,Star:hi,Heart:Um}[ie]||mn;return r.jsx("button",{type:"button",onClick:()=>Z({...xe,icon:ie}),className:`p-2 rounded-lg flex items-center justify-center transition-all ${xe.icon===ie?"bg-blue-100 text-blue-600 ring-2 ring-blue-500":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,title:ie,children:r.jsx(ke,{size:20})},ie)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),r.jsx("div",{className:"flex flex-wrap gap-3",children:[{id:"blue",bg:"bg-blue-500"},{id:"green",bg:"bg-green-500"},{id:"red",bg:"bg-red-500"},{id:"yellow",bg:"bg-yellow-500"},{id:"purple",bg:"bg-purple-500"},{id:"pink",bg:"bg-pink-500"},{id:"orange",bg:"bg-orange-500"},{id:"indigo",bg:"bg-indigo-500"},{id:"teal",bg:"bg-teal-500"},{id:"cyan",bg:"bg-cyan-500"}].map(ie=>r.jsx("button",{type:"button",onClick:()=>Z({...xe,color:ie.id}),className:`w-8 h-8 rounded-full ${ie.bg} transition-transform hover:scale-110 flex items-center justify-center ${xe.color===ie.id?"ring-2 ring-offset-2 ring-gray-400 scale-110":""}`,children:xe.color===ie.id&&r.jsx(et,{size:14,className:"text-white"})},ie.id))})]}),r.jsxs("div",{className:"flex gap-2 mt-6",children:[r.jsx("button",{type:"button",onClick:()=>Se(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"button",onClick:z?rr:tr,className:"flex-1 px-4 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary",children:z?"Save Changes":"Add Category"})]})]})]})})]}),_&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-modal-blur",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>T(!1)}),r.jsx("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 sm:mx-6 z-10 max-h-[90vh] overflow-y-auto",children:r.jsx("div",{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:z?"Edit Brand":"Add Brand"}),r.jsx("p",{className:"text-gray-600 mt-1",children:z?"Update brand details":"Create a new brand"})]}),r.jsx("button",{onClick:()=>T(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx($e,{size:20})})]}),r.jsxs("form",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",onKeyDown:x,children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Name *"}),r.jsx("input",{value:M.name,onChange:ie=>H({...M,name:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Brand name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{value:M.description,onChange:ie=>H({...M,description:ie.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Short description",rows:"2"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{value:M.is_active,onChange:ie=>H({...M,is_active:ie.target.value==="true"}),className:"w-full",children:[r.jsx("option",{value:"true",children:"Active"}),r.jsx("option",{value:"false",children:"Inactive"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Icon"}),r.jsx("div",{className:"grid grid-cols-6 gap-2",children:["Archive","Box","Tag","Layers","ShoppingBag","Coffee","Smartphone","Headphones","Shirt","Watch","Utensils","Zap","Gift","Briefcase","Camera","Music","Anchor","Globe","Key","Map","Sun","Moon","Star","Heart"].map(ie=>{const ke={Archive:Oa,Tag:mn,Box:vd,Layers:Hm,ShoppingBag:Po,Coffee:zm,Smartphone:Xm,Headphones:$m,Shirt:Wm,Watch:eh,Utensils:Jm,Zap:Ad,Gift:Oo,Briefcase:Mm,Camera:Im,Music:Ym,Anchor:Dm,Globe:Bm,Key:Fm,Map:Gm,Sun:Zm,Moon:Vm,Star:hi,Heart:Um}[ie]||Oa;return r.jsx("button",{type:"button",onClick:()=>H({...M,icon:ie}),className:`p-2 rounded-lg flex items-center justify-center transition-all ${M.icon===ie?"bg-blue-100 text-blue-600 ring-2 ring-blue-500":"bg-gray-50 text-gray-500 hover:bg-gray-100"}`,title:ie,children:r.jsx(ke,{size:20})},ie)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color Theme"}),r.jsx("div",{className:"flex flex-wrap gap-3",children:[{id:"blue",bg:"bg-blue-500"},{id:"green",bg:"bg-green-500"},{id:"red",bg:"bg-red-500"},{id:"yellow",bg:"bg-yellow-500"},{id:"purple",bg:"bg-purple-500"},{id:"pink",bg:"bg-pink-500"},{id:"orange",bg:"bg-orange-500"},{id:"indigo",bg:"bg-indigo-500"},{id:"teal",bg:"bg-teal-500"},{id:"cyan",bg:"bg-cyan-500"}].map(ie=>r.jsx("button",{type:"button",onClick:()=>H({...M,color:ie.id}),className:`w-8 h-8 rounded-full ${ie.bg} transition-transform hover:scale-110 flex items-center justify-center ${M.color===ie.id?"ring-2 ring-offset-2 ring-gray-400 scale-110":""}`,children:M.color===ie.id&&r.jsx(et,{size:14,className:"text-white"})},ie.id))})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{T(!1),H({brand_id:"",name:"",description:"",is_active:!0,icon:"Archive",color:"blue"})},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"button",onClick:async()=>{if(!M.name){o("Please fill in the brand name");return}if(z)await rr();else try{const ie=await it.createBrand(M),ke=JSON.parse(localStorage.getItem("brand_metadata")||"{}");ke[ie.brand_id]={icon:M.icon,color:M.color},localStorage.setItem("brand_metadata",JSON.stringify(ke));const De={...ie,icon:M.icon,color:M.color};I([...se,De]),T(!1),H({brand_id:"",name:"",description:"",is_active:!0,icon:"Archive",color:"blue"})}catch(ie){console.error("Error creating brand:",ie),l("Failed to create brand. Please try again.")}},className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:z?"Save Changes":"Save Brand"})]})]})]})})})]}),O&&r.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center animate-modal-blur",children:[r.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm",onClick:()=>k(!1)}),r.jsx("div",{className:"relative bg-white rounded-lg shadow-lg w-full max-w-md mx-4 sm:mx-6 z-10 max-h-[90vh] overflow-y-auto",children:r.jsx("div",{className:"p-4 sm:p-6",children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Add Supplier"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Create a new supplier"})]}),r.jsx("button",{onClick:()=>k(!1),className:"text-gray-500 hover:text-gray-700",children:r.jsx($e,{size:20})})]}),r.jsxs("form",{className:"bg-white rounded-lg border border-gray-200 p-4 sm:p-6",onKeyDown:p,children:[r.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Code *"}),r.jsx("input",{value:$.code,onChange:ie=>q({...$,code:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"SUP001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name *"}),r.jsx("input",{value:$.name,onChange:ie=>q({...$,name:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Supplier name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),r.jsx("input",{value:$.company_name,onChange:ie=>q({...$,company_name:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Company name"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Person"}),r.jsx("input",{value:$.contact_person,onChange:ie=>q({...$,contact_person:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Contact person"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),r.jsx("input",{value:$.phone,onChange:ie=>q({...$,phone:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"011-1234567"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),r.jsx("input",{value:$.email,onChange:ie=>q({...$,email:ie.target.value}),type:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"email@example.com"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"City"}),r.jsx("input",{value:$.city,onChange:ie=>q({...$,city:ie.target.value}),type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg",placeholder:"Colombo"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Type"}),r.jsxs("select",{value:$.supplier_type,onChange:ie=>q({...$,supplier_type:ie.target.value}),className:"w-full",children:[r.jsx("option",{value:"LOCAL",children:"Local"}),r.jsx("option",{value:"INTERNATIONAL",children:"International"}),r.jsx("option",{value:"DISTRIBUTOR",children:"Distributor"}),r.jsx("option",{value:"MANUFACTURER",children:"Manufacturer"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Category"}),r.jsxs("select",{value:$.supplier_category,onChange:ie=>q({...$,supplier_category:ie.target.value}),className:"w-full",children:[r.jsx("option",{value:"PRIMARY",children:"Primary"}),r.jsx("option",{value:"SECONDARY",children:"Secondary"}),r.jsx("option",{value:"OCCASIONAL",children:"Occasional"})]})]})]}),r.jsxs("div",{className:"flex justify-end gap-3 mt-6 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{k(!1),q({supplier_id:"",code:"",name:"",company_name:"",contact_person:"",phone:"",mobile:"",email:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"Sri Lanka",supplier_type:"LOCAL",supplier_category:"PRIMARY",is_active:!0,is_verified:!1})},className:"px-6 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{type:"button",onClick:async()=>{if(!$.code||!$.name){o("Please fill in the required fields (Code and Name)");return}if(z)await rr();else try{const ie=await it.createSupplier($);J([...G,ie]),k(!1),q({supplier_id:"",code:"",name:"",company_name:"",contact_person:"",phone:"",mobile:"",email:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",country:"Sri Lanka",supplier_type:"LOCAL",supplier_category:"PRIMARY",is_active:!0,is_verified:!1})}catch(ie){console.error("Error creating supplier:",ie),l("Failed to create supplier. Please try again.")}},className:"px-6 py-2 bg-brand-primary text-white rounded-lg hover:bg-brand-secondary transition-colors",children:z?"Save Changes":"Save Supplier"})]})]})]})})})]})]})},yU=()=>r.jsxs(HB,{children:[r.jsx(bU,{}),r.jsx(i$,{})]}),Nt="http://localhost:8080/api/v1/manager",w3="http://localhost:8080/api/v1/accounting";function vU(){try{return JSON.parse(localStorage.getItem("user")||"{}").branchId||null}catch{return null}}const S3=async()=>{try{return(await me.get(`${Nt}/stats`)).data}catch(e){throw console.error("Error fetching dashboard stats:",e),e}},jU=async(e="weekly")=>{try{return(await me.get(`${Nt}/sales?period=${e}`)).data}catch(t){throw console.error("Error fetching sales data:",t),t}},NU=async(e="daily")=>{try{return(await me.get(`${Nt}/sales/analytics?period=${e}`)).data}catch(t){throw console.error("Error fetching sales analytics:",t),t}},E3=async(e=5)=>{try{return(await me.get(`${Nt}/products/top-selling?limit=${e}`)).data}catch(t){throw console.error("Error fetching top selling products:",t),t}},hE=async(e={})=>{try{const t=new URLSearchParams;return e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate),(await me.get(`${Nt}/reports/sales?${t}`)).data}catch(t){throw console.error("Error fetching sales reports:",t),t}},wU=async(e={})=>{try{const t=new URLSearchParams;return e.startDate&&t.append("startDate",e.startDate),e.endDate&&t.append("endDate",e.endDate),(await me.get(`${Nt}/reports/sales/summary-by-terminal?${t}`)).data}catch(t){throw console.error("Error fetching sales summary by terminal:",t),t}},SU=async()=>{try{return(await me.get(`${Nt}/grns/pending`)).data}catch(e){throw console.error("Error fetching pending GRNs:",e),e}},EU=async()=>{try{return(await me.get(`${Nt}/inventory/alerts`)).data}catch(e){throw console.error("Error fetching stock alerts:",e),e}},CU=async()=>{try{return(await me.get(`${Nt}/inventory/expiry-alerts`)).data}catch(e){throw console.error("Error fetching expiry alerts:",e),e}},C3=async()=>{try{return(await me.get(`${Nt}/staff/summary`)).data}catch(e){throw console.error("Error fetching staff summary:",e),e}},AU=async()=>{try{return(await me.get(`${Nt}/alerts`)).data}catch(e){throw console.error("Error fetching branch alerts:",e),e}},kU=async(e=null)=>{try{const t=e?`?status=${e}`:"";return(await me.get(`${Nt}/approvals${t}`)).data}catch(t){throw console.error("Error fetching approvals:",t),t}},_U=async(e,t,n="",a=null)=>{try{return(await me.patch(`${Nt}/approvals/${e}`,{status:t,notes:n,role:a})).data}catch(l){throw console.error("Error updating approval status:",l),l}},Fv=async(e="PENDING")=>{try{return(await me.get(`${Nt}/approvals?status=${e}`)).data}catch(t){throw console.error("Error fetching user registrations:",t),t}},xE=async(e,t,n)=>{try{return(await me.patch(`${Nt}/approvals/${e}`,{status:t,role:n})).data}catch(a){throw console.error("Error updating registration status:",a),a}},OU=async()=>{try{return(await me.get(`${Nt}/reports/approvals/pdf`,{responseType:"blob"})).data}catch(e){throw console.error("Error downloading PDF:",e),e}},TU=async(e,t)=>{try{const n=new URLSearchParams;return e&&n.append("startDate",e),t&&n.append("endDate",t),(await me.get(`${Nt}/reports/sales/pdf?${n}`,{responseType:"blob"})).data}catch(n){throw console.error("Error downloading sales report PDF:",n),n}},RU=async(e=100)=>{try{return(await me.get(`${Nt}/reports/activity-log/pdf?limit=${e}`,{responseType:"blob"})).data}catch(t){throw console.error("Error downloading activity log PDF:",t),t}},PU=async()=>{try{return(await me.get(`${Nt}/reports/loyalty/pdf`,{responseType:"blob"})).data}catch(e){throw console.error("Error downloading loyalty customers PDF:",e),e}},DU=async(e=null,t={})=>{try{const n=new URLSearchParams,a=e||vU()||1;n.append("branchId",a),t.limit&&n.append("limit",t.limit),t.type&&n.append("type",t.type),t.date&&n.append("date",t.date),t.userId&&n.append("userId",t.userId);const l=await me.get(`${Nt}/activity/recent?${n}`);return l.data.data||l.data}catch(n){throw console.error("Error fetching activity log:",n),n}},A3=async()=>{try{return(await me.get(`${w3}/chart-of-accounts`)).data}catch(e){throw console.error("Error fetching chart of accounts:",e),e}},MU=async(e="monthly",t={})=>{try{const n=new URLSearchParams;return n.append("period",e),t.from&&n.append("from",t.from),t.to&&n.append("to",t.to),(await me.get(`${w3}/profit-loss?${n}`)).data}catch(n){throw console.error("Error fetching P&L report:",n),n}},IU=async()=>{try{return(await me.get(`${Nt}/customers/stats`)).data}catch(e){throw console.error("Error fetching loyalty stats:",e),e}},LU=async()=>{try{return(await me.get(`${Nt}/customers`)).data}catch(e){throw console.error("Error fetching loyalty customers:",e),e}},pE=async(e,t)=>{try{return(await me.put(`${Nt}/customers/${e}`,t)).data}catch(n){throw console.error("Error updating customer:",n),n}},zU=async(e,t,n)=>{try{return(await me.post(`${Nt}/customers/${e}/adjust-points`,{points:t,reason:n})).data}catch(a){throw console.error("Error adjusting points:",a),a}},k3=async()=>{try{return(await me.get(`${Nt}/customers/active-tier-rules`)).data}catch(e){throw console.error("Error fetching tier rules:",e),e}},BU=async e=>{try{return(await me.post(`${Nt}/customers/active-tier-rules`,e)).data}catch(t){throw console.error("Error updating tier rules:",t),t}},$U=async e=>{try{return(await me.get(`${Nt}/customers/${e}/sales`)).data}catch(t){throw console.error("Error fetching customer sales:",t),t}},UU="w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 text-gray-300 hover:bg-gray-800 hover:translate-x-1 hover:text-white relative",qU="bg-brand-primary text-white shadow-lg translate-x-1",Dn=({to:e,icon:t,label:n,end:a=!1,badge:l})=>r.jsxs(kv,{to:e,end:a,className:({isActive:o})=>`${UU} ${o?qU:""}`,children:[r.jsx(t,{size:18,className:"shrink-0 transition-transform duration-200"}),r.jsx("span",{className:"text-sm truncate flex-1",children:n}),l>0&&r.jsx("span",{className:"ml-auto bg-red-500 text-white text-[10px] font-bold px-2 py-0.5 rounded-full shadow-lg animate-pulse",children:l})]});function FU(){ca();const[e,t]=g.useState(0),n=localStorage.getItem("user");let a="User",l="Staff",o="Branch";if(n)try{const d=JSON.parse(n);a=d.username||d.name||"User",l=d.role||d.userRole||"Staff",o=d.branchName||"Main Branch"}catch(d){console.error("Error parsing user:",d)}return g.useEffect(()=>{const d=async()=>{try{const m=await Fv("PENDING");Array.isArray(m)&&t(m.length)}catch(m){console.error("Failed to fetch pending count sidebar",m)}};d();const u=setInterval(d,3e4);return()=>clearInterval(u)},[]),r.jsxs("aside",{className:"w-72 shrink-0 bg-gray-900 text-white h-screen flex flex-col min-h-0",children:[r.jsxs("div",{className:"p-6 border-b border-gray-800",children:[r.jsxs("h1",{className:"text-xl font-bold",children:["SmartRetail ",r.jsx("span",{className:"text-emerald-400",children:"Pro"})]}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:l==="ADMIN"?"Admin Dashboard":"Manager Dashboard"})]}),r.jsxs("nav",{className:"sidebar-scroll p-4 flex-1 min-h-0 overflow-y-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Overview"}),r.jsx("div",{className:"mt-2 space-y-1",children:r.jsx(Dn,{to:"/manager",end:!0,icon:Uk,label:"Dashboard"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Operations"}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsx(Dn,{to:"/manager/approvals",icon:et,label:"Approvals"}),r.jsx(Dn,{to:"/manager/branch-activity",icon:Ma,label:"Branch Activity"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Sales"}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsx(Dn,{to:"/manager/sales",icon:qn,label:"Sales"}),r.jsx(Dn,{to:"/manager/loyalty",icon:Tt,label:"Loyalty & Customers"}),r.jsx(Dn,{to:"/manager/sales-reports",icon:ci,label:"Sales Reports"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Accounting"}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsx(Dn,{to:"/manager/chart-of-accounts",icon:nL,label:"Chart of Accounts"}),r.jsx(Dn,{to:"/manager/journal-entry",icon:N7,label:"Journal Entry"}),r.jsx(Dn,{to:"/manager/profit-loss",icon:Hn,label:"Profit & Loss"}),r.jsx(Dn,{to:"/manager/manager-payments",icon:p8,label:"GRN Payments"})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Staff"}),r.jsx("div",{className:"mt-2 space-y-1",children:r.jsx(Dn,{to:"/manager/user-registrations",icon:d8,label:"User Registrations",badge:e})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Reports"}),r.jsx("div",{className:"mt-2 space-y-1",children:r.jsx(Dn,{to:"/manager/reports",icon:sa,label:"Other Reports"})})]})]})]})}function HU({isOpen:e,onClose:t,onConfirm:n,title:a,message:l,type:o="info"}){return e?r.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden scale-100 animate-in zoom-in-95 duration-200",children:[r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-3 rounded-full ${o==="danger"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:r.jsx(Bt,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:a}),r.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-relaxed",children:l})]})]})}),r.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:n,className:`px-4 py-2 text-sm font-semibold text-white rounded-lg shadow-sm transition-all active:scale-95 ${o==="danger"?"bg-red-600 hover:bg-red-700 shadow-red-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:"Sign Out"})]})]})}):null}function KU(){const[e,t]=g.useState(new Date),n=ca(),a=ru()||{},{unreadCount:l=0,setIsOpen:o=()=>{},addNotification:d=()=>{}}=a,[u,m]=g.useState(0),[h,x]=g.useState(!1);g.useEffect(()=>{let C=!0;const O=async()=>{try{const _=await Fv("PENDING");if(!C)return;const T=Array.isArray(_)?_.length:0;m(P=>{if(T>P&&P!==0){const L=T-P;d&&d("info","New Registration Request",`${L} new user(s) waiting for approval`)}return T})}catch{}};O();const k=setInterval(O,3e4);return()=>{C=!1,clearInterval(k)}},[d]);const p=localStorage.getItem("user");let b="Main Branch",N="User",v=1;const[w,S]=g.useState("");if(p)try{const C=JSON.parse(p);b=C.branchName||"Main Branch",N=C.username||C.name||"User",v=C.branchId||1}catch{}g.useEffect(()=>{const C=setInterval(()=>t(new Date),1e3);return()=>clearInterval(C)},[]),g.useEffect(()=>{(async()=>{try{const k=(await bl.getBranches())?.find(T=>String(T.id??T.branchId)===String(v)),_=k?.name||k?.branchName;_?S(_):b&&S(b)}catch{b&&S(b)}})()},[v,b]);const A=()=>{x(!0)},E=()=>{localStorage.clear(),n("/login")};return r.jsxs(r.Fragment,{children:[r.jsx(HU,{isOpen:h,onClose:()=>x(!1),onConfirm:E,title:"Sign Out",message:"Are you sure you want to sign out of the Manager Dashboard?",type:"danger"}),r.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center px-6 gap-4 shrink-0 shadow-sm",children:[r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"Manager Dashboard"}),r.jsxs("span",{className:"text-xs text-slate-500 uppercase font-bold tracking-wider flex items-center gap-1",children:[r.jsx(Dv,{className:"w-3 h-3"})," ",w||"Main Branch"]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>n("/inventory"),className:"hidden md:flex group items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-blue-50 rounded-lg text-sm font-medium transition-all duration-300 hover:shadow-md hover:border-blue-200 border border-transparent",children:[r.jsx(Ov,{size:16,className:"text-slate-600 group-hover:text-blue-600 transition-colors"}),r.jsx("span",{className:"text-slate-700 group-hover:text-blue-700 transition-colors",children:"Inventory"})]}),r.jsxs("button",{onClick:()=>o(!0),className:"p-2 rounded-full hover:bg-slate-100 transition-colors text-slate-600 relative outline-none focus:ring-2 focus:ring-brand/20",children:[r.jsx(ko,{className:"w-5 h-5"}),l>0&&r.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),r.jsxs("div",{className:"text-right leading-tight hidden sm:block",children:[r.jsx("div",{className:"font-mono text-lg font-bold tracking-wider text-slate-700",children:e.toLocaleTimeString("en-US",{hour12:!1})}),r.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 bg-white/80 backdrop-blur-md rounded-full border border-blue-100 shadow-sm hover:shadow-md transition-all duration-300 group cursor-default",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white text-xs font-bold shadow-md transform group-hover:scale-105 transition-transform duration-300 ring-2 ring-blue-100",children:N.charAt(0).toUpperCase()}),r.jsx("span",{className:"text-sm font-semibold text-slate-700 group-hover:text-blue-700 transition-colors max-w-[100px] truncate",children:N})]}),r.jsxs("button",{type:"button",onClick:A,className:"group relative overflow-hidden flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 hover:border-red-100 text-slate-700 hover:text-red-600 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md hover:-translate-y-0.5",children:[r.jsx("div",{className:"absolute inset-0 bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(fi,{size:18,className:"relative z-10 transition-transform duration-300 group-hover:scale-110 group-hover:-translate-x-0.5"}),r.jsx("span",{className:"relative z-10 hidden sm:inline text-sm font-semibold",children:"Sign Out"})]})]})]})]})}function GU(){return r.jsxs("div",{className:"h-screen flex bg-slate-50 overflow-hidden",children:[r.jsx(FU,{}),r.jsxs("div",{className:"flex-1 min-w-0 flex flex-col overflow-hidden",children:[r.jsx(KU,{}),r.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:r.jsx(ZM,{})})]})]})}const gE={primary:"border-brand-primary",secondary:"border-brand-secondary",warning:"border-brand-warning",danger:"border-brand-danger",success:"border-brand-success"},bE={primary:"bg-blue-100 text-blue-600",secondary:"bg-indigo-100 text-indigo-600",warning:"bg-yellow-100 text-yellow-600",danger:"bg-red-100 text-red-600",success:"bg-green-100 text-green-600"},VU={dollar:gn,money:gn,revenue:gn,sales:qn,cart:qn,trending:Hn,growth:Hn,users:vs,staff:vs,package:Tt,inventory:Tt,alert:lr,check:et,clock:Rr,pending:Rr,chart:ci,analytics:ci};function YU({title:e,value:t,icon:n="chart",tone:a="primary"}){const l=gE[a]||gE.primary,o=bE[a]||bE.primary,d=typeof t=="object"?JSON.stringify(t):t,u=VU[n?.toLowerCase()]||ci;return r.jsx("div",{className:`bg-white border border-brand-border border-l-4 ${l} rounded-2xl shadow-sm p-5 h-full min-h-[110px] hover:shadow-md transition-shadow duration-200`,children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"text-sm text-brand-muted leading-tight",children:e}),r.jsx("div",{className:"mt-2 text-2xl font-extrabold leading-none",children:d})]}),r.jsx("div",{className:`w-12 h-12 rounded-2xl ${o} grid place-items-center shrink-0 shadow-sm`,children:r.jsx(u,{size:24,strokeWidth:2.5})})]})})}function QU({open:e,onClose:t,onSave:n,initialTarget:a}){const[l,o]=g.useState(a??25e4);if(g.useEffect(()=>{e&&o(a??25e4)},[e,a]),!e)return null;const d=()=>{const u=Number(l);if(!Number.isFinite(u)||u<=0)return alert("Enter a valid target amount");n(Math.round(u)),t()};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"w-full max-w-md rounded-2xl bg-white p-5 shadow-xl border border-brand-border",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"font-extrabold",children:"Set Todays Sales Target"}),r.jsx("button",{type:"button",className:"px-3 py-1 rounded-lg bg-slate-100 border border-brand-border hover:bg-slate-200",onClick:t,children:""})]}),r.jsxs("p",{className:"mt-2 text-sm text-brand-muted",children:["Enter the target amount for ",r.jsx("b",{children:"today"}),"."]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("label",{className:"text-sm font-semibold",children:"Target (LKR)"}),r.jsx("input",{type:"number",value:l,onChange:u=>o(u.target.value),className:"mt-2 w-full px-4 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",placeholder:"250000"})]}),r.jsxs("div",{className:"mt-5 flex items-center justify-end gap-2",children:[r.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl bg-slate-100 border border-brand-border hover:bg-slate-200 font-semibold",onClick:t,children:"Cancel"}),r.jsx("button",{type:"button",className:"px-4 py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-semibold",onClick:d,children:"Save Target"})]})]})})}function WU(){const[e,t]=g.useState(25e4),[n,a]=g.useState(0),[l,o]=g.useState(!1),[d,u]=g.useState(!0),h=(()=>{try{const S=localStorage.getItem("user");if(S){const A=JSON.parse(S);return A.branchName||A.branch||"Main Branch"}}catch(S){console.error("Error parsing user data:",S)}return"Main Branch"})(),x=new Date().toISOString().slice(0,10),p=`srp_target_${h.replace(/\s+/g,"_")}_${x}`;g.useEffect(()=>{(async()=>{try{u(!0);const A=await S3();if(A&&A.length>0){const E=A.find(C=>C.title?.includes("Sales"));if(E){const C=parseInt(E.value?.replace(/\D/g,"")||0);a(C)}}}catch(A){console.error("Error fetching stats:",A)}finally{u(!1)}})()},[]),g.useEffect(()=>{const S=localStorage.getItem(p);if(S){const A=Number(S);Number.isFinite(A)&&A>0&&t(A)}},[p]);const b=g.useMemo(()=>e?Math.min(100,Math.round(n/e*100)):0,[n,e]),N=n.toLocaleString(),v=e.toLocaleString(),w=S=>{t(S),localStorage.setItem(p,String(S))};return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm text-brand-muted",children:"Today's Target"}),r.jsxs("div",{className:"mt-1 text-xl font-extrabold",children:["LKR ",N," / ",v]}),r.jsxs("div",{className:"mt-1 text-xs text-brand-muted",children:["You're at ",r.jsxs("span",{className:"font-bold text-brand-primary",children:[b,"%"]})," of today's sales goal."]})]}),r.jsx("button",{type:"button",className:"text-xs px-3 py-1 rounded-full bg-slate-100 border border-brand-border font-bold hover:bg-slate-200 transition",onClick:()=>o(!0),children:" Set Target"})]}),r.jsx("div",{className:"mt-4 h-3 w-full rounded-full bg-slate-100 overflow-hidden border border-brand-border",children:r.jsx("div",{className:"h-full bg-brand-primary",style:{width:`${b}%`}})}),r.jsx(QU,{open:l,onClose:()=>o(!1),onSave:w,initialTarget:e})]})}function _3(e){var t,n,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var l=e.length;for(t=0;t<l;t++)e[t]&&(n=_3(e[t]))&&(a&&(a+=" "),a+=n)}else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}function bt(){for(var e,t,n=0,a="",l=arguments.length;n<l;n++)(e=arguments[n])&&(t=_3(e))&&(a&&(a+=" "),a+=t);return a}var XU=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Hv(e){if(typeof e!="string")return!1;var t=XU;return t.includes(e)}var ZU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],JU=new Set(ZU);function O3(e){return typeof e!="string"?!1:JU.has(e)}function T3(e){return typeof e=="string"&&e.startsWith("data-")}function za(e){if(typeof e!="object"||e===null)return{};var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(O3(n)||T3(n))&&(t[n]=e[n]);return t}function nu(e){if(e==null)return null;if(g.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return za(t)}return typeof e=="object"&&!Array.isArray(e)?za(e):null}function $r(e){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(O3(n)||T3(n)||Hv(n))&&(t[n]=e[n]);return t}function e9(e){return e==null?null:g.isValidElement(e)?$r(e.props):typeof e=="object"&&!Array.isArray(e)?$r(e):null}var t9=["children","width","height","viewBox","className","style","title","desc"];function jy(){return jy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},jy.apply(null,arguments)}function r9(e,t){if(e==null)return{};var n,a,l=n9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function n9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var R3=g.forwardRef((e,t)=>{var{children:n,width:a,height:l,viewBox:o,className:d,style:u,title:m,desc:h}=e,x=r9(e,t9),p=o||{width:a,height:l,x:0,y:0},b=bt("recharts-surface",d);return g.createElement("svg",jy({},$r(x),{className:b,width:a,height:l,style:u,viewBox:"".concat(p.x," ").concat(p.y," ").concat(p.width," ").concat(p.height),ref:t}),g.createElement("title",null,m),g.createElement("desc",null,h),n)}),a9=["children","className"];function Ny(){return Ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ny.apply(null,arguments)}function s9(e,t){if(e==null)return{};var n,a,l=l9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function l9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Gn=g.forwardRef((e,t)=>{var{children:n,className:a}=e,l=s9(e,a9),o=bt("recharts-layer",a);return g.createElement("g",Ny({className:o},$r(l),{ref:t}),n)}),i9=g.createContext(null);function wt(e){return function(){return e}}const P3=Math.cos,ah=Math.sin,ha=Math.sqrt,sh=Math.PI,cx=2*sh,wy=Math.PI,Sy=2*wy,Wl=1e-6,o9=Sy-Wl;function D3(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function c9(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return D3;const n=10**t;return function(a){this._+=a[0];for(let l=1,o=a.length;l<o;++l)this._+=Math.round(arguments[l]*n)/n+a[l]}}class d9{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?D3:c9(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,a,l){this._append`Q${+t},${+n},${this._x1=+a},${this._y1=+l}`}bezierCurveTo(t,n,a,l,o,d){this._append`C${+t},${+n},${+a},${+l},${this._x1=+o},${this._y1=+d}`}arcTo(t,n,a,l,o){if(t=+t,n=+n,a=+a,l=+l,o=+o,o<0)throw new Error(`negative radius: ${o}`);let d=this._x1,u=this._y1,m=a-t,h=l-n,x=d-t,p=u-n,b=x*x+p*p;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(b>Wl)if(!(Math.abs(p*m-h*x)>Wl)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let N=a-d,v=l-u,w=m*m+h*h,S=N*N+v*v,A=Math.sqrt(w),E=Math.sqrt(b),C=o*Math.tan((wy-Math.acos((w+b-S)/(2*A*E)))/2),O=C/E,k=C/A;Math.abs(O-1)>Wl&&this._append`L${t+O*x},${n+O*p}`,this._append`A${o},${o},0,0,${+(p*N>x*v)},${this._x1=t+k*m},${this._y1=n+k*h}`}}arc(t,n,a,l,o,d){if(t=+t,n=+n,a=+a,d=!!d,a<0)throw new Error(`negative radius: ${a}`);let u=a*Math.cos(l),m=a*Math.sin(l),h=t+u,x=n+m,p=1^d,b=d?l-o:o-l;this._x1===null?this._append`M${h},${x}`:(Math.abs(this._x1-h)>Wl||Math.abs(this._y1-x)>Wl)&&this._append`L${h},${x}`,a&&(b<0&&(b=b%Sy+Sy),b>o9?this._append`A${a},${a},0,1,${p},${t-u},${n-m}A${a},${a},0,1,${p},${this._x1=h},${this._y1=x}`:b>Wl&&this._append`A${a},${a},0,${+(b>=wy)},${p},${this._x1=t+a*Math.cos(o)},${this._y1=n+a*Math.sin(o)}`)}rect(t,n,a,l){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${a=+a}v${+l}h${-a}Z`}toString(){return this._}}function Kv(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const a=Math.floor(n);if(!(a>=0))throw new RangeError(`invalid digits: ${n}`);t=a}return e},()=>new d9(t)}function Gv(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function M3(e){this._context=e}M3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function dx(e){return new M3(e)}function I3(e){return e[0]}function L3(e){return e[1]}function z3(e,t){var n=wt(!0),a=null,l=dx,o=null,d=Kv(u);e=typeof e=="function"?e:e===void 0?I3:wt(e),t=typeof t=="function"?t:t===void 0?L3:wt(t);function u(m){var h,x=(m=Gv(m)).length,p,b=!1,N;for(a==null&&(o=l(N=d())),h=0;h<=x;++h)!(h<x&&n(p=m[h],h,m))===b&&((b=!b)?o.lineStart():o.lineEnd()),b&&o.point(+e(p,h,m),+t(p,h,m));if(N)return o=null,N+""||null}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:wt(+m),u):e},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:wt(+m),u):t},u.defined=function(m){return arguments.length?(n=typeof m=="function"?m:wt(!!m),u):n},u.curve=function(m){return arguments.length?(l=m,a!=null&&(o=l(a)),u):l},u.context=function(m){return arguments.length?(m==null?a=o=null:o=l(a=m),u):a},u}function Gf(e,t,n){var a=null,l=wt(!0),o=null,d=dx,u=null,m=Kv(h);e=typeof e=="function"?e:e===void 0?I3:wt(+e),t=typeof t=="function"?t:wt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?L3:wt(+n);function h(p){var b,N,v,w=(p=Gv(p)).length,S,A=!1,E,C=new Array(w),O=new Array(w);for(o==null&&(u=d(E=m())),b=0;b<=w;++b){if(!(b<w&&l(S=p[b],b,p))===A)if(A=!A)N=b,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),v=b-1;v>=N;--v)u.point(C[v],O[v]);u.lineEnd(),u.areaEnd()}A&&(C[b]=+e(S,b,p),O[b]=+t(S,b,p),u.point(a?+a(S,b,p):C[b],n?+n(S,b,p):O[b]))}if(E)return u=null,E+""||null}function x(){return z3().defined(l).curve(d).context(o)}return h.x=function(p){return arguments.length?(e=typeof p=="function"?p:wt(+p),a=null,h):e},h.x0=function(p){return arguments.length?(e=typeof p=="function"?p:wt(+p),h):e},h.x1=function(p){return arguments.length?(a=p==null?null:typeof p=="function"?p:wt(+p),h):a},h.y=function(p){return arguments.length?(t=typeof p=="function"?p:wt(+p),n=null,h):t},h.y0=function(p){return arguments.length?(t=typeof p=="function"?p:wt(+p),h):t},h.y1=function(p){return arguments.length?(n=p==null?null:typeof p=="function"?p:wt(+p),h):n},h.lineX0=h.lineY0=function(){return x().x(e).y(t)},h.lineY1=function(){return x().x(e).y(n)},h.lineX1=function(){return x().x(a).y(t)},h.defined=function(p){return arguments.length?(l=typeof p=="function"?p:wt(!!p),h):l},h.curve=function(p){return arguments.length?(d=p,o!=null&&(u=d(o)),h):d},h.context=function(p){return arguments.length?(p==null?o=u=null:u=d(o=p),h):o},h}class B3{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function u9(e){return new B3(e,!0)}function f9(e){return new B3(e,!1)}const Vv={draw(e,t){const n=ha(t/sh);e.moveTo(n,0),e.arc(0,0,n,0,cx)}},m9={draw(e,t){const n=ha(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},$3=ha(1/3),h9=$3*2,x9={draw(e,t){const n=ha(t/h9),a=n*$3;e.moveTo(0,-n),e.lineTo(a,0),e.lineTo(0,n),e.lineTo(-a,0),e.closePath()}},p9={draw(e,t){const n=ha(t),a=-n/2;e.rect(a,a,n,n)}},g9=.8908130915292852,U3=ah(sh/10)/ah(7*sh/10),b9=ah(cx/10)*U3,y9=-P3(cx/10)*U3,v9={draw(e,t){const n=ha(t*g9),a=b9*n,l=y9*n;e.moveTo(0,-n),e.lineTo(a,l);for(let o=1;o<5;++o){const d=cx*o/5,u=P3(d),m=ah(d);e.lineTo(m*n,-u*n),e.lineTo(u*a-m*l,m*a+u*l)}e.closePath()}},_g=ha(3),j9={draw(e,t){const n=-ha(t/(_g*3));e.moveTo(0,n*2),e.lineTo(-_g*n,-n),e.lineTo(_g*n,-n),e.closePath()}},Mn=-.5,In=ha(3)/2,Ey=1/ha(12),N9=(Ey/2+1)*3,w9={draw(e,t){const n=ha(t/N9),a=n/2,l=n*Ey,o=a,d=n*Ey+n,u=-o,m=d;e.moveTo(a,l),e.lineTo(o,d),e.lineTo(u,m),e.lineTo(Mn*a-In*l,In*a+Mn*l),e.lineTo(Mn*o-In*d,In*o+Mn*d),e.lineTo(Mn*u-In*m,In*u+Mn*m),e.lineTo(Mn*a+In*l,Mn*l-In*a),e.lineTo(Mn*o+In*d,Mn*d-In*o),e.lineTo(Mn*u+In*m,Mn*m-In*u),e.closePath()}};function S9(e,t){let n=null,a=Kv(l);e=typeof e=="function"?e:wt(e||Vv),t=typeof t=="function"?t:wt(t===void 0?64:+t);function l(){let o;if(n||(n=o=a()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return l.type=function(o){return arguments.length?(e=typeof o=="function"?o:wt(o),l):e},l.size=function(o){return arguments.length?(t=typeof o=="function"?o:wt(+o),l):t},l.context=function(o){return arguments.length?(n=o??null,l):n},l}function lh(){}function ih(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function q3(e){this._context=e}q3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ih(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ih(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function E9(e){return new q3(e)}function F3(e){this._context=e}F3.prototype={areaStart:lh,areaEnd:lh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ih(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function C9(e){return new F3(e)}function H3(e){this._context=e}H3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,a):this._context.moveTo(n,a);break;case 3:this._point=4;default:ih(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function A9(e){return new H3(e)}function K3(e){this._context=e}K3.prototype={areaStart:lh,areaEnd:lh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function k9(e){return new K3(e)}function yE(e){return e<0?-1:1}function vE(e,t,n){var a=e._x1-e._x0,l=t-e._x1,o=(e._y1-e._y0)/(a||l<0&&-0),d=(n-e._y1)/(l||a<0&&-0),u=(o*l+d*a)/(a+l);return(yE(o)+yE(d))*Math.min(Math.abs(o),Math.abs(d),.5*Math.abs(u))||0}function jE(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Og(e,t,n){var a=e._x0,l=e._y0,o=e._x1,d=e._y1,u=(o-a)/3;e._context.bezierCurveTo(a+u,l+u*t,o-u,d-u*n,o,d)}function oh(e){this._context=e}oh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Og(this,this._t0,jE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Og(this,jE(this,n=vE(this,e,t)),n);break;default:Og(this,this._t0,n=vE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function G3(e){this._context=new V3(e)}(G3.prototype=Object.create(oh.prototype)).point=function(e,t){oh.prototype.point.call(this,t,e)};function V3(e){this._context=e}V3.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,a,l,o){this._context.bezierCurveTo(t,e,a,n,o,l)}};function _9(e){return new oh(e)}function O9(e){return new G3(e)}function Y3(e){this._context=e}Y3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var a=NE(e),l=NE(t),o=0,d=1;d<n;++o,++d)this._context.bezierCurveTo(a[0][o],l[0][o],a[1][o],l[1][o],e[d],t[d]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function NE(e){var t,n=e.length-1,a,l=new Array(n),o=new Array(n),d=new Array(n);for(l[0]=0,o[0]=2,d[0]=e[0]+2*e[1],t=1;t<n-1;++t)l[t]=1,o[t]=4,d[t]=4*e[t]+2*e[t+1];for(l[n-1]=2,o[n-1]=7,d[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)a=l[t]/o[t-1],o[t]-=a,d[t]-=a*d[t-1];for(l[n-1]=d[n-1]/o[n-1],t=n-2;t>=0;--t)l[t]=(d[t]-l[t+1])/o[t];for(o[n-1]=(e[n]+l[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-l[t+1];return[l,o]}function T9(e){return new Y3(e)}function ux(e,t){this._context=e,this._t=t}ux.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function R9(e){return new ux(e,.5)}function P9(e){return new ux(e,0)}function D9(e){return new ux(e,1)}function pi(e,t){if((d=e.length)>1)for(var n=1,a,l,o=e[t[0]],d,u=o.length;n<d;++n)for(l=o,o=e[t[n]],a=0;a<u;++a)o[a][1]+=o[a][0]=isNaN(l[a][1])?l[a][0]:l[a][1]}function Cy(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function M9(e,t){return e[t]}function I9(e){const t=[];return t.key=e,t}function L9(){var e=wt([]),t=Cy,n=pi,a=M9;function l(o){var d=Array.from(e.apply(this,arguments),I9),u,m=d.length,h=-1,x;for(const p of o)for(u=0,++h;u<m;++u)(d[u][h]=[0,+a(p,d[u].key,h,o)]).data=p;for(u=0,x=Gv(t(d));u<m;++u)d[x[u]].index=u;return n(d,x),d}return l.keys=function(o){return arguments.length?(e=typeof o=="function"?o:wt(Array.from(o)),l):e},l.value=function(o){return arguments.length?(a=typeof o=="function"?o:wt(+o),l):a},l.order=function(o){return arguments.length?(t=o==null?Cy:typeof o=="function"?o:wt(Array.from(o)),l):t},l.offset=function(o){return arguments.length?(n=o??pi,l):n},l}function z9(e,t){if((a=e.length)>0){for(var n,a,l=0,o=e[0].length,d;l<o;++l){for(d=n=0;n<a;++n)d+=e[n][l][1]||0;if(d)for(n=0;n<a;++n)e[n][l][1]/=d}pi(e,t)}}function B9(e,t){if((l=e.length)>0){for(var n=0,a=e[t[0]],l,o=a.length;n<o;++n){for(var d=0,u=0;d<l;++d)u+=e[d][n][1]||0;a[n][1]+=a[n][0]=-u/2}pi(e,t)}}function $9(e,t){if(!(!((d=e.length)>0)||!((o=(l=e[t[0]]).length)>0))){for(var n=0,a=1,l,o,d;a<o;++a){for(var u=0,m=0,h=0;u<d;++u){for(var x=e[t[u]],p=x[a][1]||0,b=x[a-1][1]||0,N=(p-b)/2,v=0;v<u;++v){var w=e[t[v]],S=w[a][1]||0,A=w[a-1][1]||0;N+=S-A}m+=p,h+=N*p}l[a-1][1]+=l[a-1][0]=n,m&&(n-=h/m)}l[a-1][1]+=l[a-1][0]=n,pi(e,t)}}var Tg={},Rg={},wE;function U9(){return wE||(wE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==="__proto__"}e.isUnsafeProperty=t})(Rg)),Rg}var Pg={},SE;function Q3(){return SE||(SE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}e.isDeepKey=t})(Pg)),Pg}var Dg={},EE;function Yv(){return EE||(EE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="string"||typeof n=="symbol"?n:Object.is(n?.valueOf?.(),-0)?"-0":String(n)}e.toKey=t})(Dg)),Dg}var Mg={},Ig={},CE;function q9(){return CE||(CE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(t).join(",");const a=String(n);return a==="0"&&Object.is(Number(n),-0)?"-0":a}e.toString=t})(Ig)),Ig}var AE;function Qv(){return AE||(AE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=q9(),n=Yv();function a(l){if(Array.isArray(l))return l.map(n.toKey);if(typeof l=="symbol")return[l];l=t.toString(l);const o=[],d=l.length;if(d===0)return o;let u=0,m="",h="",x=!1;for(l.charCodeAt(0)===46&&(o.push(""),u++);u<d;){const p=l[u];h?p==="\\"&&u+1<d?(u++,m+=l[u]):p===h?h="":m+=p:x?p==='"'||p==="'"?h=p:p==="]"?(x=!1,o.push(m),m=""):m+=p:p==="["?(x=!0,m&&(o.push(m),m="")):p==="."?m&&(o.push(m),m=""):m+=p,u++}return m&&o.push(m),o}e.toPath=a})(Mg)),Mg}var kE;function Wv(){return kE||(kE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U9(),n=Q3(),a=Yv(),l=Qv();function o(u,m,h){if(u==null)return h;switch(typeof m){case"string":{if(t.isUnsafeProperty(m))return h;const x=u[m];return x===void 0?n.isDeepKey(m)?o(u,l.toPath(m),h):h:x}case"number":case"symbol":{typeof m=="number"&&(m=a.toKey(m));const x=u[m];return x===void 0?h:x}default:{if(Array.isArray(m))return d(u,m,h);if(Object.is(m?.valueOf(),-0)?m="-0":m=String(m),t.isUnsafeProperty(m))return h;const x=u[m];return x===void 0?h:x}}}function d(u,m,h){if(m.length===0)return h;let x=u;for(let p=0;p<m.length;p++){if(x==null||t.isUnsafeProperty(m[p]))return h;x=x[m[p]]}return x===void 0?h:x}e.get=o})(Tg)),Tg}var Lg,_E;function F9(){return _E||(_E=1,Lg=Wv().get),Lg}var H9=F9();const Mo=qa(H9);var K9=4;function gl(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K9,n=10**t,a=Math.round(e*n)/n;return Object.is(a,-0)?0:a}function Lt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];return e.reduce((l,o,d)=>{var u=n[d-1];return typeof u=="string"?l+u+o:u!==void 0?l+gl(u)+o:l+o},"")}var xn=e=>e===0?0:e>0?1:-1,Ba=e=>typeof e=="number"&&e!=+e,gi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Re=e=>(typeof e=="number"||e instanceof Number)&&!Ba(e),$a=e=>Re(e)||typeof e=="string",G9=0,_d=e=>{var t=++G9;return"".concat(e||"").concat(t)},la=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Re(t)&&typeof t!="string")return a;var o;if(gi(t)){if(n==null)return a;var d=t.indexOf("%");o=n*parseFloat(t.slice(0,d))/100}else o=+t;return Ba(o)&&(o=a),l&&n!=null&&o>n&&(o=n),o},W3=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},a=0;a<t;a++)if(!n[String(e[a])])n[String(e[a])]=!0;else return!0;return!1};function zt(e,t,n){return Re(e)&&Re(t)?gl(e+n*(t-e)):t}function X3(e,t,n){if(!(!e||!e.length))return e.find(a=>a&&(typeof t=="function"?t(a):Mo(a,t))===n)}var Pt=e=>e===null||typeof e>"u",au=e=>Pt(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function Ra(e){return e!=null}function Ei(){}var V9=["type","size","sizeType"];function Ay(){return Ay=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ay.apply(null,arguments)}function OE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function TE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OE(Object(n),!0).forEach(function(a){Y9(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Y9(e,t,n){return(t=Q9(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q9(e){var t=W9(e,"string");return typeof t=="symbol"?t:t+""}function W9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X9(e,t){if(e==null)return{};var n,a,l=Z9(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Z9(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Z3={symbolCircle:Vv,symbolCross:m9,symbolDiamond:x9,symbolSquare:p9,symbolStar:v9,symbolTriangle:j9,symbolWye:w9},J9=Math.PI/180,eq=e=>{var t="symbol".concat(au(e));return Z3[t]||Vv},tq=(e,t,n)=>{if(t==="area")return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var a=18*J9;return 1.25*e*e*(Math.tan(a)-Math.tan(a*2)*Math.tan(a)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},rq=(e,t)=>{Z3["symbol".concat(au(e))]=t},J3=e=>{var{type:t="circle",size:n=64,sizeType:a="area"}=e,l=X9(e,V9),o=TE(TE({},l),{},{type:t,size:n,sizeType:a}),d="circle";typeof t=="string"&&(d=t);var u=()=>{var b=eq(d),N=S9().type(b).size(tq(n,a,d)),v=N();if(v!==null)return v},{className:m,cx:h,cy:x}=o,p=$r(o);return Re(h)&&Re(x)&&Re(n)?g.createElement("path",Ay({},p,{className:bt("recharts-symbols",m),transform:"translate(".concat(h,", ").concat(x,")"),d:u()})):null};J3.registerSymbol=rq;var e_=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,Xv=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var n=e;if(g.isValidElement(e)&&(n=e.props),typeof n!="object"&&typeof n!="function")return null;var a={};return Object.keys(n).forEach(l=>{Hv(l)&&(a[l]=(o=>n[l](n,o)))}),a},nq=(e,t,n)=>a=>(e(t,n,a),null),Zv=(e,t,n)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var a=null;return Object.keys(e).forEach(l=>{var o=e[l];Hv(l)&&typeof o=="function"&&(a||(a={}),a[l]=nq(o,t,n))}),a};function RE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function aq(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RE(Object(n),!0).forEach(function(a){sq(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RE(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function sq(e,t,n){return(t=lq(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lq(e){var t=iq(e,"string");return typeof t=="symbol"?t:t+""}function iq(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function rn(e,t){var n=aq({},e),a=t,l=Object.keys(t),o=l.reduce((d,u)=>(d[u]===void 0&&a[u]!==void 0&&(d[u]=a[u]),d),n);return o}var zg={},Bg={},PE;function oq(){return PE||(PE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){const l=new Map;for(let o=0;o<n.length;o++){const d=n[o],u=a(d,o,n);l.has(u)||l.set(u,d)}return Array.from(l.values())}e.uniqBy=t})(Bg)),Bg}var $g={},DE;function cq(){return DE||(DE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return function(...l){return n.apply(this,l.slice(0,a))}}e.ary=t})($g)),$g}var Ug={},ME;function t_(){return ME||(ME=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n}e.identity=t})(Ug)),Ug}var qg={},Fg={},Hg={},IE;function dq(){return IE||(IE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Number.isSafeInteger(n)&&n>=0}e.isLength=t})(Hg)),Hg}var LE;function Jv(){return LE||(LE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dq();function n(a){return a!=null&&typeof a!="function"&&t.isLength(a.length)}e.isArrayLike=n})(Fg)),Fg}var Kg={},zE;function uq(){return zE||(zE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="object"&&n!==null}e.isObjectLike=t})(Kg)),Kg}var BE;function fq(){return BE||(BE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Jv(),n=uq();function a(l){return n.isObjectLike(l)&&t.isArrayLike(l)}e.isArrayLikeObject=a})(qg)),qg}var Gg={},Vg={},$E;function mq(){return $E||($E=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Wv();function n(a){return function(l){return t.get(l,a)}}e.property=n})(Vg)),Vg}var Yg={},Qg={},Wg={},Xg={},UE;function r_(){return UE||(UE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n!==null&&(typeof n=="object"||typeof n=="function")}e.isObject=t})(Xg)),Xg}var Zg={},qE;function n_(){return qE||(qE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null||typeof n!="object"&&typeof n!="function"}e.isPrimitive=t})(Zg)),Zg}var Jg={},FE;function a_(){return FE||(FE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a){return n===a||Number.isNaN(n)&&Number.isNaN(a)}e.isEqualsSameValueZero=t})(Jg)),Jg}var HE;function hq(){return HE||(HE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=r_(),n=n_(),a=a_();function l(x,p,b){return typeof b!="function"?l(x,p,()=>{}):o(x,p,function N(v,w,S,A,E,C){const O=b(v,w,S,A,E,C);return O!==void 0?!!O:o(v,w,N,C)},new Map)}function o(x,p,b,N){if(p===x)return!0;switch(typeof p){case"object":return d(x,p,b,N);case"function":return Object.keys(p).length>0?o(x,{...p},b,N):a.isEqualsSameValueZero(x,p);default:return t.isObject(x)?typeof p=="string"?p==="":!0:a.isEqualsSameValueZero(x,p)}}function d(x,p,b,N){if(p==null)return!0;if(Array.isArray(p))return m(x,p,b,N);if(p instanceof Map)return u(x,p,b,N);if(p instanceof Set)return h(x,p,b,N);const v=Object.keys(p);if(x==null||n.isPrimitive(x))return v.length===0;if(v.length===0)return!0;if(N?.has(p))return N.get(p)===x;N?.set(p,x);try{for(let w=0;w<v.length;w++){const S=v[w];if(!n.isPrimitive(x)&&!(S in x)||p[S]===void 0&&x[S]!==void 0||p[S]===null&&x[S]!==null||!b(x[S],p[S],S,x,p,N))return!1}return!0}finally{N?.delete(p)}}function u(x,p,b,N){if(p.size===0)return!0;if(!(x instanceof Map))return!1;for(const[v,w]of p.entries()){const S=x.get(v);if(b(S,w,v,x,p,N)===!1)return!1}return!0}function m(x,p,b,N){if(p.length===0)return!0;if(!Array.isArray(x))return!1;const v=new Set;for(let w=0;w<p.length;w++){const S=p[w];let A=!1;for(let E=0;E<x.length;E++){if(v.has(E))continue;const C=x[E];let O=!1;if(b(C,S,w,x,p,N)&&(O=!0),O){v.add(E),A=!0;break}}if(!A)return!1}return!0}function h(x,p,b,N){return p.size===0?!0:x instanceof Set?m([...x],[...p],b,N):!1}e.isMatchWith=l,e.isSetMatch=h})(Wg)),Wg}var KE;function s_(){return KE||(KE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=hq();function n(a,l){return t.isMatchWith(a,l,()=>{})}e.isMatch=n})(Qg)),Qg}var eb={},tb={},rb={},GE;function xq(){return GE||(GE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Object.getOwnPropertySymbols(n).filter(a=>Object.prototype.propertyIsEnumerable.call(n,a))}e.getSymbols=t})(rb)),rb}var nb={},VE;function ej(){return VE||(VE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}e.getTag=t})(nb)),nb}var ab={},YE;function l_(){return YE||(YE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",n="[object String]",a="[object Number]",l="[object Boolean]",o="[object Arguments]",d="[object Symbol]",u="[object Date]",m="[object Map]",h="[object Set]",x="[object Array]",p="[object Function]",b="[object ArrayBuffer]",N="[object Object]",v="[object Error]",w="[object DataView]",S="[object Uint8Array]",A="[object Uint8ClampedArray]",E="[object Uint16Array]",C="[object Uint32Array]",O="[object BigUint64Array]",k="[object Int8Array]",_="[object Int16Array]",T="[object Int32Array]",P="[object BigInt64Array]",L="[object Float32Array]",z="[object Float64Array]";e.argumentsTag=o,e.arrayBufferTag=b,e.arrayTag=x,e.bigInt64ArrayTag=P,e.bigUint64ArrayTag=O,e.booleanTag=l,e.dataViewTag=w,e.dateTag=u,e.errorTag=v,e.float32ArrayTag=L,e.float64ArrayTag=z,e.functionTag=p,e.int16ArrayTag=_,e.int32ArrayTag=T,e.int8ArrayTag=k,e.mapTag=m,e.numberTag=a,e.objectTag=N,e.regexpTag=t,e.setTag=h,e.stringTag=n,e.symbolTag=d,e.uint16ArrayTag=E,e.uint32ArrayTag=C,e.uint8ArrayTag=S,e.uint8ClampedArrayTag=A})(ab)),ab}var sb={},QE;function pq(){return QE||(QE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}e.isTypedArray=t})(sb)),sb}var WE;function i_(){return WE||(WE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=xq(),n=ej(),a=l_(),l=n_(),o=pq();function d(x,p){return u(x,void 0,x,new Map,p)}function u(x,p,b,N=new Map,v=void 0){const w=v?.(x,p,b,N);if(w!==void 0)return w;if(l.isPrimitive(x))return x;if(N.has(x))return N.get(x);if(Array.isArray(x)){const S=new Array(x.length);N.set(x,S);for(let A=0;A<x.length;A++)S[A]=u(x[A],A,b,N,v);return Object.hasOwn(x,"index")&&(S.index=x.index),Object.hasOwn(x,"input")&&(S.input=x.input),S}if(x instanceof Date)return new Date(x.getTime());if(x instanceof RegExp){const S=new RegExp(x.source,x.flags);return S.lastIndex=x.lastIndex,S}if(x instanceof Map){const S=new Map;N.set(x,S);for(const[A,E]of x)S.set(A,u(E,A,b,N,v));return S}if(x instanceof Set){const S=new Set;N.set(x,S);for(const A of x)S.add(u(A,void 0,b,N,v));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(x))return x.subarray();if(o.isTypedArray(x)){const S=new(Object.getPrototypeOf(x)).constructor(x.length);N.set(x,S);for(let A=0;A<x.length;A++)S[A]=u(x[A],A,b,N,v);return S}if(x instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&x instanceof SharedArrayBuffer)return x.slice(0);if(x instanceof DataView){const S=new DataView(x.buffer.slice(0),x.byteOffset,x.byteLength);return N.set(x,S),m(S,x,b,N,v),S}if(typeof File<"u"&&x instanceof File){const S=new File([x],x.name,{type:x.type});return N.set(x,S),m(S,x,b,N,v),S}if(typeof Blob<"u"&&x instanceof Blob){const S=new Blob([x],{type:x.type});return N.set(x,S),m(S,x,b,N,v),S}if(x instanceof Error){const S=new x.constructor;return N.set(x,S),S.message=x.message,S.name=x.name,S.stack=x.stack,S.cause=x.cause,m(S,x,b,N,v),S}if(x instanceof Boolean){const S=new Boolean(x.valueOf());return N.set(x,S),m(S,x,b,N,v),S}if(x instanceof Number){const S=new Number(x.valueOf());return N.set(x,S),m(S,x,b,N,v),S}if(x instanceof String){const S=new String(x.valueOf());return N.set(x,S),m(S,x,b,N,v),S}if(typeof x=="object"&&h(x)){const S=Object.create(Object.getPrototypeOf(x));return N.set(x,S),m(S,x,b,N,v),S}return x}function m(x,p,b=x,N,v){const w=[...Object.keys(p),...t.getSymbols(p)];for(let S=0;S<w.length;S++){const A=w[S],E=Object.getOwnPropertyDescriptor(x,A);(E==null||E.writable)&&(x[A]=u(p[A],A,b,N,v))}}function h(x){switch(n.getTag(x)){case a.argumentsTag:case a.arrayTag:case a.arrayBufferTag:case a.dataViewTag:case a.booleanTag:case a.dateTag:case a.float32ArrayTag:case a.float64ArrayTag:case a.int8ArrayTag:case a.int16ArrayTag:case a.int32ArrayTag:case a.mapTag:case a.numberTag:case a.objectTag:case a.regexpTag:case a.setTag:case a.stringTag:case a.symbolTag:case a.uint8ArrayTag:case a.uint8ClampedArrayTag:case a.uint16ArrayTag:case a.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=d,e.cloneDeepWithImpl=u,e.copyProperties=m})(tb)),tb}var XE;function gq(){return XE||(XE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i_();function n(a){return t.cloneDeepWithImpl(a,void 0,a,new Map,void 0)}e.cloneDeep=n})(eb)),eb}var ZE;function bq(){return ZE||(ZE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s_(),n=gq();function a(l){return l=n.cloneDeep(l),o=>t.isMatch(o,l)}e.matches=a})(Yg)),Yg}var lb={},ib={},ob={},JE;function yq(){return JE||(JE=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=i_(),n=ej(),a=l_();function l(o,d){return t.cloneDeepWith(o,(u,m,h,x)=>{const p=d?.(u,m,h,x);if(p!==void 0)return p;if(typeof o=="object"){if(n.getTag(o)===a.objectTag&&typeof o.constructor!="function"){const b={};return x.set(o,b),t.copyProperties(b,o,h,x),b}switch(Object.prototype.toString.call(o)){case a.numberTag:case a.stringTag:case a.booleanTag:{const b=new o.constructor(o?.valueOf());return t.copyProperties(b,o),b}case a.argumentsTag:{const b={};return t.copyProperties(b,o),b.length=o.length,b[Symbol.iterator]=o[Symbol.iterator],b}default:return}}})}e.cloneDeepWith=l})(ob)),ob}var eC;function vq(){return eC||(eC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=yq();function n(a){return t.cloneDeepWith(a)}e.cloneDeep=n})(ib)),ib}var cb={},db={},tC;function o_(){return tC||(tC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function n(a,l=Number.MAX_SAFE_INTEGER){switch(typeof a){case"number":return Number.isInteger(a)&&a>=0&&a<l;case"symbol":return!1;case"string":return t.test(a)}}e.isIndex=n})(db)),db}var ub={},rC;function jq(){return rC||(rC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ej();function n(a){return a!==null&&typeof a=="object"&&t.getTag(a)==="[object Arguments]"}e.isArguments=n})(ub)),ub}var nC;function Nq(){return nC||(nC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Q3(),n=o_(),a=jq(),l=Qv();function o(d,u){let m;if(Array.isArray(u)?m=u:typeof u=="string"&&t.isDeepKey(u)&&d?.[u]==null?m=l.toPath(u):m=[u],m.length===0)return!1;let h=d;for(let x=0;x<m.length;x++){const p=m[x];if((h==null||!Object.hasOwn(h,p))&&!((Array.isArray(h)||a.isArguments(h))&&n.isIndex(p)&&p<h.length))return!1;h=h[p]}return!0}e.has=o})(cb)),cb}var aC;function wq(){return aC||(aC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=s_(),n=Yv(),a=vq(),l=Wv(),o=Nq();function d(u,m){switch(typeof u){case"object":{Object.is(u?.valueOf(),-0)&&(u="-0");break}case"number":{u=n.toKey(u);break}}return m=a.cloneDeep(m),function(h){const x=l.get(h,u);return x===void 0?o.has(h,u):m===void 0?x===void 0:t.isMatch(x,m)}}e.matchesProperty=d})(lb)),lb}var sC;function Sq(){return sC||(sC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=t_(),n=mq(),a=bq(),l=wq();function o(d){if(d==null)return t.identity;switch(typeof d){case"function":return d;case"object":return Array.isArray(d)&&d.length===2?l.matchesProperty(d[0],d[1]):a.matches(d);case"string":case"symbol":case"number":return n.property(d)}}e.iteratee=o})(Gg)),Gg}var lC;function Eq(){return lC||(lC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=oq(),n=cq(),a=t_(),l=fq(),o=Sq();function d(u,m=a.identity){return l.isArrayLikeObject(u)?t.uniqBy(Array.from(u),n.ary(o.iteratee(m),1)):[]}e.uniqBy=d})(zg)),zg}var fb,iC;function Cq(){return iC||(iC=1,fb=Eq().uniqBy),fb}var Aq=Cq();const oC=qa(Aq);function kq(e,t,n){return t===!0?oC(e,n):typeof t=="function"?oC(e,t):e}var mb={exports:{}},hb={},xb={exports:{}},pb={};var cC;function _q(){if(cC)return pb;cC=1;var e=qo();function t(p,b){return p===b&&(p!==0||1/p===1/b)||p!==p&&b!==b}var n=typeof Object.is=="function"?Object.is:t,a=e.useState,l=e.useEffect,o=e.useLayoutEffect,d=e.useDebugValue;function u(p,b){var N=b(),v=a({inst:{value:N,getSnapshot:b}}),w=v[0].inst,S=v[1];return o(function(){w.value=N,w.getSnapshot=b,m(w)&&S({inst:w})},[p,N,b]),l(function(){return m(w)&&S({inst:w}),p(function(){m(w)&&S({inst:w})})},[p]),d(N),N}function m(p){var b=p.getSnapshot;p=p.value;try{var N=b();return!n(p,N)}catch{return!0}}function h(p,b){return b()}var x=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return pb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:x,pb}var dC;function Oq(){return dC||(dC=1,xb.exports=_q()),xb.exports}var uC;function Tq(){if(uC)return hb;uC=1;var e=qo(),t=Oq();function n(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var a=typeof Object.is=="function"?Object.is:n,l=t.useSyncExternalStore,o=e.useRef,d=e.useEffect,u=e.useMemo,m=e.useDebugValue;return hb.useSyncExternalStoreWithSelector=function(h,x,p,b,N){var v=o(null);if(v.current===null){var w={hasValue:!1,value:null};v.current=w}else w=v.current;v=u(function(){function A(_){if(!E){if(E=!0,C=_,_=b(_),N!==void 0&&w.hasValue){var T=w.value;if(N(T,_))return O=T}return O=_}if(T=O,a(C,_))return T;var P=b(_);return N!==void 0&&N(T,P)?(C=_,T):(C=_,O=P)}var E=!1,C,O,k=p===void 0?null:p;return[function(){return A(x())},k===null?void 0:function(){return A(k())}]},[x,p,b,N]);var S=l(h,v[0],v[1]);return d(function(){w.hasValue=!0,w.value=S},[S]),m(S),S},hb}var fC;function Rq(){return fC||(fC=1,mb.exports=Tq()),mb.exports}var Pq=Rq(),tj=g.createContext(null),Dq=e=>e,Ht=()=>{var e=g.useContext(tj);return e?e.store.dispatch:Dq},Am=()=>{},Mq=()=>Am,Iq=(e,t)=>e===t;function Me(e){var t=g.useContext(tj),n=g.useMemo(()=>t?a=>{if(a!=null)return e(a)}:Am,[t,e]);return Pq.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:Mq,t?t.store.getState:Am,t?t.store.getState:Am,n,Iq)}function Lq(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function zq(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Bq(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(a=>typeof a=="function"?`function ${a.name||"unnamed"}()`:typeof a).join(", ");throw new TypeError(`${t}[${n}]`)}}var mC=e=>Array.isArray(e)?e:[e];function $q(e){const t=Array.isArray(e[0])?e[0]:e;return Bq(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Uq(e,t){const n=[],{length:a}=e;for(let l=0;l<a;l++)n.push(e[l].apply(null,t));return n}var qq=class{constructor(e){this.value=e}deref(){return this.value}},Fq=typeof WeakRef<"u"?WeakRef:qq,Hq=0,hC=1;function Vf(){return{s:Hq,v:void 0,o:null,p:null}}function c_(e,t={}){let n=Vf();const{resultEqualityCheck:a}=t;let l,o=0;function d(){let u=n;const{length:m}=arguments;for(let p=0,b=m;p<b;p++){const N=arguments[p];if(typeof N=="function"||typeof N=="object"&&N!==null){let v=u.o;v===null&&(u.o=v=new WeakMap);const w=v.get(N);w===void 0?(u=Vf(),v.set(N,u)):u=w}else{let v=u.p;v===null&&(u.p=v=new Map);const w=v.get(N);w===void 0?(u=Vf(),v.set(N,u)):u=w}}const h=u;let x;if(u.s===hC)x=u.v;else if(x=e.apply(null,arguments),o++,a){const p=l?.deref?.()??l;p!=null&&a(p,x)&&(x=p,o!==0&&o--),l=typeof x=="object"&&x!==null||typeof x=="function"?new Fq(x):x}return h.s=hC,h.v=x,x}return d.clearCache=()=>{n=Vf(),d.resetResultsCount()},d.resultsCount=()=>o,d.resetResultsCount=()=>{o=0},d}function Kq(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,a=(...l)=>{let o=0,d=0,u,m={},h=l.pop();typeof h=="object"&&(m=h,h=l.pop()),Lq(h,`createSelector expects an output function after the inputs, but received: [${typeof h}]`);const x={...n,...m},{memoize:p,memoizeOptions:b=[],argsMemoize:N=c_,argsMemoizeOptions:v=[]}=x,w=mC(b),S=mC(v),A=$q(l),E=p(function(){return o++,h.apply(null,arguments)},...w),C=N(function(){d++;const k=Uq(A,arguments);return u=E.apply(null,k),u},...S);return Object.assign(C,{resultFunc:h,memoizedResultFunc:E,dependencies:A,dependencyRecomputations:()=>d,resetDependencyRecomputations:()=>{d=0},lastResult:()=>u,recomputations:()=>o,resetRecomputations:()=>{o=0},memoize:p,argsMemoize:N})};return Object.assign(a,{withTypes:()=>a}),a}var ce=Kq(c_),Gq=Object.assign((e,t=ce)=>{zq(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),a=n.map(o=>e[o]);return t(a,(...o)=>o.reduce((d,u,m)=>(d[n[m]]=u,d),{}))},{withTypes:()=>Gq}),gb={},bb={},yb={},xC;function Vq(){return xC||(xC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(a){return typeof a=="symbol"?1:a===null?2:a===void 0?3:a!==a?4:0}const n=(a,l,o)=>{if(a!==l){const d=t(a),u=t(l);if(d===u&&d===0){if(a<l)return o==="desc"?1:-1;if(a>l)return o==="desc"?-1:1}return o==="desc"?u-d:d-u}return 0};e.compareValues=n})(yb)),yb}var vb={},jb={},pC;function d_(){return pC||(pC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"||n instanceof Symbol}e.isSymbol=t})(jb)),jb}var gC;function Yq(){return gC||(gC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d_(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function l(o,d){return Array.isArray(o)?!1:typeof o=="number"||typeof o=="boolean"||o==null||t.isSymbol(o)?!0:typeof o=="string"&&(a.test(o)||!n.test(o))||d!=null&&Object.hasOwn(d,o)}e.isKey=l})(vb)),vb}var bC;function Qq(){return bC||(bC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Vq(),n=Yq(),a=Qv();function l(o,d,u,m){if(o==null)return[];u=m?void 0:u,Array.isArray(o)||(o=Object.values(o)),Array.isArray(d)||(d=d==null?[null]:[d]),d.length===0&&(d=[null]),Array.isArray(u)||(u=u==null?[]:[u]),u=u.map(N=>String(N));const h=(N,v)=>{let w=N;for(let S=0;S<v.length&&w!=null;++S)w=w[v[S]];return w},x=(N,v)=>v==null||N==null?v:typeof N=="object"&&"key"in N?Object.hasOwn(v,N.key)?v[N.key]:h(v,N.path):typeof N=="function"?N(v):Array.isArray(N)?h(v,N):typeof v=="object"?v[N]:v,p=d.map(N=>(Array.isArray(N)&&N.length===1&&(N=N[0]),N==null||typeof N=="function"||Array.isArray(N)||n.isKey(N)?N:{key:N,path:a.toPath(N)}));return o.map(N=>({original:N,criteria:p.map(v=>x(v,N))})).slice().sort((N,v)=>{for(let w=0;w<p.length;w++){const S=t.compareValues(N.criteria[w],v.criteria[w],u[w]);if(S!==0)return S}return 0}).map(N=>N.original)}e.orderBy=l})(bb)),bb}var Nb={},yC;function Wq(){return yC||(yC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a=1){const l=[],o=Math.floor(a),d=(u,m)=>{for(let h=0;h<u.length;h++){const x=u[h];Array.isArray(x)&&m<o?d(x,m+1):l.push(x)}};return d(n,0),l}e.flatten=t})(Nb)),Nb}var wb={},vC;function u_(){return vC||(vC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=o_(),n=Jv(),a=r_(),l=a_();function o(d,u,m){return a.isObject(m)&&(typeof u=="number"&&n.isArrayLike(m)&&t.isIndex(u)&&u<m.length||typeof u=="string"&&u in m)?l.isEqualsSameValueZero(m[u],d):!1}e.isIterateeCall=o})(wb)),wb}var jC;function Xq(){return jC||(jC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Qq(),n=Wq(),a=u_();function l(o,...d){const u=d.length;return u>1&&a.isIterateeCall(o,d[0],d[1])?d=[]:u>2&&a.isIterateeCall(d[0],d[1],d[2])&&(d=[d[0]]),t.orderBy(o,n.flatten(d),["asc"])}e.sortBy=l})(gb)),gb}var Sb,NC;function Zq(){return NC||(NC=1,Sb=Xq().sortBy),Sb}var Jq=Zq();const fx=qa(Jq);var f_=e=>e.legend.settings,eF=e=>e.legend.size,tF=e=>e.legend.payload;ce([tF,f_],(e,t)=>{var{itemSorter:n}=t,a=e.flat(1);return n?fx(a,n):a});var Yf=1;function rF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,n]=g.useState({height:0,left:0,top:0,width:0}),a=g.useCallback(l=>{if(l!=null){var o=l.getBoundingClientRect(),d={height:o.height,left:o.left,top:o.top,width:o.width};(Math.abs(d.height-t.height)>Yf||Math.abs(d.left-t.left)>Yf||Math.abs(d.top-t.top)>Yf||Math.abs(d.width-t.width)>Yf)&&n({height:d.height,left:d.left,top:d.top,width:d.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,a]}function Sr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var nF=typeof Symbol=="function"&&Symbol.observable||"@@observable",wC=nF,Eb=()=>Math.random().toString(36).substring(7).split("").join("."),aF={INIT:`@@redux/INIT${Eb()}`,REPLACE:`@@redux/REPLACE${Eb()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Eb()}`},ch=aF;function rj(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function m_(e,t,n){if(typeof e!="function")throw new Error(Sr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Sr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Sr(1));return n(m_)(e,t)}let a=e,l=t,o=new Map,d=o,u=0,m=!1;function h(){d===o&&(d=new Map,o.forEach((S,A)=>{d.set(A,S)}))}function x(){if(m)throw new Error(Sr(3));return l}function p(S){if(typeof S!="function")throw new Error(Sr(4));if(m)throw new Error(Sr(5));let A=!0;h();const E=u++;return d.set(E,S),function(){if(A){if(m)throw new Error(Sr(6));A=!1,h(),d.delete(E),o=null}}}function b(S){if(!rj(S))throw new Error(Sr(7));if(typeof S.type>"u")throw new Error(Sr(8));if(typeof S.type!="string")throw new Error(Sr(17));if(m)throw new Error(Sr(9));try{m=!0,l=a(l,S)}finally{m=!1}return(o=d).forEach(E=>{E()}),S}function N(S){if(typeof S!="function")throw new Error(Sr(10));a=S,b({type:ch.REPLACE})}function v(){const S=p;return{subscribe(A){if(typeof A!="object"||A===null)throw new Error(Sr(11));function E(){const O=A;O.next&&O.next(x())}return E(),{unsubscribe:S(E)}},[wC](){return this}}}return b({type:ch.INIT}),{dispatch:b,subscribe:p,getState:x,replaceReducer:N,[wC]:v}}function sF(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:ch.INIT})>"u")throw new Error(Sr(12));if(typeof n(void 0,{type:ch.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Sr(13))})}function h_(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const d=t[o];typeof e[d]=="function"&&(n[d]=e[d])}const a=Object.keys(n);let l;try{sF(n)}catch(o){l=o}return function(d={},u){if(l)throw l;let m=!1;const h={};for(let x=0;x<a.length;x++){const p=a[x],b=n[p],N=d[p],v=b(N,u);if(typeof v>"u")throw u&&u.type,new Error(Sr(14));h[p]=v,m=m||v!==N}return m=m||a.length!==Object.keys(d).length,m?h:d}}function dh(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...a)=>t(n(...a)))}function lF(...e){return t=>(n,a)=>{const l=t(n,a);let o=()=>{throw new Error(Sr(15))};const d={getState:l.getState,dispatch:(m,...h)=>o(m,...h)},u=e.map(m=>m(d));return o=dh(...u)(l.dispatch),{...l,dispatch:o}}}function x_(e){return rj(e)&&"type"in e&&typeof e.type=="string"}var p_=Symbol.for("immer-nothing"),SC=Symbol.for("immer-draftable"),Ur=Symbol.for("immer-state");function ea(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var pn=Object,Io=pn.getPrototypeOf,uh="constructor",mx="prototype",ky="configurable",fh="enumerable",km="writable",Od="value",js=e=>!!e&&!!e[Ur];function ia(e){return e?g_(e)||xx(e)||!!e[SC]||!!e[uh]?.[SC]||px(e)||gx(e):!1}var iF=pn[mx][uh].toString(),EC=new WeakMap;function g_(e){if(!e||!nj(e))return!1;const t=Io(e);if(t===null||t===pn[mx])return!0;const n=pn.hasOwnProperty.call(t,uh)&&t[uh];if(n===Object)return!0;if(!vo(n))return!1;let a=EC.get(n);return a===void 0&&(a=Function.toString.call(n),EC.set(n,a)),a===iF}function hx(e,t,n=!0){su(e)===0?(n?Reflect.ownKeys(e):pn.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function su(e){const t=e[Ur];return t?t.type_:xx(e)?1:px(e)?2:gx(e)?3:0}var CC=(e,t,n=su(e))=>n===2?e.has(t):pn[mx].hasOwnProperty.call(e,t),_y=(e,t,n=su(e))=>n===2?e.get(t):e[t],mh=(e,t,n,a=su(e))=>{a===2?e.set(t,n):a===3?e.add(n):e[t]=n};function oF(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var xx=Array.isArray,px=e=>e instanceof Map,gx=e=>e instanceof Set,nj=e=>typeof e=="object",vo=e=>typeof e=="function",Cb=e=>typeof e=="boolean";function cF(e){const t=+e;return Number.isInteger(t)&&String(t)===e}var ds=e=>e.copy_||e.base_,aj=e=>e.modified_?e.copy_:e.base_;function Oy(e,t){if(px(e))return new Map(e);if(gx(e))return new Set(e);if(xx(e))return Array[mx].slice.call(e);const n=g_(e);if(t===!0||t==="class_only"&&!n){const a=pn.getOwnPropertyDescriptors(e);delete a[Ur];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const d=l[o],u=a[d];u[km]===!1&&(u[km]=!0,u[ky]=!0),(u.get||u.set)&&(a[d]={[ky]:!0,[km]:!0,[fh]:u[fh],[Od]:e[d]})}return pn.create(Io(e),a)}else{const a=Io(e);if(a!==null&&n)return{...e};const l=pn.create(a);return pn.assign(l,e)}}function sj(e,t=!1){return bx(e)||js(e)||!ia(e)||(su(e)>1&&pn.defineProperties(e,{set:Qf,add:Qf,clear:Qf,delete:Qf}),pn.freeze(e),t&&hx(e,(n,a)=>{sj(a,!0)},!1)),e}function dF(){ea(2)}var Qf={[Od]:dF};function bx(e){return e===null||!nj(e)?!0:pn.isFrozen(e)}var hh="MapSet",Ty="Patches",AC="ArrayMethods",b_={};function bi(e){const t=b_[e];return t||ea(0,e),t}var kC=e=>!!b_[e],Td,y_=()=>Td,uF=(e,t)=>({drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:kC(hh)?bi(hh):void 0,arrayMethodsPlugin_:kC(AC)?bi(AC):void 0});function _C(e,t){t&&(e.patchPlugin_=bi(Ty),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Ry(e){Py(e),e.drafts_.forEach(fF),e.drafts_=null}function Py(e){e===Td&&(Td=e.parent_)}var OC=e=>Td=uF(Td,e);function fF(e){const t=e[Ur];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function TC(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];if(e!==void 0&&e!==n){n[Ur].modified_&&(Ry(t),ea(4)),ia(e)&&(e=RC(t,e));const{patchPlugin_:l}=t;l&&l.generateReplacementPatches_(n[Ur].base_,e,t)}else e=RC(t,n);return mF(t,e,!0),Ry(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==p_?e:void 0}function RC(e,t){if(bx(t))return t;const n=t[Ur];if(!n)return xh(t,e.handledSet_,e);if(!yx(n,e))return t;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:a}=n;if(a)for(;a.length>0;)a.pop()(e);N_(n,e)}return n.copy_}function mF(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&sj(t,n)}function v_(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var yx=(e,t)=>e.scope_===t,hF=[];function j_(e,t,n,a){const l=ds(e),o=e.type_;if(a!==void 0&&_y(l,a,o)===t){mh(l,a,n,o);return}if(!e.draftLocations_){const u=e.draftLocations_=new Map;hx(l,(m,h)=>{if(js(h)){const x=u.get(h)||[];x.push(m),u.set(h,x)}})}const d=e.draftLocations_.get(t)??hF;for(const u of d)mh(l,u,n,o)}function xF(e,t,n){e.callbacks_.push(function(l){const o=t;if(!o||!yx(o,l))return;l.mapSetPlugin_?.fixSetContents(o);const d=aj(o);j_(e,o.draft_??o,d,n),N_(o,l)})}function N_(e,t){if(e.modified_&&!e.finalized_&&(e.type_===3||e.type_===1&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){const{patchPlugin_:a}=t;if(a){const l=a.getPath(e);l&&a.generatePatches_(e,l,t)}v_(e)}}function pF(e,t,n){const{scope_:a}=e;if(js(n)){const l=n[Ur];yx(l,a)&&l.callbacks_.push(function(){_m(e);const d=aj(l);j_(e,n,d,t)})}else ia(n)&&e.callbacks_.push(function(){const o=ds(e);e.type_===3?o.has(n)&&xh(n,a.handledSet_,a):_y(o,t,e.type_)===n&&a.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&xh(_y(e.copy_,t,e.type_),a.handledSet_,a)})}function xh(e,t,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||js(e)||t.has(e)||!ia(e)||bx(e)||(t.add(e),hx(e,(a,l)=>{if(js(l)){const o=l[Ur];if(yx(o,n)){const d=aj(o);mh(e,a,d,e.type_),v_(o)}}else ia(l)&&xh(l,t,n)})),e}function gF(e,t){const n=xx(e),a={type_:n?1:0,scope_:t?t.scope_:y_(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let l=a,o=ph;n&&(l=[a],o=Rd);const{revoke:d,proxy:u}=Proxy.revocable(l,o);return a.draft_=u,a.revoke_=d,[u,a]}var ph={get(e,t){if(t===Ur)return e;let n=e.scope_.arrayMethodsPlugin_;const a=e.type_===1&&typeof t=="string";if(a&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);const l=ds(e);if(!CC(l,t,e.type_))return bF(e,l,t);const o=l[t];if(e.finalized_||!ia(o)||a&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&cF(t))return o;if(o===Ab(e.base_,t)){_m(e);const d=e.type_===1?+t:t,u=My(e.scope_,o,e,d);return e.copy_[d]=u}return o},has(e,t){return t in ds(e)},ownKeys(e){return Reflect.ownKeys(ds(e))},set(e,t,n){const a=w_(ds(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Ab(ds(e),t),o=l?.[Ur];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_.set(t,!1),!0;if(oF(n,l)&&(n!==void 0||CC(e.base_,t,e.type_)))return!0;_m(e),Dy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_.set(t,!0),pF(e,t,n)),!0},deleteProperty(e,t){return _m(e),Ab(e.base_,t)!==void 0||t in e.base_?(e.assigned_.set(t,!1),Dy(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=ds(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{[km]:!0,[ky]:e.type_!==1||t!=="length",[fh]:a[fh],[Od]:n[t]}},defineProperty(){ea(11)},getPrototypeOf(e){return Io(e.base_)},setPrototypeOf(){ea(12)}},Rd={};for(let e in ph){let t=ph[e];Rd[e]=function(){const n=arguments;return n[0]=n[0][0],t.apply(this,n)}}Rd.deleteProperty=function(e,t){return Rd.set.call(this,e,t,void 0)};Rd.set=function(e,t,n){return ph.set.call(this,e[0],t,n,e[0])};function Ab(e,t){const n=e[Ur];return(n?ds(n):e)[t]}function bF(e,t,n){const a=w_(t,n);return a?Od in a?a[Od]:a.get?.call(e.draft_):void 0}function w_(e,t){if(!(t in e))return;let n=Io(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Io(n)}}function Dy(e){e.modified_||(e.modified_=!0,e.parent_&&Dy(e.parent_))}function _m(e){e.copy_||(e.assigned_=new Map,e.copy_=Oy(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var yF=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,a,l)=>{if(vo(n)&&!vo(a)){const d=a;a=n;const u=this;return function(h=d,...x){return u.produce(h,p=>a.call(this,p,...x))}}vo(a)||ea(6),l!==void 0&&!vo(l)&&ea(7);let o;if(ia(n)){const d=OC(this),u=My(d,n,void 0);let m=!0;try{o=a(u),m=!1}finally{m?Ry(d):Py(d)}return _C(d,l),TC(o,d)}else if(!n||!nj(n)){if(o=a(n),o===void 0&&(o=n),o===p_&&(o=void 0),this.autoFreeze_&&sj(o,!0),l){const d=[],u=[];bi(Ty).generateReplacementPatches_(n,o,{patches_:d,inversePatches_:u}),l(d,u)}return o}else ea(1,n)},this.produceWithPatches=(n,a)=>{if(vo(n))return(u,...m)=>this.produceWithPatches(u,h=>n(h,...m));let l,o;return[this.produce(n,a,(u,m)=>{l=u,o=m}),l,o]},Cb(t?.autoFreeze)&&this.setAutoFreeze(t.autoFreeze),Cb(t?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),Cb(t?.useStrictIteration)&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){ia(t)||ea(8),js(t)&&(t=aa(t));const n=OC(this),a=My(n,t,void 0);return a[Ur].isManual_=!0,Py(n),a}finishDraft(t,n){const a=t&&t[Ur];(!a||!a.isManual_)&&ea(9);const{scope_:l}=a;return _C(l,n),TC(void 0,l)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,n){let a;for(a=n.length-1;a>=0;a--){const o=n[a];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}a>-1&&(n=n.slice(a+1));const l=bi(Ty).applyPatches_;return js(t)?l(t,n):this.produce(t,o=>l(o,n))}};function My(e,t,n,a){const[l,o]=px(t)?bi(hh).proxyMap_(t,n):gx(t)?bi(hh).proxySet_(t,n):gF(t,n);return(n?.scope_??y_()).drafts_.push(l),o.callbacks_=n?.callbacks_??[],o.key_=a,n&&a!==void 0?xF(n,o,a):o.callbacks_.push(function(m){m.mapSetPlugin_?.fixSetContents(o);const{patchPlugin_:h}=m;o.modified_&&h&&h.generatePatches_(o,[],m)}),l}function aa(e){return js(e)||ea(10,e),S_(e)}function S_(e){if(!ia(e)||bx(e))return e;const t=e[Ur];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Oy(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=Oy(e,!0);return hx(n,(l,o)=>{mh(n,l,S_(o))},a),t&&(t.finalized_=!1),n}var vF=new yF,E_=vF.produce;function C_(e){return({dispatch:n,getState:a})=>l=>o=>typeof o=="function"?o(n,a,e):l(o)}var jF=C_(),NF=C_,wF=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dh:dh.apply(null,arguments)};function Vn(e,t){function n(...a){if(t){let l=t(...a);if(!l)throw new Error(bn(0));return{type:e,payload:l.payload,..."meta"in l&&{meta:l.meta},..."error"in l&&{error:l.error}}}return{type:e,payload:a[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=a=>x_(a)&&a.type===e,n}var A_=class gd extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,gd.prototype)}static get[Symbol.species](){return gd}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new gd(...t[0].concat(this)):new gd(...t.concat(this))}};function PC(e){return ia(e)?E_(e,()=>{}):e}function Wf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function SF(e){return typeof e=="boolean"}var EF=()=>function(t){const{thunk:n=!0,immutableCheck:a=!0,serializableCheck:l=!0,actionCreatorCheck:o=!0}=t??{};let d=new A_;return n&&(SF(n)?d.push(jF):d.push(NF(n.extraArgument))),d},k_="RTK_autoBatch",kt=()=>e=>({payload:e,meta:{[k_]:!0}}),DC=e=>t=>{setTimeout(t,e)},__=(e={type:"raf"})=>t=>(...n)=>{const a=t(...n);let l=!0,o=!1,d=!1;const u=new Set,m=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:DC(10):e.type==="callback"?e.queueNotification:DC(e.timeout),h=()=>{d=!1,o&&(o=!1,u.forEach(x=>x()))};return Object.assign({},a,{subscribe(x){const p=()=>l&&x(),b=a.subscribe(p);return u.add(x),()=>{b(),u.delete(x)}},dispatch(x){try{return l=!x?.meta?.[k_],o=!l,o&&(d||(d=!0,m(h))),a.dispatch(x)}finally{l=!0}}})},CF=e=>function(n){const{autoBatch:a=!0}=n??{};let l=new A_(e);return a&&l.push(__(typeof a=="object"?a:void 0)),l};function AF(e){const t=EF(),{reducer:n=void 0,middleware:a,devTools:l=!0,preloadedState:o=void 0,enhancers:d=void 0}=e||{};let u;if(typeof n=="function")u=n;else if(rj(n))u=h_(n);else throw new Error(bn(1));let m;typeof a=="function"?m=a(t):m=t();let h=dh;l&&(h=wF({trace:!1,...typeof l=="object"&&l}));const x=lF(...m),p=CF(x);let b=typeof d=="function"?d(p):p();const N=h(...b);return m_(u,o,N)}function O_(e){const t={},n=[];let a;const l={addCase(o,d){const u=typeof o=="string"?o:o.type;if(!u)throw new Error(bn(28));if(u in t)throw new Error(bn(29));return t[u]=d,l},addAsyncThunk(o,d){return d.pending&&(t[o.pending.type]=d.pending),d.rejected&&(t[o.rejected.type]=d.rejected),d.fulfilled&&(t[o.fulfilled.type]=d.fulfilled),d.settled&&n.push({matcher:o.settled,reducer:d.settled}),l},addMatcher(o,d){return n.push({matcher:o,reducer:d}),l},addDefaultCase(o){return a=o,l}};return e(l),[t,n,a]}function kF(e){return typeof e=="function"}function _F(e,t){let[n,a,l]=O_(t),o;if(kF(e))o=()=>PC(e());else{const u=PC(e);o=()=>u}function d(u=o(),m){let h=[n[m.type],...a.filter(({matcher:x})=>x(m)).map(({reducer:x})=>x)];return h.filter(x=>!!x).length===0&&(h=[l]),h.reduce((x,p)=>{if(p)if(js(x)){const N=p(x,m);return N===void 0?x:N}else{if(ia(x))return E_(x,b=>p(b,m));{const b=p(x,m);if(b===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}}return x},u)}return d.getInitialState=o,d}var OF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",TF=(e=21)=>{let t="",n=e;for(;n--;)t+=OF[Math.random()*64|0];return t},RF=Symbol.for("rtk-slice-createasyncthunk");function PF(e,t){return`${e}/${t}`}function DF({creators:e}={}){const t=e?.asyncThunk?.[RF];return function(a){const{name:l,reducerPath:o=l}=a;if(!l)throw new Error(bn(11));const d=(typeof a.reducers=="function"?a.reducers(IF()):a.reducers)||{},u=Object.keys(d),m={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(C,O){const k=typeof C=="string"?C:C.type;if(!k)throw new Error(bn(12));if(k in m.sliceCaseReducersByType)throw new Error(bn(13));return m.sliceCaseReducersByType[k]=O,h},addMatcher(C,O){return m.sliceMatchers.push({matcher:C,reducer:O}),h},exposeAction(C,O){return m.actionCreators[C]=O,h},exposeCaseReducer(C,O){return m.sliceCaseReducersByName[C]=O,h}};u.forEach(C=>{const O=d[C],k={reducerName:C,type:PF(l,C),createNotation:typeof a.reducers=="function"};zF(O)?$F(k,O,h,t):LF(k,O,h)});function x(){const[C={},O=[],k=void 0]=typeof a.extraReducers=="function"?O_(a.extraReducers):[a.extraReducers],_={...C,...m.sliceCaseReducersByType};return _F(a.initialState,T=>{for(let P in _)T.addCase(P,_[P]);for(let P of m.sliceMatchers)T.addMatcher(P.matcher,P.reducer);for(let P of O)T.addMatcher(P.matcher,P.reducer);k&&T.addDefaultCase(k)})}const p=C=>C,b=new Map,N=new WeakMap;let v;function w(C,O){return v||(v=x()),v(C,O)}function S(){return v||(v=x()),v.getInitialState()}function A(C,O=!1){function k(T){let P=T[C];return typeof P>"u"&&O&&(P=Wf(N,k,S)),P}function _(T=p){const P=Wf(b,O,()=>new WeakMap);return Wf(P,T,()=>{const L={};for(const[z,U]of Object.entries(a.selectors??{}))L[z]=MF(U,T,()=>Wf(N,T,S),O);return L})}return{reducerPath:C,getSelectors:_,get selectors(){return _(k)},selectSlice:k}}const E={name:l,reducer:w,actions:m.actionCreators,caseReducers:m.sliceCaseReducersByName,getInitialState:S,...A(o),injectInto(C,{reducerPath:O,...k}={}){const _=O??o;return C.inject({reducerPath:_,reducer:w},k),{...E,...A(_,!0)}}};return E}}function MF(e,t,n,a){function l(o,...d){let u=t(o);return typeof u>"u"&&a&&(u=n()),e(u,...d)}return l.unwrapped=e,l}var nn=DF();function IF(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function LF({type:e,reducerName:t,createNotation:n},a,l){let o,d;if("reducer"in a){if(n&&!BF(a))throw new Error(bn(17));o=a.reducer,d=a.prepare}else o=a;l.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,d?Vn(e,d):Vn(e))}function zF(e){return e._reducerDefinitionType==="asyncThunk"}function BF(e){return e._reducerDefinitionType==="reducerWithPrepare"}function $F({type:e,reducerName:t},n,a,l){if(!l)throw new Error(bn(18));const{payloadCreator:o,fulfilled:d,pending:u,rejected:m,settled:h,options:x}=n,p=l(e,o,x);a.exposeAction(t,p),d&&a.addCase(p.fulfilled,d),u&&a.addCase(p.pending,u),m&&a.addCase(p.rejected,m),h&&a.addMatcher(p.settled,h),a.exposeCaseReducer(t,{fulfilled:d||Xf,pending:u||Xf,rejected:m||Xf,settled:h||Xf})}function Xf(){}var UF="task",T_="listener",R_="completed",lj="cancelled",qF=`task-${lj}`,FF=`task-${R_}`,Iy=`${T_}-${lj}`,HF=`${T_}-${R_}`,vx=class{constructor(e){this.code=e,this.message=`${UF} ${lj} (reason: ${e})`}name="TaskAbortError";message},ij=(e,t)=>{if(typeof e!="function")throw new TypeError(bn(32))},gh=()=>{},P_=(e,t=gh)=>(e.catch(t),e),D_=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),ai=e=>{if(e.aborted)throw new vx(e.reason)};function M_(e,t){let n=gh;return new Promise((a,l)=>{const o=()=>l(new vx(e.reason));if(e.aborted){o();return}n=D_(e,o),t.finally(()=>n()).then(a,l)}).finally(()=>{n=gh})}var KF=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof vx?"cancelled":"rejected",error:n}}finally{t?.()}},bh=e=>t=>P_(M_(e,t).then(n=>(ai(e),n))),I_=e=>{const t=bh(e);return n=>t(new Promise(a=>setTimeout(a,n)))},{assign:So}=Object,MC={},jx="listenerMiddleware",GF=(e,t)=>{const n=a=>D_(e,()=>a.abort(e.reason));return(a,l)=>{ij(a);const o=new AbortController;n(o);const d=KF(async()=>{ai(e),ai(o.signal);const u=await a({pause:bh(o.signal),delay:I_(o.signal),signal:o.signal});return ai(o.signal),u},()=>o.abort(FF));return l?.autoJoin&&t.push(d.catch(gh)),{result:bh(e)(d),cancel(){o.abort(qF)}}}},VF=(e,t)=>{const n=async(a,l)=>{ai(t);let o=()=>{};const u=[new Promise((m,h)=>{let x=e({predicate:a,effect:(p,b)=>{b.unsubscribe(),m([p,b.getState(),b.getOriginalState()])}});o=()=>{x(),h()}})];l!=null&&u.push(new Promise(m=>setTimeout(m,l,null)));try{const m=await M_(t,Promise.race(u));return ai(t),m}finally{o()}};return(a,l)=>P_(n(a,l))},L_=e=>{let{type:t,actionCreator:n,matcher:a,predicate:l,effect:o}=e;if(t)l=Vn(t).match;else if(n)t=n.type,l=n.match;else if(a)l=a;else if(!l)throw new Error(bn(21));return ij(o),{predicate:l,type:t,effect:o}},z_=So(e=>{const{type:t,predicate:n,effect:a}=L_(e);return{id:TF(),effect:a,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(bn(22))}}},{withTypes:()=>z_}),IC=(e,t)=>{const{type:n,effect:a,predicate:l}=L_(t);return Array.from(e.values()).find(o=>(typeof n=="string"?o.type===n:o.predicate===l)&&o.effect===a)},Ly=e=>{e.pending.forEach(t=>{t.abort(Iy)})},YF=(e,t)=>()=>{for(const n of t.keys())Ly(n);e.clear()},LC=(e,t,n)=>{try{e(t,n)}catch(a){setTimeout(()=>{throw a},0)}},B_=So(Vn(`${jx}/add`),{withTypes:()=>B_}),QF=Vn(`${jx}/removeAll`),$_=So(Vn(`${jx}/remove`),{withTypes:()=>$_}),WF=(...e)=>{console.error(`${jx}/error`,...e)},lu=(e={})=>{const t=new Map,n=new Map,a=N=>{const v=n.get(N)??0;n.set(N,v+1)},l=N=>{const v=n.get(N)??1;v===1?n.delete(N):n.set(N,v-1)},{extra:o,onError:d=WF}=e;ij(d);const u=N=>(N.unsubscribe=()=>t.delete(N.id),t.set(N.id,N),v=>{N.unsubscribe(),v?.cancelActive&&Ly(N)}),m=N=>{const v=IC(t,N)??z_(N);return u(v)};So(m,{withTypes:()=>m});const h=N=>{const v=IC(t,N);return v&&(v.unsubscribe(),N.cancelActive&&Ly(v)),!!v};So(h,{withTypes:()=>h});const x=async(N,v,w,S)=>{const A=new AbortController,E=VF(m,A.signal),C=[];try{N.pending.add(A),a(N),await Promise.resolve(N.effect(v,So({},w,{getOriginalState:S,condition:(O,k)=>E(O,k).then(Boolean),take:E,delay:I_(A.signal),pause:bh(A.signal),extra:o,signal:A.signal,fork:GF(A.signal,C),unsubscribe:N.unsubscribe,subscribe:()=>{t.set(N.id,N)},cancelActiveListeners:()=>{N.pending.forEach((O,k,_)=>{O!==A&&(O.abort(Iy),_.delete(O))})},cancel:()=>{A.abort(Iy),N.pending.delete(A)},throwIfCancelled:()=>{ai(A.signal)}})))}catch(O){O instanceof vx||LC(d,O,{raisedBy:"effect"})}finally{await Promise.all(C),A.abort(HF),l(N),N.pending.delete(A)}},p=YF(t,n);return{middleware:N=>v=>w=>{if(!x_(w))return v(w);if(B_.match(w))return m(w.payload);if(QF.match(w)){p();return}if($_.match(w))return h(w.payload);let S=N.getState();const A=()=>{if(S===MC)throw new Error(bn(23));return S};let E;try{if(E=v(w),t.size>0){const C=N.getState(),O=Array.from(t.values());for(const k of O){let _=!1;try{_=k.predicate(w,C,S)}catch(T){_=!1,LC(d,T,{raisedBy:"predicate"})}_&&x(k,w,N,A)}}}finally{S=MC}return E},startListening:m,stopListening:h,clearListeners:p}};function bn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var XF={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},U_=nn({name:"chartLayout",initialState:XF,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,a,l,o;e.margin.top=(n=t.payload.top)!==null&&n!==void 0?n:0,e.margin.right=(a=t.payload.right)!==null&&a!==void 0?a:0,e.margin.bottom=(l=t.payload.bottom)!==null&&l!==void 0?l:0,e.margin.left=(o=t.payload.left)!==null&&o!==void 0?o:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:ZF,setLayout:JF,setChartSize:eH,setScale:tH}=U_.actions,rH=U_.reducer;function q_(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function ot(e){return Number.isFinite(e)}function Nl(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function zC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function jo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zC(Object(n),!0).forEach(function(a){nH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function nH(e,t,n){return(t=aH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function aH(e){var t=sH(e,"string");return typeof t=="symbol"?t:t+""}function sH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zt(e,t,n){return Pt(e)||Pt(t)?n:$a(t)?Mo(e,t,n):typeof t=="function"?t(e):n}var lH=(e,t,n)=>{if(t&&n){var{width:a,height:l}=n,{align:o,verticalAlign:d,layout:u}=t;if((u==="vertical"||u==="horizontal"&&d==="middle")&&o!=="center"&&Re(e[o]))return jo(jo({},e),{},{[o]:e[o]+(a||0)});if((u==="horizontal"||u==="vertical"&&o==="center")&&d!=="middle"&&Re(e[d]))return jo(jo({},e),{},{[d]:e[d]+(l||0)})}return e},Os=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",iH=(e,t)=>{if(!t||t.length!==2||!Re(t[0])||!Re(t[1]))return e;var n=Math.min(t[0],t[1]),a=Math.max(t[0],t[1]),l=[e[0],e[1]];return(!Re(e[0])||e[0]<n)&&(l[0]=n),(!Re(e[1])||e[1]>a)&&(l[1]=a),l[0]>a&&(l[0]=a),l[1]<n&&(l[1]=n),l},oH=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,d=0,u=0;u<n;++u){var m=e[u],h=m?.[l];if(h!=null){var x=h[1],p=h[0],b=Ba(x)?p:x;b>=0?(h[0]=o,o+=b,h[1]=o):(h[0]=d,d+=b,h[1]=d)}}}},cH=e=>{var t,n=e.length;if(!(n<=0)){var a=(t=e[0])===null||t===void 0?void 0:t.length;if(!(a==null||a<=0))for(var l=0;l<a;++l)for(var o=0,d=0;d<n;++d){var u=e[d],m=u?.[l];if(m!=null){var h=Ba(m[1])?m[0]:m[1];h>=0?(m[0]=o,o+=h,m[1]=o):(m[0]=0,m[1]=0)}}}},dH={sign:oH,expand:z9,none:pi,silhouette:B9,wiggle:$9,positive:cH},uH=(e,t,n)=>{var a,l=(a=dH[n])!==null&&a!==void 0?a:pi,o=L9().keys(t).value((u,m)=>Number(Zt(u,m,0))).order(Cy).offset(l),d=o(e);return d.forEach((u,m)=>{u.forEach((h,x)=>{var p=Zt(e[x],t[m],0);Array.isArray(p)&&p.length===2&&Re(p[0])&&Re(p[1])&&(h[0]=p[0],h[1]=p[1])})}),d};function fH(e){return e==null?void 0:String(e)}function BC(e){var{axis:t,ticks:n,bandSize:a,entry:l,index:o,dataKey:d}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Pt(l[t.dataKey])){var u=X3(n,"value",l[t.dataKey]);if(u)return u.coordinate+a/2}return n!=null&&n[o]?n[o].coordinate+a/2:null}var m=Zt(l,Pt(d)?t.dataKey:d),h=t.scale.map(m);return Re(h)?h:null}var $C=e=>{var{axis:t,ticks:n,offset:a,bandSize:l,entry:o,index:d}=e;if(t.type==="category")return n[d]?n[d].coordinate+a:null;var u=Zt(o,t.dataKey,t.scale.domain()[d]);if(Pt(u))return null;var m=t.scale.map(u);return Re(m)?m-l/2+a:null},mH=e=>{var{numericAxis:t}=e,n=t.scale.domain();if(t.type==="number"){var a=Math.min(n[0],n[1]),l=Math.max(n[0],n[1]);return a<=0&&l>=0?0:l<0?l:a}return n[0]},hH=e=>{var t=e.flat(2).filter(Re);return[Math.min(...t),Math.max(...t)]},xH=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],pH=(e,t,n)=>{if(e!=null)return xH(Object.keys(e).reduce((a,l)=>{var o=e[l];if(!o)return a;var{stackedData:d}=o,u=d.reduce((m,h)=>{var x=q_(h,t,n),p=hH(x);return!ot(p[0])||!ot(p[1])?m:[Math.min(m[0],p[0]),Math.max(m[1],p[1])]},[1/0,-1/0]);return[Math.min(u[0],a[0]),Math.max(u[1],a[1])]},[1/0,-1/0]))},UC=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,qC=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lo=(e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var a=e.scale.bandwidth();if(!n||a>0)return a}if(e&&t&&t.length>=2){for(var l=fx(t,x=>x.coordinate),o=1/0,d=1,u=l.length;d<u;d++){var m=l[d],h=l[d-1];o=Math.min((m?.coordinate||0)-(h?.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0};function FC(e){var{tooltipEntrySettings:t,dataKey:n,payload:a,value:l,name:o}=e;return jo(jo({},t),{},{dataKey:n,payload:a,value:l,name:o})}function Nx(e,t){if(e)return String(e);if(typeof t=="string")return t}var gH=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},bH=(e,t)=>t==="centric"?e.angle:e.radius,Ts=e=>e.layout.width,Rs=e=>e.layout.height,yH=e=>e.layout.scale,F_=e=>e.layout.margin,wx=ce(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Sx=ce(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),vH="data-recharts-item-index",jH="data-recharts-item-id",iu=60;function HC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Zf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HC(Object(n),!0).forEach(function(a){NH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function NH(e,t,n){return(t=wH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wH(e){var t=SH(e,"string");return typeof t=="symbol"?t:t+""}function SH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var EH=e=>e.brush.height;function CH(e){var t=Sx(e);return t.reduce((n,a)=>{if(a.orientation==="left"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:iu;return n+l}return n},0)}function AH(e){var t=Sx(e);return t.reduce((n,a)=>{if(a.orientation==="right"&&!a.mirror&&!a.hide){var l=typeof a.width=="number"?a.width:iu;return n+l}return n},0)}function kH(e){var t=wx(e);return t.reduce((n,a)=>a.orientation==="top"&&!a.mirror&&!a.hide?n+a.height:n,0)}function _H(e){var t=wx(e);return t.reduce((n,a)=>a.orientation==="bottom"&&!a.mirror&&!a.hide?n+a.height:n,0)}var hr=ce([Ts,Rs,F_,EH,CH,AH,kH,_H,f_,eF],(e,t,n,a,l,o,d,u,m,h)=>{var x={left:(n.left||0)+l,right:(n.right||0)+o},p={top:(n.top||0)+d,bottom:(n.bottom||0)+u},b=Zf(Zf({},p),x),N=b.bottom;b.bottom+=a,b=lH(b,m,h);var v=e-b.left-b.right,w=t-b.top-b.bottom;return Zf(Zf({brushBottom:N},b),{},{width:Math.max(v,0),height:Math.max(w,0)})}),OH=ce(hr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),oj=ce(Ts,Rs,(e,t)=>({x:0,y:0,width:e,height:t})),TH=g.createContext(null),qr=()=>g.useContext(TH)!=null,Ex=e=>e.brush,Cx=ce([Ex,hr,F_],(e,t,n)=>({height:e.height,x:Re(e.x)?e.x:t.left,y:Re(e.y)?e.y:t.top+t.height+t.brushBottom-(n?.bottom||0),width:Re(e.width)?e.width:t.width})),kb={},_b={},Ob={},KC;function RH(){return KC||(KC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n,a,{signal:l,edges:o}={}){let d,u=null;const m=o!=null&&o.includes("leading"),h=o==null||o.includes("trailing"),x=()=>{u!==null&&(n.apply(d,u),d=void 0,u=null)},p=()=>{h&&x(),w()};let b=null;const N=()=>{b!=null&&clearTimeout(b),b=setTimeout(()=>{b=null,p()},a)},v=()=>{b!==null&&(clearTimeout(b),b=null)},w=()=>{v(),d=void 0,u=null},S=()=>{x()},A=function(...E){if(l?.aborted)return;d=this,u=E;const C=b==null;N(),m&&C&&x()};return A.schedule=N,A.cancel=w,A.flush=S,l?.addEventListener("abort",w,{once:!0}),A}e.debounce=t})(Ob)),Ob}var GC;function PH(){return GC||(GC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=RH();function n(a,l=0,o={}){typeof o!="object"&&(o={});const{leading:d=!1,trailing:u=!0,maxWait:m}=o,h=Array(2);d&&(h[0]="leading"),u&&(h[1]="trailing");let x,p=null;const b=t.debounce(function(...w){x=a.apply(this,w),p=null},l,{edges:h}),N=function(...w){return m!=null&&(p===null&&(p=Date.now()),Date.now()-p>=m)?(x=a.apply(this,w),p=Date.now(),b.cancel(),b.schedule(),x):(b.apply(this,w),x)},v=()=>(b.flush(),x);return N.cancel=b.cancel,N.flush=v,N}e.debounce=n})(_b)),_b}var VC;function DH(){return VC||(VC=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PH();function n(a,l=0,o={}){const{leading:d=!0,trailing:u=!0}=o;return t.debounce(a,l,{leading:d,maxWait:l,trailing:u})}e.throttle=n})(kb)),kb}var Tb,YC;function MH(){return YC||(YC=1,Tb=DH().throttle),Tb}var IH=MH();const LH=qa(IH);var QC=function(t,n){for(var a=arguments.length,l=new Array(a>2?a-2:0),o=2;o<a;o++)l[o-2]=arguments[o];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var d=0;console.warn(n.replace(/%s/g,()=>l[d++]))}},Pa={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},H_=(e,t,n)=>{var{width:a=Pa.width,height:l=Pa.height,aspect:o,maxHeight:d}=n,u=gi(a)?e:Number(a),m=gi(l)?t:Number(l);return o&&o>0&&(u?m=u/o:m&&(u=m*o),d&&m!=null&&m>d&&(m=d)),{calculatedWidth:u,calculatedHeight:m}},zH={width:0,height:0,overflow:"visible"},BH={width:0,overflowX:"visible"},$H={height:0,overflowY:"visible"},UH={},qH=e=>{var{width:t,height:n}=e,a=gi(t),l=gi(n);return a&&l?zH:a?BH:l?$H:UH};function FH(e){var{width:t,height:n,aspect:a}=e,l=t,o=n;return l===void 0&&o===void 0?(l=Pa.width,o=Pa.height):l===void 0?l=a&&a>0?void 0:Pa.width:o===void 0&&(o=a&&a>0?void 0:Pa.height),{width:l,height:o}}function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},zy.apply(null,arguments)}function WC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function XC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WC(Object(n),!0).forEach(function(a){HH(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WC(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function HH(e,t,n){return(t=KH(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KH(e){var t=GH(e,"string");return typeof t=="symbol"?t:t+""}function GH(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K_=g.createContext(Pa.initialDimension);function VH(e){return Nl(e.width)&&Nl(e.height)}function G_(e){var{children:t,width:n,height:a}=e,l=g.useMemo(()=>({width:n,height:a}),[n,a]);return VH(l)?g.createElement(K_.Provider,{value:l},t):null}var cj=()=>g.useContext(K_),YH=g.forwardRef((e,t)=>{var{aspect:n,initialDimension:a=Pa.initialDimension,width:l,height:o,minWidth:d=Pa.minWidth,minHeight:u,maxHeight:m,children:h,debounce:x=Pa.debounce,id:p,className:b,onResize:N,style:v={}}=e,w=g.useRef(null),S=g.useRef();S.current=N,g.useImperativeHandle(t,()=>w.current);var[A,E]=g.useState({containerWidth:a.width,containerHeight:a.height}),C=g.useCallback((P,L)=>{E(z=>{var U=Math.round(P),B=Math.round(L);return z.containerWidth===U&&z.containerHeight===B?z:{containerWidth:U,containerHeight:B}})},[]);g.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Ei;var P=B=>{var ee,X=B[0];if(X!=null){var{width:be,height:G}=X.contentRect;C(be,G),(ee=S.current)===null||ee===void 0||ee.call(S,be,G)}};x>0&&(P=LH(P,x,{trailing:!0,leading:!1}));var L=new ResizeObserver(P),{width:z,height:U}=w.current.getBoundingClientRect();return C(z,U),L.observe(w.current),()=>{L.disconnect()}},[C,x]);var{containerWidth:O,containerHeight:k}=A;QC(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:_,calculatedHeight:T}=H_(O,k,{width:l,height:o,aspect:n,maxHeight:m});return QC(_!=null&&_>0||T!=null&&T>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,T,l,o,d,u,n),g.createElement("div",{id:p?"".concat(p):void 0,className:bt("recharts-responsive-container",b),style:XC(XC({},v),{},{width:l,height:o,minWidth:d,minHeight:u,maxHeight:m}),ref:w},g.createElement("div",{style:qH({width:l,height:o})},g.createElement(G_,{width:_,height:T},h)))}),dj=g.forwardRef((e,t)=>{var n=cj();if(Nl(n.width)&&Nl(n.height))return e.children;var{width:a,height:l}=FH({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:o,calculatedHeight:d}=H_(void 0,void 0,{width:a,height:l,aspect:e.aspect,maxHeight:e.maxHeight});return Re(o)&&Re(d)?g.createElement(G_,{width:o,height:d},e.children):g.createElement(YH,zy({},e,{width:a,height:l,ref:t}))});function uj(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var Ax=()=>{var e,t=qr(),n=Me(OH),a=Me(Cx),l=(e=Me(Ex))===null||e===void 0?void 0:e.padding;return!t||!a||!l?n:{width:a.width-l.left-l.right,height:a.height-l.top-l.bottom,x:l.left,y:l.top}},QH={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},WH=()=>{var e;return(e=Me(hr))!==null&&e!==void 0?e:QH},XH=()=>Me(Ts),ZH=()=>Me(Rs),mt=e=>e.layout.layoutType,Ci=()=>Me(mt),V_=()=>{var e=Ci();if(e==="horizontal"||e==="vertical")return e},Y_=e=>{var t=e.layout.layoutType;if(t==="centric"||t==="radial")return t},JH=()=>{var e=Ci();return e!==void 0},ou=e=>{var t=Ht(),n=qr(),{width:a,height:l}=e,o=cj(),d=a,u=l;return o&&(d=o.width>0?o.width:a,u=o.height>0?o.height:l),g.useEffect(()=>{!n&&Nl(d)&&Nl(u)&&t(eH({width:d,height:u}))},[t,n,d,u]),null},Q_=Symbol.for("immer-nothing"),ZC=Symbol.for("immer-draftable"),jn=Symbol.for("immer-state");function ta(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Pd=Object.getPrototypeOf;function zo(e){return!!e&&!!e[jn]}function yi(e){return e?W_(e)||Array.isArray(e)||!!e[ZC]||!!e.constructor?.[ZC]||cu(e)||_x(e):!1}var eK=Object.prototype.constructor.toString(),JC=new WeakMap;function W_(e){if(!e||typeof e!="object")return!1;const t=Object.getPrototypeOf(e);if(t===null||t===Object.prototype)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let a=JC.get(n);return a===void 0&&(a=Function.toString.call(n),JC.set(n,a)),a===eK}function yh(e,t,n=!0){kx(e)===0?(n?Reflect.ownKeys(e):Object.keys(e)).forEach(l=>{t(l,e[l],e)}):e.forEach((a,l)=>t(l,a,e))}function kx(e){const t=e[jn];return t?t.type_:Array.isArray(e)?1:cu(e)?2:_x(e)?3:0}function By(e,t){return kx(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function X_(e,t,n){const a=kx(e);a===2?e.set(t,n):a===3?e.add(n):e[t]=n}function tK(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function cu(e){return e instanceof Map}function _x(e){return e instanceof Set}function Xl(e){return e.copy_||e.base_}function $y(e,t){if(cu(e))return new Map(e);if(_x(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=W_(e);if(t===!0||t==="class_only"&&!n){const a=Object.getOwnPropertyDescriptors(e);delete a[jn];let l=Reflect.ownKeys(a);for(let o=0;o<l.length;o++){const d=l[o],u=a[d];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(a[d]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[d]})}return Object.create(Pd(e),a)}else{const a=Pd(e);if(a!==null&&n)return{...e};const l=Object.create(a);return Object.assign(l,e)}}function fj(e,t=!1){return Ox(e)||zo(e)||!yi(e)||(kx(e)>1&&Object.defineProperties(e,{set:Jf,add:Jf,clear:Jf,delete:Jf}),Object.freeze(e),t&&Object.values(e).forEach(n=>fj(n,!0))),e}function rK(){ta(2)}var Jf={value:rK};function Ox(e){return e===null||typeof e!="object"?!0:Object.isFrozen(e)}var nK={};function vi(e){const t=nK[e];return t||ta(0,e),t}var Dd;function Z_(){return Dd}function aK(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function eA(e,t){t&&(vi("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Uy(e){qy(e),e.drafts_.forEach(sK),e.drafts_=null}function qy(e){e===Dd&&(Dd=e.parent_)}function tA(e){return Dd=aK(Dd,e)}function sK(e){const t=e[jn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function rA(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[jn].modified_&&(Uy(t),ta(4)),yi(e)&&(e=vh(t,e),t.parent_||jh(t,e)),t.patches_&&vi("Patches").generateReplacementPatches_(n[jn].base_,e,t.patches_,t.inversePatches_)):e=vh(t,n,[]),Uy(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Q_?e:void 0}function vh(e,t,n){if(Ox(t))return t;const a=e.immer_.shouldUseStrictIteration(),l=t[jn];if(!l)return yh(t,(o,d)=>nA(e,l,t,o,d,n),a),t;if(l.scope_!==e)return t;if(!l.modified_)return jh(e,l.base_,!0),l.base_;if(!l.finalized_){l.finalized_=!0,l.scope_.unfinalizedDrafts_--;const o=l.copy_;let d=o,u=!1;l.type_===3&&(d=new Set(o),o.clear(),u=!0),yh(d,(m,h)=>nA(e,l,o,m,h,n,u),a),jh(e,o,!1),n&&e.patches_&&vi("Patches").generatePatches_(l,n,e.patches_,e.inversePatches_)}return l.copy_}function nA(e,t,n,a,l,o,d){if(l==null||typeof l!="object"&&!d)return;const u=Ox(l);if(!(u&&!d)){if(zo(l)){const m=o&&t&&t.type_!==3&&!By(t.assigned_,a)?o.concat(a):void 0,h=vh(e,l,m);if(X_(n,a,h),zo(h))e.canAutoFreeze_=!1;else return}else d&&n.add(l);if(yi(l)&&!u){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[a]===l&&u)return;vh(e,l),(!t||!t.scope_.parent_)&&typeof a!="symbol"&&(cu(n)?n.has(a):Object.prototype.propertyIsEnumerable.call(n,a))&&jh(e,l)}}}function jh(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&fj(t,n)}function lK(e,t){const n=Array.isArray(e),a={type_:n?1:0,scope_:t?t.scope_:Z_(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let l=a,o=mj;n&&(l=[a],o=Md);const{revoke:d,proxy:u}=Proxy.revocable(l,o);return a.draft_=u,a.revoke_=d,u}var mj={get(e,t){if(t===jn)return e;const n=Xl(e);if(!By(n,t))return iK(e,n,t);const a=n[t];return e.finalized_||!yi(a)?a:a===Rb(e.base_,t)?(Pb(e),e.copy_[t]=Hy(a,e)):a},has(e,t){return t in Xl(e)},ownKeys(e){return Reflect.ownKeys(Xl(e))},set(e,t,n){const a=J_(Xl(e),t);if(a?.set)return a.set.call(e.draft_,n),!0;if(!e.modified_){const l=Rb(Xl(e),t),o=l?.[jn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(tK(n,l)&&(n!==void 0||By(e.base_,t)))return!0;Pb(e),Fy(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Rb(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Pb(e),Fy(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Xl(e),a=Reflect.getOwnPropertyDescriptor(n,t);return a&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:a.enumerable,value:n[t]}},defineProperty(){ta(11)},getPrototypeOf(e){return Pd(e.base_)},setPrototypeOf(){ta(12)}},Md={};yh(mj,(e,t)=>{Md[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Md.deleteProperty=function(e,t){return Md.set.call(this,e,t,void 0)};Md.set=function(e,t,n){return mj.set.call(this,e[0],t,n,e[0])};function Rb(e,t){const n=e[jn];return(n?Xl(n):e)[t]}function iK(e,t,n){const a=J_(t,n);return a?"value"in a?a.value:a.get?.call(e.draft_):void 0}function J_(e,t){if(!(t in e))return;let n=Pd(e);for(;n;){const a=Object.getOwnPropertyDescriptor(n,t);if(a)return a;n=Pd(n)}}function Fy(e){e.modified_||(e.modified_=!0,e.parent_&&Fy(e.parent_))}function Pb(e){e.copy_||(e.copy_=$y(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var oK=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(t,n,a)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const d=this;return function(m=o,...h){return d.produce(m,x=>n.call(this,x,...h))}}typeof n!="function"&&ta(6),a!==void 0&&typeof a!="function"&&ta(7);let l;if(yi(t)){const o=tA(this),d=Hy(t,void 0);let u=!0;try{l=n(d),u=!1}finally{u?Uy(o):qy(o)}return eA(o,a),rA(l,o)}else if(!t||typeof t!="object"){if(l=n(t),l===void 0&&(l=t),l===Q_&&(l=void 0),this.autoFreeze_&&fj(l,!0),a){const o=[],d=[];vi("Patches").generateReplacementPatches_(t,l,o,d),a(o,d)}return l}else ta(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(d,...u)=>this.produceWithPatches(d,m=>t(m,...u));let a,l;return[this.produce(t,n,(d,u)=>{a=d,l=u}),a,l]},typeof e?.autoFreeze=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof e?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),typeof e?.useStrictIteration=="boolean"&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){yi(e)||ta(8),zo(e)&&(e=cK(e));const t=tA(this),n=Hy(e,void 0);return n[jn].isManual_=!0,qy(t),n}finishDraft(e,t){const n=e&&e[jn];(!n||!n.isManual_)&&ta(9);const{scope_:a}=n;return eA(a,t),rA(void 0,a)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const l=t[n];if(l.path.length===0&&l.op==="replace"){e=l.value;break}}n>-1&&(t=t.slice(n+1));const a=vi("Patches").applyPatches_;return zo(e)?a(e,t):this.produce(e,l=>a(l,t))}};function Hy(e,t){const n=cu(e)?vi("MapSet").proxyMap_(e,t):_x(e)?vi("MapSet").proxySet_(e,t):lK(e,t);return(t?t.scope_:Z_()).drafts_.push(n),n}function cK(e){return zo(e)||ta(10,e),eO(e)}function eO(e){if(!yi(e)||Ox(e))return e;const t=e[jn];let n,a=!0;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=$y(e,t.scope_.immer_.useStrictShallowCopy_),a=t.scope_.immer_.shouldUseStrictIteration()}else n=$y(e,!0);return yh(n,(l,o)=>{X_(n,l,eO(o))},a),t&&(t.finalized_=!1),n}var dK=new oK;dK.produce;var uK={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},tO=nn({name:"legend",initialState:uK,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:kt()},replaceLegendPayload:{reducer(e,t){var{prev:n,next:a}=t.payload,l=aa(e).payload.indexOf(n);l>-1&&(e.payload[l]=a)},prepare:kt()},removeLegendPayload:{reducer(e,t){var n=aa(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)},prepare:kt()}}}),{setLegendSize:xie,setLegendSettings:pie,addLegendPayload:fK,replaceLegendPayload:mK,removeLegendPayload:hK}=tO.actions,xK=tO.reducer;function Ky(){return Ky=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ky.apply(null,arguments)}function aA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aA(Object(n),!0).forEach(function(a){pK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function pK(e,t,n){return(t=gK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gK(e){var t=bK(e,"string");return typeof t=="symbol"?t:t+""}function bK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yK(e){return Array.isArray(e)&&$a(e[0])&&$a(e[1])?e.join(" ~ "):e}var xo={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},vK=e=>{var{separator:t=xo.separator,contentStyle:n,itemStyle:a,labelStyle:l=xo.labelStyle,payload:o,formatter:d,itemSorter:u,wrapperClassName:m,labelClassName:h,label:x,labelFormatter:p,accessibilityLayer:b=xo.accessibilityLayer}=e,N=()=>{if(o&&o.length){var k={padding:0,margin:0},_=(u?fx(o,u):o).map((T,P)=>{if(T.type==="none")return null;var L=T.formatter||d||yK,{value:z,name:U}=T,B=z,ee=U;if(L){var X=L(z,U,T,P,o);if(Array.isArray(X))[B,ee]=X;else if(X!=null)B=X;else return null}var be=ld(ld({},xo.itemStyle),{},{color:T.color||xo.itemStyle.color},a);return g.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(P),style:be},$a(ee)?g.createElement("span",{className:"recharts-tooltip-item-name"},ee):null,$a(ee)?g.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,g.createElement("span",{className:"recharts-tooltip-item-value"},B),g.createElement("span",{className:"recharts-tooltip-item-unit"},T.unit||""))});return g.createElement("ul",{className:"recharts-tooltip-item-list",style:k},_)}return null},v=ld(ld({},xo.contentStyle),n),w=ld({margin:0},l),S=!Pt(x),A=S?x:"",E=bt("recharts-default-tooltip",m),C=bt("recharts-tooltip-label",h);S&&p&&o!==void 0&&o!==null&&(A=p(x,o));var O=b?{role:"status","aria-live":"assertive"}:{};return g.createElement("div",Ky({className:E,style:v},O),g.createElement("p",{className:C,style:w},g.isValidElement(A)?A:"".concat(A)),N())},id="recharts-tooltip-wrapper",jK={visibility:"hidden"};function NK(e){var{coordinate:t,translateX:n,translateY:a}=e;return bt(id,{["".concat(id,"-right")]:Re(n)&&t&&Re(t.x)&&n>=t.x,["".concat(id,"-left")]:Re(n)&&t&&Re(t.x)&&n<t.x,["".concat(id,"-bottom")]:Re(a)&&t&&Re(t.y)&&a>=t.y,["".concat(id,"-top")]:Re(a)&&t&&Re(t.y)&&a<t.y})}function sA(e){var{allowEscapeViewBox:t,coordinate:n,key:a,offset:l,position:o,reverseDirection:d,tooltipDimension:u,viewBox:m,viewBoxDimension:h}=e;if(o&&Re(o[a]))return o[a];var x=n[a]-u-(l>0?l:0),p=n[a]+l;if(t[a])return d[a]?x:p;var b=m[a];if(b==null)return 0;if(d[a]){var N=x,v=b;return N<v?Math.max(p,b):Math.max(x,b)}if(h==null)return 0;var w=p+u,S=b+h;return w>S?Math.max(x,b):Math.max(p,b)}function wK(e){var{translateX:t,translateY:n,useTranslate3d:a}=e;return{transform:a?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function SK(e){var{allowEscapeViewBox:t,coordinate:n,offsetTop:a,offsetLeft:l,position:o,reverseDirection:d,tooltipBox:u,useTranslate3d:m,viewBox:h}=e,x,p,b;return u.height>0&&u.width>0&&n?(p=sA({allowEscapeViewBox:t,coordinate:n,key:"x",offset:l,position:o,reverseDirection:d,tooltipDimension:u.width,viewBox:h,viewBoxDimension:h.width}),b=sA({allowEscapeViewBox:t,coordinate:n,key:"y",offset:a,position:o,reverseDirection:d,tooltipDimension:u.height,viewBox:h,viewBoxDimension:h.height}),x=wK({translateX:p,translateY:b,useTranslate3d:m})):x=jK,{cssProperties:x,cssClasses:NK({translateX:p,translateY:b,coordinate:n})}}function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function em(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lA(Object(n),!0).forEach(function(a){Gy(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Gy(e,t,n){return(t=EK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EK(e){var t=CK(e,"string");return typeof t=="symbol"?t:t+""}function CK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class AK extends g.PureComponent{constructor(){super(...arguments),Gy(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Gy(this,"handleKeyDown",t=>{if(t.key==="Escape"){var n,a,l,o;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==null&&n!==void 0?n:0,y:(l=(o=this.props.coordinate)===null||o===void 0?void 0:o.y)!==null&&l!==void 0?l:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,n;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:n,animationDuration:a,animationEasing:l,children:o,coordinate:d,hasPayload:u,isAnimationActive:m,offset:h,position:x,reverseDirection:p,useTranslate3d:b,viewBox:N,wrapperStyle:v,lastBoundingBox:w,innerRef:S,hasPortalFromProps:A}=this.props,E=typeof h=="number"?h:h.x,C=typeof h=="number"?h:h.y,{cssClasses:O,cssProperties:k}=SK({allowEscapeViewBox:n,coordinate:d,offsetLeft:E,offsetTop:C,position:x,reverseDirection:p,tooltipBox:{height:w.height,width:w.width},useTranslate3d:b,viewBox:N}),_=A?{}:em(em({transition:m&&t?"transform ".concat(a,"ms ").concat(l):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&u?"visible":"hidden",position:"absolute",top:0,left:0}),T=em(em({},_),{},{visibility:!this.state.dismissed&&t&&u?"visible":"hidden"},v);return g.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:T,ref:S},o)}}var rO=()=>{var e;return(e=Me(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Vy(){return Vy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Vy.apply(null,arguments)}function iA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function oA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?iA(Object(n),!0).forEach(function(a){kK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kK(e,t,n){return(t=_K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _K(e){var t=OK(e,"string");return typeof t=="symbol"?t:t+""}function OK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cA={curveBasisClosed:C9,curveBasisOpen:A9,curveBasis:E9,curveBumpX:u9,curveBumpY:f9,curveLinearClosed:k9,curveLinear:dx,curveMonotoneX:_9,curveMonotoneY:O9,curveNatural:T9,curveStep:R9,curveStepAfter:D9,curveStepBefore:P9},Nh=e=>ot(e.x)&&ot(e.y),dA=e=>e.base!=null&&Nh(e.base)&&Nh(e),od=e=>e.x,cd=e=>e.y,TK=(e,t)=>{if(typeof e=="function")return e;var n="curve".concat(au(e));if((n==="curveMonotone"||n==="curveBump")&&t){var a=cA["".concat(n).concat(t==="vertical"?"Y":"X")];if(a)return a}return cA[n]||dx},uA={connectNulls:!1,type:"linear"},RK=e=>{var{type:t=uA.type,points:n=[],baseLine:a,layout:l,connectNulls:o=uA.connectNulls}=e,d=TK(t,l),u=o?n.filter(Nh):n;if(Array.isArray(a)){var m,h=n.map((v,w)=>oA(oA({},v),{},{base:a[w]}));l==="vertical"?m=Gf().y(cd).x1(od).x0(v=>v.base.x):m=Gf().x(od).y1(cd).y0(v=>v.base.y);var x=m.defined(dA).curve(d),p=o?h.filter(dA):h;return x(p)}var b;l==="vertical"&&Re(a)?b=Gf().y(cd).x1(od).x0(a):Re(a)?b=Gf().x(od).y1(cd).y0(a):b=z3().x(od).y(cd);var N=b.defined(Nh).curve(d);return N(u)},nO=e=>{var{className:t,points:n,path:a,pathRef:l}=e,o=Ci();if((!n||!n.length)&&!a)return null;var d={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||o,connectNulls:e.connectNulls},u=n&&n.length?RK(d):a;return g.createElement("path",Vy({},za(e),Xv(e),{className:bt("recharts-curve",t),d:u===null?void 0:u,ref:l}))},PK=["x","y","top","left","width","height","className"];function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yy.apply(null,arguments)}function fA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function DK(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fA(Object(n),!0).forEach(function(a){MK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function MK(e,t,n){return(t=IK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IK(e){var t=LK(e,"string");return typeof t=="symbol"?t:t+""}function LK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zK(e,t){if(e==null)return{};var n,a,l=BK(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function BK(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var $K=(e,t,n,a,l,o)=>"M".concat(e,",").concat(l,"v").concat(a,"M").concat(o,",").concat(t,"h").concat(n),UK=e=>{var{x:t=0,y:n=0,top:a=0,left:l=0,width:o=0,height:d=0,className:u}=e,m=zK(e,PK),h=DK({x:t,y:n,top:a,left:l,width:o,height:d},m);return!Re(t)||!Re(n)||!Re(o)||!Re(d)||!Re(a)||!Re(l)?null:g.createElement("path",Yy({},$r(h),{className:bt("recharts-cross",u),d:$K(t,n,o,d,a,l)}))};function qK(e,t,n,a){var l=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-l:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-l,width:e==="horizontal"?a:n.width-1,height:e==="horizontal"?n.height-1:a}}function mA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function hA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mA(Object(n),!0).forEach(function(a){FK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function FK(e,t,n){return(t=HK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HK(e){var t=KK(e,"string");return typeof t=="symbol"?t:t+""}function KK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var GK=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),aO=(e,t,n)=>e.map(a=>"".concat(GK(a)," ").concat(t,"ms ").concat(n)).join(","),VK=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((n,a)=>n.filter(l=>a.includes(l))),Id=(e,t)=>Object.keys(t).reduce((n,a)=>hA(hA({},n),{},{[a]:e(a,t[a])}),{});function xA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xA(Object(n),!0).forEach(function(a){YK(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YK(e,t,n){return(t=QK(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QK(e){var t=WK(e,"string");return typeof t=="symbol"?t:t+""}function WK(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var wh=(e,t,n)=>e+(t-e)*n,Qy=e=>{var{from:t,to:n}=e;return t!==n},sO=(e,t,n)=>{var a=Id((l,o)=>{if(Qy(o)){var[d,u]=e(o.from,o.to,o.velocity);return sr(sr({},o),{},{from:d,velocity:u})}return o},t);return n<1?Id((l,o)=>Qy(o)&&a[l]!=null?sr(sr({},o),{},{velocity:wh(o.velocity,a[l].velocity,n),from:wh(o.from,a[l].from,n)}):o,t):sO(e,a,n-1)};function XK(e,t,n,a,l,o){var d,u=a.reduce((b,N)=>sr(sr({},b),{},{[N]:{from:e[N],velocity:0,to:t[N]}}),{}),m=()=>Id((b,N)=>N.from,u),h=()=>!Object.values(u).filter(Qy).length,x=null,p=b=>{d||(d=b);var N=b-d,v=N/n.dt;u=sO(n,u,v),l(sr(sr(sr({},e),t),m())),d=b,h()||(x=o.setTimeout(p))};return()=>(x=o.setTimeout(p),()=>{var b;(b=x)===null||b===void 0||b()})}function ZK(e,t,n,a,l,o,d){var u=null,m=l.reduce((p,b)=>{var N=e[b],v=t[b];return N==null||v==null?p:sr(sr({},p),{},{[b]:[N,v]})},{}),h,x=p=>{h||(h=p);var b=(p-h)/a,N=Id((w,S)=>wh(...S,n(b)),m);if(o(sr(sr(sr({},e),t),N)),b<1)u=d.setTimeout(x);else{var v=Id((w,S)=>wh(...S,n(1)),m);o(sr(sr(sr({},e),t),v))}};return()=>(u=d.setTimeout(x),()=>{var p;(p=u)===null||p===void 0||p()})}const JK=(e,t,n,a,l,o)=>{var d=VK(e,t);return n==null?()=>(l(sr(sr({},e),t)),()=>{}):n.isStepper===!0?XK(e,t,n,d,l,o):ZK(e,t,n,a,d,l,o)};var Sh=1e-4,lO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],iO=(e,t)=>e.map((n,a)=>n*t**a).reduce((n,a)=>n+a),pA=(e,t)=>n=>{var a=lO(e,t);return iO(a,n)},eG=(e,t)=>n=>{var a=lO(e,t),l=[...a.map((o,d)=>o*d).slice(1),0];return iO(l,n)},tG=e=>{var t,n=e.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var a=(t=n[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(a==null||a.length!==4)return null;var l=a.map(o=>parseFloat(o));return[l[0],l[1],l[2],l[3]]},rG=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var l=tG(n[0]);if(l)return l}}return n.length===4?n:[0,0,1,1]},nG=(e,t,n,a)=>{var l=pA(e,n),o=pA(t,a),d=eG(e,n),u=h=>h>1?1:h<0?0:h,m=h=>{for(var x=h>1?1:h,p=x,b=0;b<8;++b){var N=l(p)-x,v=d(p);if(Math.abs(N-x)<Sh||v<Sh)return o(p);p=u(p-N/v)}return o(p)};return m.isStepper=!1,m},gA=function(){return nG(...rG(...arguments))},aG=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:a=8,dt:l=17}=t,o=(d,u,m)=>{var h=-(d-u)*n,x=m*a,p=m+(h-x)*l/1e3,b=m*l/1e3+d;return Math.abs(b-u)<Sh&&Math.abs(p)<Sh?[u,0]:[b,p]};return o.isStepper=!0,o.dt=l,o},sG=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return gA(e);case"spring":return aG();default:if(e.split("(")[0]==="cubic-bezier")return gA(e)}return typeof e=="function"?e:null};function lG(e){var t,n=()=>null,a=!1,l=null,o=d=>{if(!a){if(Array.isArray(d)){if(!d.length)return;var u=d,[m,...h]=u;if(typeof m=="number"){l=e.setTimeout(o.bind(null,h),m);return}o(m),l=e.setTimeout(o.bind(null,h));return}typeof d=="string"&&(t=d,n(t)),typeof d=="object"&&(t=d,n(t)),typeof d=="function"&&d()}};return{stop:()=>{a=!0},start:d=>{a=!1,l&&(l(),l=null),o(d)},subscribe:d=>(n=d,()=>{n=()=>null}),getTimeoutController:()=>e}}class iG{setTimeout(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=performance.now(),l=null,o=d=>{d-a>=n?t(d):typeof requestAnimationFrame=="function"&&(l=requestAnimationFrame(o))};return l=requestAnimationFrame(o),()=>{l!=null&&cancelAnimationFrame(l)}}}function oG(){return lG(new iG)}var cG=g.createContext(oG);function dG(e,t){var n=g.useContext(cG);return g.useMemo(()=>t??n(e),[e,t,n])}var uG=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),Tx={isSsr:uG()},fG={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},bA={t:0},Db={t:1};function Rx(e){var t=rn(e,fG),{isActive:n,canBegin:a,duration:l,easing:o,begin:d,onAnimationEnd:u,onAnimationStart:m,children:h}=t,x=n==="auto"?!Tx.isSsr:n,p=dG(t.animationId,t.animationManager),[b,N]=g.useState(x?bA:Db),v=g.useRef(null);return g.useEffect(()=>{x||N(Db)},[x]),g.useEffect(()=>{if(!x||!a)return Ei;var w=JK(bA,Db,sG(o),l,N,p.getTimeoutController()),S=()=>{v.current=w()};return p.start([m,d,S,l,u]),()=>{p.stop(),v.current&&v.current(),u()}},[x,a,l,o,d,m,u,p]),h(b.t)}function Px(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=g.useRef(_d(t)),a=g.useRef(e);return a.current!==e&&(n.current=_d(t),a.current=e),n.current}var mG=["radius"],hG=["radius"],yA,vA,jA,NA,wA,SA,EA,CA,AA,kA;function _A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function OA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_A(Object(n),!0).forEach(function(a){xG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_A(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xG(e,t,n){return(t=pG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pG(e){var t=gG(e,"string");return typeof t=="symbol"?t:t+""}function gG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Eh(){return Eh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Eh.apply(null,arguments)}function TA(e,t){if(e==null)return{};var n,a,l=bG(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function bG(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Ca(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var RA=(e,t,n,a,l)=>{var o=gl(n),d=gl(a),u=Math.min(Math.abs(o)/2,Math.abs(d)/2),m=d>=0?1:-1,h=o>=0?1:-1,x=d>=0&&o>=0||d<0&&o<0?1:0,p;if(u>0&&Array.isArray(l)){for(var b=[0,0,0,0],N=0,v=4;N<v;N++){var w,S=(w=l[N])!==null&&w!==void 0?w:0;b[N]=S>u?u:S}p=Lt(yA||(yA=Ca(["M",",",""])),e,t+m*b[0]),b[0]>0&&(p+=Lt(vA||(vA=Ca(["A ",",",",0,0,",",",",",""])),b[0],b[0],x,e+h*b[0],t)),p+=Lt(jA||(jA=Ca(["L ",",",""])),e+n-h*b[1],t),b[1]>0&&(p+=Lt(NA||(NA=Ca(["A ",",",",0,0,",`,
        `,",",""])),b[1],b[1],x,e+n,t+m*b[1])),p+=Lt(wA||(wA=Ca(["L ",",",""])),e+n,t+a-m*b[2]),b[2]>0&&(p+=Lt(SA||(SA=Ca(["A ",",",",0,0,",`,
        `,",",""])),b[2],b[2],x,e+n-h*b[2],t+a)),p+=Lt(EA||(EA=Ca(["L ",",",""])),e+h*b[3],t+a),b[3]>0&&(p+=Lt(CA||(CA=Ca(["A ",",",",0,0,",`,
        `,",",""])),b[3],b[3],x,e,t+a-m*b[3])),p+="Z"}else if(u>0&&l===+l&&l>0){var A=Math.min(u,l);p=Lt(AA||(AA=Ca(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+m*A,A,A,x,e+h*A,t,e+n-h*A,t,A,A,x,e+n,t+m*A,e+n,t+a-m*A,A,A,x,e+n-h*A,t+a,e+h*A,t+a,A,A,x,e,t+a-m*A)}else p=Lt(kA||(kA=Ca(["M ",","," h "," v "," h "," Z"])),e,t,n,a,-n);return p},PA={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},oO=e=>{var t=rn(e,PA),n=g.useRef(null),[a,l]=g.useState(-1);g.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var J=n.current.getTotalLength();J&&l(J)}catch{}},[]);var{x:o,y:d,width:u,height:m,radius:h,className:x}=t,{animationEasing:p,animationDuration:b,animationBegin:N,isAnimationActive:v,isUpdateAnimationActive:w}=t,S=g.useRef(u),A=g.useRef(m),E=g.useRef(o),C=g.useRef(d),O=g.useMemo(()=>({x:o,y:d,width:u,height:m,radius:h}),[o,d,u,m,h]),k=Px(O,"rectangle-");if(o!==+o||d!==+d||u!==+u||m!==+m||u===0||m===0)return null;var _=bt("recharts-rectangle",x);if(!w){var T=$r(t),{radius:P}=T,L=TA(T,mG);return g.createElement("path",Eh({},L,{x:gl(o),y:gl(d),width:gl(u),height:gl(m),radius:typeof h=="number"?h:void 0,className:_,d:RA(o,d,u,m,h)}))}var z=S.current,U=A.current,B=E.current,ee=C.current,X="0px ".concat(a===-1?1:a,"px"),be="".concat(a,"px 0px"),G=aO(["strokeDasharray"],b,typeof p=="string"?p:PA.animationEasing);return g.createElement(Rx,{animationId:k,key:k,canBegin:a>0,duration:b,easing:p,isActive:w,begin:N},J=>{var $=zt(z,u,J),q=zt(U,m,J),se=zt(B,o,J),I=zt(ee,d,J);n.current&&(S.current=$,A.current=q,E.current=se,C.current=I);var M;v?J>0?M={transition:G,strokeDasharray:be}:M={strokeDasharray:X}:M={strokeDasharray:be};var H=$r(t),{radius:oe}=H,K=TA(H,hG);return g.createElement("path",Eh({},K,{radius:typeof h=="number"?h:void 0,className:_,d:RA(se,I,$,q,h),ref:n,style:OA(OA({},M),t.style)}))})};function DA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function MA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DA(Object(n),!0).forEach(function(a){yG(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DA(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function yG(e,t,n){return(t=vG(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vG(e){var t=jG(e,"string");return typeof t=="symbol"?t:t+""}function jG(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ch=Math.PI/180,NG=e=>e*180/Math.PI,Cr=(e,t,n,a)=>({x:e+Math.cos(-Ch*a)*n,y:t+Math.sin(-Ch*a)*n}),wG=function(t,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(a.left||0)-(a.right||0)),Math.abs(n-(a.top||0)-(a.bottom||0)))/2},SG=(e,t)=>{var{x:n,y:a}=e,{x:l,y:o}=t;return Math.sqrt((n-l)**2+(a-o)**2)},EG=(e,t)=>{var{x:n,y:a}=e,{cx:l,cy:o}=t,d=SG({x:n,y:a},{x:l,y:o});if(d<=0)return{radius:d,angle:0};var u=(n-l)/d,m=Math.acos(u);return a>o&&(m=2*Math.PI-m),{radius:d,angle:NG(m),angleInRadian:m}},CG=e=>{var{startAngle:t,endAngle:n}=e,a=Math.floor(t/360),l=Math.floor(n/360),o=Math.min(a,l);return{startAngle:t-o*360,endAngle:n-o*360}},AG=(e,t)=>{var{startAngle:n,endAngle:a}=t,l=Math.floor(n/360),o=Math.floor(a/360),d=Math.min(l,o);return e+d*360},kG=(e,t)=>{var{chartX:n,chartY:a}=e,{radius:l,angle:o}=EG({x:n,y:a},t),{innerRadius:d,outerRadius:u}=t;if(l<d||l>u||l===0)return null;var{startAngle:m,endAngle:h}=CG(t),x=o,p;if(m<=h){for(;x>h;)x-=360;for(;x<m;)x+=360;p=x>=m&&x<=h}else{for(;x>m;)x-=360;for(;x<h;)x+=360;p=x>=h&&x<=m}return p?MA(MA({},t),{},{radius:l,angle:AG(x,t)}):null};function cO(e){var{cx:t,cy:n,radius:a,startAngle:l,endAngle:o}=e,d=Cr(t,n,a,l),u=Cr(t,n,a,o);return{points:[d,u],cx:t,cy:n,radius:a,startAngle:l,endAngle:o}}var IA,LA,zA,BA,$A,UA,qA;function Wy(){return Wy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Wy.apply(null,arguments)}function ei(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _G=(e,t)=>{var n=xn(t-e),a=Math.min(Math.abs(t-e),359.999);return n*a},tm=e=>{var{cx:t,cy:n,radius:a,angle:l,sign:o,isExternal:d,cornerRadius:u,cornerIsExternal:m}=e,h=u*(d?1:-1)+a,x=Math.asin(u/h)/Ch,p=m?l:l+o*x,b=Cr(t,n,h,p),N=Cr(t,n,a,p),v=m?l-o*x:l,w=Cr(t,n,h*Math.cos(x*Ch),v);return{center:b,circleTangency:N,lineTangency:w,theta:x}},dO=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:o,endAngle:d}=e,u=_G(o,d),m=o+u,h=Cr(t,n,l,o),x=Cr(t,n,l,m),p=Lt(IA||(IA=ei(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),h.x,h.y,l,l,+(Math.abs(u)>180),+(o>m),x.x,x.y);if(a>0){var b=Cr(t,n,a,o),N=Cr(t,n,a,m);p+=Lt(LA||(LA=ei(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),N.x,N.y,a,a,+(Math.abs(u)>180),+(o<=m),b.x,b.y)}else p+=Lt(zA||(zA=ei(["L ",","," Z"])),t,n);return p},OG=e=>{var{cx:t,cy:n,innerRadius:a,outerRadius:l,cornerRadius:o,forceCornerRadius:d,cornerIsExternal:u,startAngle:m,endAngle:h}=e,x=xn(h-m),{circleTangency:p,lineTangency:b,theta:N}=tm({cx:t,cy:n,radius:l,angle:m,sign:x,cornerRadius:o,cornerIsExternal:u}),{circleTangency:v,lineTangency:w,theta:S}=tm({cx:t,cy:n,radius:l,angle:h,sign:-x,cornerRadius:o,cornerIsExternal:u}),A=u?Math.abs(m-h):Math.abs(m-h)-N-S;if(A<0)return d?Lt(BA||(BA=ei(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),b.x,b.y,o,o,o*2,o,o,-o*2):dO({cx:t,cy:n,innerRadius:a,outerRadius:l,startAngle:m,endAngle:h});var E=Lt($A||($A=ei(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),b.x,b.y,o,o,+(x<0),p.x,p.y,l,l,+(A>180),+(x<0),v.x,v.y,o,o,+(x<0),w.x,w.y);if(a>0){var{circleTangency:C,lineTangency:O,theta:k}=tm({cx:t,cy:n,radius:a,angle:m,sign:x,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),{circleTangency:_,lineTangency:T,theta:P}=tm({cx:t,cy:n,radius:a,angle:h,sign:-x,isExternal:!0,cornerRadius:o,cornerIsExternal:u}),L=u?Math.abs(m-h):Math.abs(m-h)-k-P;if(L<0&&o===0)return"".concat(E,"L").concat(t,",").concat(n,"Z");E+=Lt(UA||(UA=ei(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),T.x,T.y,o,o,+(x<0),_.x,_.y,a,a,+(L>180),+(x>0),C.x,C.y,o,o,+(x<0),O.x,O.y)}else E+=Lt(qA||(qA=ei(["L",",","Z"])),t,n);return E},TG={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},uO=e=>{var t=rn(e,TG),{cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:d,forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:x,className:p}=t;if(o<l||h===x)return null;var b=bt("recharts-sector",p),N=o-l,v=la(d,N,0,!0),w;return v>0&&Math.abs(h-x)<360?w=OG({cx:n,cy:a,innerRadius:l,outerRadius:o,cornerRadius:Math.min(v,N/2),forceCornerRadius:u,cornerIsExternal:m,startAngle:h,endAngle:x}):w=dO({cx:n,cy:a,innerRadius:l,outerRadius:o,startAngle:h,endAngle:x}),g.createElement("path",Wy({},$r(t),{className:b,d:w}))};function RG(e,t,n){if(e==="horizontal")return[{x:t.x,y:n.top},{x:t.x,y:n.top+n.height}];if(e==="vertical")return[{x:n.left,y:t.y},{x:n.left+n.width,y:t.y}];if(e_(t)){if(e==="centric"){var{cx:a,cy:l,innerRadius:o,outerRadius:d,angle:u}=t,m=Cr(a,l,o,u),h=Cr(a,l,d,u);return[{x:m.x,y:m.y},{x:h.x,y:h.y}]}return cO(t)}}var Mb={},Ib={},Lb={},FA;function PG(){return FA||(FA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=d_();function n(a){return t.isSymbol(a)?NaN:Number(a)}e.toNumber=n})(Lb)),Lb}var HA;function DG(){return HA||(HA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PG();function n(a){return a?(a=t.toNumber(a),a===1/0||a===-1/0?(a<0?-1:1)*Number.MAX_VALUE:a===a?a:0):a===0?a:0}e.toFinite=n})(Ib)),Ib}var KA;function MG(){return KA||(KA=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=u_(),n=DG();function a(l,o,d){d&&typeof d!="number"&&t.isIterateeCall(l,o,d)&&(o=d=void 0),l=n.toFinite(l),o===void 0?(o=l,l=0):o=n.toFinite(o),d=d===void 0?l<o?1:-1:n.toFinite(d);const u=Math.max(Math.ceil((o-l)/(d||1)),0),m=new Array(u);for(let h=0;h<u;h++)m[h]=l,l+=d;return m}e.range=a})(Mb)),Mb}var zb,GA;function IG(){return GA||(GA=1,zb=MG().range),zb}var LG=IG();const fO=qa(LG);function yl(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function zG(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function hj(e){let t,n,a;e.length!==2?(t=yl,n=(u,m)=>yl(e(u),m),a=(u,m)=>e(u)-m):(t=e===yl||e===zG?e:BG,n=e,a=e);function l(u,m,h=0,x=u.length){if(h<x){if(t(m,m)!==0)return x;do{const p=h+x>>>1;n(u[p],m)<0?h=p+1:x=p}while(h<x)}return h}function o(u,m,h=0,x=u.length){if(h<x){if(t(m,m)!==0)return x;do{const p=h+x>>>1;n(u[p],m)<=0?h=p+1:x=p}while(h<x)}return h}function d(u,m,h=0,x=u.length){const p=l(u,m,h,x-1);return p>h&&a(u[p-1],m)>-a(u[p],m)?p-1:p}return{left:l,center:d,right:o}}function BG(){return 0}function mO(e){return e===null?NaN:+e}function*$G(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const UG=hj(yl),du=UG.right;hj(mO).center;class VA extends Map{constructor(t,n=HG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[a,l]of t)this.set(a,l)}get(t){return super.get(YA(this,t))}has(t){return super.has(YA(this,t))}set(t,n){return super.set(qG(this,t),n)}delete(t){return super.delete(FG(this,t))}}function YA({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):n}function qG({_intern:e,_key:t},n){const a=t(n);return e.has(a)?e.get(a):(e.set(a,n),n)}function FG({_intern:e,_key:t},n){const a=t(n);return e.has(a)&&(n=e.get(a),e.delete(a)),n}function HG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function KG(e=yl){if(e===yl)return hO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const a=e(t,n);return a||a===0?a:(e(n,n)===0)-(e(t,t)===0)}}function hO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const GG=Math.sqrt(50),VG=Math.sqrt(10),YG=Math.sqrt(2);function Ah(e,t,n){const a=(t-e)/Math.max(0,n),l=Math.floor(Math.log10(a)),o=a/Math.pow(10,l),d=o>=GG?10:o>=VG?5:o>=YG?2:1;let u,m,h;return l<0?(h=Math.pow(10,-l)/d,u=Math.round(e*h),m=Math.round(t*h),u/h<e&&++u,m/h>t&&--m,h=-h):(h=Math.pow(10,l)*d,u=Math.round(e/h),m=Math.round(t/h),u*h<e&&++u,m*h>t&&--m),m<u&&.5<=n&&n<2?Ah(e,t,n*2):[u,m,h]}function Xy(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const a=t<e,[l,o,d]=a?Ah(t,e,n):Ah(e,t,n);if(!(o>=l))return[];const u=o-l+1,m=new Array(u);if(a)if(d<0)for(let h=0;h<u;++h)m[h]=(o-h)/-d;else for(let h=0;h<u;++h)m[h]=(o-h)*d;else if(d<0)for(let h=0;h<u;++h)m[h]=(l+h)/-d;else for(let h=0;h<u;++h)m[h]=(l+h)*d;return m}function Zy(e,t,n){return t=+t,e=+e,n=+n,Ah(e,t,n)[2]}function Jy(e,t,n){t=+t,e=+e,n=+n;const a=t<e,l=a?Zy(t,e,n):Zy(e,t,n);return(a?-1:1)*(l<0?1/-l:l)}function QA(e,t){let n;for(const a of e)a!=null&&(n<a||n===void 0&&a>=a)&&(n=a);return n}function WA(e,t){let n;for(const a of e)a!=null&&(n>a||n===void 0&&a>=a)&&(n=a);return n}function xO(e,t,n=0,a=1/0,l){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),a=Math.floor(Math.min(e.length-1,a)),!(n<=t&&t<=a))return e;for(l=l===void 0?hO:KG(l);a>n;){if(a-n>600){const m=a-n+1,h=t-n+1,x=Math.log(m),p=.5*Math.exp(2*x/3),b=.5*Math.sqrt(x*p*(m-p)/m)*(h-m/2<0?-1:1),N=Math.max(n,Math.floor(t-h*p/m+b)),v=Math.min(a,Math.floor(t+(m-h)*p/m+b));xO(e,t,N,v,l)}const o=e[t];let d=n,u=a;for(dd(e,n,t),l(e[a],o)>0&&dd(e,n,a);d<u;){for(dd(e,d,u),++d,--u;l(e[d],o)<0;)++d;for(;l(e[u],o)>0;)--u}l(e[n],o)===0?dd(e,n,u):(++u,dd(e,u,a)),u<=t&&(n=u+1),t<=u&&(a=u-1)}return e}function dd(e,t,n){const a=e[t];e[t]=e[n],e[n]=a}function QG(e,t,n){if(e=Float64Array.from($G(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return WA(e);if(t>=1)return QA(e);var a,l=(a-1)*t,o=Math.floor(l),d=QA(xO(e,o).subarray(0,o+1)),u=WA(e.subarray(o+1));return d+(u-d)*(l-o)}}function WG(e,t,n=mO){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+n(e[0],0,e);if(t>=1)return+n(e[a-1],a-1,e);var a,l=(a-1)*t,o=Math.floor(l),d=+n(e[o],o,e),u=+n(e[o+1],o+1,e);return d+(u-d)*(l-o)}}function XG(e,t,n){e=+e,t=+t,n=(l=arguments.length)<2?(t=e,e=0,1):l<3?1:+n;for(var a=-1,l=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(l);++a<l;)o[a]=e+a*n;return o}function Qn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ps(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ev=Symbol("implicit");function xj(){var e=new VA,t=[],n=[],a=ev;function l(o){let d=e.get(o);if(d===void 0){if(a!==ev)return a;e.set(o,d=t.push(o)-1)}return n[d%n.length]}return l.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new VA;for(const d of o)e.has(d)||e.set(d,t.push(d)-1);return l},l.range=function(o){return arguments.length?(n=Array.from(o),l):n.slice()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return xj(t,n).unknown(a)},Qn.apply(l,arguments),l}function pj(){var e=xj().unknown(void 0),t=e.domain,n=e.range,a=0,l=1,o,d,u=!1,m=0,h=0,x=.5;delete e.unknown;function p(){var b=t().length,N=l<a,v=N?l:a,w=N?a:l;o=(w-v)/Math.max(1,b-m+h*2),u&&(o=Math.floor(o)),v+=(w-v-o*(b-m))*x,d=o*(1-m),u&&(v=Math.round(v),d=Math.round(d));var S=XG(b).map(function(A){return v+o*A});return n(N?S.reverse():S)}return e.domain=function(b){return arguments.length?(t(b),p()):t()},e.range=function(b){return arguments.length?([a,l]=b,a=+a,l=+l,p()):[a,l]},e.rangeRound=function(b){return[a,l]=b,a=+a,l=+l,u=!0,p()},e.bandwidth=function(){return d},e.step=function(){return o},e.round=function(b){return arguments.length?(u=!!b,p()):u},e.padding=function(b){return arguments.length?(m=Math.min(1,h=+b),p()):m},e.paddingInner=function(b){return arguments.length?(m=Math.min(1,b),p()):m},e.paddingOuter=function(b){return arguments.length?(h=+b,p()):h},e.align=function(b){return arguments.length?(x=Math.max(0,Math.min(1,b)),p()):x},e.copy=function(){return pj(t(),[a,l]).round(u).paddingInner(m).paddingOuter(h).align(x)},Qn.apply(p(),arguments)}function pO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pO(t())},e}function ZG(){return pO(pj.apply(null,arguments).paddingInner(1))}function gj(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gO(e,t){var n=Object.create(e.prototype);for(var a in t)n[a]=t[a];return n}function uu(){}var Ld=.7,kh=1/Ld,Eo="\\s*([+-]?\\d+)\\s*",zd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",La="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",JG=/^#([0-9a-f]{3,8})$/,eV=new RegExp(`^rgb\\(${Eo},${Eo},${Eo}\\)$`),tV=new RegExp(`^rgb\\(${La},${La},${La}\\)$`),rV=new RegExp(`^rgba\\(${Eo},${Eo},${Eo},${zd}\\)$`),nV=new RegExp(`^rgba\\(${La},${La},${La},${zd}\\)$`),aV=new RegExp(`^hsl\\(${zd},${La},${La}\\)$`),sV=new RegExp(`^hsla\\(${zd},${La},${La},${zd}\\)$`),XA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};gj(uu,Bd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ZA,formatHex:ZA,formatHex8:lV,formatHsl:iV,formatRgb:JA,toString:JA});function ZA(){return this.rgb().formatHex()}function lV(){return this.rgb().formatHex8()}function iV(){return bO(this).formatHsl()}function JA(){return this.rgb().formatRgb()}function Bd(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=JG.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?e5(t):n===3?new Wr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?rm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?rm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=eV.exec(e))?new Wr(t[1],t[2],t[3],1):(t=tV.exec(e))?new Wr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=rV.exec(e))?rm(t[1],t[2],t[3],t[4]):(t=nV.exec(e))?rm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aV.exec(e))?n5(t[1],t[2]/100,t[3]/100,1):(t=sV.exec(e))?n5(t[1],t[2]/100,t[3]/100,t[4]):XA.hasOwnProperty(e)?e5(XA[e]):e==="transparent"?new Wr(NaN,NaN,NaN,0):null}function e5(e){return new Wr(e>>16&255,e>>8&255,e&255,1)}function rm(e,t,n,a){return a<=0&&(e=t=n=NaN),new Wr(e,t,n,a)}function oV(e){return e instanceof uu||(e=Bd(e)),e?(e=e.rgb(),new Wr(e.r,e.g,e.b,e.opacity)):new Wr}function tv(e,t,n,a){return arguments.length===1?oV(e):new Wr(e,t,n,a??1)}function Wr(e,t,n,a){this.r=+e,this.g=+t,this.b=+n,this.opacity=+a}gj(Wr,tv,gO(uu,{brighter(e){return e=e==null?kh:Math.pow(kh,e),new Wr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ld:Math.pow(Ld,e),new Wr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Wr(si(this.r),si(this.g),si(this.b),_h(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:t5,formatHex:t5,formatHex8:cV,formatRgb:r5,toString:r5}));function t5(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}`}function cV(){return`#${ti(this.r)}${ti(this.g)}${ti(this.b)}${ti((isNaN(this.opacity)?1:this.opacity)*255)}`}function r5(){const e=_h(this.opacity);return`${e===1?"rgb(":"rgba("}${si(this.r)}, ${si(this.g)}, ${si(this.b)}${e===1?")":`, ${e})`}`}function _h(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function si(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ti(e){return e=si(e),(e<16?"0":"")+e.toString(16)}function n5(e,t,n,a){return a<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new ra(e,t,n,a)}function bO(e){if(e instanceof ra)return new ra(e.h,e.s,e.l,e.opacity);if(e instanceof uu||(e=Bd(e)),!e)return new ra;if(e instanceof ra)return e;e=e.rgb();var t=e.r/255,n=e.g/255,a=e.b/255,l=Math.min(t,n,a),o=Math.max(t,n,a),d=NaN,u=o-l,m=(o+l)/2;return u?(t===o?d=(n-a)/u+(n<a)*6:n===o?d=(a-t)/u+2:d=(t-n)/u+4,u/=m<.5?o+l:2-o-l,d*=60):u=m>0&&m<1?0:d,new ra(d,u,m,e.opacity)}function dV(e,t,n,a){return arguments.length===1?bO(e):new ra(e,t,n,a??1)}function ra(e,t,n,a){this.h=+e,this.s=+t,this.l=+n,this.opacity=+a}gj(ra,dV,gO(uu,{brighter(e){return e=e==null?kh:Math.pow(kh,e),new ra(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ld:Math.pow(Ld,e),new ra(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,a=n+(n<.5?n:1-n)*t,l=2*n-a;return new Wr(Bb(e>=240?e-240:e+120,l,a),Bb(e,l,a),Bb(e<120?e+240:e-120,l,a),this.opacity)},clamp(){return new ra(a5(this.h),nm(this.s),nm(this.l),_h(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=_h(this.opacity);return`${e===1?"hsl(":"hsla("}${a5(this.h)}, ${nm(this.s)*100}%, ${nm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function a5(e){return e=(e||0)%360,e<0?e+360:e}function nm(e){return Math.max(0,Math.min(1,e||0))}function Bb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const bj=e=>()=>e;function uV(e,t){return function(n){return e+n*t}}function fV(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(a){return Math.pow(e+a*t,n)}}function mV(e){return(e=+e)==1?yO:function(t,n){return n-t?fV(t,n,e):bj(isNaN(t)?n:t)}}function yO(e,t){var n=t-e;return n?uV(e,n):bj(isNaN(e)?t:e)}const s5=(function e(t){var n=mV(t);function a(l,o){var d=n((l=tv(l)).r,(o=tv(o)).r),u=n(l.g,o.g),m=n(l.b,o.b),h=yO(l.opacity,o.opacity);return function(x){return l.r=d(x),l.g=u(x),l.b=m(x),l.opacity=h(x),l+""}}return a.gamma=e,a})(1);function hV(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,a=t.slice(),l;return function(o){for(l=0;l<n;++l)a[l]=e[l]*(1-o)+t[l]*o;return a}}function xV(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pV(e,t){var n=t?t.length:0,a=e?Math.min(n,e.length):0,l=new Array(a),o=new Array(n),d;for(d=0;d<a;++d)l[d]=Vo(e[d],t[d]);for(;d<n;++d)o[d]=t[d];return function(u){for(d=0;d<a;++d)o[d]=l[d](u);return o}}function gV(e,t){var n=new Date;return e=+e,t=+t,function(a){return n.setTime(e*(1-a)+t*a),n}}function Oh(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bV(e,t){var n={},a={},l;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(l in t)l in e?n[l]=Vo(e[l],t[l]):a[l]=t[l];return function(o){for(l in n)a[l]=n[l](o);return a}}var rv=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$b=new RegExp(rv.source,"g");function yV(e){return function(){return e}}function vV(e){return function(t){return e(t)+""}}function jV(e,t){var n=rv.lastIndex=$b.lastIndex=0,a,l,o,d=-1,u=[],m=[];for(e=e+"",t=t+"";(a=rv.exec(e))&&(l=$b.exec(t));)(o=l.index)>n&&(o=t.slice(n,o),u[d]?u[d]+=o:u[++d]=o),(a=a[0])===(l=l[0])?u[d]?u[d]+=l:u[++d]=l:(u[++d]=null,m.push({i:d,x:Oh(a,l)})),n=$b.lastIndex;return n<t.length&&(o=t.slice(n),u[d]?u[d]+=o:u[++d]=o),u.length<2?m[0]?vV(m[0].x):yV(t):(t=m.length,function(h){for(var x=0,p;x<t;++x)u[(p=m[x]).i]=p.x(h);return u.join("")})}function Vo(e,t){var n=typeof t,a;return t==null||n==="boolean"?bj(t):(n==="number"?Oh:n==="string"?(a=Bd(t))?(t=a,s5):jV:t instanceof Bd?s5:t instanceof Date?gV:xV(t)?hV:Array.isArray(t)?pV:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?bV:Oh)(e,t)}function yj(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function NV(e,t){t===void 0&&(t=e,e=Vo);for(var n=0,a=t.length-1,l=t[0],o=new Array(a<0?0:a);n<a;)o[n]=e(l,l=t[++n]);return function(d){var u=Math.max(0,Math.min(a-1,Math.floor(d*=a)));return o[u](d-u)}}function wV(e){return function(){return e}}function Th(e){return+e}var l5=[0,1];function zr(e){return e}function nv(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:wV(isNaN(t)?NaN:.5)}function SV(e,t){var n;return e>t&&(n=e,e=t,t=n),function(a){return Math.max(e,Math.min(t,a))}}function EV(e,t,n){var a=e[0],l=e[1],o=t[0],d=t[1];return l<a?(a=nv(l,a),o=n(d,o)):(a=nv(a,l),o=n(o,d)),function(u){return o(a(u))}}function CV(e,t,n){var a=Math.min(e.length,t.length)-1,l=new Array(a),o=new Array(a),d=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<a;)l[d]=nv(e[d],e[d+1]),o[d]=n(t[d],t[d+1]);return function(u){var m=du(e,u,1,a)-1;return o[m](l[m](u))}}function fu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Dx(){var e=l5,t=l5,n=Vo,a,l,o,d=zr,u,m,h;function x(){var b=Math.min(e.length,t.length);return d!==zr&&(d=SV(e[0],e[b-1])),u=b>2?CV:EV,m=h=null,p}function p(b){return b==null||isNaN(b=+b)?o:(m||(m=u(e.map(a),t,n)))(a(d(b)))}return p.invert=function(b){return d(l((h||(h=u(t,e.map(a),Oh)))(b)))},p.domain=function(b){return arguments.length?(e=Array.from(b,Th),x()):e.slice()},p.range=function(b){return arguments.length?(t=Array.from(b),x()):t.slice()},p.rangeRound=function(b){return t=Array.from(b),n=yj,x()},p.clamp=function(b){return arguments.length?(d=b?!0:zr,x()):d!==zr},p.interpolate=function(b){return arguments.length?(n=b,x()):n},p.unknown=function(b){return arguments.length?(o=b,p):o},function(b,N){return a=b,l=N,x()}}function vj(){return Dx()(zr,zr)}function AV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Rh(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,n);return[a.length>1?a[0]+a.slice(2):a,+e.slice(n+1)]}function Bo(e){return e=Rh(Math.abs(e)),e?e[1]:NaN}function kV(e,t){return function(n,a){for(var l=n.length,o=[],d=0,u=e[0],m=0;l>0&&u>0&&(m+u+1>a&&(u=Math.max(1,a-m)),o.push(n.substring(l-=u,l+u)),!((m+=u+1)>a));)u=e[d=(d+1)%e.length];return o.reverse().join(t)}}function _V(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var OV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function $d(e){if(!(t=OV.exec(e)))throw new Error("invalid format: "+e);var t;return new jj({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}$d.prototype=jj.prototype;function jj(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}jj.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TV(e){e:for(var t=e.length,n=1,a=-1,l;n<t;++n)switch(e[n]){case".":a=l=n;break;case"0":a===0&&(a=n),l=n;break;default:if(!+e[n])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(l+1):e}var Ph;function RV(e,t){var n=Rh(e,t);if(!n)return Ph=void 0,e.toPrecision(t);var a=n[0],l=n[1],o=l-(Ph=Math.max(-8,Math.min(8,Math.floor(l/3)))*3)+1,d=a.length;return o===d?a:o>d?a+new Array(o-d+1).join("0"):o>0?a.slice(0,o)+"."+a.slice(o):"0."+new Array(1-o).join("0")+Rh(e,Math.max(0,t+o-1))[0]}function i5(e,t){var n=Rh(e,t);if(!n)return e+"";var a=n[0],l=n[1];return l<0?"0."+new Array(-l).join("0")+a:a.length>l+1?a.slice(0,l+1)+"."+a.slice(l+1):a+new Array(l-a.length+2).join("0")}const o5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:AV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>i5(e*100,t),r:i5,s:RV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function c5(e){return e}var d5=Array.prototype.map,u5=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function PV(e){var t=e.grouping===void 0||e.thousands===void 0?c5:kV(d5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",l=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?c5:_V(d5.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",m=e.nan===void 0?"NaN":e.nan+"";function h(p,b){p=$d(p);var N=p.fill,v=p.align,w=p.sign,S=p.symbol,A=p.zero,E=p.width,C=p.comma,O=p.precision,k=p.trim,_=p.type;_==="n"?(C=!0,_="g"):o5[_]||(O===void 0&&(O=12),k=!0,_="g"),(A||N==="0"&&v==="=")&&(A=!0,N="0",v="=");var T=(b&&b.prefix!==void 0?b.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():""),P=(S==="$"?a:/[%p]/.test(_)?d:"")+(b&&b.suffix!==void 0?b.suffix:""),L=o5[_],z=/[defgprs%]/.test(_);O=O===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function U(B){var ee=T,X=P,be,G,J;if(_==="c")X=L(B)+X,B="";else{B=+B;var $=B<0||1/B<0;if(B=isNaN(B)?m:L(Math.abs(B),O),k&&(B=TV(B)),$&&+B==0&&w!=="+"&&($=!1),ee=($?w==="("?w:u:w==="-"||w==="("?"":w)+ee,X=(_==="s"&&!isNaN(B)&&Ph!==void 0?u5[8+Ph/3]:"")+X+($&&w==="("?")":""),z){for(be=-1,G=B.length;++be<G;)if(J=B.charCodeAt(be),48>J||J>57){X=(J===46?l+B.slice(be+1):B.slice(be))+X,B=B.slice(0,be);break}}}C&&!A&&(B=t(B,1/0));var q=ee.length+B.length+X.length,se=q<E?new Array(E-q+1).join(N):"";switch(C&&A&&(B=t(se+B,se.length?E-X.length:1/0),se=""),v){case"<":B=ee+B+X+se;break;case"=":B=ee+se+B+X;break;case"^":B=se.slice(0,q=se.length>>1)+ee+B+X+se.slice(q);break;default:B=se+ee+B+X;break}return o(B)}return U.toString=function(){return p+""},U}function x(p,b){var N=Math.max(-8,Math.min(8,Math.floor(Bo(b)/3)))*3,v=Math.pow(10,-N),w=h((p=$d(p),p.type="f",p),{suffix:u5[8+N/3]});return function(S){return w(v*S)}}return{format:h,formatPrefix:x}}var am,Nj,vO;DV({thousands:",",grouping:[3],currency:["$",""]});function DV(e){return am=PV(e),Nj=am.format,vO=am.formatPrefix,am}function MV(e){return Math.max(0,-Bo(Math.abs(e)))}function IV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bo(t)/3)))*3-Bo(Math.abs(e)))}function LV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bo(t)-Bo(e))+1}function jO(e,t,n,a){var l=Jy(e,t,n),o;switch(a=$d(a??",f"),a.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(o=IV(l,d))&&(a.precision=o),vO(a,d)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(o=LV(l,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=o-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(o=MV(l))&&(a.precision=o-(a.type==="%")*2);break}}return Nj(a)}function Cl(e){var t=e.domain;return e.ticks=function(n){var a=t();return Xy(a[0],a[a.length-1],n??10)},e.tickFormat=function(n,a){var l=t();return jO(l[0],l[l.length-1],n??10,a)},e.nice=function(n){n==null&&(n=10);var a=t(),l=0,o=a.length-1,d=a[l],u=a[o],m,h,x=10;for(u<d&&(h=d,d=u,u=h,h=l,l=o,o=h);x-- >0;){if(h=Zy(d,u,n),h===m)return a[l]=d,a[o]=u,t(a);if(h>0)d=Math.floor(d/h)*h,u=Math.ceil(u/h)*h;else if(h<0)d=Math.ceil(d*h)/h,u=Math.floor(u*h)/h;else break;m=h}return e},e}function NO(){var e=vj();return e.copy=function(){return fu(e,NO())},Qn.apply(e,arguments),Cl(e)}function wO(e){var t;function n(a){return a==null||isNaN(a=+a)?t:a}return n.invert=n,n.domain=n.range=function(a){return arguments.length?(e=Array.from(a,Th),n):e.slice()},n.unknown=function(a){return arguments.length?(t=a,n):t},n.copy=function(){return wO(e).unknown(t)},e=arguments.length?Array.from(e,Th):[0,1],Cl(n)}function SO(e,t){e=e.slice();var n=0,a=e.length-1,l=e[n],o=e[a],d;return o<l&&(d=n,n=a,a=d,d=l,l=o,o=d),e[n]=t.floor(l),e[a]=t.ceil(o),e}function f5(e){return Math.log(e)}function m5(e){return Math.exp(e)}function zV(e){return-Math.log(-e)}function BV(e){return-Math.exp(-e)}function $V(e){return isFinite(e)?+("1e"+e):e<0?0:e}function UV(e){return e===10?$V:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function h5(e){return(t,n)=>-e(-t,n)}function wj(e){const t=e(f5,m5),n=t.domain;let a=10,l,o;function d(){return l=qV(a),o=UV(a),n()[0]<0?(l=h5(l),o=h5(o),e(zV,BV)):e(f5,m5),t}return t.base=function(u){return arguments.length?(a=+u,d()):a},t.domain=function(u){return arguments.length?(n(u),d()):n()},t.ticks=u=>{const m=n();let h=m[0],x=m[m.length-1];const p=x<h;p&&([h,x]=[x,h]);let b=l(h),N=l(x),v,w;const S=u==null?10:+u;let A=[];if(!(a%1)&&N-b<S){if(b=Math.floor(b),N=Math.ceil(N),h>0){for(;b<=N;++b)for(v=1;v<a;++v)if(w=b<0?v/o(-b):v*o(b),!(w<h)){if(w>x)break;A.push(w)}}else for(;b<=N;++b)for(v=a-1;v>=1;--v)if(w=b>0?v/o(-b):v*o(b),!(w<h)){if(w>x)break;A.push(w)}A.length*2<S&&(A=Xy(h,x,S))}else A=Xy(b,N,Math.min(N-b,S)).map(o);return p?A.reverse():A},t.tickFormat=(u,m)=>{if(u==null&&(u=10),m==null&&(m=a===10?"s":","),typeof m!="function"&&(!(a%1)&&(m=$d(m)).precision==null&&(m.trim=!0),m=Nj(m)),u===1/0)return m;const h=Math.max(1,a*u/t.ticks().length);return x=>{let p=x/o(Math.round(l(x)));return p*a<a-.5&&(p*=a),p<=h?m(x):""}},t.nice=()=>n(SO(n(),{floor:u=>o(Math.floor(l(u))),ceil:u=>o(Math.ceil(l(u)))})),t}function EO(){const e=wj(Dx()).domain([1,10]);return e.copy=()=>fu(e,EO()).base(e.base()),Qn.apply(e,arguments),e}function x5(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function p5(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Sj(e){var t=1,n=e(x5(t),p5(t));return n.constant=function(a){return arguments.length?e(x5(t=+a),p5(t)):t},Cl(n)}function CO(){var e=Sj(Dx());return e.copy=function(){return fu(e,CO()).constant(e.constant())},Qn.apply(e,arguments)}function g5(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function FV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function HV(e){return e<0?-e*e:e*e}function Ej(e){var t=e(zr,zr),n=1;function a(){return n===1?e(zr,zr):n===.5?e(FV,HV):e(g5(n),g5(1/n))}return t.exponent=function(l){return arguments.length?(n=+l,a()):n},Cl(t)}function Cj(){var e=Ej(Dx());return e.copy=function(){return fu(e,Cj()).exponent(e.exponent())},Qn.apply(e,arguments),e}function KV(){return Cj.apply(null,arguments).exponent(.5)}function b5(e){return Math.sign(e)*e*e}function GV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function AO(){var e=vj(),t=[0,1],n=!1,a;function l(o){var d=GV(e(o));return isNaN(d)?a:n?Math.round(d):d}return l.invert=function(o){return e.invert(b5(o))},l.domain=function(o){return arguments.length?(e.domain(o),l):e.domain()},l.range=function(o){return arguments.length?(e.range((t=Array.from(o,Th)).map(b5)),l):t.slice()},l.rangeRound=function(o){return l.range(o).round(!0)},l.round=function(o){return arguments.length?(n=!!o,l):n},l.clamp=function(o){return arguments.length?(e.clamp(o),l):e.clamp()},l.unknown=function(o){return arguments.length?(a=o,l):a},l.copy=function(){return AO(e.domain(),t).round(n).clamp(e.clamp()).unknown(a)},Qn.apply(l,arguments),Cl(l)}function kO(){var e=[],t=[],n=[],a;function l(){var d=0,u=Math.max(1,t.length);for(n=new Array(u-1);++d<u;)n[d-1]=WG(e,d/u);return o}function o(d){return d==null||isNaN(d=+d)?a:t[du(n,d)]}return o.invertExtent=function(d){var u=t.indexOf(d);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},o.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let u of d)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(yl),l()},o.range=function(d){return arguments.length?(t=Array.from(d),l()):t.slice()},o.unknown=function(d){return arguments.length?(a=d,o):a},o.quantiles=function(){return n.slice()},o.copy=function(){return kO().domain(e).range(t).unknown(a)},Qn.apply(o,arguments)}function _O(){var e=0,t=1,n=1,a=[.5],l=[0,1],o;function d(m){return m!=null&&m<=m?l[du(a,m,0,n)]:o}function u(){var m=-1;for(a=new Array(n);++m<n;)a[m]=((m+1)*t-(m-n)*e)/(n+1);return d}return d.domain=function(m){return arguments.length?([e,t]=m,e=+e,t=+t,u()):[e,t]},d.range=function(m){return arguments.length?(n=(l=Array.from(m)).length-1,u()):l.slice()},d.invertExtent=function(m){var h=l.indexOf(m);return h<0?[NaN,NaN]:h<1?[e,a[0]]:h>=n?[a[n-1],t]:[a[h-1],a[h]]},d.unknown=function(m){return arguments.length&&(o=m),d},d.thresholds=function(){return a.slice()},d.copy=function(){return _O().domain([e,t]).range(l).unknown(o)},Qn.apply(Cl(d),arguments)}function OO(){var e=[.5],t=[0,1],n,a=1;function l(o){return o!=null&&o<=o?t[du(e,o,0,a)]:n}return l.domain=function(o){return arguments.length?(e=Array.from(o),a=Math.min(e.length,t.length-1),l):e.slice()},l.range=function(o){return arguments.length?(t=Array.from(o),a=Math.min(e.length,t.length-1),l):t.slice()},l.invertExtent=function(o){var d=t.indexOf(o);return[e[d-1],e[d]]},l.unknown=function(o){return arguments.length?(n=o,l):n},l.copy=function(){return OO().domain(e).range(t).unknown(n)},Qn.apply(l,arguments)}const Ub=new Date,qb=new Date;function or(e,t,n,a){function l(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return l.floor=o=>(e(o=new Date(+o)),o),l.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),l.round=o=>{const d=l(o),u=l.ceil(o);return o-d<u-o?d:u},l.offset=(o,d)=>(t(o=new Date(+o),d==null?1:Math.floor(d)),o),l.range=(o,d,u)=>{const m=[];if(o=l.ceil(o),u=u==null?1:Math.floor(u),!(o<d)||!(u>0))return m;let h;do m.push(h=new Date(+o)),t(o,u),e(o);while(h<o&&o<d);return m},l.filter=o=>or(d=>{if(d>=d)for(;e(d),!o(d);)d.setTime(d-1)},(d,u)=>{if(d>=d)if(u<0)for(;++u<=0;)for(;t(d,-1),!o(d););else for(;--u>=0;)for(;t(d,1),!o(d););}),n&&(l.count=(o,d)=>(Ub.setTime(+o),qb.setTime(+d),e(Ub),e(qb),Math.floor(n(Ub,qb))),l.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?l.filter(a?d=>a(d)%o===0:d=>l.count(0,d)%o===0):l)),l}const Dh=or(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Dh.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?or(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Dh);Dh.range;const ms=1e3,$n=ms*60,hs=$n*60,Ns=hs*24,Aj=Ns*7,y5=Ns*30,Fb=Ns*365,ri=or(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ms)},(e,t)=>(t-e)/ms,e=>e.getUTCSeconds());ri.range;const kj=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ms)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getMinutes());kj.range;const _j=or(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*$n)},(e,t)=>(t-e)/$n,e=>e.getUTCMinutes());_j.range;const Oj=or(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ms-e.getMinutes()*$n)},(e,t)=>{e.setTime(+e+t*hs)},(e,t)=>(t-e)/hs,e=>e.getHours());Oj.range;const Tj=or(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*hs)},(e,t)=>(t-e)/hs,e=>e.getUTCHours());Tj.range;const mu=or(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*$n)/Ns,e=>e.getDate()-1);mu.range;const Mx=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ns,e=>e.getUTCDate()-1);Mx.range;const TO=or(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ns,e=>Math.floor(e/Ns));TO.range;function Ai(e){return or(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*$n)/Aj)}const Ix=Ai(0),Mh=Ai(1),VV=Ai(2),YV=Ai(3),$o=Ai(4),QV=Ai(5),WV=Ai(6);Ix.range;Mh.range;VV.range;YV.range;$o.range;QV.range;WV.range;function ki(e){return or(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Aj)}const Lx=ki(0),Ih=ki(1),XV=ki(2),ZV=ki(3),Uo=ki(4),JV=ki(5),eY=ki(6);Lx.range;Ih.range;XV.range;ZV.range;Uo.range;JV.range;eY.range;const Rj=or(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Rj.range;const Pj=or(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Pj.range;const ws=or(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ws.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ws.range;const Ss=or(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ss.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:or(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ss.range;function RO(e,t,n,a,l,o){const d=[[ri,1,ms],[ri,5,5*ms],[ri,15,15*ms],[ri,30,30*ms],[o,1,$n],[o,5,5*$n],[o,15,15*$n],[o,30,30*$n],[l,1,hs],[l,3,3*hs],[l,6,6*hs],[l,12,12*hs],[a,1,Ns],[a,2,2*Ns],[n,1,Aj],[t,1,y5],[t,3,3*y5],[e,1,Fb]];function u(h,x,p){const b=x<h;b&&([h,x]=[x,h]);const N=p&&typeof p.range=="function"?p:m(h,x,p),v=N?N.range(h,+x+1):[];return b?v.reverse():v}function m(h,x,p){const b=Math.abs(x-h)/p,N=hj(([,,S])=>S).right(d,b);if(N===d.length)return e.every(Jy(h/Fb,x/Fb,p));if(N===0)return Dh.every(Math.max(Jy(h,x,p),1));const[v,w]=d[b/d[N-1][2]<d[N][2]/b?N-1:N];return v.every(w)}return[u,m]}const[tY,rY]=RO(Ss,Pj,Lx,TO,Tj,_j),[nY,aY]=RO(ws,Rj,Ix,mu,Oj,kj);function Hb(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Kb(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function ud(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sY(e){var t=e.dateTime,n=e.date,a=e.time,l=e.periods,o=e.days,d=e.shortDays,u=e.months,m=e.shortMonths,h=fd(l),x=md(l),p=fd(o),b=md(o),N=fd(d),v=md(d),w=fd(u),S=md(u),A=fd(m),E=md(m),C={a:J,A:$,b:q,B:se,c:null,d:E5,e:E5,f:kY,g:zY,G:$Y,H:EY,I:CY,j:AY,L:PO,m:_Y,M:OY,p:I,q:M,Q:k5,s:_5,S:TY,u:RY,U:PY,V:DY,w:MY,W:IY,x:null,X:null,y:LY,Y:BY,Z:UY,"%":A5},O={a:H,A:oe,b:K,B:pe,c:null,d:C5,e:C5,f:KY,g:tQ,G:nQ,H:qY,I:FY,j:HY,L:MO,m:GY,M:VY,p:V,q:xe,Q:k5,s:_5,S:YY,u:QY,U:WY,V:XY,w:ZY,W:JY,x:null,X:null,y:eQ,Y:rQ,Z:aQ,"%":A5},k={a:z,A:U,b:B,B:ee,c:X,d:w5,e:w5,f:jY,g:N5,G:j5,H:S5,I:S5,j:gY,L:vY,m:pY,M:bY,p:L,q:xY,Q:wY,s:SY,S:yY,u:dY,U:uY,V:fY,w:cY,W:mY,x:be,X:G,y:N5,Y:j5,Z:hY,"%":NY};C.x=_(n,C),C.X=_(a,C),C.c=_(t,C),O.x=_(n,O),O.X=_(a,O),O.c=_(t,O);function _(Z,ne){return function(Se){var W=[],ae=-1,we=0,Be=Z.length,tt,kr,tr;for(Se instanceof Date||(Se=new Date(+Se));++ae<Be;)Z.charCodeAt(ae)===37&&(W.push(Z.slice(we,ae)),(kr=v5[tt=Z.charAt(++ae)])!=null?tt=Z.charAt(++ae):kr=tt==="e"?" ":"0",(tr=ne[tt])&&(tt=tr(Se,kr)),W.push(tt),we=ae+1);return W.push(Z.slice(we,ae)),W.join("")}}function T(Z,ne){return function(Se){var W=ud(1900,void 0,1),ae=P(W,Z,Se+="",0),we,Be;if(ae!=Se.length)return null;if("Q"in W)return new Date(W.Q);if("s"in W)return new Date(W.s*1e3+("L"in W?W.L:0));if(ne&&!("Z"in W)&&(W.Z=0),"p"in W&&(W.H=W.H%12+W.p*12),W.m===void 0&&(W.m="q"in W?W.q:0),"V"in W){if(W.V<1||W.V>53)return null;"w"in W||(W.w=1),"Z"in W?(we=Kb(ud(W.y,0,1)),Be=we.getUTCDay(),we=Be>4||Be===0?Ih.ceil(we):Ih(we),we=Mx.offset(we,(W.V-1)*7),W.y=we.getUTCFullYear(),W.m=we.getUTCMonth(),W.d=we.getUTCDate()+(W.w+6)%7):(we=Hb(ud(W.y,0,1)),Be=we.getDay(),we=Be>4||Be===0?Mh.ceil(we):Mh(we),we=mu.offset(we,(W.V-1)*7),W.y=we.getFullYear(),W.m=we.getMonth(),W.d=we.getDate()+(W.w+6)%7)}else("W"in W||"U"in W)&&("w"in W||(W.w="u"in W?W.u%7:"W"in W?1:0),Be="Z"in W?Kb(ud(W.y,0,1)).getUTCDay():Hb(ud(W.y,0,1)).getDay(),W.m=0,W.d="W"in W?(W.w+6)%7+W.W*7-(Be+5)%7:W.w+W.U*7-(Be+6)%7);return"Z"in W?(W.H+=W.Z/100|0,W.M+=W.Z%100,Kb(W)):Hb(W)}}function P(Z,ne,Se,W){for(var ae=0,we=ne.length,Be=Se.length,tt,kr;ae<we;){if(W>=Be)return-1;if(tt=ne.charCodeAt(ae++),tt===37){if(tt=ne.charAt(ae++),kr=k[tt in v5?ne.charAt(ae++):tt],!kr||(W=kr(Z,Se,W))<0)return-1}else if(tt!=Se.charCodeAt(W++))return-1}return W}function L(Z,ne,Se){var W=h.exec(ne.slice(Se));return W?(Z.p=x.get(W[0].toLowerCase()),Se+W[0].length):-1}function z(Z,ne,Se){var W=N.exec(ne.slice(Se));return W?(Z.w=v.get(W[0].toLowerCase()),Se+W[0].length):-1}function U(Z,ne,Se){var W=p.exec(ne.slice(Se));return W?(Z.w=b.get(W[0].toLowerCase()),Se+W[0].length):-1}function B(Z,ne,Se){var W=A.exec(ne.slice(Se));return W?(Z.m=E.get(W[0].toLowerCase()),Se+W[0].length):-1}function ee(Z,ne,Se){var W=w.exec(ne.slice(Se));return W?(Z.m=S.get(W[0].toLowerCase()),Se+W[0].length):-1}function X(Z,ne,Se){return P(Z,t,ne,Se)}function be(Z,ne,Se){return P(Z,n,ne,Se)}function G(Z,ne,Se){return P(Z,a,ne,Se)}function J(Z){return d[Z.getDay()]}function $(Z){return o[Z.getDay()]}function q(Z){return m[Z.getMonth()]}function se(Z){return u[Z.getMonth()]}function I(Z){return l[+(Z.getHours()>=12)]}function M(Z){return 1+~~(Z.getMonth()/3)}function H(Z){return d[Z.getUTCDay()]}function oe(Z){return o[Z.getUTCDay()]}function K(Z){return m[Z.getUTCMonth()]}function pe(Z){return u[Z.getUTCMonth()]}function V(Z){return l[+(Z.getUTCHours()>=12)]}function xe(Z){return 1+~~(Z.getUTCMonth()/3)}return{format:function(Z){var ne=_(Z+="",C);return ne.toString=function(){return Z},ne},parse:function(Z){var ne=T(Z+="",!1);return ne.toString=function(){return Z},ne},utcFormat:function(Z){var ne=_(Z+="",O);return ne.toString=function(){return Z},ne},utcParse:function(Z){var ne=T(Z+="",!0);return ne.toString=function(){return Z},ne}}}var v5={"-":"",_:" ",0:"0"},xr=/^\s*\d+/,lY=/^%/,iY=/[\\^$*+?|[\]().{}]/g;function at(e,t,n){var a=e<0?"-":"",l=(a?-e:e)+"",o=l.length;return a+(o<n?new Array(n-o+1).join(t)+l:l)}function oY(e){return e.replace(iY,"\\$&")}function fd(e){return new RegExp("^(?:"+e.map(oY).join("|")+")","i")}function md(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function cY(e,t,n){var a=xr.exec(t.slice(n,n+1));return a?(e.w=+a[0],n+a[0].length):-1}function dY(e,t,n){var a=xr.exec(t.slice(n,n+1));return a?(e.u=+a[0],n+a[0].length):-1}function uY(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.U=+a[0],n+a[0].length):-1}function fY(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.V=+a[0],n+a[0].length):-1}function mY(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.W=+a[0],n+a[0].length):-1}function j5(e,t,n){var a=xr.exec(t.slice(n,n+4));return a?(e.y=+a[0],n+a[0].length):-1}function N5(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),n+a[0].length):-1}function hY(e,t,n){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),n+a[0].length):-1}function xY(e,t,n){var a=xr.exec(t.slice(n,n+1));return a?(e.q=a[0]*3-3,n+a[0].length):-1}function pY(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.m=a[0]-1,n+a[0].length):-1}function w5(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.d=+a[0],n+a[0].length):-1}function gY(e,t,n){var a=xr.exec(t.slice(n,n+3));return a?(e.m=0,e.d=+a[0],n+a[0].length):-1}function S5(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.H=+a[0],n+a[0].length):-1}function bY(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.M=+a[0],n+a[0].length):-1}function yY(e,t,n){var a=xr.exec(t.slice(n,n+2));return a?(e.S=+a[0],n+a[0].length):-1}function vY(e,t,n){var a=xr.exec(t.slice(n,n+3));return a?(e.L=+a[0],n+a[0].length):-1}function jY(e,t,n){var a=xr.exec(t.slice(n,n+6));return a?(e.L=Math.floor(a[0]/1e3),n+a[0].length):-1}function NY(e,t,n){var a=lY.exec(t.slice(n,n+1));return a?n+a[0].length:-1}function wY(e,t,n){var a=xr.exec(t.slice(n));return a?(e.Q=+a[0],n+a[0].length):-1}function SY(e,t,n){var a=xr.exec(t.slice(n));return a?(e.s=+a[0],n+a[0].length):-1}function E5(e,t){return at(e.getDate(),t,2)}function EY(e,t){return at(e.getHours(),t,2)}function CY(e,t){return at(e.getHours()%12||12,t,2)}function AY(e,t){return at(1+mu.count(ws(e),e),t,3)}function PO(e,t){return at(e.getMilliseconds(),t,3)}function kY(e,t){return PO(e,t)+"000"}function _Y(e,t){return at(e.getMonth()+1,t,2)}function OY(e,t){return at(e.getMinutes(),t,2)}function TY(e,t){return at(e.getSeconds(),t,2)}function RY(e){var t=e.getDay();return t===0?7:t}function PY(e,t){return at(Ix.count(ws(e)-1,e),t,2)}function DO(e){var t=e.getDay();return t>=4||t===0?$o(e):$o.ceil(e)}function DY(e,t){return e=DO(e),at($o.count(ws(e),e)+(ws(e).getDay()===4),t,2)}function MY(e){return e.getDay()}function IY(e,t){return at(Mh.count(ws(e)-1,e),t,2)}function LY(e,t){return at(e.getFullYear()%100,t,2)}function zY(e,t){return e=DO(e),at(e.getFullYear()%100,t,2)}function BY(e,t){return at(e.getFullYear()%1e4,t,4)}function $Y(e,t){var n=e.getDay();return e=n>=4||n===0?$o(e):$o.ceil(e),at(e.getFullYear()%1e4,t,4)}function UY(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function C5(e,t){return at(e.getUTCDate(),t,2)}function qY(e,t){return at(e.getUTCHours(),t,2)}function FY(e,t){return at(e.getUTCHours()%12||12,t,2)}function HY(e,t){return at(1+Mx.count(Ss(e),e),t,3)}function MO(e,t){return at(e.getUTCMilliseconds(),t,3)}function KY(e,t){return MO(e,t)+"000"}function GY(e,t){return at(e.getUTCMonth()+1,t,2)}function VY(e,t){return at(e.getUTCMinutes(),t,2)}function YY(e,t){return at(e.getUTCSeconds(),t,2)}function QY(e){var t=e.getUTCDay();return t===0?7:t}function WY(e,t){return at(Lx.count(Ss(e)-1,e),t,2)}function IO(e){var t=e.getUTCDay();return t>=4||t===0?Uo(e):Uo.ceil(e)}function XY(e,t){return e=IO(e),at(Uo.count(Ss(e),e)+(Ss(e).getUTCDay()===4),t,2)}function ZY(e){return e.getUTCDay()}function JY(e,t){return at(Ih.count(Ss(e)-1,e),t,2)}function eQ(e,t){return at(e.getUTCFullYear()%100,t,2)}function tQ(e,t){return e=IO(e),at(e.getUTCFullYear()%100,t,2)}function rQ(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function nQ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Uo(e):Uo.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function aQ(){return"+0000"}function A5(){return"%"}function k5(e){return+e}function _5(e){return Math.floor(+e/1e3)}var po,LO,zO;sQ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function sQ(e){return po=sY(e),LO=po.format,po.parse,zO=po.utcFormat,po.utcParse,po}function lQ(e){return new Date(e)}function iQ(e){return e instanceof Date?+e:+new Date(+e)}function Dj(e,t,n,a,l,o,d,u,m,h){var x=vj(),p=x.invert,b=x.domain,N=h(".%L"),v=h(":%S"),w=h("%I:%M"),S=h("%I %p"),A=h("%a %d"),E=h("%b %d"),C=h("%B"),O=h("%Y");function k(_){return(m(_)<_?N:u(_)<_?v:d(_)<_?w:o(_)<_?S:a(_)<_?l(_)<_?A:E:n(_)<_?C:O)(_)}return x.invert=function(_){return new Date(p(_))},x.domain=function(_){return arguments.length?b(Array.from(_,iQ)):b().map(lQ)},x.ticks=function(_){var T=b();return e(T[0],T[T.length-1],_??10)},x.tickFormat=function(_,T){return T==null?k:h(T)},x.nice=function(_){var T=b();return(!_||typeof _.range!="function")&&(_=t(T[0],T[T.length-1],_??10)),_?b(SO(T,_)):x},x.copy=function(){return fu(x,Dj(e,t,n,a,l,o,d,u,m,h))},x}function oQ(){return Qn.apply(Dj(nY,aY,ws,Rj,Ix,mu,Oj,kj,ri,LO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function cQ(){return Qn.apply(Dj(tY,rY,Ss,Pj,Lx,Mx,Tj,_j,ri,zO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function zx(){var e=0,t=1,n,a,l,o,d=zr,u=!1,m;function h(p){return p==null||isNaN(p=+p)?m:d(l===0?.5:(p=(o(p)-n)*l,u?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t]=p,n=o(e=+e),a=o(t=+t),l=n===a?0:1/(a-n),h):[e,t]},h.clamp=function(p){return arguments.length?(u=!!p,h):u},h.interpolator=function(p){return arguments.length?(d=p,h):d};function x(p){return function(b){var N,v;return arguments.length?([N,v]=b,d=p(N,v),h):[d(0),d(1)]}}return h.range=x(Vo),h.rangeRound=x(yj),h.unknown=function(p){return arguments.length?(m=p,h):m},function(p){return o=p,n=p(e),a=p(t),l=n===a?0:1/(a-n),h}}function Al(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BO(){var e=Cl(zx()(zr));return e.copy=function(){return Al(e,BO())},Ps.apply(e,arguments)}function $O(){var e=wj(zx()).domain([1,10]);return e.copy=function(){return Al(e,$O()).base(e.base())},Ps.apply(e,arguments)}function UO(){var e=Sj(zx());return e.copy=function(){return Al(e,UO()).constant(e.constant())},Ps.apply(e,arguments)}function Mj(){var e=Ej(zx());return e.copy=function(){return Al(e,Mj()).exponent(e.exponent())},Ps.apply(e,arguments)}function dQ(){return Mj.apply(null,arguments).exponent(.5)}function qO(){var e=[],t=zr;function n(a){if(a!=null&&!isNaN(a=+a))return t((du(e,a,1)-1)/(e.length-1))}return n.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let l of a)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(yl),n},n.interpolator=function(a){return arguments.length?(t=a,n):t},n.range=function(){return e.map((a,l)=>t(l/(e.length-1)))},n.quantiles=function(a){return Array.from({length:a+1},(l,o)=>QG(e,o/a))},n.copy=function(){return qO(t).domain(e)},Ps.apply(n,arguments)}function Bx(){var e=0,t=.5,n=1,a=1,l,o,d,u,m,h=zr,x,p=!1,b;function N(w){return isNaN(w=+w)?b:(w=.5+((w=+x(w))-o)*(a*w<a*o?u:m),h(p?Math.max(0,Math.min(1,w)):w))}N.domain=function(w){return arguments.length?([e,t,n]=w,l=x(e=+e),o=x(t=+t),d=x(n=+n),u=l===o?0:.5/(o-l),m=o===d?0:.5/(d-o),a=o<l?-1:1,N):[e,t,n]},N.clamp=function(w){return arguments.length?(p=!!w,N):p},N.interpolator=function(w){return arguments.length?(h=w,N):h};function v(w){return function(S){var A,E,C;return arguments.length?([A,E,C]=S,h=NV(w,[A,E,C]),N):[h(0),h(.5),h(1)]}}return N.range=v(Vo),N.rangeRound=v(yj),N.unknown=function(w){return arguments.length?(b=w,N):b},function(w){return x=w,l=w(e),o=w(t),d=w(n),u=l===o?0:.5/(o-l),m=o===d?0:.5/(d-o),a=o<l?-1:1,N}}function FO(){var e=Cl(Bx()(zr));return e.copy=function(){return Al(e,FO())},Ps.apply(e,arguments)}function HO(){var e=wj(Bx()).domain([.1,1,10]);return e.copy=function(){return Al(e,HO()).base(e.base())},Ps.apply(e,arguments)}function KO(){var e=Sj(Bx());return e.copy=function(){return Al(e,KO()).constant(e.constant())},Ps.apply(e,arguments)}function Ij(){var e=Ej(Bx());return e.copy=function(){return Al(e,Ij()).exponent(e.exponent())},Ps.apply(e,arguments)}function uQ(){return Ij.apply(null,arguments).exponent(.5)}const bd=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:pj,scaleDiverging:FO,scaleDivergingLog:HO,scaleDivergingPow:Ij,scaleDivergingSqrt:uQ,scaleDivergingSymlog:KO,scaleIdentity:wO,scaleImplicit:ev,scaleLinear:NO,scaleLog:EO,scaleOrdinal:xj,scalePoint:ZG,scalePow:Cj,scaleQuantile:kO,scaleQuantize:_O,scaleRadial:AO,scaleSequential:BO,scaleSequentialLog:$O,scaleSequentialPow:Mj,scaleSequentialQuantile:qO,scaleSequentialSqrt:dQ,scaleSequentialSymlog:UO,scaleSqrt:KV,scaleSymlog:CO,scaleThreshold:OO,scaleTime:oQ,scaleUtc:cQ,tickFormat:jO},Symbol.toStringTag,{value:"Module"}));var Ds=e=>e.chartData,GO=ce([Ds],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Lj=(e,t,n,a)=>a?GO(e):Ds(e),fQ=(e,t,n)=>n?GO(e):Ds(e);function Es(e){if(Array.isArray(e)&&e.length===2){var[t,n]=e;if(ot(t)&&ot(n))return!0}return!1}function O5(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function VO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[n,a]=e,l,o;if(ot(n))l=n;else if(typeof n=="function")return;if(ot(a))o=a;else if(typeof a=="function")return;var d=[l,o];if(Es(d))return d}}function mQ(e,t,n){if(!(!n&&t==null)){if(typeof e=="function"&&t!=null)try{var a=e(t,n);if(Es(a))return O5(a,t,n)}catch{}if(Array.isArray(e)&&e.length===2){var[l,o]=e,d,u;if(l==="auto")t!=null&&(d=Math.min(...t));else if(Re(l))d=l;else if(typeof l=="function")try{t!=null&&(d=l(t?.[0]))}catch{}else if(typeof l=="string"&&UC.test(l)){var m=UC.exec(l);if(m==null||m[1]==null||t==null)d=void 0;else{var h=+m[1];d=t[0]-h}}else d=t?.[0];if(o==="auto")t!=null&&(u=Math.max(...t));else if(Re(o))u=o;else if(typeof o=="function")try{t!=null&&(u=o(t?.[1]))}catch{}else if(typeof o=="string"&&qC.test(o)){var x=qC.exec(o);if(x==null||x[1]==null||t==null)u=void 0;else{var p=+x[1];u=t[1]+p}}else u=t?.[1];var b=[d,u];if(Es(b))return t==null?b:O5(b,t,n)}}}var Yo=1e9,hQ={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Bj,_t=!0,Yn="[DecimalError] ",li=Yn+"Invalid argument: ",zj=Yn+"Exponent out of range: ",Qo=Math.floor,Zl=Math.pow,xQ=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,hn,mr=1e7,Ct=7,YO=9007199254740991,Lh=Qo(YO/Ct),_e={};_e.absoluteValue=_e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_e.comparedTo=_e.cmp=function(e){var t,n,a,l,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(a=o.d.length,l=e.d.length,t=0,n=a<l?a:l;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return a===l?0:a>l^o.s<0?1:-1};_e.decimalPlaces=_e.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Ct;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};_e.dividedBy=_e.div=function(e){return gs(this,new this.constructor(e))};_e.dividedToIntegerBy=_e.idiv=function(e){var t=this,n=t.constructor;return jt(gs(t,new n(e),0,1),n.precision)};_e.equals=_e.eq=function(e){return!this.cmp(e)};_e.exponent=function(){return Jt(this)};_e.greaterThan=_e.gt=function(e){return this.cmp(e)>0};_e.greaterThanOrEqualTo=_e.gte=function(e){return this.cmp(e)>=0};_e.isInteger=_e.isint=function(){return this.e>this.d.length-2};_e.isNegative=_e.isneg=function(){return this.s<0};_e.isPositive=_e.ispos=function(){return this.s>0};_e.isZero=function(){return this.s===0};_e.lessThan=_e.lt=function(e){return this.cmp(e)<0};_e.lessThanOrEqualTo=_e.lte=function(e){return this.cmp(e)<1};_e.logarithm=_e.log=function(e){var t,n=this,a=n.constructor,l=a.precision,o=l+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(hn))throw Error(Yn+"NaN");if(n.s<1)throw Error(Yn+(n.s?"NaN":"-Infinity"));return n.eq(hn)?new a(0):(_t=!1,t=gs(Ud(n,o),Ud(e,o),o),_t=!0,jt(t,l))};_e.minus=_e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XO(t,e):QO(t,(e.s=-e.s,e))};_e.modulo=_e.mod=function(e){var t,n=this,a=n.constructor,l=a.precision;if(e=new a(e),!e.s)throw Error(Yn+"NaN");return n.s?(_t=!1,t=gs(n,e,0,1).times(e),_t=!0,n.minus(t)):jt(new a(n),l)};_e.naturalExponential=_e.exp=function(){return WO(this)};_e.naturalLogarithm=_e.ln=function(){return Ud(this)};_e.negated=_e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_e.plus=_e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QO(t,e):XO(t,(e.s=-e.s,e))};_e.precision=_e.sd=function(e){var t,n,a,l=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(li+e);if(t=Jt(l)+1,a=l.d.length-1,n=a*Ct+1,a=l.d[a],a){for(;a%10==0;a/=10)n--;for(a=l.d[0];a>=10;a/=10)n++}return e&&t>n?t:n};_e.squareRoot=_e.sqrt=function(){var e,t,n,a,l,o,d,u=this,m=u.constructor;if(u.s<1){if(!u.s)return new m(0);throw Error(Yn+"NaN")}for(e=Jt(u),_t=!1,l=Math.sqrt(+u),l==0||l==1/0?(t=Da(u.d),(t.length+e)%2==0&&(t+="0"),l=Math.sqrt(t),e=Qo((e+1)/2)-(e<0||e%2),l==1/0?t="5e"+e:(t=l.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new m(t)):a=new m(l.toString()),n=m.precision,l=d=n+3;;)if(o=a,a=o.plus(gs(u,o,d+2)).times(.5),Da(o.d).slice(0,d)===(t=Da(a.d)).slice(0,d)){if(t=t.slice(d-3,d+1),l==d&&t=="4999"){if(jt(o,n+1,0),o.times(o).eq(u)){a=o;break}}else if(t!="9999")break;d+=4}return _t=!0,jt(a,n)};_e.times=_e.mul=function(e){var t,n,a,l,o,d,u,m,h,x=this,p=x.constructor,b=x.d,N=(e=new p(e)).d;if(!x.s||!e.s)return new p(0);for(e.s*=x.s,n=x.e+e.e,m=b.length,h=N.length,m<h&&(o=b,b=N,N=o,d=m,m=h,h=d),o=[],d=m+h,a=d;a--;)o.push(0);for(a=h;--a>=0;){for(t=0,l=m+a;l>a;)u=o[l]+N[a]*b[l-a-1]+t,o[l--]=u%mr|0,t=u/mr|0;o[l]=(o[l]+t)%mr|0}for(;!o[--d];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,_t?jt(e,p.precision):e};_e.toDecimalPlaces=_e.todp=function(e,t){var n=this,a=n.constructor;return n=new a(n),e===void 0?n:(Ua(e,0,Yo),t===void 0?t=a.rounding:Ua(t,0,8),jt(n,e+Jt(n)+1,t))};_e.toExponential=function(e,t){var n,a=this,l=a.constructor;return e===void 0?n=ji(a,!0):(Ua(e,0,Yo),t===void 0?t=l.rounding:Ua(t,0,8),a=jt(new l(a),e+1,t),n=ji(a,!0,e+1)),n};_e.toFixed=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?ji(l):(Ua(e,0,Yo),t===void 0?t=o.rounding:Ua(t,0,8),a=jt(new o(l),e+Jt(l)+1,t),n=ji(a.abs(),!1,e+Jt(a)+1),l.isneg()&&!l.isZero()?"-"+n:n)};_e.toInteger=_e.toint=function(){var e=this,t=e.constructor;return jt(new t(e),Jt(e)+1,t.rounding)};_e.toNumber=function(){return+this};_e.toPower=_e.pow=function(e){var t,n,a,l,o,d,u=this,m=u.constructor,h=12,x=+(e=new m(e));if(!e.s)return new m(hn);if(u=new m(u),!u.s){if(e.s<1)throw Error(Yn+"Infinity");return u}if(u.eq(hn))return u;if(a=m.precision,e.eq(hn))return jt(u,a);if(t=e.e,n=e.d.length-1,d=t>=n,o=u.s,d){if((n=x<0?-x:x)<=YO){for(l=new m(hn),t=Math.ceil(a/Ct+4),_t=!1;n%2&&(l=l.times(u),R5(l.d,t)),n=Qo(n/2),n!==0;)u=u.times(u),R5(u.d,t);return _t=!0,e.s<0?new m(hn).div(l):jt(l,a)}}else if(o<0)throw Error(Yn+"NaN");return o=o<0&&e.d[Math.max(t,n)]&1?-1:1,u.s=1,_t=!1,l=e.times(Ud(u,a+h)),_t=!0,l=WO(l),l.s=o,l};_e.toPrecision=function(e,t){var n,a,l=this,o=l.constructor;return e===void 0?(n=Jt(l),a=ji(l,n<=o.toExpNeg||n>=o.toExpPos)):(Ua(e,1,Yo),t===void 0?t=o.rounding:Ua(t,0,8),l=jt(new o(l),e,t),n=Jt(l),a=ji(l,e<=n||n<=o.toExpNeg,e)),a};_e.toSignificantDigits=_e.tosd=function(e,t){var n=this,a=n.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ua(e,1,Yo),t===void 0?t=a.rounding:Ua(t,0,8)),jt(new a(n),e,t)};_e.toString=_e.valueOf=_e.val=_e.toJSON=_e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Jt(e),n=e.constructor;return ji(e,t<=n.toExpNeg||t>=n.toExpPos)};function QO(e,t){var n,a,l,o,d,u,m,h,x=e.constructor,p=x.precision;if(!e.s||!t.s)return t.s||(t=new x(e)),_t?jt(t,p):t;if(m=e.d,h=t.d,d=e.e,l=t.e,m=m.slice(),o=d-l,o){for(o<0?(a=m,o=-o,u=h.length):(a=h,l=d,u=m.length),d=Math.ceil(p/Ct),u=d>u?d+1:u+1,o>u&&(o=u,a.length=1),a.reverse();o--;)a.push(0);a.reverse()}for(u=m.length,o=h.length,u-o<0&&(o=u,a=h,h=m,m=a),n=0;o;)n=(m[--o]=m[o]+h[o]+n)/mr|0,m[o]%=mr;for(n&&(m.unshift(n),++l),u=m.length;m[--u]==0;)m.pop();return t.d=m,t.e=l,_t?jt(t,p):t}function Ua(e,t,n){if(e!==~~e||e<t||e>n)throw Error(li+e)}function Da(e){var t,n,a,l=e.length-1,o="",d=e[0];if(l>0){for(o+=d,t=1;t<l;t++)a=e[t]+"",n=Ct-a.length,n&&(o+=ml(n)),o+=a;d=e[t],a=d+"",n=Ct-a.length,n&&(o+=ml(n))}else if(d===0)return"0";for(;d%10===0;)d/=10;return o+d}var gs=(function(){function e(a,l){var o,d=0,u=a.length;for(a=a.slice();u--;)o=a[u]*l+d,a[u]=o%mr|0,d=o/mr|0;return d&&a.unshift(d),a}function t(a,l,o,d){var u,m;if(o!=d)m=o>d?1:-1;else for(u=m=0;u<o;u++)if(a[u]!=l[u]){m=a[u]>l[u]?1:-1;break}return m}function n(a,l,o){for(var d=0;o--;)a[o]-=d,d=a[o]<l[o]?1:0,a[o]=d*mr+a[o]-l[o];for(;!a[0]&&a.length>1;)a.shift()}return function(a,l,o,d){var u,m,h,x,p,b,N,v,w,S,A,E,C,O,k,_,T,P,L=a.constructor,z=a.s==l.s?1:-1,U=a.d,B=l.d;if(!a.s)return new L(a);if(!l.s)throw Error(Yn+"Division by zero");for(m=a.e-l.e,T=B.length,k=U.length,N=new L(z),v=N.d=[],h=0;B[h]==(U[h]||0);)++h;if(B[h]>(U[h]||0)&&--m,o==null?E=o=L.precision:d?E=o+(Jt(a)-Jt(l))+1:E=o,E<0)return new L(0);if(E=E/Ct+2|0,h=0,T==1)for(x=0,B=B[0],E++;(h<k||x)&&E--;h++)C=x*mr+(U[h]||0),v[h]=C/B|0,x=C%B|0;else{for(x=mr/(B[0]+1)|0,x>1&&(B=e(B,x),U=e(U,x),T=B.length,k=U.length),O=T,w=U.slice(0,T),S=w.length;S<T;)w[S++]=0;P=B.slice(),P.unshift(0),_=B[0],B[1]>=mr/2&&++_;do x=0,u=t(B,w,T,S),u<0?(A=w[0],T!=S&&(A=A*mr+(w[1]||0)),x=A/_|0,x>1?(x>=mr&&(x=mr-1),p=e(B,x),b=p.length,S=w.length,u=t(p,w,b,S),u==1&&(x--,n(p,T<b?P:B,b))):(x==0&&(u=x=1),p=B.slice()),b=p.length,b<S&&p.unshift(0),n(w,p,S),u==-1&&(S=w.length,u=t(B,w,T,S),u<1&&(x++,n(w,T<S?P:B,S))),S=w.length):u===0&&(x++,w=[0]),v[h++]=x,u&&w[0]?w[S++]=U[O]||0:(w=[U[O]],S=1);while((O++<k||w[0]!==void 0)&&E--)}return v[0]||v.shift(),N.e=m,jt(N,d?o+Jt(N)+1:o)}})();function WO(e,t){var n,a,l,o,d,u,m=0,h=0,x=e.constructor,p=x.precision;if(Jt(e)>16)throw Error(zj+Jt(e));if(!e.s)return new x(hn);for(_t=!1,u=p,d=new x(.03125);e.abs().gte(.1);)e=e.times(d),h+=5;for(a=Math.log(Zl(2,h))/Math.LN10*2+5|0,u+=a,n=l=o=new x(hn),x.precision=u;;){if(l=jt(l.times(e),u),n=n.times(++m),d=o.plus(gs(l,n,u)),Da(d.d).slice(0,u)===Da(o.d).slice(0,u)){for(;h--;)o=jt(o.times(o),u);return x.precision=p,t==null?(_t=!0,jt(o,p)):o}o=d}}function Jt(e){for(var t=e.e*Ct,n=e.d[0];n>=10;n/=10)t++;return t}function Gb(e,t,n){if(t>e.LN10.sd())throw _t=!0,n&&(e.precision=n),Error(Yn+"LN10 precision limit exceeded");return jt(new e(e.LN10),t)}function ml(e){for(var t="";e--;)t+="0";return t}function Ud(e,t){var n,a,l,o,d,u,m,h,x,p=1,b=10,N=e,v=N.d,w=N.constructor,S=w.precision;if(N.s<1)throw Error(Yn+(N.s?"NaN":"-Infinity"));if(N.eq(hn))return new w(0);if(t==null?(_t=!1,h=S):h=t,N.eq(10))return t==null&&(_t=!0),Gb(w,h);if(h+=b,w.precision=h,n=Da(v),a=n.charAt(0),o=Jt(N),Math.abs(o)<15e14){for(;a<7&&a!=1||a==1&&n.charAt(1)>3;)N=N.times(e),n=Da(N.d),a=n.charAt(0),p++;o=Jt(N),a>1?(N=new w("0."+n),o++):N=new w(a+"."+n.slice(1))}else return m=Gb(w,h+2,S).times(o+""),N=Ud(new w(a+"."+n.slice(1)),h-b).plus(m),w.precision=S,t==null?(_t=!0,jt(N,S)):N;for(u=d=N=gs(N.minus(hn),N.plus(hn),h),x=jt(N.times(N),h),l=3;;){if(d=jt(d.times(x),h),m=u.plus(gs(d,new w(l),h)),Da(m.d).slice(0,h)===Da(u.d).slice(0,h))return u=u.times(2),o!==0&&(u=u.plus(Gb(w,h+2,S).times(o+""))),u=gs(u,new w(p),h),w.precision=S,t==null?(_t=!0,jt(u,S)):u;u=m,l+=2}}function T5(e,t){var n,a,l;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(n<0&&(n=a),n+=+t.slice(a+1),t=t.substring(0,a)):n<0&&(n=t.length),a=0;t.charCodeAt(a)===48;)++a;for(l=t.length;t.charCodeAt(l-1)===48;)--l;if(t=t.slice(a,l),t){if(l-=a,n=n-a-1,e.e=Qo(n/Ct),e.d=[],a=(n+1)%Ct,n<0&&(a+=Ct),a<l){for(a&&e.d.push(+t.slice(0,a)),l-=Ct;a<l;)e.d.push(+t.slice(a,a+=Ct));t=t.slice(a),a=Ct-t.length}else a-=l;for(;a--;)t+="0";if(e.d.push(+t),_t&&(e.e>Lh||e.e<-Lh))throw Error(zj+n)}else e.s=0,e.e=0,e.d=[0];return e}function jt(e,t,n){var a,l,o,d,u,m,h,x,p=e.d;for(d=1,o=p[0];o>=10;o/=10)d++;if(a=t-d,a<0)a+=Ct,l=t,h=p[x=0];else{if(x=Math.ceil((a+1)/Ct),o=p.length,x>=o)return e;for(h=o=p[x],d=1;o>=10;o/=10)d++;a%=Ct,l=a-Ct+d}if(n!==void 0&&(o=Zl(10,d-l-1),u=h/o%10|0,m=t<0||p[x+1]!==void 0||h%o,m=n<4?(u||m)&&(n==0||n==(e.s<0?3:2)):u>5||u==5&&(n==4||m||n==6&&(a>0?l>0?h/Zl(10,d-l):0:p[x-1])%10&1||n==(e.s<0?8:7))),t<1||!p[0])return m?(o=Jt(e),p.length=1,t=t-o-1,p[0]=Zl(10,(Ct-t%Ct)%Ct),e.e=Qo(-t/Ct)||0):(p.length=1,p[0]=e.e=e.s=0),e;if(a==0?(p.length=x,o=1,x--):(p.length=x+1,o=Zl(10,Ct-a),p[x]=l>0?(h/Zl(10,d-l)%Zl(10,l)|0)*o:0),m)for(;;)if(x==0){(p[0]+=o)==mr&&(p[0]=1,++e.e);break}else{if(p[x]+=o,p[x]!=mr)break;p[x--]=0,o=1}for(a=p.length;p[--a]===0;)p.pop();if(_t&&(e.e>Lh||e.e<-Lh))throw Error(zj+Jt(e));return e}function XO(e,t){var n,a,l,o,d,u,m,h,x,p,b=e.constructor,N=b.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new b(e),_t?jt(t,N):t;if(m=e.d,p=t.d,a=t.e,h=e.e,m=m.slice(),d=h-a,d){for(x=d<0,x?(n=m,d=-d,u=p.length):(n=p,a=h,u=m.length),l=Math.max(Math.ceil(N/Ct),u)+2,d>l&&(d=l,n.length=1),n.reverse(),l=d;l--;)n.push(0);n.reverse()}else{for(l=m.length,u=p.length,x=l<u,x&&(u=l),l=0;l<u;l++)if(m[l]!=p[l]){x=m[l]<p[l];break}d=0}for(x&&(n=m,m=p,p=n,t.s=-t.s),u=m.length,l=p.length-u;l>0;--l)m[u++]=0;for(l=p.length;l>d;){if(m[--l]<p[l]){for(o=l;o&&m[--o]===0;)m[o]=mr-1;--m[o],m[l]+=mr}m[l]-=p[l]}for(;m[--u]===0;)m.pop();for(;m[0]===0;m.shift())--a;return m[0]?(t.d=m,t.e=a,_t?jt(t,N):t):new b(0)}function ji(e,t,n){var a,l=Jt(e),o=Da(e.d),d=o.length;return t?(n&&(a=n-d)>0?o=o.charAt(0)+"."+o.slice(1)+ml(a):d>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(l<0?"e":"e+")+l):l<0?(o="0."+ml(-l-1)+o,n&&(a=n-d)>0&&(o+=ml(a))):l>=d?(o+=ml(l+1-d),n&&(a=n-l-1)>0&&(o=o+"."+ml(a))):((a=l+1)<d&&(o=o.slice(0,a)+"."+o.slice(a)),n&&(a=n-d)>0&&(l+1===d&&(o+="."),o+=ml(a))),e.s<0?"-"+o:o}function R5(e,t){if(e.length>t)return e.length=t,!0}function ZO(e){var t,n,a;function l(o){var d=this;if(!(d instanceof l))return new l(o);if(d.constructor=l,o instanceof l){d.s=o.s,d.e=o.e,d.d=(o=o.d)?o.slice():o;return}if(typeof o=="number"){if(o*0!==0)throw Error(li+o);if(o>0)d.s=1;else if(o<0)o=-o,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(o===~~o&&o<1e7){d.e=0,d.d=[o];return}return T5(d,o.toString())}else if(typeof o!="string")throw Error(li+o);if(o.charCodeAt(0)===45?(o=o.slice(1),d.s=-1):d.s=1,xQ.test(o))T5(d,o);else throw Error(li+o)}if(l.prototype=_e,l.ROUND_UP=0,l.ROUND_DOWN=1,l.ROUND_CEIL=2,l.ROUND_FLOOR=3,l.ROUND_HALF_UP=4,l.ROUND_HALF_DOWN=5,l.ROUND_HALF_EVEN=6,l.ROUND_HALF_CEIL=7,l.ROUND_HALF_FLOOR=8,l.clone=ZO,l.config=l.set=pQ,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(n=a[t++])||(e[n]=this[n]);return l.config(e),l}function pQ(e){if(!e||typeof e!="object")throw Error(Yn+"Object expected");var t,n,a,l=["precision",1,Yo,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<l.length;t+=3)if((a=e[n=l[t]])!==void 0)if(Qo(a)===a&&a>=l[t+1]&&a<=l[t+2])this[n]=a;else throw Error(li+n+": "+a);if((a=e[n="LN10"])!==void 0)if(a==Math.LN10)this[n]=new this(a);else throw Error(li+n+": "+a);return this}var Bj=ZO(hQ);hn=new Bj(1);const ft=Bj;function JO(e){var t;return e===0?t=1:t=Math.floor(new ft(e).abs().log(10).toNumber())+1,t}function e6(e,t,n){for(var a=new ft(e),l=0,o=[];a.lt(t)&&l<1e5;)o.push(a.toNumber()),a=a.add(n),l++;return o}var t6=e=>{var[t,n]=e,[a,l]=[t,n];return t>n&&([a,l]=[n,t]),[a,l]},r6=(e,t,n)=>{if(e.lte(0))return new ft(0);var a=JO(e.toNumber()),l=new ft(10).pow(a),o=e.div(l),d=a!==1?.05:.1,u=new ft(Math.ceil(o.div(d).toNumber())).add(n).mul(d),m=u.mul(l);return t?new ft(m.toNumber()):new ft(Math.ceil(m.toNumber()))},gQ=(e,t,n)=>{var a=new ft(1),l=new ft(e);if(!l.isint()&&n){var o=Math.abs(e);o<1?(a=new ft(10).pow(JO(e)-1),l=new ft(Math.floor(l.div(a).toNumber())).mul(a)):o>1&&(l=new ft(Math.floor(e)))}else e===0?l=new ft(Math.floor((t-1)/2)):n||(l=new ft(Math.floor(e)));for(var d=Math.floor((t-1)/2),u=[],m=0;m<t;m++)u.push(l.add(new ft(m-d).mul(a)).toNumber());return u},n6=function(t,n,a,l){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-t)/(a-1)))return{step:new ft(0),tickMin:new ft(0),tickMax:new ft(0)};var d=r6(new ft(n).sub(t).div(a-1),l,o),u;t<=0&&n>=0?u=new ft(0):(u=new ft(t).add(n).div(2),u=u.sub(new ft(u).mod(d)));var m=Math.ceil(u.sub(t).div(d).toNumber()),h=Math.ceil(new ft(n).sub(u).div(d).toNumber()),x=m+h+1;return x>a?n6(t,n,a,l,o+1):(x<a&&(h=n>0?h+(a-x):h,m=n>0?m:m+(a-x)),{step:d,tickMin:u.sub(new ft(m).mul(d)),tickMax:u.add(new ft(h).mul(d))})},bQ=function(t){var[n,a]=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(l,2),[u,m]=t6([n,a]);if(u===-1/0||m===1/0){var h=m===1/0?[u,...Array(l-1).fill(1/0)]:[...Array(l-1).fill(-1/0),m];return n>a?h.reverse():h}if(u===m)return gQ(u,l,o);var{step:x,tickMin:p,tickMax:b}=n6(u,m,d,o,0),N=e6(p,b.add(new ft(.1).mul(x)),x);return n>a?N.reverse():N},yQ=function(t,n){var[a,l]=t,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[d,u]=t6([a,l]);if(d===-1/0||u===1/0)return[a,l];if(d===u)return[d];var m=Math.max(n,2),h=r6(new ft(u).sub(d).div(m-1),o,0),x=[...e6(new ft(d),new ft(u),h),u];return o===!1&&(x=x.map(p=>Math.round(p))),a>l?x.reverse():x},a6=e=>e.rootProps.maxBarSize,vQ=e=>e.rootProps.barGap,s6=e=>e.rootProps.barCategoryGap,jQ=e=>e.rootProps.barSize,$x=e=>e.rootProps.stackOffset,l6=e=>e.rootProps.reverseStackOrder,$j=e=>e.options.chartName,Uj=e=>e.rootProps.syncId,i6=e=>e.rootProps.syncMethod,qj=e=>e.options.eventEmitter,Ar={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Vl={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Aa={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Ux=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t};function qx(e,t,n){if(n!=="auto")return n;if(e!=null)return Os(e,t)?"category":"number"}function P5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function zh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?P5(Object(n),!0).forEach(function(a){NQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function NQ(e,t,n){return(t=wQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wQ(e){var t=SQ(e,"string");return typeof t=="symbol"?t:t+""}function SQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var D5={allowDataOverflow:Vl.allowDataOverflow,allowDecimals:Vl.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Vl.angleAxisId,includeHidden:!1,name:void 0,reversed:Vl.reversed,scale:Vl.scale,tick:Vl.tick,tickCount:void 0,ticks:void 0,type:Vl.type,unit:void 0},M5={allowDataOverflow:Aa.allowDataOverflow,allowDecimals:Aa.allowDecimals,allowDuplicatedCategory:Aa.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Aa.radiusAxisId,includeHidden:Aa.includeHidden,name:void 0,reversed:Aa.reversed,scale:Aa.scale,tick:Aa.tick,tickCount:Aa.tickCount,ticks:void 0,type:Aa.type,unit:void 0},EQ=(e,t)=>{if(t!=null)return e.polarAxis.angleAxis[t]},Fj=ce([EQ,Y_],(e,t)=>{var n;if(e!=null)return e;var a=(n=qx(t,"angleAxis",D5.type))!==null&&n!==void 0?n:"category";return zh(zh({},D5),{},{type:a})}),CQ=(e,t)=>e.polarAxis.radiusAxis[t],Hj=ce([CQ,Y_],(e,t)=>{var n;if(e!=null)return e;var a=(n=qx(t,"radiusAxis",M5.type))!==null&&n!==void 0?n:"category";return zh(zh({},M5),{},{type:a})}),Fx=e=>e.polarOptions,Kj=ce([Ts,Rs,hr],wG),o6=ce([Fx,Kj],(e,t)=>{if(e!=null)return la(e.innerRadius,t,0)}),c6=ce([Fx,Kj],(e,t)=>{if(e!=null)return la(e.outerRadius,t,t*.8)}),AQ=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]},d6=ce([Fx],AQ);ce([Fj,d6],Ux);var u6=ce([Kj,o6,c6],(e,t,n)=>{if(!(e==null||t==null||n==null))return[t,n]});ce([Hj,u6],Ux);var f6=ce([mt,Fx,o6,c6,Ts,Rs],(e,t,n,a,l,o)=>{if(!(e!=="centric"&&e!=="radial"||t==null||n==null||a==null)){var{cx:d,cy:u,startAngle:m,endAngle:h}=t;return{cx:la(d,l,l/2),cy:la(u,o,o/2),innerRadius:n,outerRadius:a,startAngle:m,endAngle:h,clockWise:!1}}}),pr=(e,t)=>t,Hx=(e,t,n)=>n;function Gj(e){return e?.id}function m6(e,t,n){var{chartData:a=[]}=t,{allowDuplicatedCategory:l,dataKey:o}=n,d=new Map;return e.forEach(u=>{var m,h=(m=u.data)!==null&&m!==void 0?m:a;if(!(h==null||h.length===0)){var x=Gj(u);h.forEach((p,b)=>{var N=o==null||l?b:String(Zt(p,o,null)),v=Zt(p,u.dataKey,0),w;d.has(N)?w=d.get(N):w={},Object.assign(w,{[x]:v}),d.set(N,w)})}}),Array.from(d.values())}function Kx(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var Gx=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function Vx(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function kQ(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}var gr=e=>{var t=mt(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Wo=e=>e.tooltip.settings.axisId;function _Q(e){if(e in bd)return bd[e]();var t="scale".concat(au(e));if(t in bd)return bd[t]()}function I5(e){var t=e.ticks,n=e.bandwidth,a=e.range(),l=[Math.min(...a),Math.max(...a)];return{domain:()=>e.domain(),range:(function(o){function d(){return o.apply(this,arguments)}return d.toString=function(){return o.toString()},d})(()=>l),rangeMin:()=>l[0],rangeMax:()=>l[1],isInRange(o){var d=l[0],u=l[1];return d<=u?o>=d&&o<=u:o>=u&&o<=d},bandwidth:n?()=>n.call(e):void 0,ticks:t?o=>t.call(e,o):void 0,map:(o,d)=>{var u=e(o);if(u!=null){if(e.bandwidth&&d!==null&&d!==void 0&&d.position){var m=e.bandwidth();switch(d.position){case"middle":u+=m/2;break;case"end":u+=m;break}}return u}}}}function L5(e,t,n){if(typeof e=="function")return I5(e.copy().domain(t).range(n));if(e!=null){var a=_Q(e);if(a!=null)return a.domain(t).range(n),I5(a)}}var OQ=(e,t)=>{if(t!=null)switch(e){case"linear":{if(!Es(t)){for(var n,a,l=0;l<t.length;l++){var o=t[l];ot(o)&&((n===void 0||o<n)&&(n=o),(a===void 0||o>a)&&(a=o))}return n!==void 0&&a!==void 0?[n,a]:void 0}return t}default:return t}};function z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Bh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z5(Object(n),!0).forEach(function(a){TQ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function TQ(e,t,n){return(t=RQ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RQ(e){var t=PQ(e,"string");return typeof t=="symbol"?t:t+""}function PQ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var av=[0,"auto"],ur={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},h6=(e,t)=>e.cartesianAxis.xAxis[t],Ms=(e,t)=>{var n=h6(e,t);return n??ur},fr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:av,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:iu},x6=(e,t)=>e.cartesianAxis.yAxis[t],Is=(e,t)=>{var n=x6(e,t);return n??fr},DQ={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Vj=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return n??DQ},Fr=(e,t,n)=>{switch(t){case"xAxis":return Ms(e,n);case"yAxis":return Is(e,n);case"zAxis":return Vj(e,n);case"angleAxis":return Fj(e,n);case"radiusAxis":return Hj(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},MQ=(e,t,n)=>{switch(t){case"xAxis":return Ms(e,n);case"yAxis":return Is(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},hu=(e,t,n)=>{switch(t){case"xAxis":return Ms(e,n);case"yAxis":return Is(e,n);case"angleAxis":return Fj(e,n);case"radiusAxis":return Hj(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},p6=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function g6(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Yx=e=>e.graphicalItems.cartesianItems,IQ=ce([pr,Hx],g6),b6=(e,t,n)=>e.filter(n).filter(a=>t?.includeHidden===!0?!0:!a.hide),xu=ce([Yx,Fr,IQ],b6,{memoizeOptions:{resultEqualityCheck:Vx}}),y6=ce([xu],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(Kx)),v6=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),LQ=ce([xu],v6),j6=e=>e.map(t=>t.data).filter(Boolean).flat(1),zQ=ce([xu],j6,{memoizeOptions:{resultEqualityCheck:Vx}}),N6=(e,t)=>{var{chartData:n=[],dataStartIndex:a,dataEndIndex:l}=t;return e.length>0?e:n.slice(a,l+1)},Yj=ce([zQ,Lj],N6),w6=(e,t,n)=>t?.dataKey!=null?e.map(a=>({value:Zt(a,t.dataKey)})):n.length>0?n.map(a=>a.dataKey).flatMap(a=>e.map(l=>({value:Zt(l,a)}))):e.map(a=>({value:a})),Qx=ce([Yj,Fr,xu],w6);function S6(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Om(e){if($a(e)||e instanceof Date){var t=Number(e);if(ot(t))return t}}function B5(e){if(Array.isArray(e)){var t=[Om(e[0]),Om(e[1])];return Es(t)?t:void 0}var n=Om(e);if(n!=null)return[n,n]}function Cs(e){return e.map(Om).filter(Ra)}function BQ(e,t,n){return!n||typeof t!="number"||Ba(t)?[]:n.length?Cs(n.flatMap(a=>{var l=Zt(e,a.dataKey),o,d;if(Array.isArray(l)?[o,d]=l:o=d=l,!(!ot(o)||!ot(d)))return[t-o,t+d]})):[]}var cr=e=>{var t=gr(e),n=Wo(e);return hu(e,t,n)},pu=ce([cr],e=>e?.dataKey),$Q=ce([y6,Lj,cr],m6),E6=(e,t,n,a)=>{var l={},o=t.reduce((d,u)=>{if(u.stackId==null)return d;var m=d[u.stackId];return m==null&&(m=[]),m.push(u),d[u.stackId]=m,d},l);return Object.fromEntries(Object.entries(o).map(d=>{var[u,m]=d,h=a?[...m].reverse():m,x=h.map(Gj);return[u,{stackedData:uH(e,x,n),graphicalItems:h}]}))},sv=ce([$Q,y6,$x,l6],E6),C6=(e,t,n,a)=>{var{dataStartIndex:l,dataEndIndex:o}=t;if(a==null&&n!=="zAxis"){var d=pH(e,l,o);if(!(d!=null&&d[0]===0&&d[1]===0))return d}},UQ=ce([Fr],e=>e.allowDataOverflow),Qj=e=>{var t;if(e==null||!("domain"in e))return av;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var n=Cs(e.ticks);return[Math.min(...n),Math.max(...n)]}if(e.type==="category")return e.ticks.map(String)}return(t=e?.domain)!==null&&t!==void 0?t:av},A6=ce([Fr],Qj),k6=ce([A6,UQ],VO),qQ=ce([sv,Ds,pr,k6],C6,{memoizeOptions:{resultEqualityCheck:Gx}}),Wj=e=>e.errorBars,FQ=(e,t,n)=>e.flatMap(a=>t[a.id]).filter(Boolean).filter(a=>S6(n,a)),$h=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var l=n.filter(Boolean);if(l.length!==0){var o=l.flat(),d=Math.min(...o),u=Math.max(...o);return[d,u]}},_6=(e,t,n,a,l)=>{var o,d;if(n.length>0&&e.forEach(u=>{n.forEach(m=>{var h,x,p=(h=a[m.id])===null||h===void 0?void 0:h.filter(A=>S6(l,A)),b=Zt(u,(x=t.dataKey)!==null&&x!==void 0?x:m.dataKey),N=BQ(u,b,p);if(N.length>=2){var v=Math.min(...N),w=Math.max(...N);(o==null||v<o)&&(o=v),(d==null||w>d)&&(d=w)}var S=B5(b);S!=null&&(o=o==null?S[0]:Math.min(o,S[0]),d=d==null?S[1]:Math.max(d,S[1]))})}),t?.dataKey!=null&&e.forEach(u=>{var m=B5(Zt(u,t.dataKey));m!=null&&(o=o==null?m[0]:Math.min(o,m[0]),d=d==null?m[1]:Math.max(d,m[1]))}),ot(o)&&ot(d))return[o,d]},HQ=ce([Yj,Fr,LQ,Wj,pr],_6,{memoizeOptions:{resultEqualityCheck:Gx}});function KQ(e){var{value:t}=e;if($a(t)||t instanceof Date)return t}var GQ=(e,t,n)=>{var a=e.map(KQ).filter(l=>l!=null);return n&&(t.dataKey==null||t.allowDuplicatedCategory&&W3(a))?fO(0,e.length):t.allowDuplicatedCategory?a:Array.from(new Set(a))},O6=e=>e.referenceElements.dots,Xo=(e,t,n)=>e.filter(a=>a.ifOverflow==="extendDomain").filter(a=>t==="xAxis"?a.xAxisId===n:a.yAxisId===n),VQ=ce([O6,pr,Hx],Xo),T6=e=>e.referenceElements.areas,YQ=ce([T6,pr,Hx],Xo),R6=e=>e.referenceElements.lines,QQ=ce([R6,pr,Hx],Xo),P6=(e,t)=>{if(e!=null){var n=Cs(e.map(a=>t==="xAxis"?a.x:a.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},WQ=ce(VQ,pr,P6),D6=(e,t)=>{if(e!=null){var n=Cs(e.flatMap(a=>[t==="xAxis"?a.x1:a.y1,t==="xAxis"?a.x2:a.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},XQ=ce([YQ,pr],D6);function ZQ(e){var t;if(e.x!=null)return Cs([e.x]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.x);return n==null||n.length===0?[]:Cs(n)}function JQ(e){var t;if(e.y!=null)return Cs([e.y]);var n=(t=e.segment)===null||t===void 0?void 0:t.map(a=>a.y);return n==null||n.length===0?[]:Cs(n)}var M6=(e,t)=>{if(e!=null){var n=e.flatMap(a=>t==="xAxis"?ZQ(a):JQ(a));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},eW=ce([QQ,pr],M6),tW=ce(WQ,eW,XQ,(e,t,n)=>$h(e,n,t)),I6=(e,t,n,a,l,o,d,u)=>{if(n!=null)return n;var m=d==="vertical"&&u==="xAxis"||d==="horizontal"&&u==="yAxis",h=m?$h(a,o,l):$h(o,l);return mQ(t,h,e.allowDataOverflow)},rW=ce([Fr,A6,k6,qQ,HQ,tW,mt,pr],I6,{memoizeOptions:{resultEqualityCheck:Gx}}),nW=[0,1],L6=(e,t,n,a,l,o,d)=>{if(!((e==null||n==null||n.length===0)&&d===void 0)){var{dataKey:u,type:m}=e,h=Os(t,o);if(h&&u==null){var x;return fO(0,(x=n?.length)!==null&&x!==void 0?x:0)}return m==="category"?GQ(a,e,h):l==="expand"?nW:d}},Xj=ce([Fr,mt,Yj,Qx,$x,pr,rW],L6);function aW(e){return e in bd}var z6=(e,t,n)=>{if(e!=null){var{scale:a,type:l}=e;if(a==="auto")return l==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!t)?"point":l==="category"?"band":"linear";if(typeof a=="string"){var o="scale".concat(au(a));return aW(o)?o:"point"}}},Zo=ce([Fr,p6,$j],z6);function Zj(e,t,n,a){if(!(n==null||a==null))return typeof e.scale=="function"?L5(e.scale,n,a):L5(t,n,a)}var B6=(e,t,n)=>{var a=Qj(t);if(!(n!=="auto"&&n!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(a)&&(a[0]==="auto"||a[1]==="auto")&&Es(e))return bQ(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&Es(e))return yQ(e,t.tickCount,t.allowDecimals)}},Jj=ce([Xj,hu,Zo],B6),$6=(e,t,n,a)=>{if(a!=="angleAxis"&&e?.type==="number"&&Es(t)&&Array.isArray(n)&&n.length>0){var l,o,d=t[0],u=(l=n[0])!==null&&l!==void 0?l:0,m=t[1],h=(o=n[n.length-1])!==null&&o!==void 0?o:0;return[Math.min(d,u),Math.max(m,h)]}return t},sW=ce([Fr,Xj,Jj,pr],$6),lW=ce(Qx,Fr,(e,t)=>{if(!(!t||t.type!=="number")){var n=1/0,a=Array.from(Cs(e.map(p=>p.value))).sort((p,b)=>p-b),l=a[0],o=a[a.length-1];if(l==null||o==null)return 1/0;var d=o-l;if(d===0)return 1/0;for(var u=0;u<a.length-1;u++){var m=a[u],h=a[u+1];if(!(m==null||h==null)){var x=h-m;n=Math.min(n,x)}}return n/d}}),U6=ce(lW,mt,s6,hr,(e,t,n,a,l)=>l,(e,t,n,a,l)=>{if(!ot(e))return 0;var o=t==="vertical"?a.height:a.width;if(l==="gap")return e*o/2;if(l==="no-gap"){var d=la(n,e*o),u=e*o/2;return u-d-(u-d)/o*d}return 0}),iW=(e,t,n)=>{var a=Ms(e,t);return a==null||typeof a.padding!="string"?0:U6(e,"xAxis",t,n,a.padding)},oW=(e,t,n)=>{var a=Is(e,t);return a==null||typeof a.padding!="string"?0:U6(e,"yAxis",t,n,a.padding)},cW=ce(Ms,iW,(e,t)=>{var n,a;if(e==null)return{left:0,right:0};var{padding:l}=e;return typeof l=="string"?{left:t,right:t}:{left:((n=l.left)!==null&&n!==void 0?n:0)+t,right:((a=l.right)!==null&&a!==void 0?a:0)+t}}),dW=ce(Is,oW,(e,t)=>{var n,a;if(e==null)return{top:0,bottom:0};var{padding:l}=e;return typeof l=="string"?{top:t,bottom:t}:{top:((n=l.top)!==null&&n!==void 0?n:0)+t,bottom:((a=l.bottom)!==null&&a!==void 0?a:0)+t}}),uW=ce([hr,cW,Cx,Ex,(e,t,n)=>n],(e,t,n,a,l)=>{var{padding:o}=a;return l?[o.left,n.width-o.right]:[e.left+t.left,e.left+e.width-t.right]}),fW=ce([hr,mt,dW,Cx,Ex,(e,t,n)=>n],(e,t,n,a,l,o)=>{var{padding:d}=l;return o?[a.height-d.bottom,d.top]:t==="horizontal"?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),gu=(e,t,n,a)=>{var l;switch(t){case"xAxis":return uW(e,n,a);case"yAxis":return fW(e,n,a);case"zAxis":return(l=Vj(e,n))===null||l===void 0?void 0:l.range;case"angleAxis":return d6(e);case"radiusAxis":return u6(e,n);default:return}},q6=ce([Fr,gu],Ux),mW=ce([Zo,sW],OQ),Wx=ce([Fr,Zo,mW,q6],Zj);ce([xu,Wj,pr],FQ);function F6(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Xx=(e,t)=>t,Zx=(e,t,n)=>n,hW=ce(wx,Xx,Zx,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(F6)),xW=ce(Sx,Xx,Zx,(e,t,n)=>e.filter(a=>a.orientation===t).filter(a=>a.mirror===n).sort(F6)),H6=(e,t)=>({width:e.width,height:t.height}),pW=(e,t)=>{var n=typeof t.width=="number"?t.width:iu;return{width:n,height:e.height}},K6=ce(hr,Ms,H6),gW=(e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}},bW=(e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}},yW=ce(Rs,hr,hW,Xx,Zx,(e,t,n,a,l)=>{var o={},d;return n.forEach(u=>{var m=H6(t,u);d==null&&(d=gW(t,a,e));var h=a==="top"&&!l||a==="bottom"&&l;o[u.id]=d-Number(h)*m.height,d+=(h?-1:1)*m.height}),o}),vW=ce(Ts,hr,xW,Xx,Zx,(e,t,n,a,l)=>{var o={},d;return n.forEach(u=>{var m=pW(t,u);d==null&&(d=bW(t,a,e));var h=a==="left"&&!l||a==="right"&&l;o[u.id]=d-Number(h)*m.width,d+=(h?-1:1)*m.width}),o}),jW=(e,t)=>{var n=Ms(e,t);if(n!=null)return yW(e,n.orientation,n.mirror)},NW=ce([hr,Ms,jW,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:e.left,y:0}:{x:e.left,y:l}}}),wW=(e,t)=>{var n=Is(e,t);if(n!=null)return vW(e,n.orientation,n.mirror)},SW=ce([hr,Is,wW,(e,t)=>t],(e,t,n,a)=>{if(t!=null){var l=n?.[a];return l==null?{x:0,y:e.top}:{x:l,y:e.top}}}),G6=ce(hr,Is,(e,t)=>{var n=typeof t.width=="number"?t.width:iu;return{width:n,height:e.height}}),$5=(e,t,n)=>{switch(t){case"xAxis":return K6(e,n).width;case"yAxis":return G6(e,n).height;default:return}},V6=(e,t,n,a)=>{if(n!=null){var{allowDuplicatedCategory:l,type:o,dataKey:d}=n,u=Os(e,a),m=t.map(h=>h.value);if(d&&u&&o==="category"&&l&&W3(m))return m}},e1=ce([mt,Qx,Fr,pr],V6),Y6=(e,t,n,a)=>{if(!(n==null||n.dataKey==null)){var{type:l,scale:o}=n,d=Os(e,a);if(d&&(l==="number"||o!=="auto"))return t.map(u=>u.value)}},t1=ce([mt,Qx,hu,pr],Y6);ce([mt,MQ,Zo,Wx,e1,t1,gu,Jj,pr],(e,t,n,a,l,o,d,u,m)=>{if(t!=null){var h=Os(e,m);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:m,categoricalDomain:o,duplicateDomain:l,isCategorical:h,niceTicks:u,range:d,realScaleType:n,scale:a}}});var EW=(e,t,n,a,l,o,d,u,m)=>{if(!(t==null||a==null)){var h=Os(e,m),{type:x,ticks:p,tickCount:b}=t,N=n==="scaleBand"&&typeof a.bandwidth=="function"?a.bandwidth()/2:2,v=x==="category"&&a.bandwidth?a.bandwidth()/N:0;v=m==="angleAxis"&&o!=null&&o.length>=2?xn(o[0]-o[1])*2*v:v;var w=p||l;return w?w.map((S,A)=>{var E=d?d.indexOf(S):S,C=a.map(E);return ot(C)?{index:A,coordinate:C+v,value:S,offset:v}:null}).filter(Ra):h&&u?u.map((S,A)=>{var E=a.map(S);return ot(E)?{coordinate:E+v,value:S,index:A,offset:v}:null}).filter(Ra):a.ticks?a.ticks(b).map((S,A)=>{var E=a.map(S);return ot(E)?{coordinate:E+v,value:S,index:A,offset:v}:null}).filter(Ra):a.domain().map((S,A)=>{var E=a.map(S);return ot(E)?{coordinate:E+v,value:d?d[S]:S,index:A,offset:v}:null}).filter(Ra)}},Q6=ce([mt,hu,Zo,Wx,Jj,gu,e1,t1,pr],EW),CW=(e,t,n,a,l,o,d)=>{if(!(t==null||n==null||a==null||a[0]===a[1])){var u=Os(e,d),{tickCount:m}=t,h=0;return h=d==="angleAxis"&&a?.length>=2?xn(a[0]-a[1])*2*h:h,u&&o?o.map((x,p)=>{var b=n.map(x);return ot(b)?{coordinate:b+h,value:x,index:p,offset:h}:null}).filter(Ra):n.ticks?n.ticks(m).map((x,p)=>{var b=n.map(x);return ot(b)?{coordinate:b+h,value:x,index:p,offset:h}:null}).filter(Ra):n.domain().map((x,p)=>{var b=n.map(x);return ot(b)?{coordinate:b+h,value:l?l[x]:x,index:p,offset:h}:null}).filter(Ra)}},wl=ce([mt,hu,Wx,gu,e1,t1,pr],CW),Sl=ce(Fr,Wx,(e,t)=>{if(!(e==null||t==null))return Bh(Bh({},e),{},{scale:t})}),AW=ce([Fr,Zo,Xj,q6],Zj);ce((e,t,n)=>Vj(e,n),AW,(e,t)=>{if(!(e==null||t==null))return Bh(Bh({},e),{},{scale:t})});var kW=ce([mt,wx,Sx],(e,t,n)=>{switch(e){case"horizontal":return t.some(a=>a.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(a=>a.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),W6=e=>e.options.defaultTooltipEventType,X6=e=>e.options.validateTooltipEventTypes;function Z6(e,t,n){if(e==null)return t;var a=e?"axis":"item";return n==null?t:n.includes(a)?a:t}function r1(e,t){var n=W6(e),a=X6(e);return Z6(t,n,a)}function _W(e){return Me(t=>r1(t,e))}var J6=(e,t)=>{var n,a=Number(t);if(!(Ba(a)||t==null))return a>=0?e==null||(n=e[a])===null||n===void 0?void 0:n.value:void 0},OW=e=>e.tooltip.settings,pl={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},TW={itemInteraction:{click:pl,hover:pl},axisInteraction:{click:pl,hover:pl},keyboardInteraction:pl,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},eT=nn({name:"tooltip",initialState:TW,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:kt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:n,next:a}=t.payload,l=aa(e).tooltipItemPayloads.indexOf(n);l>-1&&(e.tooltipItemPayloads[l]=a)},prepare:kt()},removeTooltipEntrySettings:{reducer(e,t){var n=aa(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},prepare:kt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:RW,replaceTooltipEntrySettings:PW,removeTooltipEntrySettings:DW,setTooltipSettingsState:MW,setActiveMouseOverItemIndex:tT,mouseLeaveItem:IW,mouseLeaveChart:rT,setActiveClickItemIndex:LW,setMouseOverAxisIndex:nT,setMouseClickAxisIndex:zW,setSyncInteraction:lv,setKeyboardInteraction:iv}=eT.actions,BW=eT.reducer;function U5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(n),!0).forEach(function(a){$W(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $W(e,t,n){return(t=UW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UW(e){var t=qW(e,"string");return typeof t=="symbol"?t:t+""}function qW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FW(e,t,n){return t==="axis"?n==="click"?e.axisInteraction.click:e.axisInteraction.hover:n==="click"?e.itemInteraction.click:e.itemInteraction.hover}function HW(e){return e.index!=null}var aT=(e,t,n,a)=>{if(t==null)return pl;var l=FW(e,t,n);if(l==null)return pl;if(l.active)return l;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var o=e.settings.active===!0;if(HW(l)){if(o)return sm(sm({},l),{},{active:!0})}else if(a!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:a,graphicalItemId:void 0};return sm(sm({},pl),{},{coordinate:l.coordinate})};function KW(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var n=Number(e);return Number.isFinite(n)?n:void 0}function GW(e,t){var n=KW(e),a=t[0],l=t[1];if(n===void 0)return!1;var o=Math.min(a,l),d=Math.max(a,l);return n>=o&&n<=d}function VW(e,t,n){if(n==null||t==null)return!0;var a=Zt(e,t);return a==null||!Es(n)?!0:GW(a,n)}var n1=(e,t,n,a)=>{var l=e?.index;if(l==null)return null;var o=Number(l);if(!ot(o))return l;var d=0,u=1/0;t.length>0&&(u=t.length-1);var m=Math.max(d,Math.min(o,u)),h=t[m];return h==null||VW(h,n,a)?String(m):null},sT=(e,t,n,a,l,o,d)=>{if(o!=null){var u=d[0],m=u?.getPosition(o);if(m!=null)return m;var h=l?.[Number(o)];if(h)return n==="horizontal"?{x:h.coordinate,y:(a.top+t)/2}:{x:(a.left+e)/2,y:h.coordinate}}},lT=(e,t,n,a)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var l;if(n==="hover"?l=e.itemInteraction.hover.graphicalItemId:l=e.itemInteraction.click.graphicalItemId,l==null&&a!=null){var o=e.tooltipItemPayloads[0];return o!=null?[o]:[]}return e.tooltipItemPayloads.filter(d=>{var u;return((u=d.settings)===null||u===void 0?void 0:u.graphicalItemId)===l})},iT=e=>e.options.tooltipPayloadSearcher,Jo=e=>e.tooltip;function q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(n),!0).forEach(function(a){YW(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function YW(e,t,n){return(t=QW(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QW(e){var t=WW(e,"string");return typeof t=="symbol"?t:t+""}function WW(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XW(e,t){return e??t}var oT=(e,t,n,a,l,o,d)=>{if(!(t==null||o==null)){var{chartData:u,computedData:m,dataStartIndex:h,dataEndIndex:x}=n,p=[];return e.reduce((b,N)=>{var v,{dataDefinedOnItem:w,settings:S}=N,A=XW(w,u),E=Array.isArray(A)?q_(A,h,x):A,C=(v=S?.dataKey)!==null&&v!==void 0?v:a,O=S?.nameKey,k;if(a&&Array.isArray(E)&&!Array.isArray(E[0])&&d==="axis"?k=X3(E,a,l):k=o(E,t,m,O),Array.isArray(k))k.forEach(T=>{var P=F5(F5({},S),{},{name:T.name,unit:T.unit,color:void 0,fill:void 0});b.push(FC({tooltipEntrySettings:P,dataKey:T.dataKey,payload:T.payload,value:Zt(T.payload,T.dataKey),name:T.name}))});else{var _;b.push(FC({tooltipEntrySettings:S,dataKey:C,payload:k,value:Zt(k,C),name:(_=Zt(k,O))!==null&&_!==void 0?_:S?.name}))}return b},p)}},a1=ce([cr,p6,$j],z6),ZW=ce([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),JW=ce([gr,Wo],g6),ec=ce([ZW,cr,JW],b6,{memoizeOptions:{resultEqualityCheck:Vx}}),eX=ce([ec],e=>e.filter(Kx)),tX=ce([ec],j6,{memoizeOptions:{resultEqualityCheck:Vx}}),tc=ce([tX,Ds],N6),rX=ce([eX,Ds,cr],m6),s1=ce([tc,cr,ec],w6),cT=ce([cr],Qj),nX=ce([cr],e=>e.allowDataOverflow),dT=ce([cT,nX],VO),aX=ce([ec],e=>e.filter(Kx)),sX=ce([rX,aX,$x,l6],E6),lX=ce([sX,Ds,gr,dT],C6),iX=ce([ec],v6),oX=ce([tc,cr,iX,Wj,gr],_6,{memoizeOptions:{resultEqualityCheck:Gx}}),cX=ce([O6,gr,Wo],Xo),dX=ce([cX,gr],P6),uX=ce([T6,gr,Wo],Xo),fX=ce([uX,gr],D6),mX=ce([R6,gr,Wo],Xo),hX=ce([mX,gr],M6),xX=ce([dX,hX,fX],$h),pX=ce([cr,cT,dT,lX,oX,xX,mt,gr],I6),bu=ce([cr,mt,tc,s1,$x,gr,pX],L6),gX=ce([bu,cr,a1],B6),bX=ce([cr,bu,gX,gr],$6),uT=e=>{var t=gr(e),n=Wo(e),a=!1;return gu(e,t,n,a)},fT=ce([cr,uT],Ux),mT=ce([cr,a1,bX,fT],Zj),yX=ce([mt,s1,cr,gr],V6),vX=ce([mt,s1,cr,gr],Y6),jX=(e,t,n,a,l,o,d,u)=>{if(t){var{type:m}=t,h=Os(e,u);if(a){var x=n==="scaleBand"&&a.bandwidth?a.bandwidth()/2:2,p=m==="category"&&a.bandwidth?a.bandwidth()/x:0;return p=u==="angleAxis"&&l!=null&&l?.length>=2?xn(l[0]-l[1])*2*p:p,h&&d?d.map((b,N)=>{var v=a.map(b);return ot(v)?{coordinate:v+p,value:b,index:N,offset:p}:null}).filter(Ra):a.domain().map((b,N)=>{var v=a.map(b);return ot(v)?{coordinate:v+p,value:o?o[b]:b,index:N,offset:p}:null}).filter(Ra)}}},Ls=ce([mt,cr,a1,mT,uT,yX,vX,gr],jX),l1=ce([W6,X6,OW],(e,t,n)=>Z6(n.shared,e,t)),hT=e=>e.tooltip.settings.trigger,i1=e=>e.tooltip.settings.defaultIndex,yu=ce([Jo,l1,hT,i1],aT),Ni=ce([yu,tc,pu,bu],n1),xT=ce([Ls,Ni],J6),pT=ce([yu],e=>{if(e)return e.dataKey});ce([yu],e=>{if(e)return e.graphicalItemId});var gT=ce([Jo,l1,hT,i1],lT),NX=ce([Ts,Rs,mt,hr,Ls,i1,gT],sT),wX=ce([yu,NX],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),SX=ce([yu],e=>{var t;return(t=e?.active)!==null&&t!==void 0?t:!1}),EX=ce([gT,Ni,Ds,pu,xT,iT,l1],oT),CX=ce([EX],e=>{if(e!=null){var t=e.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(t))}});function H5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function K5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H5(Object(n),!0).forEach(function(a){AX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function AX(e,t,n){return(t=kX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function kX(e){var t=_X(e,"string");return typeof t=="symbol"?t:t+""}function _X(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OX=()=>Me(cr),TX=()=>{var e=OX(),t=Me(Ls),n=Me(mT);return Lo(!e||!n?void 0:K5(K5({},e),{},{scale:n}),t)};function G5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G5(Object(n),!0).forEach(function(a){RX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function RX(e,t,n){return(t=PX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PX(e){var t=DX(e,"string");return typeof t=="symbol"?t:t+""}function DX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var MX=(e,t,n,a)=>{var l=t.find(o=>o&&o.index===n);if(l){if(e==="horizontal")return{x:l.coordinate,y:a.chartY};if(e==="vertical")return{x:a.chartX,y:l.coordinate}}return{x:0,y:0}},IX=(e,t,n,a)=>{var l=t.find(h=>h&&h.index===n);if(l){if(e==="centric"){var o=l.coordinate,{radius:d}=a;return go(go(go({},a),Cr(a.cx,a.cy,d,o)),{},{angle:o,radius:d})}var u=l.coordinate,{angle:m}=a;return go(go(go({},a),Cr(a.cx,a.cy,u,m)),{},{angle:m,radius:u})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function LX(e,t){var{chartX:n,chartY:a}=e;return n>=t.left&&n<=t.left+t.width&&a>=t.top&&a<=t.top+t.height}var bT=(e,t,n,a,l)=>{var o,d=(o=t?.length)!==null&&o!==void 0?o:0;if(d<=1||e==null)return 0;if(a==="angleAxis"&&l!=null&&Math.abs(Math.abs(l[1]-l[0])-360)<=1e-6)for(var u=0;u<d;u++){var m,h,x,p,b,N=u>0?(m=n[u-1])===null||m===void 0?void 0:m.coordinate:(h=n[d-1])===null||h===void 0?void 0:h.coordinate,v=(x=n[u])===null||x===void 0?void 0:x.coordinate,w=u>=d-1?(p=n[0])===null||p===void 0?void 0:p.coordinate:(b=n[u+1])===null||b===void 0?void 0:b.coordinate,S=void 0;if(!(N==null||v==null||w==null))if(xn(v-N)!==xn(w-v)){var A=[];if(xn(w-v)===xn(l[1]-l[0])){S=w;var E=v+l[1]-l[0];A[0]=Math.min(E,(E+N)/2),A[1]=Math.max(E,(E+N)/2)}else{S=N;var C=w+l[1]-l[0];A[0]=Math.min(v,(C+v)/2),A[1]=Math.max(v,(C+v)/2)}var O=[Math.min(v,(S+v)/2),Math.max(v,(S+v)/2)];if(e>O[0]&&e<=O[1]||e>=A[0]&&e<=A[1]){var k;return(k=n[u])===null||k===void 0?void 0:k.index}}else{var _=Math.min(N,w),T=Math.max(N,w);if(e>(_+v)/2&&e<=(T+v)/2){var P;return(P=n[u])===null||P===void 0?void 0:P.index}}}else if(t)for(var L=0;L<d;L++){var z=t[L];if(z!=null){var U=t[L+1],B=t[L-1];if(L===0&&U!=null&&e<=(z.coordinate+U.coordinate)/2||L===d-1&&B!=null&&e>(z.coordinate+B.coordinate)/2||L>0&&L<d-1&&B!=null&&U!=null&&e>(z.coordinate+B.coordinate)/2&&e<=(z.coordinate+U.coordinate)/2)return z.index}}return-1},zX=()=>Me($j),o1=(e,t)=>t,yT=(e,t,n)=>n,c1=(e,t,n,a)=>a,BX=ce(Ls,e=>fx(e,t=>t.coordinate)),d1=ce([Jo,o1,yT,c1],aT),u1=ce([d1,tc,pu,bu],n1),$X=(e,t,n)=>{if(t!=null){var a=Jo(e);return t==="axis"?n==="hover"?a.axisInteraction.hover.dataKey:a.axisInteraction.click.dataKey:n==="hover"?a.itemInteraction.hover.dataKey:a.itemInteraction.click.dataKey}},vT=ce([Jo,o1,yT,c1],lT),Uh=ce([Ts,Rs,mt,hr,Ls,c1,vT],sT),UX=ce([d1,Uh],(e,t)=>{var n;return(n=e.coordinate)!==null&&n!==void 0?n:t}),jT=ce([Ls,u1],J6),qX=ce([vT,u1,Ds,pu,jT,iT,o1],oT),FX=ce([d1,u1],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),HX=(e,t,n,a,l,o,d)=>{if(!(!e||!n||!a||!l)&&LX(e,d)){var u=gH(e,t),m=bT(u,o,l,n,a),h=MX(t,l,m,e);return{activeIndex:String(m),activeCoordinate:h}}},KX=(e,t,n,a,l,o,d)=>{if(!(!e||!a||!l||!o||!n)){var u=kG(e,n);if(u){var m=bH(u,t),h=bT(m,d,o,a,l),x=IX(t,o,h,u);return{activeIndex:String(h),activeCoordinate:x}}}},GX=(e,t,n,a,l,o,d,u)=>{if(!(!e||!t||!a||!l||!o))return t==="horizontal"||t==="vertical"?HX(e,t,a,l,o,d,u):KX(e,t,n,a,l,o,d)},VX=ce(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,n)=>n,(e,t,n)=>{if(t!=null){var a=e[t];if(a!=null)return n?a.panoramaElement:a.element}}),YX=ce(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(a=>parseInt(a,10)).concat(Object.values(Ar)),n=Array.from(new Set(t));return n.sort((a,l)=>a-l)},{memoizeOptions:{resultEqualityCheck:kQ}});function V5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Y5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(n),!0).forEach(function(a){QX(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function QX(e,t,n){return(t=WX(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function WX(e){var t=XX(e,"string");return typeof t=="symbol"?t:t+""}function XX(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ZX={},JX={zIndexMap:Object.values(Ar).reduce((e,t)=>Y5(Y5({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),ZX)},eZ=new Set(Object.values(Ar));function tZ(e){return eZ.has(e)}var NT=nn({name:"zIndex",initialState:JX,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]?e.zIndexMap[n].consumers+=1:e.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:kt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(e.zIndexMap[n].consumers-=1,e.zIndexMap[n].consumers<=0&&!tZ(n)&&delete e.zIndexMap[n])},prepare:kt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n,element:a,isPanorama:l}=t.payload;e.zIndexMap[n]?l?e.zIndexMap[n].panoramaElement=a:e.zIndexMap[n].element=a:e.zIndexMap[n]={consumers:0,element:l?void 0:a,panoramaElement:l?a:void 0}},prepare:kt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:n}=t.payload;e.zIndexMap[n]&&(t.payload.isPanorama?e.zIndexMap[n].panoramaElement=void 0:e.zIndexMap[n].element=void 0)},prepare:kt()}}}),{registerZIndexPortal:rZ,unregisterZIndexPortal:nZ,registerZIndexPortalElement:aZ,unregisterZIndexPortalElement:sZ}=NT.actions,lZ=NT.reducer;function xa(e){var{zIndex:t,children:n}=e,a=JH(),l=a&&t!==void 0&&t!==0,o=qr(),d=Ht();g.useLayoutEffect(()=>l?(d(rZ({zIndex:t})),()=>{d(nZ({zIndex:t}))}):Ei,[d,t,l]);var u=Me(m=>VX(m,t,o));return l?u?ys.createPortal(n,u):null:n}function ov(){return ov=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ov.apply(null,arguments)}function Q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function lm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Q5(Object(n),!0).forEach(function(a){iZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iZ(e,t,n){return(t=oZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oZ(e){var t=cZ(e,"string");return typeof t=="symbol"?t:t+""}function cZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dZ(e){var{cursor:t,cursorComp:n,cursorProps:a}=e;return g.isValidElement(t)?g.cloneElement(t,a):g.createElement(n,a)}function uZ(e){var t,{coordinate:n,payload:a,index:l,offset:o,tooltipAxisBandSize:d,layout:u,cursor:m,tooltipEventType:h,chartName:x}=e,p=n,b=a,N=l;if(!m||!p||x!=="ScatterChart"&&h!=="axis")return null;var v,w,S;if(x==="ScatterChart")v=p,w=UK,S=Ar.cursorLine;else if(x==="BarChart")v=qK(u,p,o,d),w=oO,S=Ar.cursorRectangle;else if(u==="radial"&&e_(p)){var{cx:A,cy:E,radius:C,startAngle:O,endAngle:k}=cO(p);v={cx:A,cy:E,startAngle:O,endAngle:k,innerRadius:C,outerRadius:C},w=uO,S=Ar.cursorLine}else v={points:RG(u,p,o)},w=nO,S=Ar.cursorLine;var _=typeof m=="object"&&"className"in m?m.className:void 0,T=lm(lm(lm(lm({stroke:"#ccc",pointerEvents:"none"},o),v),nu(m)),{},{payload:b,payloadIndex:N,className:bt("recharts-tooltip-cursor",_)});return g.createElement(xa,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:S},g.createElement(dZ,{cursor:m,cursorComp:w,cursorProps:T}))}function fZ(e){var t=TX(),n=WH(),a=Ci(),l=zX();return t==null||n==null||a==null||l==null?null:g.createElement(uZ,ov({},e,{offset:n,layout:a,tooltipAxisBandSize:t,chartName:l}))}var wT=g.createContext(null),mZ=()=>g.useContext(wT),Vb={exports:{}},W5;function hZ(){return W5||(W5=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(n=!1));function l(m,h,x){this.fn=m,this.context=h,this.once=x||!1}function o(m,h,x,p,b){if(typeof x!="function")throw new TypeError("The listener must be a function");var N=new l(x,p||m,b),v=n?n+h:h;return m._events[v]?m._events[v].fn?m._events[v]=[m._events[v],N]:m._events[v].push(N):(m._events[v]=N,m._eventsCount++),m}function d(m,h){--m._eventsCount===0?m._events=new a:delete m._events[h]}function u(){this._events=new a,this._eventsCount=0}u.prototype.eventNames=function(){var h=[],x,p;if(this._eventsCount===0)return h;for(p in x=this._events)t.call(x,p)&&h.push(n?p.slice(1):p);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(x)):h},u.prototype.listeners=function(h){var x=n?n+h:h,p=this._events[x];if(!p)return[];if(p.fn)return[p.fn];for(var b=0,N=p.length,v=new Array(N);b<N;b++)v[b]=p[b].fn;return v},u.prototype.listenerCount=function(h){var x=n?n+h:h,p=this._events[x];return p?p.fn?1:p.length:0},u.prototype.emit=function(h,x,p,b,N,v){var w=n?n+h:h;if(!this._events[w])return!1;var S=this._events[w],A=arguments.length,E,C;if(S.fn){switch(S.once&&this.removeListener(h,S.fn,void 0,!0),A){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,x),!0;case 3:return S.fn.call(S.context,x,p),!0;case 4:return S.fn.call(S.context,x,p,b),!0;case 5:return S.fn.call(S.context,x,p,b,N),!0;case 6:return S.fn.call(S.context,x,p,b,N,v),!0}for(C=1,E=new Array(A-1);C<A;C++)E[C-1]=arguments[C];S.fn.apply(S.context,E)}else{var O=S.length,k;for(C=0;C<O;C++)switch(S[C].once&&this.removeListener(h,S[C].fn,void 0,!0),A){case 1:S[C].fn.call(S[C].context);break;case 2:S[C].fn.call(S[C].context,x);break;case 3:S[C].fn.call(S[C].context,x,p);break;case 4:S[C].fn.call(S[C].context,x,p,b);break;default:if(!E)for(k=1,E=new Array(A-1);k<A;k++)E[k-1]=arguments[k];S[C].fn.apply(S[C].context,E)}}return!0},u.prototype.on=function(h,x,p){return o(this,h,x,p,!1)},u.prototype.once=function(h,x,p){return o(this,h,x,p,!0)},u.prototype.removeListener=function(h,x,p,b){var N=n?n+h:h;if(!this._events[N])return this;if(!x)return d(this,N),this;var v=this._events[N];if(v.fn)v.fn===x&&(!b||v.once)&&(!p||v.context===p)&&d(this,N);else{for(var w=0,S=[],A=v.length;w<A;w++)(v[w].fn!==x||b&&!v[w].once||p&&v[w].context!==p)&&S.push(v[w]);S.length?this._events[N]=S.length===1?S[0]:S:d(this,N)}return this},u.prototype.removeAllListeners=function(h){var x;return h?(x=n?n+h:h,this._events[x]&&d(this,x)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=n,u.EventEmitter=u,e.exports=u})(Vb)),Vb.exports}var xZ=hZ();const pZ=qa(xZ);var qd=new pZ,cv="recharts.syncEvent.tooltip",X5="recharts.syncEvent.brush",ST=(e,t)=>{if(t&&Array.isArray(e)){var n=Number.parseInt(t,10);if(!Ba(n))return e[n]}},gZ={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},ET=nn({name:"options",initialState:gZ,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),bZ=ET.reducer,{createEventEmitter:yZ}=ET.actions;function vZ(e){return e.tooltip.syncInteraction}var jZ={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},CT=nn({name:"chartData",initialState:jZ,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:a}=t.payload;n!=null&&(e.dataStartIndex=n),a!=null&&(e.dataEndIndex=a)}}}),{setChartData:Z5,setDataStartEndIndexes:NZ,setComputedData:gie}=CT.actions,wZ=CT.reducer,SZ=["x","y"];function J5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function bo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(n),!0).forEach(function(a){EZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function EZ(e,t,n){return(t=CZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CZ(e){var t=AZ(e,"string");return typeof t=="symbol"?t:t+""}function AZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kZ(e,t){if(e==null)return{};var n,a,l=_Z(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function _Z(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function OZ(){var e=Me(Uj),t=Me(qj),n=Ht(),a=Me(i6),l=Me(Ls),o=Ci(),d=Ax(),u=Me(m=>m.rootProps.className);g.useEffect(()=>{if(e==null)return Ei;var m=(h,x,p)=>{if(t!==p&&e===h){if(a==="index"){var b;if(d&&x!==null&&x!==void 0&&(b=x.payload)!==null&&b!==void 0&&b.coordinate&&x.payload.sourceViewBox){var N=x.payload.coordinate,{x:v,y:w}=N,S=kZ(N,SZ),{x:A,y:E,width:C,height:O}=x.payload.sourceViewBox,k=bo(bo({},S),{},{x:d.x+(C?(v-A)/C:0)*d.width,y:d.y+(O?(w-E)/O:0)*d.height});n(bo(bo({},x),{},{payload:bo(bo({},x.payload),{},{coordinate:k})}))}else n(x);return}if(l!=null){var _;if(typeof a=="function"){var T={activeTooltipIndex:x.payload.index==null?void 0:Number(x.payload.index),isTooltipActive:x.payload.active,activeIndex:x.payload.index==null?void 0:Number(x.payload.index),activeLabel:x.payload.label,activeDataKey:x.payload.dataKey,activeCoordinate:x.payload.coordinate},P=a(l,T);_=l[P]}else a==="value"&&(_=l.find(G=>String(G.value)===x.payload.label));var{coordinate:L}=x.payload;if(_==null||x.payload.active===!1||L==null||d==null){n(lv({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:z,y:U}=L,B=Math.min(z,d.x+d.width),ee=Math.min(U,d.y+d.height),X={x:o==="horizontal"?_.coordinate:B,y:o==="horizontal"?ee:_.coordinate},be=lv({active:x.payload.active,coordinate:X,dataKey:x.payload.dataKey,index:String(_.index),label:x.payload.label,sourceViewBox:x.payload.sourceViewBox,graphicalItemId:x.payload.graphicalItemId});n(be)}}};return qd.on(cv,m),()=>{qd.off(cv,m)}},[u,n,t,e,a,l,o,d])}function TZ(){var e=Me(Uj),t=Me(qj),n=Ht();g.useEffect(()=>{if(e==null)return Ei;var a=(l,o,d)=>{t!==d&&e===l&&n(NZ(o))};return qd.on(X5,a),()=>{qd.off(X5,a)}},[n,t,e])}function RZ(){var e=Ht();g.useEffect(()=>{e(yZ())},[e]),OZ(),TZ()}function PZ(e,t,n,a,l,o){var d=Me(N=>$X(N,e,t)),u=Me(qj),m=Me(Uj),h=Me(i6),x=Me(vZ),p=x?.active,b=Ax();g.useEffect(()=>{if(!p&&m!=null&&u!=null){var N=lv({active:o,coordinate:n,dataKey:d,index:l,label:typeof a=="number"?String(a):a,sourceViewBox:b,graphicalItemId:void 0});qd.emit(cv,m,N,u)}},[p,n,d,l,a,u,m,h,o,b])}function e4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function t4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e4(Object(n),!0).forEach(function(a){DZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function DZ(e,t,n){return(t=MZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function MZ(e){var t=IZ(e,"string");return typeof t=="symbol"?t:t+""}function IZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function LZ(e){return e.dataKey}function zZ(e,t){return g.isValidElement(e)?g.cloneElement(e,t):typeof e=="function"?g.createElement(e,t):g.createElement(vK,t)}var r4=[],BZ={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function f1(e){var t,n,a=rn(e,BZ),{active:l,allowEscapeViewBox:o,animationDuration:d,animationEasing:u,content:m,filterNull:h,isAnimationActive:x,offset:p,payloadUniqBy:b,position:N,reverseDirection:v,useTranslate3d:w,wrapperStyle:S,cursor:A,shared:E,trigger:C,defaultIndex:O,portal:k,axisId:_}=a,T=Ht(),P=typeof O=="number"?String(O):O;g.useEffect(()=>{T(MW({shared:E,trigger:C,axisId:_,active:l,defaultIndex:P}))},[T,E,C,_,l,P]);var L=Ax(),z=rO(),U=_W(E),{activeIndex:B,isActive:ee}=(t=Me(V=>FX(V,U,C,P)))!==null&&t!==void 0?t:{},X=Me(V=>qX(V,U,C,P)),be=Me(V=>jT(V,U,C,P)),G=Me(V=>UX(V,U,C,P)),J=X,$=mZ(),q=(n=l??ee)!==null&&n!==void 0?n:!1,[se,I]=rF([J,q]),M=U==="axis"?be:void 0;PZ(U,C,G,M,B,q);var H=k??$;if(H==null||L==null||U==null)return null;var oe=J??r4;q||(oe=r4),h&&oe.length&&(oe=kq(oe.filter(V=>V.value!=null&&(V.hide!==!0||a.includeHidden)),b,LZ));var K=oe.length>0,pe=g.createElement(AK,{allowEscapeViewBox:o,animationDuration:d,animationEasing:u,isAnimationActive:x,active:q,coordinate:G,hasPayload:K,offset:p,position:N,reverseDirection:v,useTranslate3d:w,viewBox:L,wrapperStyle:S,lastBoundingBox:se,innerRef:I,hasPortalFromProps:!!k},zZ(m,t4(t4({},a),{},{payload:oe,label:M,active:q,activeIndex:B,coordinate:G,accessibilityLayer:z})));return g.createElement(g.Fragment,null,ys.createPortal(pe,H),q&&g.createElement(fZ,{cursor:A,tooltipEventType:U,coordinate:G,payload:oe,index:B}))}var Jx=e=>null;Jx.displayName="Cell";function $Z(e,t,n){return(t=UZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function UZ(e){var t=qZ(e,"string");return typeof t=="symbol"?t:t+""}function qZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class FZ{constructor(t){$Z(this,"cache",new Map),this.maxSize=t}get(t){var n=this.cache.get(t);return n!==void 0&&(this.cache.delete(t),this.cache.set(t,n)),n}set(t,n){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var a=this.cache.keys().next().value;a!=null&&this.cache.delete(a)}this.cache.set(t,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function n4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function HZ(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n4(Object(n),!0).forEach(function(a){KZ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function KZ(e,t,n){return(t=GZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GZ(e){var t=VZ(e,"string");return typeof t=="symbol"?t:t+""}function VZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var YZ={cacheSize:2e3,enableCache:!0},AT=HZ({},YZ),a4=new FZ(AT.cacheSize),QZ={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},s4="recharts_measurement_span";function WZ(e,t){var n=t.fontSize||"",a=t.fontFamily||"",l=t.fontWeight||"",o=t.fontStyle||"",d=t.letterSpacing||"",u=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(a,"|").concat(l,"|").concat(o,"|").concat(d,"|").concat(u)}var l4=(e,t)=>{try{var n=document.getElementById(s4);n||(n=document.createElement("span"),n.setAttribute("id",s4),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,QZ,t),n.textContent="".concat(e);var a=n.getBoundingClientRect();return{width:a.width,height:a.height}}catch{return{width:0,height:0}}},jd=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Tx.isSsr)return{width:0,height:0};if(!AT.enableCache)return l4(t,n);var a=WZ(t,n),l=a4.get(a);if(l)return l;var o=l4(t,n);return a4.set(a,o),o},kT;function XZ(e,t,n){return(t=ZZ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZZ(e){var t=JZ(e,"string");return typeof t=="symbol"?t:t+""}function JZ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,o4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,eJ=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,tJ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,rJ={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},nJ=["cm","mm","pt","pc","in","Q","px"];function aJ(e){return nJ.includes(e)}var No="NaN";function sJ(e,t){return e*rJ[t]}class Er{static parse(t){var n,[,a,l]=(n=tJ.exec(t))!==null&&n!==void 0?n:[];return a==null?Er.NaN:new Er(parseFloat(a),l??"")}constructor(t,n){this.num=t,this.unit=n,this.num=t,this.unit=n,Ba(t)&&(this.unit=""),n!==""&&!eJ.test(n)&&(this.num=NaN,this.unit=""),aJ(n)&&(this.num=sJ(t,n),this.unit="px")}add(t){return this.unit!==t.unit?new Er(NaN,""):new Er(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Er(NaN,""):new Er(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Er(NaN,""):new Er(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Er(NaN,""):new Er(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return Ba(this.num)}}kT=Er;XZ(Er,"NaN",new kT(NaN,""));function _T(e){if(e==null||e.includes(No))return No;for(var t=e;t.includes("*")||t.includes("/");){var n,[,a,l,o]=(n=i4.exec(t))!==null&&n!==void 0?n:[],d=Er.parse(a??""),u=Er.parse(o??""),m=l==="*"?d.multiply(u):d.divide(u);if(m.isNaN())return No;t=t.replace(i4,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var h,[,x,p,b]=(h=o4.exec(t))!==null&&h!==void 0?h:[],N=Er.parse(x??""),v=Er.parse(b??""),w=p==="+"?N.add(v):N.subtract(v);if(w.isNaN())return No;t=t.replace(o4,w.toString())}return t}var c4=/\(([^()]*)\)/;function lJ(e){for(var t=e,n;(n=c4.exec(t))!=null;){var[,a]=n;t=t.replace(c4,_T(a))}return t}function iJ(e){var t=e.replace(/\s+/g,"");return t=lJ(t),t=_T(t),t}function oJ(e){try{return iJ(e)}catch{return No}}function Yb(e){var t=oJ(e.slice(5,-1));return t===No?"":t}var cJ=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],dJ=["dx","dy","angle","className","breakAll"];function dv(){return dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},dv.apply(null,arguments)}function d4(e,t){if(e==null)return{};var n,a,l=uJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function uJ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var OT=/[ \f\n\r\t\v\u2028\u2029]+/,TT=e=>{var{children:t,breakAll:n,style:a}=e;try{var l=[];Pt(t)||(n?l=t.toString().split(""):l=t.toString().split(OT));var o=l.map(u=>({word:u,width:jd(u,a).width})),d=n?0:jd("",a).width;return{wordsWithComputedWidth:o,spaceWidth:d}}catch{return null}};function fJ(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var RT=(e,t,n,a)=>e.reduce((l,o)=>{var{word:d,width:u}=o,m=l[l.length-1];if(m&&u!=null&&(t==null||a||m.width+u+n<Number(t)))m.words.push(d),m.width+=u+n;else{var h={words:[d],width:u};l.push(h)}return l},[]),PT=e=>e.reduce((t,n)=>t.width>n.width?t:n),mJ="",u4=(e,t,n,a,l,o,d,u)=>{var m=e.slice(0,t),h=TT({breakAll:n,style:a,children:m+mJ});if(!h)return[!1,[]];var x=RT(h.wordsWithComputedWidth,o,d,u),p=x.length>l||PT(x).width>Number(o);return[p,x]},hJ=(e,t,n,a,l)=>{var{maxLines:o,children:d,style:u,breakAll:m}=e,h=Re(o),x=String(d),p=RT(t,a,n,l);if(!h||l)return p;var b=p.length>o||PT(p).width>Number(a);if(!b)return p;for(var N=0,v=x.length-1,w=0,S;N<=v&&w<=x.length-1;){var A=Math.floor((N+v)/2),E=A-1,[C,O]=u4(x,E,m,u,o,a,n,l),[k]=u4(x,A,m,u,o,a,n,l);if(!C&&!k&&(N=A+1),C&&k&&(v=A-1),!C&&k){S=O;break}w++}return S||p},f4=e=>{var t=Pt(e)?[]:e.toString().split(OT);return[{words:t,width:void 0}]},xJ=e=>{var{width:t,scaleToFit:n,children:a,style:l,breakAll:o,maxLines:d}=e;if((t||n)&&!Tx.isSsr){var u,m,h=TT({breakAll:o,children:a,style:l});if(h){var{wordsWithComputedWidth:x,spaceWidth:p}=h;u=x,m=p}else return f4(a);return hJ({breakAll:o,children:a,maxLines:d,style:l},u,m,t,!!n)}return f4(a)},DT="#808080",pJ={angle:0,breakAll:!1,capHeight:"0.71em",fill:DT,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},m1=g.forwardRef((e,t)=>{var n=rn(e,pJ),{x:a,y:l,lineHeight:o,capHeight:d,fill:u,scaleToFit:m,textAnchor:h,verticalAnchor:x}=n,p=d4(n,cJ),b=g.useMemo(()=>xJ({breakAll:p.breakAll,children:p.children,maxLines:p.maxLines,scaleToFit:m,style:p.style,width:p.width}),[p.breakAll,p.children,p.maxLines,m,p.style,p.width]),{dx:N,dy:v,angle:w,className:S,breakAll:A}=p,E=d4(p,dJ);if(!$a(a)||!$a(l)||b.length===0)return null;var C=Number(a)+(Re(N)?N:0),O=Number(l)+(Re(v)?v:0);if(!ot(C)||!ot(O))return null;var k;switch(x){case"start":k=Yb("calc(".concat(d,")"));break;case"middle":k=Yb("calc(".concat((b.length-1)/2," * -").concat(o," + (").concat(d," / 2))"));break;default:k=Yb("calc(".concat(b.length-1," * -").concat(o,")"));break}var _=[],T=b[0];if(m&&T!=null){var P=T.width,{width:L}=p;_.push("scale(".concat(Re(L)&&Re(P)?L/P:1,")"))}return w&&_.push("rotate(".concat(w,", ").concat(C,", ").concat(O,")")),_.length&&(E.transform=_.join(" ")),g.createElement("text",dv({},$r(E),{ref:t,x:C,y:O,className:bt("recharts-text",S),textAnchor:h,fill:u.includes("url")?DT:u}),b.map((z,U)=>{var B=z.words.join(A?"":" ");return g.createElement("tspan",{x:C,dy:U===0?k:o,key:"".concat(B,"-").concat(U)},B)}))});m1.displayName="Text";function m4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ka(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(n),!0).forEach(function(a){gJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function gJ(e,t,n){return(t=bJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bJ(e){var t=yJ(e,"string");return typeof t=="symbol"?t:t+""}function yJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vJ=e=>{var{viewBox:t,position:n,offset:a=0,parentViewBox:l}=e,{x:o,y:d,height:u,upperWidth:m,lowerWidth:h}=uj(t),x=o,p=o+(m-h)/2,b=(x+p)/2,N=(m+h)/2,v=x+m/2,w=u>=0?1:-1,S=w*a,A=w>0?"end":"start",E=w>0?"start":"end",C=m>=0?1:-1,O=C*a,k=C>0?"end":"start",_=C>0?"start":"end",T=l;if(n==="top"){var P={x:x+m/2,y:d-S,horizontalAnchor:"middle",verticalAnchor:A};return T&&(P.height=Math.max(d-T.y,0),P.width=m),P}if(n==="bottom"){var L={x:p+h/2,y:d+u+S,horizontalAnchor:"middle",verticalAnchor:E};return T&&(L.height=Math.max(T.y+T.height-(d+u),0),L.width=h),L}if(n==="left"){var z={x:b-O,y:d+u/2,horizontalAnchor:k,verticalAnchor:"middle"};return T&&(z.width=Math.max(z.x-T.x,0),z.height=u),z}if(n==="right"){var U={x:b+N+O,y:d+u/2,horizontalAnchor:_,verticalAnchor:"middle"};return T&&(U.width=Math.max(T.x+T.width-U.x,0),U.height=u),U}var B=T?{width:N,height:u}:{};return n==="insideLeft"?ka({x:b+O,y:d+u/2,horizontalAnchor:_,verticalAnchor:"middle"},B):n==="insideRight"?ka({x:b+N-O,y:d+u/2,horizontalAnchor:k,verticalAnchor:"middle"},B):n==="insideTop"?ka({x:x+m/2,y:d+S,horizontalAnchor:"middle",verticalAnchor:E},B):n==="insideBottom"?ka({x:p+h/2,y:d+u-S,horizontalAnchor:"middle",verticalAnchor:A},B):n==="insideTopLeft"?ka({x:x+O,y:d+S,horizontalAnchor:_,verticalAnchor:E},B):n==="insideTopRight"?ka({x:x+m-O,y:d+S,horizontalAnchor:k,verticalAnchor:E},B):n==="insideBottomLeft"?ka({x:p+O,y:d+u-S,horizontalAnchor:_,verticalAnchor:A},B):n==="insideBottomRight"?ka({x:p+h-O,y:d+u-S,horizontalAnchor:k,verticalAnchor:A},B):n&&typeof n=="object"&&(Re(n.x)||gi(n.x))&&(Re(n.y)||gi(n.y))?ka({x:o+la(n.x,N),y:d+la(n.y,u),horizontalAnchor:"end",verticalAnchor:"end"},B):ka({x:v,y:d+u/2,horizontalAnchor:"middle",verticalAnchor:"middle"},B)},jJ=["labelRef"],NJ=["content"];function h4(e,t){if(e==null)return{};var n,a,l=wJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function wJ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function x4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function yd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x4(Object(n),!0).forEach(function(a){SJ(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function SJ(e,t,n){return(t=EJ(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EJ(e){var t=CJ(e,"string");return typeof t=="symbol"?t:t+""}function CJ(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function us(){return us=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},us.apply(null,arguments)}var MT=g.createContext(null),AJ=e=>{var{x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:d,children:u}=e,m=g.useMemo(()=>({x:t,y:n,upperWidth:a,lowerWidth:l,width:o,height:d}),[t,n,a,l,o,d]);return g.createElement(MT.Provider,{value:m},u)},IT=()=>{var e=g.useContext(MT),t=Ax();return e||(t?uj(t):void 0)},kJ=g.createContext(null),_J=()=>{var e=g.useContext(kJ),t=Me(f6);return e||t},OJ=e=>{var{value:t,formatter:n}=e,a=Pt(e.children)?t:e.children;return typeof n=="function"?n(a):a},h1=e=>e!=null&&typeof e=="function",TJ=(e,t)=>{var n=xn(t-e),a=Math.min(Math.abs(t-e),360);return n*a},RJ=(e,t,n,a,l)=>{var{offset:o,className:d}=e,{cx:u,cy:m,innerRadius:h,outerRadius:x,startAngle:p,endAngle:b,clockWise:N}=l,v=(h+x)/2,w=TJ(p,b),S=w>=0?1:-1,A,E;switch(t){case"insideStart":A=p+S*o,E=N;break;case"insideEnd":A=b-S*o,E=!N;break;case"end":A=b+S*o,E=N;break;default:throw new Error("Unsupported position ".concat(t))}E=w<=0?E:!E;var C=Cr(u,m,v,A),O=Cr(u,m,v,A+(E?1:-1)*359),k="M".concat(C.x,",").concat(C.y,`
    A`).concat(v,",").concat(v,",0,1,").concat(E?0:1,`,
    `).concat(O.x,",").concat(O.y),_=Pt(e.id)?_d("recharts-radial-line-"):e.id;return g.createElement("text",us({},a,{dominantBaseline:"central",className:bt("recharts-radial-bar-label",d)}),g.createElement("defs",null,g.createElement("path",{id:_,d:k})),g.createElement("textPath",{xlinkHref:"#".concat(_)},n))},PJ=(e,t,n)=>{var{cx:a,cy:l,innerRadius:o,outerRadius:d,startAngle:u,endAngle:m}=e,h=(u+m)/2;if(n==="outside"){var{x,y:p}=Cr(a,l,d+t,h);return{x,y:p,textAnchor:x>=a?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:a,y:l,textAnchor:"middle",verticalAnchor:"end"};var b=(o+d)/2,{x:N,y:v}=Cr(a,l,b,h);return{x:N,y:v,textAnchor:"middle",verticalAnchor:"middle"}},Tm=e=>e!=null&&"cx"in e&&Re(e.cx),DJ={angle:0,offset:5,zIndex:Ar.label,position:"middle",textBreakAll:!1};function MJ(e){if(!Tm(e))return e;var{cx:t,cy:n,outerRadius:a}=e,l=a*2;return{x:t-a,y:n-a,width:l,upperWidth:l,lowerWidth:l,height:l}}function hl(e){var t=rn(e,DJ),{viewBox:n,parentViewBox:a,position:l,value:o,children:d,content:u,className:m="",textBreakAll:h,labelRef:x}=t,p=_J(),b=IT(),N=l==="center"?b:p??b,v,w,S;n==null?v=N:Tm(n)?v=n:v=uj(n);var A=MJ(v);if(!v||Pt(o)&&Pt(d)&&!g.isValidElement(u)&&typeof u!="function")return null;var E=yd(yd({},t),{},{viewBox:v});if(g.isValidElement(u)){var{labelRef:C}=E,O=h4(E,jJ);return g.cloneElement(u,O)}if(typeof u=="function"){var{content:k}=E,_=h4(E,NJ);if(w=g.createElement(u,_),g.isValidElement(w))return w}else w=OJ(t);var T=$r(t);if(Tm(v)){if(l==="insideStart"||l==="insideEnd"||l==="end")return RJ(t,l,w,T,v);S=PJ(v,t.offset,t.position)}else{if(!A)return null;var P=vJ({viewBox:A,position:l,offset:t.offset,parentViewBox:Tm(a)?void 0:a});S=yd(yd({x:P.x,y:P.y,textAnchor:P.horizontalAnchor,verticalAnchor:P.verticalAnchor},P.width!==void 0?{width:P.width}:{}),P.height!==void 0?{height:P.height}:{})}return g.createElement(xa,{zIndex:t.zIndex},g.createElement(m1,us({ref:x,className:bt("recharts-label",m)},T,S,{textAnchor:fJ(T.textAnchor)?T.textAnchor:S.textAnchor,breakAll:h}),w))}hl.displayName="Label";var IJ=(e,t,n)=>{if(!e)return null;var a={viewBox:t,labelRef:n};return e===!0?g.createElement(hl,us({key:"label-implicit"},a)):$a(e)?g.createElement(hl,us({key:"label-implicit",value:e},a)):g.isValidElement(e)?e.type===hl?g.cloneElement(e,yd({key:"label-implicit"},a)):g.createElement(hl,us({key:"label-implicit",content:e},a)):h1(e)?g.createElement(hl,us({key:"label-implicit",content:e},a)):e&&typeof e=="object"?g.createElement(hl,us({},e,{key:"label-implicit"},a)):null};function LJ(e){var{label:t,labelRef:n}=e,a=IT();return IJ(t,a,n)||null}var Qb={},Wb={},p4;function zJ(){return p4||(p4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return n[n.length-1]}e.last=t})(Wb)),Wb}var Xb={},g4;function BJ(){return g4||(g4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return Array.isArray(n)?n:Array.from(n)}e.toArray=t})(Xb)),Xb}var b4;function $J(){return b4||(b4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=zJ(),n=BJ(),a=Jv();function l(o){if(a.isArrayLike(o))return t.last(n.toArray(o))}e.last=l})(Qb)),Qb}var Zb,y4;function UJ(){return y4||(y4=1,Zb=$J().last),Zb}var qJ=UJ();const FJ=qa(qJ);var HJ=["valueAccessor"],KJ=["dataKey","clockWise","id","textBreakAll","zIndex"];function qh(){return qh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},qh.apply(null,arguments)}function v4(e,t){if(e==null)return{};var n,a,l=GJ(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function GJ(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var VJ=e=>Array.isArray(e.value)?FJ(e.value):e.value,LT=g.createContext(void 0),zT=LT.Provider,BT=g.createContext(void 0);BT.Provider;function YJ(){return g.useContext(LT)}function QJ(){return g.useContext(BT)}function Nd(e){var{valueAccessor:t=VJ}=e,n=v4(e,HJ),{dataKey:a,clockWise:l,id:o,textBreakAll:d,zIndex:u}=n,m=v4(n,KJ),h=YJ(),x=QJ(),p=h||x;return!p||!p.length?null:g.createElement(xa,{zIndex:u??Ar.label},g.createElement(Gn,{className:"recharts-label-list"},p.map((b,N)=>{var v,w=Pt(a)?t(b,N):Zt(b.payload,a),S=Pt(o)?{}:{id:"".concat(o,"-").concat(N)};return g.createElement(hl,qh({key:"label-".concat(N)},$r(b),m,S,{fill:(v=n.fill)!==null&&v!==void 0?v:b.fill,parentViewBox:b.parentViewBox,value:w,textBreakAll:d,viewBox:b.viewBox,index:N,zIndex:0}))})))}Nd.displayName="LabelList";function $T(e){var{label:t}=e;return t?t===!0?g.createElement(Nd,{key:"labelList-implicit"}):g.isValidElement(t)||h1(t)?g.createElement(Nd,{key:"labelList-implicit",content:t}):typeof t=="object"?g.createElement(Nd,qh({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function uv(){return uv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},uv.apply(null,arguments)}var UT=e=>{var{cx:t,cy:n,r:a,className:l}=e,o=bt("recharts-dot",l);return Re(t)&&Re(n)&&Re(a)?g.createElement("circle",uv({},za(e),Xv(e),{className:o,cx:t,cy:n,r:a})):null},WJ={radiusAxis:{},angleAxis:{}},qT=nn({name:"polarAxis",initialState:WJ,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:bie,removeRadiusAxis:yie,addAngleAxis:vie,removeAngleAxis:jie}=qT.actions,XJ=qT.reducer;function ZJ(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var Jb={exports:{}},gt={};var j4;function JJ(){if(j4)return gt;j4=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),d=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),x=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),b=Symbol.for("react.view_transition"),N=Symbol.for("react.client.reference");function v(w){if(typeof w=="object"&&w!==null){var S=w.$$typeof;switch(S){case e:switch(w=w.type,w){case n:case l:case a:case m:case h:case b:return w;default:switch(w=w&&w.$$typeof,w){case d:case u:case p:case x:return w;case o:return w;default:return S}}case t:return S}}}return gt.ContextConsumer=o,gt.ContextProvider=d,gt.Element=e,gt.ForwardRef=u,gt.Fragment=n,gt.Lazy=p,gt.Memo=x,gt.Portal=t,gt.Profiler=l,gt.StrictMode=a,gt.Suspense=m,gt.SuspenseList=h,gt.isContextConsumer=function(w){return v(w)===o},gt.isContextProvider=function(w){return v(w)===d},gt.isElement=function(w){return typeof w=="object"&&w!==null&&w.$$typeof===e},gt.isForwardRef=function(w){return v(w)===u},gt.isFragment=function(w){return v(w)===n},gt.isLazy=function(w){return v(w)===p},gt.isMemo=function(w){return v(w)===x},gt.isPortal=function(w){return v(w)===t},gt.isProfiler=function(w){return v(w)===l},gt.isStrictMode=function(w){return v(w)===a},gt.isSuspense=function(w){return v(w)===m},gt.isSuspenseList=function(w){return v(w)===h},gt.isValidElementType=function(w){return typeof w=="string"||typeof w=="function"||w===n||w===l||w===a||w===m||w===h||typeof w=="object"&&w!==null&&(w.$$typeof===p||w.$$typeof===x||w.$$typeof===d||w.$$typeof===o||w.$$typeof===u||w.$$typeof===N||w.getModuleId!==void 0)},gt.typeOf=v,gt}var N4;function eee(){return N4||(N4=1,Jb.exports=JJ()),Jb.exports}var tee=eee(),w4=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",S4=null,ey=null,FT=e=>{if(e===S4&&Array.isArray(ey))return ey;var t=[];return g.Children.forEach(e,n=>{Pt(n)||(tee.isFragment(n)?t=t.concat(FT(n.props.children)):t.push(n))}),ey=t,S4=e,t};function ree(e,t){var n=[],a=[];return Array.isArray(t)?a=t.map(l=>w4(l)):a=[w4(t)],FT(e).forEach(l=>{var o=Mo(l,"type.displayName")||Mo(l,"type.name");o&&a.indexOf(o)!==-1&&n.push(l)}),n}var HT=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,ty={},E4;function nee(){return E4||(E4=1,(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){if(typeof n!="object"||n==null)return!1;if(Object.getPrototypeOf(n)===null)return!0;if(Object.prototype.toString.call(n)!=="[object Object]"){const l=n[Symbol.toStringTag];return l==null||!Object.getOwnPropertyDescriptor(n,Symbol.toStringTag)?.writable?!1:n.toString()===`[object ${l}]`}let a=n;for(;Object.getPrototypeOf(a)!==null;)a=Object.getPrototypeOf(a);return Object.getPrototypeOf(n)===a}e.isPlainObject=t})(ty)),ty}var ry,C4;function aee(){return C4||(C4=1,ry=nee().isPlainObject),ry}var see=aee();const lee=qa(see);var A4,k4,_4,O4,T4;function R4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function P4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R4(Object(n),!0).forEach(function(a){iee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function iee(e,t,n){return(t=oee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oee(e){var t=cee(e,"string");return typeof t=="symbol"?t:t+""}function cee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Fh(){return Fh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Fh.apply(null,arguments)}function hd(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var D4=(e,t,n,a,l)=>{var o=n-a,d;return d=Lt(A4||(A4=hd(["M ",",",""])),e,t),d+=Lt(k4||(k4=hd(["L ",",",""])),e+n,t),d+=Lt(_4||(_4=hd(["L ",",",""])),e+n-o/2,t+l),d+=Lt(O4||(O4=hd(["L ",",",""])),e+n-o/2-a,t+l),d+=Lt(T4||(T4=hd(["L ",","," Z"])),e,t),d},dee={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uee=e=>{var t=rn(e,dee),{x:n,y:a,upperWidth:l,lowerWidth:o,height:d,className:u}=t,{animationEasing:m,animationDuration:h,animationBegin:x,isUpdateAnimationActive:p}=t,b=g.useRef(null),[N,v]=g.useState(-1),w=g.useRef(l),S=g.useRef(o),A=g.useRef(d),E=g.useRef(n),C=g.useRef(a),O=Px(e,"trapezoid-");if(g.useEffect(()=>{if(b.current&&b.current.getTotalLength)try{var X=b.current.getTotalLength();X&&v(X)}catch{}},[]),n!==+n||a!==+a||l!==+l||o!==+o||d!==+d||l===0&&o===0||d===0)return null;var k=bt("recharts-trapezoid",u);if(!p)return g.createElement("g",null,g.createElement("path",Fh({},$r(t),{className:k,d:D4(n,a,l,o,d)})));var _=w.current,T=S.current,P=A.current,L=E.current,z=C.current,U="0px ".concat(N===-1?1:N,"px"),B="".concat(N,"px 0px"),ee=aO(["strokeDasharray"],h,m);return g.createElement(Rx,{animationId:O,key:O,canBegin:N>0,duration:h,easing:m,isActive:p,begin:x},X=>{var be=zt(_,l,X),G=zt(T,o,X),J=zt(P,d,X),$=zt(L,n,X),q=zt(z,a,X);b.current&&(w.current=be,S.current=G,A.current=J,E.current=$,C.current=q);var se=X>0?{transition:ee,strokeDasharray:B}:{strokeDasharray:U};return g.createElement("path",Fh({},$r(t),{className:k,d:D4($,q,be,G,J),ref:b,style:P4(P4({},se),t.style)}))})},fee=["option","shapeType","activeClassName"];function mee(e,t){if(e==null)return{};var n,a,l=hee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function hee(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function M4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?M4(Object(n),!0).forEach(function(a){xee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function xee(e,t,n){return(t=pee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pee(e){var t=gee(e,"string");return typeof t=="symbol"?t:t+""}function gee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bee(e,t){return Hh(Hh({},t),e)}function yee(e,t){return e==="symbols"}function I4(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return g.createElement(oO,n);case"trapezoid":return g.createElement(uee,n);case"sector":return g.createElement(uO,n);case"symbols":if(yee(t))return g.createElement(J3,n);break;case"curve":return g.createElement(nO,n);default:return null}}function vee(e){return g.isValidElement(e)?e.props:e}function KT(e){var{option:t,shapeType:n,activeClassName:a="recharts-active-shape"}=e,l=mee(e,fee),o;if(g.isValidElement(t))o=g.cloneElement(t,Hh(Hh({},l),vee(t)));else if(typeof t=="function")o=t(l,l.index);else if(lee(t)&&typeof t!="boolean"){var d=bee(t,l);o=g.createElement(I4,{shapeType:n,elementProps:d})}else{var u=l;o=g.createElement(I4,{shapeType:n,elementProps:u})}return l.isActive?g.createElement(Gn,{className:a},o):o}var GT=(e,t,n)=>{var a=Ht();return(l,o)=>d=>{e?.(l,o,d),a(tT({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}},VT=e=>{var t=Ht();return(n,a)=>l=>{e?.(n,a,l),t(IW())}},YT=(e,t,n)=>{var a=Ht();return(l,o)=>d=>{e?.(l,o,d),a(LW({activeIndex:String(o),activeDataKey:t,activeCoordinate:l.tooltipPosition,activeGraphicalItemId:n}))}};function QT(e){var{tooltipEntrySettings:t}=e,n=Ht(),a=qr(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n(RW(t)):l.current!==t&&n(PW({prev:l.current,next:t})),l.current=t)},[t,n,a]),g.useLayoutEffect(()=>()=>{l.current&&(n(DW(l.current)),l.current=null)},[n]),null}function WT(e){var{legendPayload:t}=e,n=Ht(),a=qr(),l=g.useRef(null);return g.useLayoutEffect(()=>{a||(l.current===null?n(fK(t)):l.current!==t&&n(mK({prev:l.current,next:t})),l.current=t)},[n,a,t]),g.useLayoutEffect(()=>()=>{l.current&&(n(hK(l.current)),l.current=null)},[n]),null}var ny,jee=()=>{var[e]=g.useState(()=>_d("uid-"));return e},Nee=(ny=VD.useId)!==null&&ny!==void 0?ny:jee;function wee(e,t){var n=Nee();return t||(e?"".concat(e,"-").concat(n):n)}var See=g.createContext(void 0),XT=e=>{var{id:t,type:n,children:a}=e,l=wee("recharts-".concat(n),t);return g.createElement(See.Provider,{value:l},a(l))},Eee={cartesianItems:[],polarItems:[]},ZT=nn({name:"graphicalItems",initialState:Eee,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:kt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:n,next:a}=t.payload,l=aa(e).cartesianItems.indexOf(n);l>-1&&(e.cartesianItems[l]=a)},prepare:kt()},removeCartesianGraphicalItem:{reducer(e,t){var n=aa(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},prepare:kt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:kt()},removePolarGraphicalItem:{reducer(e,t){var n=aa(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)},prepare:kt()}}}),{addCartesianGraphicalItem:Cee,replaceCartesianGraphicalItem:Aee,removeCartesianGraphicalItem:kee,addPolarGraphicalItem:Nie,removePolarGraphicalItem:wie}=ZT.actions,_ee=ZT.reducer,Oee=e=>{var t=Ht(),n=g.useRef(null);return g.useLayoutEffect(()=>{n.current===null?t(Cee(e)):n.current!==e&&t(Aee({prev:n.current,next:e})),n.current=e},[t,e]),g.useLayoutEffect(()=>()=>{n.current&&(t(kee(n.current)),n.current=null)},[t]),null},JT=g.memo(Oee),Tee=["points"];function L4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ay(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L4(Object(n),!0).forEach(function(a){Ree(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ree(e,t,n){return(t=Pee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pee(e){var t=Dee(e,"string");return typeof t=="symbol"?t:t+""}function Dee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Kh(){return Kh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Kh.apply(null,arguments)}function Mee(e,t){if(e==null)return{};var n,a,l=Iee(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Iee(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Lee(e){var{option:t,dotProps:n,className:a}=e;if(g.isValidElement(t))return g.cloneElement(t,n);if(typeof t=="function")return t(n);var l=bt(a,typeof t!="boolean"?t.className:""),o=n??{},{points:d}=o,u=Mee(o,Tee);return g.createElement(UT,Kh({},u,{className:l}))}function zee(e,t){return e==null?!1:t?!0:e.length===1}function Bee(e){var{points:t,dot:n,className:a,dotClassName:l,dataKey:o,baseProps:d,needClip:u,clipPathId:m,zIndex:h=Ar.scatter}=e;if(!zee(t,n))return null;var x=HT(n),p=e9(n),b=t.map((v,w)=>{var S,A,E=ay(ay(ay({r:3},d),p),{},{index:w,cx:(S=v.x)!==null&&S!==void 0?S:void 0,cy:(A=v.y)!==null&&A!==void 0?A:void 0,dataKey:o,value:v.value,payload:v.payload,points:t});return g.createElement(Lee,{key:"dot-".concat(w),option:n,dotProps:E,className:l})}),N={};return u&&m!=null&&(N.clipPath="url(#clipPath-".concat(x?"":"dots-").concat(m,")")),g.createElement(xa,{zIndex:h},g.createElement(Gn,Kh({className:a},N),b))}function z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function B4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?z4(Object(n),!0).forEach(function(a){$ee(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function $ee(e,t,n){return(t=Uee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Uee(e){var t=qee(e,"string");return typeof t=="symbol"?t:t+""}function qee(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eR=0,Fee={xAxis:{},yAxis:{},zAxis:{}},tR=nn({name:"cartesianAxis",initialState:Fee,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:kt()},replaceXAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.xAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.xAxis[n.id],e.xAxis[a.id]=a)},prepare:kt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:kt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:kt()},replaceYAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.yAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.yAxis[n.id],e.yAxis[a.id]=a)},prepare:kt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:kt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:kt()},replaceZAxis:{reducer(e,t){var{prev:n,next:a}=t.payload;e.zAxis[n.id]!==void 0&&(n.id!==a.id&&delete e.zAxis[n.id],e.zAxis[a.id]=a)},prepare:kt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:kt()},updateYAxisWidth(e,t){var{id:n,width:a}=t.payload,l=e.yAxis[n];if(l){var o,d=l.widthHistory||[];if(d.length===3&&d[0]===d[2]&&a===d[1]&&a!==l.width&&Math.abs(a-((o=d[0])!==null&&o!==void 0?o:0))<=1)return;var u=[...d,a].slice(-3);e.yAxis[n]=B4(B4({},l),{},{width:a,widthHistory:u})}}}}),{addXAxis:Hee,replaceXAxis:Kee,removeXAxis:Gee,addYAxis:Vee,replaceYAxis:Yee,removeYAxis:Qee,addZAxis:Sie,replaceZAxis:Eie,removeZAxis:Cie,updateYAxisWidth:Wee}=tR.actions,Xee=tR.reducer,Zee=ce([hr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),Jee=ce([Zee,Ts,Rs],(e,t,n)=>{if(!(!e||t==null||n==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),x1=()=>Me(Jee),ete=()=>Me(CX);function $4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function sy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$4(Object(n),!0).forEach(function(a){tte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function tte(e,t,n){return(t=rte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rte(e){var t=nte(e,"string");return typeof t=="symbol"?t:t+""}function nte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ate=e=>{var{point:t,childIndex:n,mainColor:a,activeDot:l,dataKey:o,clipPath:d}=e;if(l===!1||t.x==null||t.y==null)return null;var u={index:n,dataKey:o,cx:t.x,cy:t.y,r:4,fill:a??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},m=sy(sy(sy({},u),nu(l)),Xv(l)),h;return g.isValidElement(l)?h=g.cloneElement(l,m):typeof l=="function"?h=l(m):h=g.createElement(UT,m),g.createElement(Gn,{className:"recharts-active-dot",clipPath:d},h)};function ste(e){var{points:t,mainColor:n,activeDot:a,itemDataKey:l,clipPath:o,zIndex:d=Ar.activeDot}=e,u=Me(Ni),m=ete();if(t==null||m==null)return null;var h=t.find(x=>m.includes(x.payload));return Pt(h)?null:g.createElement(xa,{zIndex:d},g.createElement(ate,{point:h,childIndex:Number(u),mainColor:n,dataKey:l,activeDot:a,clipPath:o}))}var U4=(e,t,n)=>{var a=n??e;if(!Pt(a))return la(a,t,0)},lte=(e,t,n)=>{var a={},l=e.filter(Kx),o=e.filter(h=>h.stackId==null),d=l.reduce((h,x)=>{var p=h[x.stackId];return p==null&&(p=[]),p.push(x),h[x.stackId]=p,h},a),u=Object.entries(d).map(h=>{var x,[p,b]=h,N=b.map(w=>w.dataKey),v=U4(t,n,(x=b[0])===null||x===void 0?void 0:x.barSize);return{stackId:p,dataKeys:N,barSize:v}}),m=o.map(h=>{var x=[h.dataKey].filter(b=>b!=null),p=U4(t,n,h.barSize);return{stackId:void 0,dataKeys:x,barSize:p}});return[...u,...m]};function q4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function im(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(n),!0).forEach(function(a){ite(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function ite(e,t,n){return(t=ote(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ote(e){var t=cte(e,"string");return typeof t=="symbol"?t:t+""}function cte(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function dte(e,t,n,a,l){var o,d=a.length;if(!(d<1)){var u=la(e,n,0,!0),m,h=[];if(ot((o=a[0])===null||o===void 0?void 0:o.barSize)){var x=!1,p=n/d,b=a.reduce((E,C)=>E+(C.barSize||0),0);b+=(d-1)*u,b>=n&&(b-=(d-1)*u,u=0),b>=n&&p>0&&(x=!0,p*=.9,b=d*p);var N=(n-b)/2>>0,v={offset:N-u,size:0};m=a.reduce((E,C)=>{var O,k={stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:v.offset+v.size+u,size:x?p:(O=C.barSize)!==null&&O!==void 0?O:0}},_=[...E,k];return v=k.position,_},h)}else{var w=la(t,n,0,!0);n-2*w-(d-1)*u<=0&&(u=0);var S=(n-2*w-(d-1)*u)/d;S>1&&(S>>=0);var A=ot(l)?Math.min(S,l):S;m=a.reduce((E,C,O)=>[...E,{stackId:C.stackId,dataKeys:C.dataKeys,position:{offset:w+(S+u)*O+(S-A)/2,size:A}}],h)}return m}}var ute=(e,t,n,a,l,o,d)=>{var u=Pt(d)?t:d,m=dte(n,a,l!==o?l:o,e,u);return l!==o&&m!=null&&(m=m.map(h=>im(im({},h),{},{position:im(im({},h.position),{},{offset:h.position.offset-l/2})}))),m},fte=(e,t)=>{var n=Gj(t);if(!(!e||n==null||t==null)){var{stackId:a}=t;if(a!=null){var l=e[a];if(l){var{stackedData:o}=l;if(o)return o.find(d=>d.key===n)}}}},mte=(e,t)=>{if(!(e==null||t==null)){var n=e.find(a=>a.stackId===t.stackId&&t.dataKey!=null&&a.dataKeys.includes(t.dataKey));if(n!=null)return n.position}};function hte(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&ot(e.zIndex)?e.zIndex:t}var xte=e=>{var{chartData:t}=e,n=Ht(),a=qr();return g.useEffect(()=>a?()=>{}:(n(Z5(t)),()=>{n(Z5(void 0))}),[t,n,a]),null},F4={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},rR=nn({name:"brush",initialState:F4,reducers:{setBrushSettings(e,t){return t.payload==null?F4:t.payload}}}),{setBrushSettings:Aie}=rR.actions,pte=rR.reducer;function gte(e){return(e%180+180)%180}var bte=function(t){var{width:n,height:a}=t,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=gte(l),d=o*Math.PI/180,u=Math.atan(a/n),m=d>u&&d<Math.PI-u?a/Math.sin(d):n/Math.cos(d);return Math.abs(m)},yte={dots:[],areas:[],lines:[]},nR=nn({name:"referenceElements",initialState:yte,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=aa(e).dots.findIndex(a=>a===t.payload);n!==-1&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=aa(e).areas.findIndex(a=>a===t.payload);n!==-1&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=aa(e).lines.findIndex(a=>a===t.payload);n!==-1&&e.lines.splice(n,1)}}}),{addDot:kie,removeDot:_ie,addArea:Oie,removeArea:Tie,addLine:Rie,removeLine:Pie}=nR.actions,vte=nR.reducer,jte=g.createContext(void 0),Nte=e=>{var{children:t}=e,[n]=g.useState("".concat(_d("recharts"),"-clip")),a=x1();if(a==null)return null;var{x:l,y:o,width:d,height:u}=a;return g.createElement(jte.Provider,{value:n},g.createElement("defs",null,g.createElement("clipPath",{id:n},g.createElement("rect",{x:l,y:o,height:u,width:d}))),t)};function aR(e,t){if(t<1)return[];if(t===1)return e;for(var n=[],a=0;a<e.length;a+=t){var l=e[a];l!==void 0&&n.push(l)}return n}function wte(e,t,n){var a={width:e.width+t.width,height:e.height+t.height};return bte(a,n)}function Ste(e,t,n){var a=n==="width",{x:l,y:o,width:d,height:u}=e;return t===1?{start:a?l:o,end:a?l+d:o+u}:{start:a?l+d:o+u,end:a?l:o}}function Fd(e,t,n,a,l){if(e*t<e*a||e*t>e*l)return!1;var o=n();return e*(t-e*o/2-a)>=0&&e*(t+e*o/2-l)<=0}function Ete(e,t){return aR(e,t+1)}function Cte(e,t,n,a,l){for(var o=(a||[]).slice(),{start:d,end:u}=t,m=0,h=1,x=d,p=function(){var v=a?.[m];if(v===void 0)return{v:aR(a,h)};var w=m,S,A=()=>(S===void 0&&(S=n(v,w)),S),E=v.coordinate,C=m===0||Fd(e,E,A,x,u);C||(m=0,x=d,h+=1),C&&(x=E+e*(A()/2+l),m+=h)},b;h<=o.length;)if(b=p(),b)return b.v;return[]}function Ate(e,t,n,a,l){var o=(a||[]).slice(),d=o.length;if(d===0)return[];for(var{start:u,end:m}=t,h=1;h<=d;h++){for(var x=(d-1)%h,p=u,b=!0,N=function(){var O=a[w];if(O==null)return 0;var k=w,_,T=()=>(_===void 0&&(_=n(O,k)),_),P=O.coordinate,L=w===x||Fd(e,P,T,p,m);if(!L)return b=!1,1;L&&(p=P+e*(T()/2+l))},v,w=x;w<d&&(v=N(),!(v!==0&&v===1));w+=h);if(b){for(var S=[],A=x;A<d;A+=h){var E=a[A];E!=null&&S.push(E)}return S}}return[]}function H4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?H4(Object(n),!0).forEach(function(a){kte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function kte(e,t,n){return(t=_te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _te(e){var t=Ote(e,"string");return typeof t=="symbol"?t:t+""}function Ote(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tte(e,t,n,a,l){for(var o=(a||[]).slice(),d=o.length,{start:u}=t,{end:m}=t,h=function(b){var N=o[b];if(N==null)return 1;var v=N,w,S=()=>(w===void 0&&(w=n(N,b)),w);if(b===d-1){var A=e*(v.coordinate+e*S()/2-m);o[b]=v=Or(Or({},v),{},{tickCoord:A>0?v.coordinate-A*e:v.coordinate})}else o[b]=v=Or(Or({},v),{},{tickCoord:v.coordinate});if(v.tickCoord!=null){var E=Fd(e,v.tickCoord,S,u,m);E&&(m=v.tickCoord-e*(S()/2+l),o[b]=Or(Or({},v),{},{isShow:!0}))}},x=d-1;x>=0;x--)h(x);return o}function Rte(e,t,n,a,l,o){var d=(a||[]).slice(),u=d.length,{start:m,end:h}=t;if(o){var x=a[u-1];if(x!=null){var p=n(x,u-1),b=e*(x.coordinate+e*p/2-h);if(d[u-1]=x=Or(Or({},x),{},{tickCoord:b>0?x.coordinate-b*e:x.coordinate}),x.tickCoord!=null){var N=Fd(e,x.tickCoord,()=>p,m,h);N&&(h=x.tickCoord-e*(p/2+l),d[u-1]=Or(Or({},x),{},{isShow:!0}))}}}for(var v=o?u-1:u,w=function(E){var C=d[E];if(C==null)return 1;var O=C,k,_=()=>(k===void 0&&(k=n(C,E)),k);if(E===0){var T=e*(O.coordinate-e*_()/2-m);d[E]=O=Or(Or({},O),{},{tickCoord:T<0?O.coordinate-T*e:O.coordinate})}else d[E]=O=Or(Or({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var P=Fd(e,O.tickCoord,_,m,h);P&&(m=O.tickCoord+e*(_()/2+l),d[E]=Or(Or({},O),{},{isShow:!0}))}},S=0;S<v;S++)w(S);return d}function Pte(e,t,n){var{tick:a,ticks:l,viewBox:o,minTickGap:d,orientation:u,interval:m,tickFormatter:h,unit:x,angle:p}=e;if(!l||!l.length||!a)return[];if(Re(m)||Tx.isSsr){var b;return(b=Ete(l,Re(m)?m:0))!==null&&b!==void 0?b:[]}var N=[],v=u==="top"||u==="bottom"?"width":"height",w=x&&v==="width"?jd(x,{fontSize:t,letterSpacing:n}):{width:0,height:0},S=(k,_)=>{var T=typeof h=="function"?h(k.value,_):k.value;return v==="width"?wte(jd(T,{fontSize:t,letterSpacing:n}),w,p):jd(T,{fontSize:t,letterSpacing:n})[v]},A=l[0],E=l[1],C=l.length>=2&&A!=null&&E!=null?xn(E.coordinate-A.coordinate):1,O=Ste(o,C,v);return m==="equidistantPreserveStart"?Cte(C,O,S,l,d):m==="equidistantPreserveEnd"?Ate(C,O,S,l,d):(m==="preserveStart"||m==="preserveStartEnd"?N=Rte(C,O,S,l,d,m==="preserveStartEnd"):N=Tte(C,O,S,l,d),N.filter(k=>k.isShow))}var Dte=e=>{var{ticks:t,label:n,labelGapWithTick:a=5,tickSize:l=0,tickMargin:o=0}=e,d=0;if(t){Array.from(t).forEach(x=>{if(x){var p=x.getBoundingClientRect();p.width>d&&(d=p.width)}});var u=n?n.getBoundingClientRect().width:0,m=l+o,h=d+m+u+(n?a:0);return Math.round(h)}return 0},Mte=["axisLine","width","height","className","hide","ticks","axisType"];function Ite(e,t){if(e==null)return{};var n,a,l=Lte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Lte(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function wi(){return wi=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},wi.apply(null,arguments)}function K4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K4(Object(n),!0).forEach(function(a){zte(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function zte(e,t,n){return(t=Bte(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bte(e){var t=$te(e,"string");return typeof t=="symbol"?t:t+""}function $te(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ii={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Ar.axis};function Ute(e){var{x:t,y:n,width:a,height:l,orientation:o,mirror:d,axisLine:u,otherSvgProps:m}=e;if(!u)return null;var h=It(It(It({},m),za(u)),{},{fill:"none"});if(o==="top"||o==="bottom"){var x=+(o==="top"&&!d||o==="bottom"&&d);h=It(It({},h),{},{x1:t,y1:n+x*l,x2:t+a,y2:n+x*l})}else{var p=+(o==="left"&&!d||o==="right"&&d);h=It(It({},h),{},{x1:t+p*a,y1:n,x2:t+p*a,y2:n+l})}return g.createElement("line",wi({},h,{className:bt("recharts-cartesian-axis-line",Mo(u,"className"))}))}function qte(e,t,n,a,l,o,d,u,m){var h,x,p,b,N,v,w=u?-1:1,S=e.tickSize||d,A=Re(e.tickCoord)?e.tickCoord:e.coordinate;switch(o){case"top":h=x=e.coordinate,b=n+ +!u*l,p=b-w*S,v=p-w*m,N=A;break;case"left":p=b=e.coordinate,x=t+ +!u*a,h=x-w*S,N=h-w*m,v=A;break;case"right":p=b=e.coordinate,x=t+ +u*a,h=x+w*S,N=h+w*m,v=A;break;default:h=x=e.coordinate,b=n+ +u*l,p=b+w*S,v=p+w*m,N=A;break}return{line:{x1:h,y1:p,x2:x,y2:b},tick:{x:N,y:v}}}function Fte(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function Hte(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function Kte(e){var{option:t,tickProps:n,value:a}=e,l,o=bt(n.className,"recharts-cartesian-axis-tick-value");if(g.isValidElement(t))l=g.cloneElement(t,It(It({},n),{},{className:o}));else if(typeof t=="function")l=t(It(It({},n),{},{className:o}));else{var d="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(d=bt(d,ZJ(t))),l=g.createElement(m1,wi({},n,{className:d}),a)}return l}var Gte=g.forwardRef((e,t)=>{var{ticks:n=[],tick:a,tickLine:l,stroke:o,tickFormatter:d,unit:u,padding:m,tickTextProps:h,orientation:x,mirror:p,x:b,y:N,width:v,height:w,tickSize:S,tickMargin:A,fontSize:E,letterSpacing:C,getTicksConfig:O,events:k,axisType:_}=e,T=Pte(It(It({},O),{},{ticks:n}),E,C),P=Fte(x,p),L=Hte(x,p),z=za(O),U=nu(a),B={};typeof l=="object"&&(B=l);var ee=It(It({},z),{},{fill:"none"},B),X=T.map(J=>It({entry:J},qte(J,b,N,v,w,x,S,p,A))),be=X.map(J=>{var{entry:$,line:q}=J;return g.createElement(Gn,{className:"recharts-cartesian-axis-tick",key:"tick-".concat($.value,"-").concat($.coordinate,"-").concat($.tickCoord)},l&&g.createElement("line",wi({},ee,q,{className:bt("recharts-cartesian-axis-tick-line",Mo(l,"className"))})))}),G=X.map((J,$)=>{var q,se,{entry:I,tick:M}=J,H=It(It(It(It({verticalAnchor:L},z),{},{textAnchor:P,stroke:"none",fill:o},M),{},{index:$,payload:I,visibleTicksCount:T.length,tickFormatter:d,padding:m},h),{},{angle:(q=(se=h?.angle)!==null&&se!==void 0?se:z.angle)!==null&&q!==void 0?q:0}),oe=It(It({},H),U);return g.createElement(Gn,wi({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(I.value,"-").concat(I.coordinate,"-").concat(I.tickCoord)},Zv(k,I,$)),a&&g.createElement(Kte,{option:a,tickProps:oe,value:"".concat(typeof d=="function"?d(I.value,$):I.value).concat(u||"")}))});return g.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},G.length>0&&g.createElement(xa,{zIndex:Ar.label},g.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},G)),be.length>0&&g.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},be))}),Vte=g.forwardRef((e,t)=>{var{axisLine:n,width:a,height:l,className:o,hide:d,ticks:u,axisType:m}=e,h=Ite(e,Mte),[x,p]=g.useState(""),[b,N]=g.useState(""),v=g.useRef(null);g.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var S;return Dte({ticks:v.current,label:(S=e.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var w=g.useCallback(S=>{if(S){var A=S.getElementsByClassName("recharts-cartesian-axis-tick-value");v.current=A;var E=A[0];if(E){var C=window.getComputedStyle(E),O=C.fontSize,k=C.letterSpacing;(O!==x||k!==b)&&(p(O),N(k))}}},[x,b]);return d||a!=null&&a<=0||l!=null&&l<=0?null:g.createElement(xa,{zIndex:e.zIndex},g.createElement(Gn,{className:bt("recharts-cartesian-axis",o)},g.createElement(Ute,{x:e.x,y:e.y,width:a,height:l,orientation:e.orientation,mirror:e.mirror,axisLine:n,otherSvgProps:za(e)}),g.createElement(Gte,{ref:w,axisType:m,events:h,fontSize:x,getTicksConfig:e,height:e.height,letterSpacing:b,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:u,unit:e.unit,width:e.width,x:e.x,y:e.y}),g.createElement(AJ,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},g.createElement(LJ,{label:e.label,labelRef:e.labelRef}),e.children)))}),p1=g.forwardRef((e,t)=>{var n=rn(e,ii);return g.createElement(Vte,wi({},n,{ref:t}))});p1.displayName="CartesianAxis";var Yte={},sR=nn({name:"errorBars",initialState:Yte,reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]||(e[n]=[]),e[n].push(a)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:a,next:l}=t.payload;e[n]&&(e[n]=e[n].map(o=>o.dataKey===a.dataKey&&o.direction===a.direction?l:o))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:a}=t.payload;e[n]&&(e[n]=e[n].filter(l=>l.dataKey!==a.dataKey||l.direction!==a.direction))}}}),{addErrorBar:Die,replaceErrorBar:Mie,removeErrorBar:Iie}=sR.actions,Qte=sR.reducer,Wte=["children"];function Xte(e,t){if(e==null)return{};var n,a,l=Zte(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Zte(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Jte={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},ere=g.createContext(Jte);function lR(e){var{children:t}=e,n=Xte(e,Wte);return g.createElement(ere.Provider,{value:n},t)}function g1(e,t){var n,a,l=Me(h=>Ms(h,e)),o=Me(h=>Is(h,t)),d=(n=l?.allowDataOverflow)!==null&&n!==void 0?n:ur.allowDataOverflow,u=(a=o?.allowDataOverflow)!==null&&a!==void 0?a:fr.allowDataOverflow,m=d||u;return{needClip:m,needClipX:d,needClipY:u}}function iR(e){var{xAxisId:t,yAxisId:n,clipPathId:a}=e,l=x1(),{needClipX:o,needClipY:d,needClip:u}=g1(t,n);if(!u||!l)return null;var{x:m,y:h,width:x,height:p}=l;return g.createElement("clipPath",{id:"clipPath-".concat(a)},g.createElement("rect",{x:o?m:m-x/2,y:d?h:h-p/2,width:o?x:x*2,height:d?p:p*2}))}var oR=(e,t,n,a)=>Sl(e,"xAxis",t,a),cR=(e,t,n,a)=>wl(e,"xAxis",t,a),dR=(e,t,n,a)=>Sl(e,"yAxis",n,a),uR=(e,t,n,a)=>wl(e,"yAxis",n,a),tre=ce([mt,oR,dR,cR,uR],(e,t,n,a,l)=>Os(e,"xAxis")?Lo(t,a,!1):Lo(n,l,!1)),rre=(e,t,n,a,l)=>l;function nre(e){return e.type==="line"}var are=ce([Yx,rre],(e,t)=>e.filter(nre).find(n=>n.id===t)),sre=ce([mt,oR,dR,cR,uR,are,tre,Lj],(e,t,n,a,l,o,d,u)=>{var{chartData:m,dataStartIndex:h,dataEndIndex:x}=u;if(!(o==null||t==null||n==null||a==null||l==null||a.length===0||l.length===0||d==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:p,data:b}=o,N;if(b!=null&&b.length>0?N=b:N=m?.slice(h,x+1),N!=null)return Gre({layout:e,xAxis:t,yAxis:n,xAxisTicks:a,yAxisTicks:l,dataKey:p,bandSize:d,displayedData:N})}});function lre(e){var t=nu(e),n=3,a=2;if(t!=null){var{r:l,strokeWidth:o}=t,d=Number(l),u=Number(o);return(Number.isNaN(d)||d<0)&&(d=n),(Number.isNaN(u)||u<0)&&(u=a),{r:d,strokeWidth:u}}return{r:n,strokeWidth:a}}var ly={exports:{}},iy={};var G4;function ire(){if(G4)return iy;G4=1;var e=qo();function t(m,h){return m===h&&(m!==0||1/m===1/h)||m!==m&&h!==h}var n=typeof Object.is=="function"?Object.is:t,a=e.useSyncExternalStore,l=e.useRef,o=e.useEffect,d=e.useMemo,u=e.useDebugValue;return iy.useSyncExternalStoreWithSelector=function(m,h,x,p,b){var N=l(null);if(N.current===null){var v={hasValue:!1,value:null};N.current=v}else v=N.current;N=d(function(){function S(k){if(!A){if(A=!0,E=k,k=p(k),b!==void 0&&v.hasValue){var _=v.value;if(b(_,k))return C=_}return C=k}if(_=C,n(E,k))return _;var T=p(k);return b!==void 0&&b(_,T)?(E=k,_):(E=k,C=T)}var A=!1,E,C,O=x===void 0?null:x;return[function(){return S(h())},O===null?void 0:function(){return S(O())}]},[h,x,p,b]);var w=a(m,N[0],N[1]);return o(function(){v.hasValue=!0,v.value=w},[w]),u(w),w},iy}var V4;function ore(){return V4||(V4=1,ly.exports=ire()),ly.exports}ore();function cre(e){e()}function dre(){let e=null,t=null;return{clear(){e=null,t=null},notify(){cre(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let a=e;for(;a;)n.push(a),a=a.next;return n},subscribe(n){let a=!0;const l=t={callback:n,next:null,prev:t};return l.prev?l.prev.next=l:e=l,function(){!a||e===null||(a=!1,l.next?l.next.prev=l.prev:t=l.prev,l.prev?l.prev.next=l.next:e=l.next)}}}}var Y4={notify(){},get:()=>[]};function ure(e,t){let n,a=Y4,l=0,o=!1;function d(w){x();const S=a.subscribe(w);let A=!1;return()=>{A||(A=!0,S(),p())}}function u(){a.notify()}function m(){v.onStateChange&&v.onStateChange()}function h(){return o}function x(){l++,n||(n=e.subscribe(m),a=dre())}function p(){l--,n&&l===0&&(n(),n=void 0,a.clear(),a=Y4)}function b(){o||(o=!0,x())}function N(){o&&(o=!1,p())}const v={addNestedSub:d,notifyNestedSubs:u,handleChangeWrapper:m,isSubscribed:h,trySubscribe:b,tryUnsubscribe:N,getListeners:()=>a};return v}var fre=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mre=fre(),hre=()=>typeof navigator<"u"&&navigator.product==="ReactNative",xre=hre(),pre=()=>mre||xre?g.useLayoutEffect:g.useEffect,gre=pre();function Q4(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function bre(e,t){if(Q4(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;for(let l=0;l<n.length;l++)if(!Object.prototype.hasOwnProperty.call(t,n[l])||!Q4(e[n[l]],t[n[l]]))return!1;return!0}var yre=Symbol.for("react-redux-context"),vre=typeof globalThis<"u"?globalThis:{};function jre(){if(!g.createContext)return{};const e=vre[yre]??=new Map;let t=e.get(g.createContext);return t||(t=g.createContext(null),e.set(g.createContext,t)),t}var Nre=jre();function wre(e){const{children:t,context:n,serverState:a,store:l}=e,o=g.useMemo(()=>{const m=ure(l);return{store:l,subscription:m,getServerState:a?()=>a:void 0}},[l,a]),d=g.useMemo(()=>l.getState(),[l]);gre(()=>{const{subscription:m}=o;return m.onStateChange=m.notifyNestedSubs,m.trySubscribe(),d!==l.getState()&&m.notifyNestedSubs(),()=>{m.tryUnsubscribe(),m.onStateChange=void 0}},[o,d]);const u=n||Nre;return g.createElement(u.Provider,{value:o},t)}var Sre=wre,Ere=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function Cre(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function e0(e,t){var n=new Set([...Object.keys(e),...Object.keys(t)]);for(var a of n)if(Ere.has(a)){if(e[a]==null&&t[a]==null)continue;if(!bre(e[a],t[a]))return!1}else if(!Cre(e[a],t[a]))return!1;return!0}var Are=["id"],kre=["type","layout","connectNulls","needClip","shape"],_re=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Hd.apply(null,arguments)}function W4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W4(Object(n),!0).forEach(function(a){Ore(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Ore(e,t,n){return(t=Tre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tre(e){var t=Rre(e,"string");return typeof t=="symbol"?t:t+""}function Rre(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function b1(e,t){if(e==null)return{};var n,a,l=Pre(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Pre(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Dre=e=>{var{dataKey:t,name:n,stroke:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:Nx(n,t),payload:e}]},Mre=g.memo(e=>{var{dataKey:t,data:n,stroke:a,strokeWidth:l,fill:o,name:d,hide:u,unit:m,tooltipType:h,id:x}=e,p={dataDefinedOnItem:n,getPosition:Ei,settings:{stroke:a,strokeWidth:l,fill:o,dataKey:t,nameKey:void 0,name:Nx(d,t),hide:u,type:h,color:a,unit:m,graphicalItemId:x}};return g.createElement(QT,{tooltipEntrySettings:p})}),fR=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function Ire(e,t){for(var n=e.length%2!==0?[...e,0]:e,a=[],l=0;l<t;++l)a=[...a,...n];return a}var Lre=(e,t,n)=>{var a=n.reduce((N,v)=>N+v);if(!a)return fR(t,e);for(var l=Math.floor(e/a),o=e%a,d=t-e,u=[],m=0,h=0;m<n.length;h+=(x=n[m])!==null&&x!==void 0?x:0,++m){var x,p=n[m];if(p!=null&&h+p>o){u=[...n.slice(0,m),o-h];break}}var b=u.length%2===0?[0,d]:[d];return[...Ire(n,l),...u,...b].map(N=>"".concat(N,"px")).join(", ")};function zre(e){var{clipPathId:t,points:n,props:a}=e,{dot:l,dataKey:o,needClip:d}=a,{id:u}=a,m=b1(a,Are),h=za(m);return g.createElement(Bee,{points:n,dot:l,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:o,baseProps:h,needClip:d,clipPathId:t})}function Bre(e){var{showLabels:t,children:n,points:a}=e,l=g.useMemo(()=>a?.map(o=>{var d,u,m={x:(d=o.x)!==null&&d!==void 0?d:0,y:(u=o.y)!==null&&u!==void 0?u:0,width:0,lowerWidth:0,upperWidth:0,height:0};return _a(_a({},m),{},{value:o.value,payload:o.payload,viewBox:m,parentViewBox:void 0,fill:void 0})}),[a]);return g.createElement(zT,{value:t?l:void 0},n)}function X4(e){var{clipPathId:t,pathRef:n,points:a,strokeDasharray:l,props:o}=e,{type:d,layout:u,connectNulls:m,needClip:h,shape:x}=o,p=b1(o,kre),b=_a(_a({},$r(p)),{},{fill:"none",className:"recharts-line-curve",clipPath:h?"url(#clipPath-".concat(t,")"):void 0,points:a,type:d,layout:u,connectNulls:m,strokeDasharray:l??o.strokeDasharray});return g.createElement(g.Fragment,null,a?.length>1&&g.createElement(KT,Hd({shapeType:"curve",option:x},b,{pathRef:n})),g.createElement(zre,{points:a,clipPathId:t,props:o}))}function $re(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function Ure(e){var{clipPathId:t,props:n,pathRef:a,previousPointsRef:l,longestAnimatedLengthRef:o}=e,{points:d,strokeDasharray:u,isAnimationActive:m,animationBegin:h,animationDuration:x,animationEasing:p,animateNewValues:b,width:N,height:v,onAnimationEnd:w,onAnimationStart:S}=n,A=l.current,E=Px(d,"recharts-line-"),C=g.useRef(E),[O,k]=g.useState(!1),_=!O,T=g.useCallback(()=>{typeof w=="function"&&w(),k(!1)},[w]),P=g.useCallback(()=>{typeof S=="function"&&S(),k(!0)},[S]),L=$re(a.current),z=g.useRef(0);C.current!==E&&(z.current=o.current,C.current=E);var U=z.current;return g.createElement(Bre,{points:d,showLabels:_},n.children,g.createElement(Rx,{animationId:E,begin:h,duration:x,isActive:m,easing:p,onAnimationEnd:T,onAnimationStart:P,key:E},B=>{var ee=zt(U,L+U,B),X=Math.min(ee,L),be;if(m)if(u){var G="".concat(u).split(/[,\s]+/gim).map(q=>parseFloat(q));be=Lre(X,L,G)}else be=fR(L,X);else be=u==null?void 0:String(u);if(B>0&&L>0&&(l.current=d,o.current=Math.max(o.current,X)),A){var J=A.length/d.length,$=B===1?d:d.map((q,se)=>{var I=Math.floor(se*J);if(A[I]){var M=A[I];return _a(_a({},q),{},{x:zt(M.x,q.x,B),y:zt(M.y,q.y,B)})}return b?_a(_a({},q),{},{x:zt(N*2,q.x,B),y:zt(v/2,q.y,B)}):_a(_a({},q),{},{x:q.x,y:q.y})});return l.current=$,g.createElement(X4,{props:n,points:$,clipPathId:t,pathRef:a,strokeDasharray:be})}return g.createElement(X4,{props:n,points:d,clipPathId:t,pathRef:a,strokeDasharray:be})}),g.createElement($T,{label:n.label}))}function qre(e){var{clipPathId:t,props:n}=e,a=g.useRef(null),l=g.useRef(0),o=g.useRef(null);return g.createElement(Ure,{props:n,clipPathId:t,previousPointsRef:a,longestAnimatedLengthRef:l,pathRef:o})}var Fre=(e,t)=>{var n,a;return{x:(n=e.x)!==null&&n!==void 0?n:void 0,y:(a=e.y)!==null&&a!==void 0?a:void 0,value:e.value,errorVal:Zt(e.payload,t)}};class Hre extends g.Component{render(){var{hide:t,dot:n,points:a,className:l,xAxisId:o,yAxisId:d,top:u,left:m,width:h,height:x,id:p,needClip:b,zIndex:N}=this.props;if(t)return null;var v=bt("recharts-line",l),w=p,{r:S,strokeWidth:A}=lre(n),E=HT(n),C=S*2+A,O=b?"url(#clipPath-".concat(E?"":"dots-").concat(w,")"):void 0;return g.createElement(xa,{zIndex:N},g.createElement(Gn,{className:v},b&&g.createElement("defs",null,g.createElement(iR,{clipPathId:w,xAxisId:o,yAxisId:d}),!E&&g.createElement("clipPath",{id:"clipPath-dots-".concat(w)},g.createElement("rect",{x:m-C/2,y:u-C/2,width:h+C,height:x+C}))),g.createElement(lR,{xAxisId:o,yAxisId:d,data:a,dataPointFormatter:Fre,errorBarOffset:0},g.createElement(qre,{props:this.props,clipPathId:w}))),g.createElement(ste,{activeDot:this.props.activeDot,points:a,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:O}))}}var mR={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Ar.line,type:"linear"};function Kre(e){var t=rn(e,mR),{activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:d,connectNulls:u,dot:m,hide:h,isAnimationActive:x,label:p,legendType:b,xAxisId:N,yAxisId:v,id:w}=t,S=b1(t,_re),{needClip:A}=g1(N,v),E=x1(),C=Ci(),O=qr(),k=Me(z=>sre(z,N,v,O,w));if(C!=="horizontal"&&C!=="vertical"||k==null||E==null)return null;var{height:_,width:T,x:P,y:L}=E;return g.createElement(Hre,Hd({},S,{id:w,connectNulls:u,dot:m,activeDot:n,animateNewValues:a,animationBegin:l,animationDuration:o,animationEasing:d,isAnimationActive:x,hide:h,label:p,legendType:b,xAxisId:N,yAxisId:v,points:k,layout:C,height:_,width:T,left:P,top:L,needClip:A}))}function Gre(e){var{layout:t,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,dataKey:d,bandSize:u,displayedData:m}=e;return m.map((h,x)=>{var p=Zt(h,d);if(t==="horizontal"){var b=BC({axis:n,ticks:l,bandSize:u,entry:h,index:x}),N=Pt(p)?null:a.scale.map(p);return{x:b,y:N??null,value:p,payload:h}}var v=Pt(p)?null:n.scale.map(p),w=BC({axis:a,ticks:o,bandSize:u,entry:h,index:x});return v==null||w==null?null:{x:v,y:w,value:p,payload:h}}).filter(Boolean)}function Vre(e){var t=rn(e,mR),n=qr();return g.createElement(XT,{id:t.id,type:"line"},a=>g.createElement(g.Fragment,null,g.createElement(WT,{legendPayload:Dre(t)}),g.createElement(Mre,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),g.createElement(JT,{type:"line",id:a,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:n}),g.createElement(Kre,Hd({},t,{id:a}))))}var hR=g.memo(Vre,e0);hR.displayName="Line";function _i(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.xAxisId)!==null&&n!==void 0?n:eR}function Oi(e,t){var n,a;return(n=(a=e.graphicalItems.cartesianItems.find(l=>l.id===t))===null||a===void 0?void 0:a.yAxisId)!==null&&n!==void 0?n:eR}var Yre="Invariant failed";function Qre(e,t){throw new Error(Yre)}function fv(){return fv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},fv.apply(null,arguments)}function Gh(e){return g.createElement(KT,fv({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var Wre=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(a,l)=>{if(Re(t))return t;var o=Re(a)||Pt(a);return o?t(a,l):(o||Qre(),n)}},Xre=(e,t,n)=>n,Zre=(e,t)=>t,vu=ce([Yx,Zre],(e,t)=>e.filter(n=>n.type==="bar").find(n=>n.id===t)),Jre=ce([vu],e=>e?.maxBarSize),ene=(e,t,n,a)=>a,tne=ce([mt,Yx,_i,Oi,Xre],(e,t,n,a,l)=>t.filter(o=>e==="horizontal"?o.xAxisId===n:o.yAxisId===a).filter(o=>o.isPanorama===l).filter(o=>o.hide===!1).filter(o=>o.type==="bar")),rne=(e,t,n)=>{var a=mt(e),l=_i(e,t),o=Oi(e,t);if(!(l==null||o==null))return a==="horizontal"?sv(e,"yAxis",o,n):sv(e,"xAxis",l,n)},nne=(e,t)=>{var n=mt(e),a=_i(e,t),l=Oi(e,t);if(!(a==null||l==null))return n==="horizontal"?$5(e,"xAxis",a):$5(e,"yAxis",l)},ane=ce([tne,jQ,nne],lte),sne=(e,t,n)=>{var a,l,o=vu(e,t);if(o==null)return 0;var d=_i(e,t),u=Oi(e,t);if(d==null||u==null)return 0;var m=mt(e),h=a6(e),{maxBarSize:x}=o,p=Pt(x)?h:x,b,N;return m==="horizontal"?(b=Sl(e,"xAxis",d,n),N=wl(e,"xAxis",d,n)):(b=Sl(e,"yAxis",u,n),N=wl(e,"yAxis",u,n)),(a=(l=Lo(b,N,!0))!==null&&l!==void 0?l:p)!==null&&a!==void 0?a:0},xR=(e,t,n)=>{var a=mt(e),l=_i(e,t),o=Oi(e,t);if(!(l==null||o==null)){var d,u;return a==="horizontal"?(d=Sl(e,"xAxis",l,n),u=wl(e,"xAxis",l,n)):(d=Sl(e,"yAxis",o,n),u=wl(e,"yAxis",o,n)),Lo(d,u)}},lne=ce([ane,a6,vQ,s6,sne,xR,Jre],ute),ine=(e,t,n)=>{var a=_i(e,t);if(a!=null)return Sl(e,"xAxis",a,n)},one=(e,t,n)=>{var a=Oi(e,t);if(a!=null)return Sl(e,"yAxis",a,n)},cne=(e,t,n)=>{var a=_i(e,t);if(a!=null)return wl(e,"xAxis",a,n)},dne=(e,t,n)=>{var a=Oi(e,t);if(a!=null)return wl(e,"yAxis",a,n)},une=ce([lne,vu],mte),fne=ce([rne,vu],fte),mne=ce([hr,oj,ine,one,cne,dne,une,mt,fQ,xR,fne,vu,ene],(e,t,n,a,l,o,d,u,m,h,x,p,b)=>{var{chartData:N,dataStartIndex:v,dataEndIndex:w}=m;if(!(p==null||d==null||t==null||u!=="horizontal"&&u!=="vertical"||n==null||a==null||l==null||o==null||h==null)){var{data:S}=p,A;if(S!=null&&S.length>0?A=S:A=N?.slice(v,w+1),A!=null)return Une({layout:u,barSettings:p,pos:d,parentViewBox:t,bandSize:h,xAxis:n,yAxis:a,xAxisTicks:l,yAxisTicks:o,stackedData:x,displayedData:A,offset:e,cells:b,dataStartIndex:v})}}),hne=["index"];function mv(){return mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},mv.apply(null,arguments)}function xne(e,t){if(e==null)return{};var n,a,l=pne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function pne(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var pR=g.createContext(void 0),gne=e=>{var t=g.useContext(pR);if(t!=null)return t.stackId;if(e!=null)return fH(e)},bne=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),yne=e=>{var t=g.useContext(pR);if(t!=null){var{stackId:n}=t;return"url(#".concat(bne(n,e),")")}},gR=e=>{var{index:t}=e,n=xne(e,hne),a=yne(t);return g.createElement(Gn,mv({className:"recharts-bar-stack-layer",clipPath:a},n))},vne=["onMouseEnter","onMouseLeave","onClick"],jne=["value","background","tooltipPosition"],Nne=["id"],wne=["onMouseEnter","onClick","onMouseLeave"];function As(){return As=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},As.apply(null,arguments)}function Z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Lr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z4(Object(n),!0).forEach(function(a){Sne(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Sne(e,t,n){return(t=Ene(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ene(e){var t=Cne(e,"string");return typeof t=="symbol"?t:t+""}function Cne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vh(e,t){if(e==null)return{};var n,a,l=Ane(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Ane(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var kne=e=>{var{dataKey:t,name:n,fill:a,legendType:l,hide:o}=e;return[{inactive:o,dataKey:t,type:l,color:a,value:Nx(n,t),payload:e}]},_ne=g.memo(e=>{var{dataKey:t,stroke:n,strokeWidth:a,fill:l,name:o,hide:d,unit:u,tooltipType:m,id:h}=e,x={dataDefinedOnItem:void 0,getPosition:Ei,settings:{stroke:n,strokeWidth:a,fill:l,dataKey:t,nameKey:void 0,name:Nx(o,t),hide:d,type:m,color:l,unit:u,graphicalItemId:h}};return g.createElement(QT,{tooltipEntrySettings:x})});function One(e){var t=Me(Ni),{data:n,dataKey:a,background:l,allOtherBarProps:o}=e,{onMouseEnter:d,onMouseLeave:u,onClick:m}=o,h=Vh(o,vne),x=GT(d,a,o.id),p=VT(u),b=YT(m,a,o.id);if(!l||n==null)return null;var N=nu(l);return g.createElement(xa,{zIndex:hte(l,Ar.barBackground)},n.map((v,w)=>{var{value:S,background:A,tooltipPosition:E}=v,C=Vh(v,jne);if(!A)return null;var O=x(v,w),k=p(v,w),_=b(v,w),T=Lr(Lr(Lr(Lr(Lr({option:l,isActive:String(w)===t},C),{},{fill:"#eee"},A),N),Zv(h,v,w)),{},{onMouseEnter:O,onMouseLeave:k,onClick:_,dataKey:a,index:w,className:"recharts-bar-background-rectangle"});return g.createElement(Gh,As({key:"background-bar-".concat(w)},T))}))}function Tne(e){var{showLabels:t,children:n,rects:a}=e,l=a?.map(o=>{var d={x:o.x,y:o.y,width:o.width,lowerWidth:o.width,upperWidth:o.width,height:o.height};return Lr(Lr({},d),{},{value:o.value,payload:o.payload,parentViewBox:o.parentViewBox,viewBox:d,fill:o.fill})});return g.createElement(zT,{value:t?l:void 0},n)}function Rne(e){var{shape:t,activeBar:n,baseProps:a,entry:l,index:o,dataKey:d}=e,u=Me(Ni),m=Me(pT),h=n&&String(o)===u&&(m==null||d===m),x=h?n:t;return h?g.createElement(xa,{zIndex:Ar.activeBar},g.createElement(gR,{index:o},g.createElement(Gh,As({},a,{name:String(a.name)},l,{isActive:h,option:x,index:o,dataKey:d})))):g.createElement(Gh,As({},a,{name:String(a.name)},l,{isActive:h,option:x,index:o,dataKey:d}))}function Pne(e){var{shape:t,baseProps:n,entry:a,index:l,dataKey:o}=e;return g.createElement(Gh,As({},n,{name:String(n.name)},a,{isActive:!1,option:t,index:l,dataKey:o}))}function Dne(e){var t,{data:n,props:a}=e,l=(t=za(a))!==null&&t!==void 0?t:{},{id:o}=l,d=Vh(l,Nne),{shape:u,dataKey:m,activeBar:h}=a,{onMouseEnter:x,onClick:p,onMouseLeave:b}=a,N=Vh(a,wne),v=GT(x,m,o),w=VT(b),S=YT(p,m,o);return n?g.createElement(g.Fragment,null,n.map((A,E)=>g.createElement(gR,As({index:E,key:"rectangle-".concat(A?.x,"-").concat(A?.y,"-").concat(A?.value,"-").concat(E),className:"recharts-bar-rectangle"},Zv(N,A,E),{onMouseEnter:v(A,E),onMouseLeave:w(A,E),onClick:S(A,E)}),h?g.createElement(Rne,{shape:u,activeBar:h,baseProps:d,entry:A,index:E,dataKey:m}):g.createElement(Pne,{shape:u,baseProps:d,entry:A,index:E,dataKey:m})))):null}function Mne(e){var{props:t,previousRectanglesRef:n}=e,{data:a,layout:l,isAnimationActive:o,animationBegin:d,animationDuration:u,animationEasing:m,onAnimationEnd:h,onAnimationStart:x}=t,p=n.current,b=Px(t,"recharts-bar-"),[N,v]=g.useState(!1),w=!N,S=g.useCallback(()=>{typeof h=="function"&&h(),v(!1)},[h]),A=g.useCallback(()=>{typeof x=="function"&&x(),v(!0)},[x]);return g.createElement(Tne,{showLabels:w,rects:a},g.createElement(Rx,{animationId:b,begin:d,duration:u,isActive:o,easing:m,onAnimationEnd:S,onAnimationStart:A,key:b},E=>{var C=E===1?a:a?.map((O,k)=>{var _=p&&p[k];if(_)return Lr(Lr({},O),{},{x:zt(_.x,O.x,E),y:zt(_.y,O.y,E),width:zt(_.width,O.width,E),height:zt(_.height,O.height,E)});if(l==="horizontal"){var T=zt(0,O.height,E),P=zt(O.stackedBarStart,O.y,E);return Lr(Lr({},O),{},{y:P,height:T})}var L=zt(0,O.width,E),z=zt(O.stackedBarStart,O.x,E);return Lr(Lr({},O),{},{width:L,x:z})});return E>0&&(n.current=C??null),C==null?null:g.createElement(Gn,null,g.createElement(Dne,{props:t,data:C}))}),g.createElement($T,{label:t.label}),t.children)}function Ine(e){var t=g.useRef(null);return g.createElement(Mne,{previousRectanglesRef:t,props:e})}var bR=0,Lne=(e,t)=>{var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Zt(e,t)}};class zne extends g.PureComponent{render(){var{hide:t,data:n,dataKey:a,className:l,xAxisId:o,yAxisId:d,needClip:u,background:m,id:h}=this.props;if(t||n==null)return null;var x=bt("recharts-bar",l),p=h;return g.createElement(Gn,{className:x,id:h},u&&g.createElement("defs",null,g.createElement(iR,{clipPathId:p,xAxisId:o,yAxisId:d})),g.createElement(Gn,{className:"recharts-bar-rectangles",clipPath:u?"url(#clipPath-".concat(p,")"):void 0},g.createElement(One,{data:n,dataKey:a,background:m,allOtherBarProps:this.props}),g.createElement(Ine,this.props)))}}var Bne={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:bR,xAxisId:0,yAxisId:0,zIndex:Ar.bar};function $ne(e){var{xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:d,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:x}=e,{needClip:p}=g1(t,n),b=Ci(),N=qr(),v=ree(e.children,Jx),w=Me(E=>mne(E,e.id,N,v));if(b!=="vertical"&&b!=="horizontal")return null;var S,A=w?.[0];return A==null||A.height==null||A.width==null?S=0:S=b==="vertical"?A.height/2:A.width/2,g.createElement(lR,{xAxisId:t,yAxisId:n,data:w,dataPointFormatter:Lne,errorBarOffset:S},g.createElement(zne,As({},e,{layout:b,needClip:p,data:w,xAxisId:t,yAxisId:n,hide:a,legendType:l,minPointSize:o,activeBar:d,animationBegin:u,animationDuration:m,animationEasing:h,isAnimationActive:x})))}function Une(e){var{layout:t,barSettings:{dataKey:n,minPointSize:a},pos:l,bandSize:o,xAxis:d,yAxis:u,xAxisTicks:m,yAxisTicks:h,stackedData:x,displayedData:p,offset:b,cells:N,parentViewBox:v,dataStartIndex:w}=e,S=t==="horizontal"?u:d,A=x?S.scale.domain():null,E=mH({numericAxis:S}),C=S.scale.map(E);return p.map((O,k)=>{var _,T,P,L,z,U;if(x){var B=x[k+w];if(B==null)return null;_=iH(B,A)}else _=Zt(O,n),Array.isArray(_)||(_=[E,_]);var ee=Wre(a,bR)(_[1],k);if(t==="horizontal"){var X,be=u.scale.map(_[0]),G=u.scale.map(_[1]);if(be==null||G==null)return null;T=$C({axis:d,ticks:m,bandSize:o,offset:l.offset,entry:O,index:k}),P=(X=G??be)!==null&&X!==void 0?X:void 0,L=l.size;var J=be-G;if(z=Ba(J)?0:J,U={x:T,y:b.top,width:L,height:b.height},Math.abs(ee)>0&&Math.abs(z)<Math.abs(ee)){var $=xn(z||ee)*(Math.abs(ee)-Math.abs(z));P-=$,z+=$}}else{var q=d.scale.map(_[0]),se=d.scale.map(_[1]);if(q==null||se==null)return null;if(T=q,P=$C({axis:u,ticks:h,bandSize:o,offset:l.offset,entry:O,index:k}),L=se-q,z=l.size,U={x:b.left,y:P,width:b.width,height:z},Math.abs(ee)>0&&Math.abs(L)<Math.abs(ee)){var I=xn(L||ee)*(Math.abs(ee)-Math.abs(L));L+=I}}if(T==null||P==null||L==null||z==null)return null;var M=Lr(Lr({},O),{},{stackedBarStart:C,x:T,y:P,width:L,height:z,value:x?_:_[1],payload:O,background:U,tooltipPosition:{x:T+L/2,y:P+z/2},parentViewBox:v},N&&N[k]&&N[k].props);return M}).filter(Boolean)}function qne(e){var t=rn(e,Bne),n=gne(t.stackId),a=qr();return g.createElement(XT,{id:t.id,type:"bar"},l=>g.createElement(g.Fragment,null,g.createElement(WT,{legendPayload:kne(t)}),g.createElement(_ne,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:l}),g.createElement(JT,{type:"bar",id:l,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:n,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:a}),g.createElement(xa,{zIndex:t.zIndex},g.createElement($ne,As({},t,{id:l})))))}var y1=g.memo(qne,e0);y1.displayName="Bar";var Fne=["domain","range"],Hne=["domain","range"];function J4(e,t){if(e==null)return{};var n,a,l=Kne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Kne(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function ek(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function yR(e,t){if(e===t)return!0;var{domain:n,range:a}=e,l=J4(e,Fne),{domain:o,range:d}=t,u=J4(t,Hne);return!ek(n,o)||!ek(a,d)?!1:e0(l,u)}var Gne=["type"],Vne=["dangerouslySetInnerHTML","ticks","scale"],Yne=["id","scale"];function hv(){return hv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},hv.apply(null,arguments)}function tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function rk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tk(Object(n),!0).forEach(function(a){Qne(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Qne(e,t,n){return(t=Wne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wne(e){var t=Xne(e,"string");return typeof t=="symbol"?t:t+""}function Xne(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xv(e,t){if(e==null)return{};var n,a,l=Zne(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Zne(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Jne(e){var t=Ht(),n=g.useRef(null),a=V_(),{type:l}=e,o=xv(e,Gne),d=qx(a,"xAxis",l),u=g.useMemo(()=>{if(d!=null)return rk(rk({},o),{},{type:d})},[o,d]);return g.useLayoutEffect(()=>{u!=null&&(n.current===null?t(Hee(u)):n.current!==u&&t(Kee({prev:n.current,next:u})),n.current=u)},[u,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(Gee(n.current)),n.current=null)},[t]),null}var eae=e=>{var{xAxisId:t,className:n}=e,a=Me(oj),l=qr(),o="xAxis",d=Me(A=>Q6(A,o,t,l)),u=Me(A=>K6(A,t)),m=Me(A=>NW(A,t)),h=Me(A=>h6(A,t));if(u==null||m==null||h==null)return null;var{dangerouslySetInnerHTML:x,ticks:p,scale:b}=e,N=xv(e,Vne),{id:v,scale:w}=h,S=xv(h,Yne);return g.createElement(p1,hv({},N,S,{x:m.x,y:m.y,width:u.width,height:u.height,className:bt("recharts-".concat(o," ").concat(o),n),viewBox:a,ticks:d,axisType:o}))},tae={allowDataOverflow:ur.allowDataOverflow,allowDecimals:ur.allowDecimals,allowDuplicatedCategory:ur.allowDuplicatedCategory,angle:ur.angle,axisLine:ii.axisLine,height:ur.height,hide:!1,includeHidden:ur.includeHidden,interval:ur.interval,label:!1,minTickGap:ur.minTickGap,mirror:ur.mirror,orientation:ur.orientation,padding:ur.padding,reversed:ur.reversed,scale:ur.scale,tick:ur.tick,tickCount:ur.tickCount,tickLine:ii.tickLine,tickSize:ii.tickSize,type:ur.type,xAxisId:0},rae=e=>{var t=rn(e,tae);return g.createElement(g.Fragment,null,g.createElement(Jne,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),g.createElement(eae,t))},t0=g.memo(rae,yR);t0.displayName="XAxis";var nae=["type"],aae=["dangerouslySetInnerHTML","ticks","scale"],sae=["id","scale"];function pv(){return pv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},pv.apply(null,arguments)}function nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function ak(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nk(Object(n),!0).forEach(function(a){lae(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nk(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function lae(e,t,n){return(t=iae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iae(e){var t=oae(e,"string");return typeof t=="symbol"?t:t+""}function oae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gv(e,t){if(e==null)return{};var n,a,l=cae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function cae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function dae(e){var t=Ht(),n=g.useRef(null),a=V_(),{type:l}=e,o=gv(e,nae),d=qx(a,"yAxis",l),u=g.useMemo(()=>{if(d!=null)return ak(ak({},o),{},{type:d})},[d,o]);return g.useLayoutEffect(()=>{u!=null&&(n.current===null?t(Vee(u)):n.current!==u&&t(Yee({prev:n.current,next:u})),n.current=u)},[u,t]),g.useLayoutEffect(()=>()=>{n.current&&(t(Qee(n.current)),n.current=null)},[t]),null}function uae(e){var{yAxisId:t,className:n,width:a,label:l}=e,o=g.useRef(null),d=g.useRef(null),u=Me(oj),m=qr(),h=Ht(),x="yAxis",p=Me(_=>G6(_,t)),b=Me(_=>SW(_,t)),N=Me(_=>Q6(_,x,t,m)),v=Me(_=>x6(_,t));if(g.useLayoutEffect(()=>{if(!(a!=="auto"||!p||h1(l)||g.isValidElement(l)||v==null)){var _=o.current;if(_){var T=_.getCalculatedWidth();Math.round(p.width)!==Math.round(T)&&h(Wee({id:t,width:T}))}}},[N,p,h,l,t,a,v]),p==null||b==null||v==null)return null;var{dangerouslySetInnerHTML:w,ticks:S,scale:A}=e,E=gv(e,aae),{id:C,scale:O}=v,k=gv(v,sae);return g.createElement(p1,pv({},E,k,{ref:o,labelRef:d,x:b.x,y:b.y,tickTextProps:a==="auto"?{width:void 0}:{width:a},width:p.width,height:p.height,className:bt("recharts-".concat(x," ").concat(x),n),viewBox:u,ticks:N,axisType:x}))}var fae={allowDataOverflow:fr.allowDataOverflow,allowDecimals:fr.allowDecimals,allowDuplicatedCategory:fr.allowDuplicatedCategory,angle:fr.angle,axisLine:ii.axisLine,hide:!1,includeHidden:fr.includeHidden,interval:fr.interval,label:!1,minTickGap:fr.minTickGap,mirror:fr.mirror,orientation:fr.orientation,padding:fr.padding,reversed:fr.reversed,scale:fr.scale,tick:fr.tick,tickCount:fr.tickCount,tickLine:ii.tickLine,tickSize:ii.tickSize,type:fr.type,width:fr.width,yAxisId:0},mae=e=>{var t=rn(e,fae);return g.createElement(g.Fragment,null,g.createElement(dae,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),g.createElement(uae,t))},r0=g.memo(mae,yR);r0.displayName="YAxis";var hae=(e,t)=>t,v1=ce([hae,mt,f6,gr,fT,Ls,BX,hr],GX),j1=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,a=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/a)}},vR=Vn("mouseClick"),jR=lu();jR.startListening({actionCreator:vR,effect:(e,t)=>{var n=e.payload,a=v1(t.getState(),j1(n));a?.activeIndex!=null&&t.dispatch(zW({activeIndex:a.activeIndex,activeDataKey:void 0,activeCoordinate:a.activeCoordinate}))}});var bv=Vn("mouseMove"),NR=lu(),om=null;NR.startListening({actionCreator:bv,effect:(e,t)=>{var n=e.payload;om!==null&&cancelAnimationFrame(om);var a=j1(n);om=requestAnimationFrame(()=>{var l=t.getState(),o=r1(l,l.tooltip.settings.shared);if(o==="axis"){var d=v1(l,a);d?.activeIndex!=null?t.dispatch(nT({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate})):t.dispatch(rT())}om=null})}});function xae(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var sk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},wR=nn({name:"rootProps",initialState:sk,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(n=t.payload.barGap)!==null&&n!==void 0?n:sk.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),pae=wR.reducer,{updateOptions:gae}=wR.actions,bae=null,yae={updatePolarOptions:(e,t)=>t.payload},SR=nn({name:"polarOptions",initialState:bae,reducers:yae}),{updatePolarOptions:Lie}=SR.actions,vae=SR.reducer,ER=Vn("keyDown"),CR=Vn("focus"),N1=lu();N1.startListening({actionCreator:ER,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip,o=e.payload;if(!(o!=="ArrowRight"&&o!=="ArrowLeft"&&o!=="Enter")){var d=n1(l,tc(n),pu(n),bu(n)),u=d==null?-1:Number(d);if(!(!Number.isFinite(u)||u<0)){var m=Ls(n);if(o==="Enter"){var h=Uh(n,"axis","hover",String(l.index));t.dispatch(iv({active:!l.active,activeIndex:l.index,activeCoordinate:h}));return}var x=kW(n),p=x==="left-to-right"?1:-1,b=o==="ArrowRight"?1:-1,N=u+b*p;if(!(m==null||N>=m.length||N<0)){var v=Uh(n,"axis","hover",String(N));t.dispatch(iv({active:!0,activeIndex:N.toString(),activeCoordinate:v}))}}}}}});N1.startListening({actionCreator:CR,effect:(e,t)=>{var n=t.getState(),a=n.rootProps.accessibilityLayer!==!1;if(a){var{keyboardInteraction:l}=n.tooltip;if(!l.active&&l.index==null){var o="0",d=Uh(n,"axis","hover",String(o));t.dispatch(iv({active:!0,activeIndex:o,activeCoordinate:d}))}}}});var Ln=Vn("externalEvent"),AR=lu(),oy=new Map;AR.startListening({actionCreator:Ln,effect:(e,t)=>{var{handler:n,reactEvent:a}=e.payload;if(n!=null){a.persist();var l=a.type,o=oy.get(l);o!==void 0&&cancelAnimationFrame(o);var d=requestAnimationFrame(()=>{try{var u=t.getState(),m={activeCoordinate:wX(u),activeDataKey:pT(u),activeIndex:Ni(u),activeLabel:xT(u),activeTooltipIndex:Ni(u),isTooltipActive:SX(u)};n(m,a)}finally{oy.delete(l)}});oy.set(l,d)}}});var jae=ce([Jo],e=>e.tooltipItemPayloads),Nae=ce([jae,(e,t)=>t,(e,t,n)=>n],(e,t,n)=>{if(t!=null){var a=e.find(o=>o.settings.graphicalItemId===n);if(a!=null){var{getPosition:l}=a;if(l!=null)return l(t)}}}),kR=Vn("touchMove"),_R=lu();_R.startListening({actionCreator:kR,effect:(e,t)=>{var n=e.payload;if(!(n.touches==null||n.touches.length===0)){var a=t.getState(),l=r1(a,a.tooltip.settings.shared);if(l==="axis"){var o=n.touches[0];if(o==null)return;var d=v1(a,j1({clientX:o.clientX,clientY:o.clientY,currentTarget:n.currentTarget}));d?.activeIndex!=null&&t.dispatch(nT({activeIndex:d.activeIndex,activeDataKey:void 0,activeCoordinate:d.activeCoordinate}))}else if(l==="item"){var u,m=n.touches[0];if(document.elementFromPoint==null||m==null)return;var h=document.elementFromPoint(m.clientX,m.clientY);if(!h||!h.getAttribute)return;var x=h.getAttribute(vH),p=(u=h.getAttribute(jH))!==null&&u!==void 0?u:void 0,b=ec(a).find(w=>w.id===p);if(x==null||b==null||p==null)return;var{dataKey:N}=b,v=Nae(a,x,p);t.dispatch(tT({activeDataKey:N,activeIndex:x,activeCoordinate:v,activeGraphicalItemId:p}))}}}});var wae=h_({brush:pte,cartesianAxis:Xee,chartData:wZ,errorBars:Qte,graphicalItems:_ee,layout:rH,legend:xK,options:bZ,polarAxis:XJ,polarOptions:vae,referenceElements:vte,rootProps:pae,tooltip:BW,zIndex:lZ}),Sae=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return AF({reducer:wae,preloadedState:t,middleware:a=>{var l;return a({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((l="es6")!==null&&l!==void 0?l:"")}).concat([jR.middleware,NR.middleware,N1.middleware,AR.middleware,_R.middleware])},enhancers:a=>{var l=a;return typeof a=="function"&&(l=a()),l.concat(__({type:"raf"}))},devTools:{serialize:{replacer:xae},name:"recharts-".concat(n)}})};function Eae(e){var{preloadedState:t,children:n,reduxStoreName:a}=e,l=qr(),o=g.useRef(null);if(l)return n;o.current==null&&(o.current=Sae(t,a));var d=tj;return g.createElement(Sre,{context:d,store:o.current},n)}function Cae(e){var{layout:t,margin:n}=e,a=Ht(),l=qr();return g.useEffect(()=>{l||(a(JF(t)),a(ZF(n)))},[a,l,t,n]),null}var Aae=g.memo(Cae,e0);function kae(e){var t=Ht();return g.useEffect(()=>{t(gae(e))},[t,e]),null}function lk(e){var{zIndex:t,isPanorama:n}=e,a=g.useRef(null),l=Ht();return g.useLayoutEffect(()=>(a.current&&l(aZ({zIndex:t,element:a.current,isPanorama:n})),()=>{l(sZ({zIndex:t,isPanorama:n}))}),[l,t,n]),g.createElement("g",{tabIndex:-1,ref:a})}function ik(e){var{children:t,isPanorama:n}=e,a=Me(YX);if(!a||a.length===0)return t;var l=a.filter(d=>d<0),o=a.filter(d=>d>0);return g.createElement(g.Fragment,null,l.map(d=>g.createElement(lk,{key:d,zIndex:d,isPanorama:n})),t,o.map(d=>g.createElement(lk,{key:d,zIndex:d,isPanorama:n})))}var _ae=["children"];function Oae(e,t){if(e==null)return{};var n,a,l=Tae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Tae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}function Yh(){return Yh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Yh.apply(null,arguments)}var Rae={width:"100%",height:"100%",display:"block"},Pae=g.forwardRef((e,t)=>{var n=XH(),a=ZH(),l=rO();if(!Nl(n)||!Nl(a))return null;var{children:o,otherAttributes:d,title:u,desc:m}=e,h,x;return d!=null&&(typeof d.tabIndex=="number"?h=d.tabIndex:h=l?0:void 0,typeof d.role=="string"?x=d.role:x=l?"application":void 0),g.createElement(R3,Yh({},d,{title:u,desc:m,role:x,tabIndex:h,width:n,height:a,style:Rae,ref:t}),o)}),Dae=e=>{var{children:t}=e,n=Me(Cx);if(!n)return null;var{width:a,height:l,y:o,x:d}=n;return g.createElement(R3,{width:a,height:l,x:d,y:o},t)},ok=g.forwardRef((e,t)=>{var{children:n}=e,a=Oae(e,_ae),l=qr();return l?g.createElement(Dae,null,g.createElement(ik,{isPanorama:!0},n)):g.createElement(Pae,Yh({ref:t},a),g.createElement(ik,{isPanorama:!1},n))});function Mae(){var e=Ht(),[t,n]=g.useState(null),a=Me(yH);return g.useEffect(()=>{if(t!=null){var l=t.getBoundingClientRect(),o=l.width/t.offsetWidth;ot(o)&&o!==a&&e(tH(o))}},[t,e,a]),n}function ck(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),n.push.apply(n,a)}return n}function Iae(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ck(Object(n),!0).forEach(function(a){Lae(e,a,n[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ck(Object(n)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))})}return e}function Lae(e,t,n){return(t=zae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zae(e){var t=Bae(e,"string");return typeof t=="symbol"?t:t+""}function Bae(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var a=n.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vl(){return vl=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},vl.apply(null,arguments)}var $ae=()=>(RZ(),null);function Qh(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var Uae=g.forwardRef((e,t)=>{var n,a,l=g.useRef(null),[o,d]=g.useState({containerWidth:Qh((n=e.style)===null||n===void 0?void 0:n.width),containerHeight:Qh((a=e.style)===null||a===void 0?void 0:a.height)}),u=g.useCallback((h,x)=>{d(p=>{var b=Math.round(h),N=Math.round(x);return p.containerWidth===b&&p.containerHeight===N?p:{containerWidth:b,containerHeight:N}})},[]),m=g.useCallback(h=>{if(typeof t=="function"&&t(h),h!=null&&typeof ResizeObserver<"u"){var{width:x,height:p}=h.getBoundingClientRect();u(x,p);var b=v=>{var w=v[0];if(w!=null){var{width:S,height:A}=w.contentRect;u(S,A)}},N=new ResizeObserver(b);N.observe(h),l.current=N}},[t,u]);return g.useEffect(()=>()=>{var h=l.current;h?.disconnect()},[u]),g.createElement(g.Fragment,null,g.createElement(ou,{width:o.containerWidth,height:o.containerHeight}),g.createElement("div",vl({ref:m},e)))}),qae=g.forwardRef((e,t)=>{var{width:n,height:a}=e,[l,o]=g.useState({containerWidth:Qh(n),containerHeight:Qh(a)}),d=g.useCallback((m,h)=>{o(x=>{var p=Math.round(m),b=Math.round(h);return x.containerWidth===p&&x.containerHeight===b?x:{containerWidth:p,containerHeight:b}})},[]),u=g.useCallback(m=>{if(typeof t=="function"&&t(m),m!=null){var{width:h,height:x}=m.getBoundingClientRect();d(h,x)}},[t,d]);return g.createElement(g.Fragment,null,g.createElement(ou,{width:l.containerWidth,height:l.containerHeight}),g.createElement("div",vl({ref:u},e)))}),Fae=g.forwardRef((e,t)=>{var{width:n,height:a}=e;return g.createElement(g.Fragment,null,g.createElement(ou,{width:n,height:a}),g.createElement("div",vl({ref:t},e)))}),Hae=g.forwardRef((e,t)=>{var{width:n,height:a}=e;return typeof n=="string"||typeof a=="string"?g.createElement(qae,vl({},e,{ref:t})):typeof n=="number"&&typeof a=="number"?g.createElement(Fae,vl({},e,{width:n,height:a,ref:t})):g.createElement(g.Fragment,null,g.createElement(ou,{width:n,height:a}),g.createElement("div",vl({ref:t},e)))});function Kae(e){return e?Uae:Hae}var Gae=g.forwardRef((e,t)=>{var{children:n,className:a,height:l,onClick:o,onContextMenu:d,onDoubleClick:u,onMouseDown:m,onMouseEnter:h,onMouseLeave:x,onMouseMove:p,onMouseUp:b,onTouchEnd:N,onTouchMove:v,onTouchStart:w,style:S,width:A,responsive:E,dispatchTouchEvents:C=!0}=e,O=g.useRef(null),k=Ht(),[_,T]=g.useState(null),[P,L]=g.useState(null),z=Mae(),U=cj(),B=U?.width>0?U.width:A,ee=U?.height>0?U.height:l,X=g.useCallback(Z=>{z(Z),typeof t=="function"&&t(Z),T(Z),L(Z),Z!=null&&(O.current=Z)},[z,t,T,L]),be=g.useCallback(Z=>{k(vR(Z)),k(Ln({handler:o,reactEvent:Z}))},[k,o]),G=g.useCallback(Z=>{k(bv(Z)),k(Ln({handler:h,reactEvent:Z}))},[k,h]),J=g.useCallback(Z=>{k(rT()),k(Ln({handler:x,reactEvent:Z}))},[k,x]),$=g.useCallback(Z=>{k(bv(Z)),k(Ln({handler:p,reactEvent:Z}))},[k,p]),q=g.useCallback(()=>{k(CR())},[k]),se=g.useCallback(Z=>{k(ER(Z.key))},[k]),I=g.useCallback(Z=>{k(Ln({handler:d,reactEvent:Z}))},[k,d]),M=g.useCallback(Z=>{k(Ln({handler:u,reactEvent:Z}))},[k,u]),H=g.useCallback(Z=>{k(Ln({handler:m,reactEvent:Z}))},[k,m]),oe=g.useCallback(Z=>{k(Ln({handler:b,reactEvent:Z}))},[k,b]),K=g.useCallback(Z=>{k(Ln({handler:w,reactEvent:Z}))},[k,w]),pe=g.useCallback(Z=>{C&&k(kR(Z)),k(Ln({handler:v,reactEvent:Z}))},[k,C,v]),V=g.useCallback(Z=>{k(Ln({handler:N,reactEvent:Z}))},[k,N]),xe=Kae(E);return g.createElement(wT.Provider,{value:_},g.createElement(i9.Provider,{value:P},g.createElement(xe,{width:B??S?.width,height:ee??S?.height,className:bt("recharts-wrapper",a),style:Iae({position:"relative",cursor:"default",width:B,height:ee},S),onClick:be,onContextMenu:I,onDoubleClick:M,onFocus:q,onKeyDown:se,onMouseDown:H,onMouseEnter:G,onMouseLeave:J,onMouseMove:$,onMouseUp:oe,onTouchEnd:V,onTouchMove:pe,onTouchStart:K,ref:X},g.createElement($ae,null),n)))}),Vae=["width","height","responsive","children","className","style","compact","title","desc"];function Yae(e,t){if(e==null)return{};var n,a,l=Qae(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}function Qae(e,t){if(e==null)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;n[a]=e[a]}return n}var Wae=g.forwardRef((e,t)=>{var{width:n,height:a,responsive:l,children:o,className:d,style:u,compact:m,title:h,desc:x}=e,p=Yae(e,Vae),b=za(p);return m?g.createElement(g.Fragment,null,g.createElement(ou,{width:n,height:a}),g.createElement(ok,{otherAttributes:b,title:h,desc:x},o)):g.createElement(Gae,{className:d,style:u,width:n,height:a,responsive:l??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},g.createElement(ok,{otherAttributes:b,title:h,desc:x,ref:t},g.createElement(Nte,null,o)))});function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)({}).hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},yv.apply(null,arguments)}var Xae={top:5,right:5,bottom:5,left:5},Zae={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Xae,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},OR=g.forwardRef(function(t,n){var a,l=rn(t.categoricalChartProps,Zae),{chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,categoricalChartProps:h}=t,x={chartName:o,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:m,eventEmitter:void 0};return g.createElement(Eae,{preloadedState:{options:x},reduxStoreName:(a=h.id)!==null&&a!==void 0?a:o},g.createElement(xte,{chartData:h.data}),g.createElement(Aae,{layout:l.layout,margin:l.margin}),g.createElement(kae,{baseValue:l.baseValue,accessibilityLayer:l.accessibilityLayer,barCategoryGap:l.barCategoryGap,maxBarSize:l.maxBarSize,stackOffset:l.stackOffset,barGap:l.barGap,barSize:l.barSize,syncId:l.syncId,syncMethod:l.syncMethod,className:l.className,reverseStackOrder:l.reverseStackOrder}),g.createElement(Wae,yv({},l,{ref:n})))}),Jae=["axis"],ese=g.forwardRef((e,t)=>g.createElement(OR,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:Jae,tooltipPayloadSearcher:ST,categoricalChartProps:e,ref:t})),tse=["axis","item"],TR=g.forwardRef((e,t)=>g.createElement(OR,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:tse,tooltipPayloadSearcher:ST,categoricalChartProps:e,ref:t}));const rse=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];function nse({data:e=[]}){let t=[];Array.isArray(e)&&e.length>0?typeof e[0]=="number"?t=e:e[0]&&typeof e[0]=="object"&&(t=e.map(l=>typeof l=="number"?l:l.value||0)):e&&typeof e=="object"&&!Array.isArray(e)&&(typeof e.value=="number"?t=[e.value]:Array.isArray(e.data)&&(t=e.data)),t.length===0&&(t=[0,0,0,0,0,0,0]);const n=t.map((l,o)=>({day:rse[o]||`D${o+1}`,sales:typeof l=="number"?l:0})),a=t.length>0&&t.some(l=>l!==0);return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"font-bold",children:"Branch Weekly Sales"}),r.jsx("span",{className:"text-xs px-3 py-1 rounded-full bg-slate-100 border border-brand-border font-bold",children:" Sales"})]}),r.jsx("div",{style:{width:"100%",height:"288px",minHeight:"288px",minWidth:"0"},children:a?r.jsx(dj,{width:"100%",height:288,margin:0,children:r.jsxs(ese,{data:n,margin:{top:5,right:5,left:0,bottom:5},children:[r.jsx(t0,{dataKey:"day"}),r.jsx(r0,{}),r.jsx(f1,{}),r.jsx(hR,{type:"monotone",dataKey:"sales",stroke:"#2563EB",strokeWidth:3})]})}):r.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},className:"text-brand-muted text-sm",children:"No sales data available"})})]})}function ase(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await E3(5);t(u||[]),o(null)}catch(u){console.error("Error fetching top selling products:",u),o("Failed to load products")}finally{a(!1)}})()},[]),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-5 font-bold",children:"Top Selling Products (This Week)"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-3",children:"Product"}),r.jsx("th",{className:"text-left p-3",children:"Units"}),r.jsx("th",{className:"text-left p-3",children:"Revenue"})]})}),r.jsx("tbody",{children:n?r.jsx("tr",{children:r.jsx("td",{className:"p-6 text-center text-brand-muted",colSpan:3,children:"Loading products..."})}):l?r.jsx("tr",{children:r.jsx("td",{className:"p-6 text-center text-red-600",colSpan:3,children:l})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{className:"p-6 text-center text-brand-muted",colSpan:3,children:"No products available"})}):e.map((d,u)=>r.jsxs("tr",{className:"border-t hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 font-bold",children:d.name}),r.jsx("td",{className:"p-3",children:d.units}),r.jsx("td",{className:"p-3",children:d.revenue})]},u))})]})})]})}const sse={Success:"bg-brand-success",Active:"bg-brand-success",Available:"bg-brand-success",Warning:"bg-brand-warning",Critical:"bg-brand-danger",Failed:"bg-brand-danger",Blocked:"bg-brand-danger",Offline:"bg-slate-500",Sold:"bg-brand-secondary"};function rc({label:e}){const t=sse[e]||"bg-slate-500";return r.jsx("span",{className:`text-xs px-3 py-1 rounded-full text-white font-bold ${t}`,children:e})}function lse(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await EU();t(u||[]),o(null)}catch(u){console.error("Error fetching stock alerts:",u),o("Failed to load stock alerts")}finally{a(!1)}})()},[]),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-3",children:"Low Stock (Branch)"}),r.jsx("div",{className:"space-y-3",children:n?r.jsx("div",{className:"text-sm text-brand-muted",children:"Loading stock alerts..."}):l?r.jsx("div",{className:"text-sm text-red-600",children:l}):e.length===0?r.jsx("div",{className:"text-sm text-brand-muted",children:"No stock alerts"}):e.map((d,u)=>r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-3 last:border-b-0 last:pb-0",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:d.item}),r.jsxs("div",{className:"text-xs text-brand-muted",children:["Only ",d.qty," left"]})]}),r.jsx(rc,{label:d.level})]},u))})]})}function ise(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await AU();t(u||[]),o(null)}catch(u){console.error("Error fetching alerts:",u),o("Failed to load alerts")}finally{a(!1)}})()},[]),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-3",children:"Alerts"}),r.jsx("div",{className:"space-y-3",children:n?r.jsx("div",{className:"text-sm text-brand-muted",children:"Loading alerts..."}):l?r.jsx("div",{className:"text-sm text-red-600",children:l}):e.length===0?r.jsx("div",{className:"text-sm text-brand-muted",children:"No recent alerts"}):e.map((d,u)=>r.jsxs("div",{className:"flex items-start justify-between gap-3 border-b border-slate-100 pb-3 last:border-b-0 last:pb-0",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-semibold",children:d.message}),r.jsx("div",{className:"text-xs text-brand-muted",children:d.time})]}),r.jsx(rc,{label:d.type})]},u))})]})}function ose(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await CU();t(u||[]),o(null)}catch(u){console.error("Error fetching expiry alerts:",u),o("Failed to load expiry data")}finally{a(!1)}})()},[]),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-3",children:"Expiry Alerts"}),r.jsx("div",{className:"space-y-3",children:n?r.jsx("div",{className:"text-sm text-brand-muted",children:"Loading expiry data..."}):l?r.jsx("div",{className:"text-sm text-red-600",children:l}):e.length===0?r.jsx("div",{className:"text-sm text-brand-muted",children:"No expiry alerts"}):e.map((d,u)=>r.jsxs("div",{className:"flex items-center justify-between gap-3 border-b border-slate-100 pb-3 last:border-b-0 last:pb-0",children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("div",{className:"font-semibold",children:d.item}),r.jsxs("div",{className:"text-xs text-brand-muted",children:["Expires: ",d.expiresOn,"  Qty: ",d.qty]})]}),r.jsx(rc,{label:d.severity})]},u))})]})}function cse(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await C3();t(u||[]),o(null)}catch(u){console.error("Error fetching staff summary:",u),o("Failed to load staff data")}finally{a(!1)}})()},[]),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-3",children:"Staff Activity"}),r.jsx("div",{className:"space-y-3",children:n?r.jsx("div",{className:"text-sm text-brand-muted",children:"Loading staff data..."}):l?r.jsx("div",{className:"text-sm text-red-600",children:l}):e.length===0?r.jsx("div",{className:"text-sm text-brand-muted",children:"No staff members"}):e.slice(0,4).map(d=>r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-3 last:border-b-0 last:pb-0",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"font-bold",children:[d.name," ",r.jsxs("span",{className:"text-xs text-brand-muted",children:["(",d.role,")"]})]}),r.jsxs("div",{className:"text-xs text-brand-muted",children:["Last login: ",d.lastLogin]})]}),r.jsx(rc,{label:d.status})]},d.name))})]})}function dse(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await SU();t(u||[]),o(null)}catch(u){console.error("Error fetching pending GRNs:",u),o("Failed to load GRNs")}finally{a(!1)}})()},[]),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-3",children:"Pending GRNs"}),r.jsx("div",{className:"space-y-3",children:n?r.jsx("div",{className:"text-sm text-brand-muted",children:"Loading GRNs..."}):l?r.jsx("div",{className:"text-sm text-red-600",children:l}):e.length===0?r.jsx("div",{className:"text-sm text-brand-muted",children:"No pending GRNs"}):e.map(d=>r.jsxs("div",{className:"flex items-center justify-between border-b border-slate-100 pb-3 last:border-b-0 last:pb-0",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-bold",children:d.id}),r.jsxs("div",{className:"text-xs text-brand-muted",children:[d.supplier,"  ",d.items," items"]})]}),r.jsx(rc,{label:d.eta==="Today"?"Warning":"Success"})]},d.id))})]})}const use=[{label:"Create GRN Request",to:"/manager/approvals"},{label:"View Alerts / Low Stock",to:"/manager"},{label:"Sales Reports",to:"/manager/sales-reports"},{label:"New Journal Entry",to:"/manager/journal-entry"}];function fse(){const e=ca();return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-3",children:"Quick Actions"}),r.jsx("div",{className:"space-y-3",children:use.map(t=>r.jsx("button",{type:"button",onClick:()=>e(t.to),className:"w-full py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition",children:t.label},t.label))})]})}function mse(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[d,u]=g.useState(null);return g.useEffect(()=>{(async()=>{try{o(!0),u(null);const[h,x]=await Promise.all([S3(),jU("weekly")]);let p=[];Array.isArray(h)?p=h:h&&typeof h=="object"&&(p=[h]);let b=[];Array.isArray(x)?b=x:x&&typeof x=="object"&&(Array.isArray(x.data)?b=x.data:typeof x.value=="number"&&(b=[x.value])),t(p),a(b)}catch(h){console.error("Error loading dashboard data:",h),u("Failed to load dashboard data. Please try again.")}finally{o(!1)}})()},[]),d?r.jsxs("div",{className:"space-y-5",children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Manager Dashboard"}),r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700",children:d})]}):r.jsxs("div",{className:"space-y-5",children:[r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2",children:r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Manager Dashboard"}),r.jsx("p",{className:"text-sm text-brand-muted",children:"Branch-focused view: sales summary, approvals, and operational alerts."})]})}),r.jsx(WU,{}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 items-stretch",children:l?r.jsx("div",{className:"col-span-full text-center text-brand-muted",children:"Loading stats..."}):e.map((m,h)=>r.jsx(YU,{title:m.title,value:m.value,icon:m.icon,tone:m.tone},h))}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(nse,{data:n})}),r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsx(dse,{}),r.jsx(fse,{})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsx(ase,{})}),r.jsxs("div",{className:"lg:col-span-1 space-y-4",children:[r.jsx(ise,{}),r.jsx(ose,{}),r.jsx(lse,{}),r.jsx(cse,{})]})]})]})}function hse(){return r.jsx(mse,{})}const dk=e=>e?e.replace("CASH_FLOW_","").replace(/_/g," ").toLowerCase().replace(/\b\w/g,t=>t.toUpperCase()):"",xse=e=>{const t=(e||"").toLowerCase();return t.includes("paid_in")?r.jsx(Vd,{className:"w-4 h-4 text-emerald-500"}):t.includes("paid_out")?r.jsx(_s,{className:"w-4 h-4 text-red-500"}):t.includes("registration")?r.jsx(Si,{className:"w-4 h-4 text-blue-500"}):r.jsx(o7,{className:"w-4 h-4 text-slate-400"})};function pse({isOpen:e,onClose:t,onConfirm:n,title:a,message:l,type:o="info"}){return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden scale-100 animate-in zoom-in-95 duration-200",children:[r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`p-3 rounded-full ${o==="danger"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:r.jsx(Bt,{className:"w-6 h-6"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:a}),r.jsx("p",{className:"text-sm text-slate-500 mt-1 leading-relaxed",children:l})]})]})}),r.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end gap-3",children:[r.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{onClick:n,className:`px-4 py-2 text-sm font-semibold text-white rounded-lg shadow-sm transition-all active:scale-95 ${o==="danger"?"bg-red-600 hover:bg-red-700 shadow-red-200":"bg-blue-600 hover:bg-blue-700 shadow-blue-200"}`,children:"Confirm Action"})]})]})}):null}function gse(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[d,u]=g.useState(null),[m,h]=g.useState(null),[x,p]=g.useState(!1),[b,N]=g.useState({isOpen:!1,id:null,status:null,title:"",message:"",type:"info"});g.useEffect(()=>{v()},[]);const v=async()=>{try{o(!0),u(null);const O=(await kU()||[]).filter(k=>k.category!=="USER_REGISTRATION");t(O.filter(k=>k.status==="Pending")),a(O.filter(k=>k.status!=="Pending"))}catch(C){console.error("Error fetching approvals:",C),u("Failed to load approvals")}finally{o(!1)}},w=(C,O)=>{const k=O==="Approved";N({isOpen:!0,id:C,status:O,title:k?"Confirm Approval":"Reject Request",message:k?"Are you sure you want to approve this request? This action will update the system records immediately.":"Are you sure you want to reject this request? The requester will be notified.",type:k?"info":"danger"})},S=()=>{N(C=>({...C,isOpen:!1}))};async function A(){const{id:C,status:O}=b;if(!(!C||!O)){S();try{h(C),await _U(C,O);const k=e.find(_=>_.id===C);if(k){const _={...k,status:O,approvedAt:new Date().toLocaleString()};t(T=>T.filter(P=>P.id!==C)),a(T=>[_,...T])}}catch(k){console.error("Error updating status:",k),alert("Failed to update status. Please try again.")}finally{h(null)}}}const E=async()=>{try{p(!0);const C=await OU(),O=window.URL.createObjectURL(C),k=document.createElement("a");k.href=O,k.setAttribute("download",`approval_history_${new Date().toISOString().split("T")[0]}.pdf`),document.body.appendChild(k),k.click(),k.parentNode.removeChild(k),window.URL.revokeObjectURL(O)}catch(C){console.error("Failed to export PDF",C),alert("Failed to generate PDF report.")}finally{p(!1)}};return d?r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-extrabold text-slate-800",children:"Approvals & Requests"}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-red-700 flex items-center justify-between",children:[r.jsx("span",{children:d}),r.jsx("button",{onClick:v,className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Retry"})]})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(pse,{isOpen:b.isOpen,onClose:S,onConfirm:A,title:b.title,message:b.message,type:b.type}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-extrabold text-slate-800 tracking-tight",children:"Approvals & Requests"}),r.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Manage pending requests and view history"})]}),r.jsx("div",{className:"flex gap-2",children:r.jsx("button",{onClick:v,className:"px-4 py-2 bg-white border border-slate-200 text-slate-600 rounded-xl text-sm font-bold hover:bg-slate-50 hover:border-slate-300 transition-all shadow-sm",children:"Refresh"})})]}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center gap-3 bg-slate-50/50",children:[r.jsx("span",{className:"font-bold text-slate-700",children:"Pending Approvals"}),e.length>0&&r.jsxs("span",{className:"bg-amber-100 text-amber-700 px-2.5 py-0.5 rounded-full text-xs font-bold shadow-sm border border-amber-200",children:[e.length," Waiting"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-500 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider w-12"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Type / Ref"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Reason"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Amount"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Requested By"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Action"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:l?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-blue-600 rounded-full animate-spin"}),r.jsx("span",{children:"Checking for requests..."})]})})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{className:"p-12 text-center text-slate-400",colSpan:6,children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx(et,{className:"w-8 h-8 text-emerald-100 text-emerald-400"}),r.jsx("span",{children:"No pending approvals found"})]})})}):e.map(C=>{const O=m===C.id,k=C.amount?`LKR ${Number(C.amount).toLocaleString()}`:"-",_=C.reason||C.description||"No reason provided",T=C.reference||C.referenceNo||"-";return r.jsxs("tr",{className:`group hover:bg-blue-50/30 transition-colors ${O?"opacity-50 pointer-events-none":""}`,children:[r.jsx("td",{className:"p-4 pl-6",children:r.jsx("div",{className:"p-2 bg-white border border-slate-200 rounded-lg shadow-sm",children:xse(C.category)})}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"font-bold text-slate-700",children:dk(C.category)}),r.jsx("div",{className:"font-mono text-xs text-slate-500 mt-1",children:T})]}),r.jsxs("td",{className:"p-4 max-w-xs",children:[r.jsx("div",{className:"text-slate-600 text-sm leading-snug",children:_}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1 flex items-center gap-1",children:[r.jsx(To,{className:"w-3 h-3"})," ",C.time]})]}),r.jsx("td",{className:"p-4 font-bold text-slate-800",children:k}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 rounded-full bg-slate-200 flex items-center justify-center text-xs font-bold text-slate-600",children:C.requestedBy?.charAt(0)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-700",children:C.requestedBy}),r.jsx("div",{className:"text-[10px] text-slate-400",children:C.email||"Staff"})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>w(C.id,"Approved"),disabled:O,className:"px-3 py-1.5 bg-emerald-500 text-white rounded-lg text-xs font-bold hover:bg-emerald-600 shadow-sm hover:shadow-emerald-200 transition-all active:scale-95 disabled:opacity-50",children:"Approve"}),r.jsx("button",{onClick:()=>w(C.id,"Rejected"),disabled:O,className:"px-3 py-1.5 bg-white border border-slate-200 text-red-600 rounded-lg text-xs font-bold hover:bg-red-50 hover:border-red-200 transition-all active:scale-95 disabled:opacity-50",children:"Reject"})]})})]},C.id)})})]})})]}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center justify-between",children:[r.jsxs("div",{className:"font-bold text-slate-700 flex items-center gap-2",children:[r.jsx(To,{className:"w-4 h-4 text-slate-400"})," Approval History"]}),r.jsx("button",{onClick:E,disabled:x,className:`flex items-center gap-2 px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded-lg text-xs font-bold transition-colors ${x?"opacity-50 cursor-wait":""}`,children:x?r.jsx(r.Fragment,{children:"Generating..."}):r.jsxs(r.Fragment,{children:[r.jsx(ua,{className:"w-3 h-3"})," Export PDF"]})})]}),r.jsx("div",{className:"overflow-x-auto max-h-[500px] overflow-y-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-500 border-b border-slate-200 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Type"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Reference"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Reason / Description"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Amount"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Requested By"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Approved At"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:l?r.jsx("tr",{children:r.jsx("td",{colSpan:7,className:"p-8 text-center text-slate-400",children:"Loading history..."})}):n.length===0?r.jsx("tr",{children:r.jsx("td",{className:"p-8 text-center text-slate-400",colSpan:7,children:"No approval history"})}):n.map(C=>{const O=C.amount?`LKR ${Number(C.amount).toLocaleString()}`:"-",k=C.reason||C.description||"-",_=C.reference||C.referenceNo||"-";return r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"p-4 font-medium text-slate-600",children:dk(C.category)}),r.jsx("td",{className:"p-4 font-mono text-xs text-slate-500",children:_}),r.jsx("td",{className:"p-4 text-slate-600 text-xs max-w-xs truncate",children:k}),r.jsx("td",{className:"p-4 font-bold text-slate-700 text-xs",children:O}),r.jsx("td",{className:"p-4 text-slate-600",children:C.requestedBy}),r.jsx("td",{className:"p-4 text-slate-500 text-xs font-mono",children:C.approvedAt||"-"}),r.jsx("td",{className:"p-4",children:r.jsx(rc,{label:C.status})})]},C.id)})})]})})]})]})}const uk={SALE:{icon:qn,color:"bg-emerald-100 text-emerald-700 border-emerald-200",label:"Sale"},RETURN:{icon:oi,color:"bg-red-100 text-red-700 border-red-200",label:"Return"},VOID_SALE:{icon:Ia,color:"bg-red-100 text-red-700 border-red-200",label:"Void Sale"},DISCOUNT:{icon:gn,color:"bg-amber-100 text-amber-700 border-amber-200",label:"Discount"},SHIFT_OPEN:{icon:_S,color:"bg-blue-100 text-blue-700 border-blue-200",label:"Shift Open"},SHIFT_CLOSE:{icon:fi,color:"bg-rose-100 text-rose-700 border-rose-200",label:"Shift Close"},CASH_IN:{icon:_s,color:"bg-emerald-100 text-emerald-700 border-emerald-200",label:"Cash In"},CASH_OUT:{icon:oi,color:"bg-orange-100 text-orange-700 border-orange-200",label:"Cash Out"},CASH_FLOW_REQUEST:{icon:gn,color:"bg-purple-100 text-purple-700 border-purple-200",label:"Cash Flow"},GRN:{icon:Tt,color:"bg-cyan-100 text-cyan-700 border-cyan-200",label:"GRN"},GRN_APPROVED:{icon:et,color:"bg-emerald-100 text-emerald-700 border-emerald-200",label:"GRN Approved"},STOCK_ADJUSTMENT:{icon:Tt,color:"bg-amber-100 text-amber-700 border-amber-200",label:"Stock Adjust"},STOCK_TRANSFER:{icon:Tt,color:"bg-blue-100 text-blue-700 border-blue-200",label:"Transfer"},LOGIN:{icon:_S,color:"bg-slate-100 text-slate-700 border-slate-200",label:"Login"},LOGOUT:{icon:fi,color:"bg-slate-100 text-slate-700 border-slate-200",label:"Logout"},USER_CREATE:{icon:vs,color:"bg-blue-100 text-blue-700 border-blue-200",label:"User Created"},APPROVAL_REQUEST:{icon:sa,color:"bg-purple-100 text-purple-700 border-purple-200",label:"Approval Requested"},APPROVAL_GRANTED:{icon:et,color:"bg-emerald-100 text-emerald-700 border-emerald-200",label:"Approved"},APPROVAL_REJECTED:{icon:Ia,color:"bg-red-100 text-red-700 border-red-200",label:"Rejected"},ALERT:{icon:Bt,color:"bg-amber-100 text-amber-700 border-amber-200",label:"Alert"},DEFAULT:{icon:Ma,color:"bg-slate-100 text-slate-700 border-slate-200",label:"Activity"}};function xd({title:e,value:t,icon:n,color:a,trend:l,trendValue:o}){const d={blue:"bg-blue-50 text-blue-600 border-blue-100",emerald:"bg-emerald-50 text-emerald-600 border-emerald-100",amber:"bg-amber-50 text-amber-600 border-amber-100",red:"bg-red-50 text-red-600 border-red-100",purple:"bg-purple-50 text-purple-600 border-purple-100"};return r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2.5 rounded-xl border ${d[a]}`,children:r.jsx(n,{size:20})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wide",children:e}),r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:t})]}),l&&r.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${l==="up"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[l==="up"?"+":"",o,"%"]})]})})}function bse({activity:e}){const t=uk[e.actionType]||uk.DEFAULT,n=t.icon;let a=e.username||`User ${e.userId||"?"}`,l="System",o={};try{if(e.metadata){const u=typeof e.metadata=="string"?JSON.parse(e.metadata):e.metadata;u.user&&(a=u.user),u.role&&(l=u.role),u.amount&&(o.amount=u.amount),u.invoice&&(o.invoice=u.invoice)}}catch{}const d={INFO:"bg-blue-50",WARNING:"bg-amber-50",CRITICAL:"bg-red-50",SUCCESS:"bg-emerald-50"};return r.jsxs("tr",{className:`hover:bg-slate-50 transition-colors border-t border-slate-100 ${d[e.severity]||""}`,children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Rr,{className:"w-3.5 h-3.5 text-slate-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-700",children:new Date(e.timestamp||e.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),r.jsx("div",{className:"text-xs text-slate-400",children:new Date(e.timestamp||e.createdAt).toLocaleDateString()})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-br from-slate-100 to-slate-200 flex items-center justify-center text-sm font-bold text-slate-600",children:a.charAt(0).toUpperCase()}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-800",children:a}),r.jsx("div",{className:"text-xs text-slate-400 uppercase tracking-wide",children:l})]})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("span",{className:`inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-bold border ${t.color}`,children:[r.jsx(n,{size:12}),t.label||e.actionType?.replace(/_/g," ")]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"max-w-md",children:[r.jsx("div",{className:"text-slate-700",children:e.description||e.details}),e.entityType&&e.entityId&&r.jsxs("div",{className:"text-xs text-slate-400 mt-1 font-mono",children:["Ref: ",e.entityType," #",e.entityId]}),o.amount&&r.jsxs("div",{className:"text-xs text-emerald-600 font-bold mt-1",children:["LKR ",o.amount.toLocaleString()]})]})}),r.jsx("td",{className:"p-4",children:e.terminalId?r.jsxs("div",{className:"flex items-center gap-1.5 text-slate-500",children:[r.jsx(ex,{className:"w-4 h-4"}),r.jsxs("span",{className:"font-mono text-sm",children:["T-",String(e.terminalId).padStart(2,"0")]})]}):r.jsx("span",{className:"text-slate-300",children:"-"})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${e.status==="SUCCESS"?"bg-emerald-100 text-emerald-700":e.status==="FAILED"?"bg-red-100 text-red-700":"bg-slate-100 text-slate-600"}`,children:e.status||"OK"})})]})}function yse({selected:e,onChange:t,options:n}){return r.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(a=>r.jsxs("button",{onClick:()=>t(a.value),className:`px-3 py-1.5 rounded-full text-sm font-medium transition-all ${e===a.value?"bg-slate-800 text-white shadow-lg":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[a.label,a.count!==void 0&&r.jsx("span",{className:`ml-1.5 px-1.5 py-0.5 rounded-full text-xs ${e===a.value?"bg-white/20":"bg-slate-100"}`,children:a.count})]},a.value))})}function vse({isLive:e}){return r.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 border border-emerald-200 rounded-full",children:[r.jsx("div",{className:`w-2 h-2 rounded-full ${e?"bg-emerald-500 animate-pulse":"bg-slate-400"}`}),r.jsx("span",{className:"text-xs font-medium text-emerald-700",children:e?"Live Updates":"Paused"})]})}function jse(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(!1),[d,u]=g.useState(!0),[m,h]=g.useState(""),[x,p]=g.useState("ALL"),[b,N]=g.useState("ALL"),[v,w]=g.useState(new Date().toISOString().split("T")[0]),S=async()=>{try{o(!0);const k=await DU(1);Array.isArray(k)?t(k):t([])}catch(k){console.error("Failed to load activities",k),t([])}finally{a(!1),o(!1)}};g.useEffect(()=>{S();let k;return d&&(k=setInterval(S,3e4)),()=>clearInterval(k)},[d]);const A=g.useMemo(()=>{const k=new Date().toDateString(),_=e.filter(U=>new Date(U.timestamp||U.createdAt).toDateString()===k),T=_.filter(U=>U.actionType==="SALE").length,P=_.filter(U=>U.actionType==="RETURN").length,L=_.filter(U=>U.severity==="WARNING"||U.severity==="CRITICAL").length,z=_.filter(U=>U.actionType==="LOGIN").length;return{total:_.length,sales:T,returns:P,warnings:L,logins:z}},[e]),E=g.useMemo(()=>{const k=m.toLowerCase();return e.filter(_=>{const T=!k||_.username?.toLowerCase().includes(k)||_.actionType?.toLowerCase().includes(k)||_.description?.toLowerCase().includes(k)||_.details?.toLowerCase().includes(k)||_.terminalId&&String(_.terminalId).includes(k),P=x==="ALL"||_.actionType===x,L=b==="ALL"||_.severity===b;return T&&P&&L})},[e,m,x,b]),C=g.useMemo(()=>{const k={};return e.forEach(_=>{k[_.actionType]=(k[_.actionType]||0)+1}),[{value:"ALL",label:"All",count:e.length},{value:"SALE",label:"Sales",count:k.SALE||0},{value:"RETURN",label:"Returns",count:k.RETURN||0},{value:"SHIFT_OPEN",label:"Shift Open",count:k.SHIFT_OPEN||0},{value:"SHIFT_CLOSE",label:"Shift Close",count:k.SHIFT_CLOSE||0},{value:"GRN",label:"GRN",count:k.GRN||0},{value:"LOGIN",label:"Logins",count:k.LOGIN||0}]},[e]),O=async()=>{try{const k=await RU(100),_=window.URL.createObjectURL(k),T=document.createElement("a");T.href=_,T.download=`activity-log-${new Date().toISOString().split("T")[0]}.pdf`,document.body.appendChild(T),T.click(),T.remove(),window.URL.revokeObjectURL(_)}catch(k){console.error("Failed to export PDF",k),alert("Failed to export report. Please try again.")}};return n?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-10 h-10 text-blue-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500",children:"Loading activity log..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Ma,{className:"w-6 h-6 text-blue-600"}),"Branch Activity Log"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Real-time monitoring of all branch operations and transactions"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(vse,{isLive:d}),r.jsxs("button",{onClick:()=>u(!d),className:`px-3 py-2 rounded-xl text-sm font-medium transition-colors ${d?"bg-slate-800 text-white":"bg-white border border-slate-200 text-slate-700"}`,children:[r.jsx(Ad,{size:14,className:"inline mr-1"}),d?"Pause":"Resume"]}),r.jsx("button",{onClick:S,disabled:l,className:`p-2.5 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-500 transition-all ${l?"animate-spin":""}`,children:r.jsx(ir,{size:18})}),r.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-800 hover:bg-slate-900 text-white rounded-xl text-sm font-medium transition-colors",children:[r.jsx(ua,{size:16}),"Export PDF"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[r.jsx(xd,{title:"Total Actions",value:A.total,icon:Ma,color:"blue"}),r.jsx(xd,{title:"Sales",value:A.sales,icon:qn,color:"emerald",trend:"up",trendValue:"12"}),r.jsx(xd,{title:"Returns",value:A.returns,icon:oi,color:"red"}),r.jsx(xd,{title:"Alerts",value:A.warnings,icon:Bt,color:"amber"}),r.jsx(xd,{title:"Logins",value:A.logins,icon:vs,color:"purple"})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm space-y-4",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(er,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),r.jsx("input",{type:"text",value:m,onChange:k=>h(k.target.value),placeholder:"Search by user, action, or description...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{size:16,className:"text-slate-400"}),r.jsx("input",{type:"date",value:v,onChange:k=>w(k.target.value),className:"px-3 py-2 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]}),r.jsxs("select",{value:b,onChange:k=>N(k.target.value),className:"px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"ALL",children:"All Severity"}),r.jsx("option",{value:"INFO",children:"Info"}),r.jsx("option",{value:"SUCCESS",children:"Success"}),r.jsx("option",{value:"WARNING",children:"Warning"}),r.jsx("option",{value:"CRITICAL",children:"Critical"})]})]})]}),r.jsx(yse,{selected:x,onChange:p,options:C})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between",children:r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-slate-800",children:"Activity Feed"}),r.jsxs("span",{className:"ml-2 text-sm text-slate-400",children:[E.length," activities"]})]})}),r.jsx("div",{className:"overflow-x-auto max-h-[600px] overflow-y-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/80 text-slate-600 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold",children:"Time"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"User"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Action"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Details"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Terminal"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Status"})]})}),r.jsx("tbody",{children:E.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:[r.jsx(Ma,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No activities found matching your criteria"]})}):E.map(k=>r.jsx(bse,{activity:k},k.id||k.activityId))})]})})]})]})}function Nse({data:e,color:t="#10b981"}){const n=Math.max(...e.map(d=>d.value||d),1),a=80,l=24,o=e.map((d,u)=>{const m=typeof d=="number"?d:d.value||d.sales||0,h=u/(e.length-1)*a,x=l-Number(m)/n*l;return`${h},${x}`}).join(" ");return r.jsx("svg",{viewBox:`0 0 ${a} ${l}`,className:"w-20 h-6",preserveAspectRatio:"none",children:r.jsx("polyline",{fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",points:o})})}function cm({title:e,value:t,icon:n,color:a,trend:l,trendValue:o,sparkData:d}){const u={emerald:{bg:"bg-emerald-50",text:"text-emerald-600",border:"border-emerald-100"},blue:{bg:"bg-blue-50",text:"text-blue-600",border:"border-blue-100"},purple:{bg:"bg-purple-50",text:"text-purple-600",border:"border-purple-100"},amber:{bg:"bg-amber-50",text:"text-amber-600",border:"border-amber-100"}},m=u[a]||u.blue;return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 shadow-sm hover:shadow-md transition-all duration-300",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsx("div",{className:`p-2.5 rounded-xl ${m.bg} ${m.border} border`,children:r.jsx(n,{size:20,className:m.text})}),l&&r.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ${l==="up"?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[l==="up"?r.jsx(_s,{size:12}):r.jsx(oi,{size:12}),o,"%"]})]}),r.jsx("div",{className:"text-2xl font-bold text-slate-800 mb-1",children:t}),r.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2",children:e}),d&&d.length>0&&r.jsx(Nse,{data:d,color:l==="up"?"#10b981":"#f59e0b"})]})}function wse({data:e}){const t=Math.max(...e.map(n=>Number(n.sales)||0),1);return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Rr,{size:18,className:"text-blue-500"}),"Sales by Hour"]}),r.jsx("div",{className:"flex items-end gap-1 h-40",children:e.map((n,a)=>{const l=Number(n.sales)||0,o=l/t*100,d=new Date().getHours()===parseInt(n.hour);return r.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[r.jsx("div",{className:"relative w-full flex justify-center mb-1",children:r.jsx("div",{className:`w-full max-w-[20px] rounded-t transition-all duration-300 cursor-pointer group-hover:opacity-80 ${d?"bg-gradient-to-t from-blue-600 to-blue-400":"bg-gradient-to-t from-slate-300 to-slate-200"}`,style:{height:`${Math.max(o,2)}%`},title:`${n.hour}: LKR ${l.toLocaleString()}`})}),a%3===0&&r.jsx("span",{className:"text-[10px] text-slate-400 mt-1",children:n.hour?.split(":")[0]})]},a)})})]})}function Sse({data:e}){const t=e.reduce((o,d)=>o+Number(d.amount||0),0),n={CASH:{icon:Xr,color:"#10b981",label:"Cash"},CARD:{icon:Fa,color:"#3b82f6",label:"Card"},QR:{icon:tx,color:"#8b5cf6",label:"QR"},OTHER:{icon:gn,color:"#f59e0b",label:"Other"}};let a=0;const l=e.map(o=>{const d=t>0?Number(o.amount||0)/t*100:0,u=a;return a+=d,{...o,percentage:d,start:u,end:a}});return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(gn,{size:18,className:"text-emerald-500"}),"Payment Methods"]}),r.jsxs("div",{className:"flex items-center gap-6",children:[r.jsxs("div",{className:"relative w-32 h-32",children:[r.jsx("svg",{viewBox:"0 0 36 36",className:"w-full h-full -rotate-90",children:l.map((o,d)=>{const u=n[o.method]||n.OTHER;return r.jsx("circle",{cx:"18",cy:"18",r:"15.9",fill:"none",stroke:u.color,strokeWidth:"3",strokeDasharray:`${o.percentage} ${100-o.percentage}`,strokeDashoffset:-o.start,className:"transition-all duration-500"},d)})}),r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-lg font-bold text-slate-800",children:e.length}),r.jsx("div",{className:"text-xs text-slate-400",children:"Types"})]})})]}),r.jsxs("div",{className:"flex-1 space-y-2",children:[e.map((o,d)=>{const u=n[o.method]||n.OTHER,m=u.icon;return r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:u.color}}),r.jsx(m,{size:14,className:"text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-600 flex-1",children:u.label}),r.jsxs("span",{className:"text-sm font-bold text-slate-800",children:["LKR ",Number(o.amount||0).toLocaleString()]}),r.jsxs("span",{className:"text-xs text-slate-400",children:["(",o.percentage?.toFixed(1)||0,"%)"]})]},d)}),e.length===0&&r.jsx("div",{className:"text-sm text-slate-400 text-center py-4",children:"No payment data"})]})]})]})}function Ese({data:e}){return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Ma,{size:18,className:"text-purple-500"}),"Recent Transactions"]}),r.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:e.length===0?r.jsx("div",{className:"text-center py-8 text-slate-400",children:"No recent transactions"}):e.map((t,n)=>r.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl bg-slate-50 hover:bg-slate-100 transition-colors",children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${t.type==="RETURN"?"bg-red-100 text-red-600":"bg-emerald-100 text-emerald-600"}`,children:t.type==="RETURN"?r.jsx(oi,{size:18}):r.jsx(_s,{size:18})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-slate-800",children:t.invoiceNo}),r.jsxs("div",{className:"text-xs text-slate-400",children:[t.cashier,"  ",t.itemCount," items"]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-sm font-bold ${t.type==="RETURN"?"text-red-600":"text-slate-800"}`,children:[t.type==="RETURN"?"-":"","LKR ",Number(t.amount||0).toLocaleString()]}),r.jsx("div",{className:"text-xs text-slate-400",children:t.time})]})]},n))})]})}function Cse({data:e}){return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-6 shadow-sm",children:[r.jsxs("h3",{className:"text-lg font-semibold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Tt,{size:18,className:"text-amber-500"}),"Top Selling Products"]}),r.jsx("div",{className:"space-y-3",children:e.length===0?r.jsx("div",{className:"text-center py-8 text-slate-400",children:"No product data"}):e.map((t,n)=>r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-amber-100 to-amber-200 flex items-center justify-center text-amber-700 font-bold text-sm",children:n+1}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm font-medium text-slate-800",children:t.name}),r.jsx("div",{className:"text-xs text-slate-400",children:t.sku})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"text-sm font-bold text-slate-800",children:[t.units," units"]}),r.jsx("div",{className:"text-xs text-emerald-600",children:t.revenue})]})]},n))})]})}function Ase(){const[e,t]=g.useState(null),[n,a]=g.useState([]),[l,o]=g.useState(!0),[d,u]=g.useState(!1),[m,h]=g.useState("daily"),x=async()=>{try{u(!0);const[v,w]=await Promise.all([NU(m),E3(5)]);t(v),a(w||[])}catch(v){console.error("Failed to load sales data",v)}finally{o(!1),u(!1)}};g.useEffect(()=>{x();const v=setInterval(x,3e4);return()=>clearInterval(v)},[m]);const p=()=>{if(!e)return;const v=[];v.push(" SMART RETAIL PRO - SALES DASHBOARD"),v.push("=".repeat(60)),v.push(` Generated: ${new Date().toLocaleString()}`),v.push(` Period: ${m.toUpperCase()}`),v.push("=".repeat(60)),v.push(""),v.push("KEY METRICS:"),v.push(`Today's Revenue: LKR ${Number(e.todaySales||0).toLocaleString()}`),v.push(`Transactions: ${e.todayTransactions||0}`),v.push(`Avg Transaction: LKR ${Number(e.avgTransactionValue||0).toLocaleString()}`),v.push(`Customers Served: ${e.customersServed||0}`),v.push(`Growth: ${e.growthPercentage?.toFixed(1)||0}%`),v.push(""),v.push("PAYMENT BREAKDOWN:"),(e.paymentBreakdown||[]).forEach(C=>{v.push(`${C.method}: LKR ${Number(C.amount||0).toLocaleString()} (${C.count} transactions)`)});const w="\uFEFF"+v.join(`
`),S=new Blob([w],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(S),E=document.createElement("a");E.href=A,E.download=`sales-dashboard-${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(A)};if(l)return r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-10 h-10 text-blue-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500",children:"Loading sales data..."})]})});const b=e?.dailyTrend||[],N=(e?.growthPercentage||0)>=0;return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(qn,{className:"w-6 h-6 text-emerald-600"}),"Sales Dashboard"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Real-time sales analytics and performance metrics"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"flex bg-slate-100 rounded-xl p-1",children:["daily","weekly","monthly"].map(v=>r.jsx("button",{onClick:()=>h(v),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${m===v?"bg-white text-slate-800 shadow-sm":"text-slate-500 hover:text-slate-700"}`,children:v.charAt(0).toUpperCase()+v.slice(1)},v))}),r.jsx("button",{onClick:x,disabled:d,className:`p-2.5 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-500 transition-all ${d?"animate-spin":""}`,children:r.jsx(ir,{size:18})}),r.jsxs("button",{onClick:p,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-800 hover:bg-slate-900 text-white rounded-xl text-sm font-medium transition-colors",children:[r.jsx(ua,{size:16}),"Export"]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(cm,{title:"Today's Revenue",value:`LKR ${Number(e?.todaySales||0).toLocaleString()}`,icon:gn,color:"emerald",trend:N?"up":"down",trendValue:Math.abs(e?.growthPercentage||0).toFixed(1),sparkData:b}),r.jsx(cm,{title:"Transactions",value:e?.todayTransactions||0,icon:qn,color:"blue",trend:N?"up":"down",trendValue:Math.abs(e?.growthPercentage||0).toFixed(1)}),r.jsx(cm,{title:"Avg Transaction",value:`LKR ${Number(e?.avgTransactionValue||0).toLocaleString()}`,icon:Hn,color:"purple"}),r.jsx(cm,{title:"Customers Served",value:e?.customersServed||0,icon:vs,color:"amber"})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx(wse,{data:e?.hourlySales||[]}),r.jsx(Sse,{data:e?.paymentBreakdown||[]})]}),r.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[r.jsx(Ese,{data:e?.recentTransactions||[]}),r.jsx(Cse,{data:n})]})]})}function dm({title:e,current:t,previous:n,prefix:a="",isCurrency:l=!1}){const o=Number(t)||0,d=Number(n)||0,u=d!==0?(o-d)/d*100:0,m=u>=0,h=x=>l?`${a}${x.toLocaleString()}`:`${a}${x.toLocaleString()}`;return r.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:[r.jsx("div",{className:"text-xs text-slate-500 uppercase tracking-wide mb-2",children:e}),r.jsxs("div",{className:"flex items-end justify-between",children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:h(o)}),r.jsxs("div",{className:`flex items-center gap-1 text-sm font-bold ${m?"text-emerald-600":"text-red-600"}`,children:[m?r.jsx(Hn,{size:14}):r.jsx(Mv,{size:14}),Math.abs(u).toFixed(1),"%"]})]}),r.jsxs("div",{className:"text-xs text-slate-400 mt-1",children:["vs previous: ",h(d)]})]})}function kse({report:e,isExpanded:t,onToggle:n}){const a=e.profitMargin>=30?"text-emerald-600":e.profitMargin>=20?"text-blue-600":e.profitMargin>=10?"text-amber-600":"text-red-600";return r.jsxs(r.Fragment,{children:[r.jsxs("tr",{className:"hover:bg-slate-50 cursor-pointer transition-colors border-t border-slate-100",onClick:n,children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[t?r.jsx(Bk,{size:16,className:"text-slate-400"}):r.jsx(na,{size:16,className:"text-slate-400"}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-slate-800",children:e.date}),r.jsx("div",{className:"text-xs text-slate-400",children:e.dayName})]})]})}),r.jsx("td",{className:"p-4 text-center",children:r.jsx("span",{className:"px-2.5 py-1 bg-blue-50 text-blue-700 rounded-full text-sm font-medium",children:e.invoices})}),r.jsxs("td",{className:"p-4 text-right font-bold text-slate-800",children:["LKR ",Number(e.revenue||0).toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-slate-600",children:["LKR ",Number(e.cost||0).toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right font-bold text-emerald-600",children:["LKR ",Number(e.profit||0).toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("span",{className:`font-bold ${a}`,children:[e.profitMargin?.toFixed(1)||0,"%"]})})]}),t&&r.jsx("tr",{className:"bg-slate-50",children:r.jsx("td",{colSpan:6,className:"p-4",children:r.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 mb-1",children:[r.jsx(Xr,{size:14}),r.jsx("span",{className:"text-xs font-medium uppercase",children:"Cash Sales"})]}),r.jsxs("div",{className:"text-lg font-bold text-slate-800",children:["LKR ",Number(e.cashSales||0).toLocaleString()]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-blue-600 mb-1",children:[r.jsx(Fa,{size:14}),r.jsx("span",{className:"text-xs font-medium uppercase",children:"Card Sales"})]}),r.jsxs("div",{className:"text-lg font-bold text-slate-800",children:["LKR ",Number(e.cardSales||0).toLocaleString()]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-600 mb-1",children:[r.jsx(oi,{size:14}),r.jsx("span",{className:"text-xs font-medium uppercase",children:"Returns"})]}),r.jsxs("div",{className:"text-lg font-bold text-slate-800",children:["LKR ",Number(e.returns||0).toLocaleString()]})]}),r.jsxs("div",{className:"bg-white rounded-lg p-3 border border-slate-200",children:[r.jsxs("div",{className:"flex items-center gap-2 text-purple-600 mb-1",children:[r.jsx(gn,{size:14}),r.jsx("span",{className:"text-xs font-medium uppercase",children:"Avg Basket"})]}),r.jsxs("div",{className:"text-lg font-bold text-slate-800",children:["LKR ",Number(e.avgBasket||0).toLocaleString()]})]})]})})})]})}function _se({terminal:e}){return r.jsxs("tr",{className:"hover:bg-slate-50 border-t border-slate-100 transition-colors",children:[r.jsx("td",{className:"p-4 font-bold text-slate-700",children:e.name}),r.jsx("td",{className:"p-4 text-center",children:r.jsx("span",{className:"bg-slate-100 text-slate-700 px-2 py-1 rounded-lg text-xs font-mono",children:e.code})}),r.jsx("td",{className:"p-4 text-center font-bold text-slate-800",children:e.transactionCount}),r.jsxs("td",{className:"p-4 text-right font-bold text-slate-800",children:["LKR ",e.revenue.toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-slate-600",children:["LKR ",e.cashSales.toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-slate-600",children:["LKR ",e.cardSales.toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-emerald-600 font-bold",children:[(e.revenue/(e.totalRevenue||1)*100).toFixed(1),"%"]})]})}function Ose(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState([]),[d,u]=g.useState(!0),[m,h]=g.useState(!1),[x,p]=g.useState(""),[b,N]=g.useState(new Set),[v,w]=g.useState("daily"),[S,A]=g.useState(()=>{const U=new Date;return U.setDate(U.getDate()-7),U.toISOString().split("T")[0]}),[E,C]=g.useState(()=>new Date().toISOString().split("T")[0]),O=async()=>{try{if(h(!0),u(!0),v==="terminals"){const U=await wU({startDate:S,endDate:E});o(Array.isArray(U)?U:[])}else{const U=new Date(S),B=new Date(E),ee=Math.abs(B-U),X=Math.ceil(ee/(1e3*60*60*24)),be=new Date(U);be.setDate(be.getDate()-1);const G=new Date(be);G.setDate(G.getDate()-X);const J=G.toISOString().split("T")[0],$=be.toISOString().split("T")[0],[q,se]=await Promise.all([hE({startDate:S,endDate:E}),hE({startDate:J,endDate:$})]);Array.isArray(q)?t(q):t([]),Array.isArray(se)?a(se):a([])}}catch(U){console.error("Failed to load sales reports",U),t([]),a([])}finally{u(!1),h(!1)}};g.useEffect(()=>{O()},[S,E,v]);const k=g.useMemo(()=>x?e.filter(U=>U.date?.toLowerCase().includes(x.toLowerCase())||U.dayName?.toLowerCase().includes(x.toLowerCase())):e,[e,x]),_=g.useMemo(()=>k.length===0?null:{invoices:k.reduce((U,B)=>U+(B.invoices||0),0),revenue:k.reduce((U,B)=>U+Number(B.revenue||0),0),cost:k.reduce((U,B)=>U+Number(B.cost||0),0),profit:k.reduce((U,B)=>U+Number(B.profit||0),0),cashSales:k.reduce((U,B)=>U+Number(B.cashSales||0),0),cardSales:k.reduce((U,B)=>U+Number(B.cardSales||0),0),returns:k.reduce((U,B)=>U+Number(B.returns||0),0)},[k]),T=g.useMemo(()=>n.length===0?null:{invoices:n.reduce((U,B)=>U+(B.invoices||0),0),revenue:n.reduce((U,B)=>U+Number(B.revenue||0),0),cost:n.reduce((U,B)=>U+Number(B.cost||0),0),profit:n.reduce((U,B)=>U+Number(B.profit||0),0)},[n]),P=g.useMemo(()=>_?{currentRevenue:_.revenue,previousRevenue:T?T.revenue:0,currentTransactions:_.invoices,previousTransactions:T?T.invoices:0,currentCost:_.cost,previousCost:T?T.cost:0,currentProfit:_.profit,previousProfit:T?T.profit:0}:null,[_,T]),L=U=>{N(B=>{const ee=new Set(B);return ee.has(U)?ee.delete(U):ee.add(U),ee})},z=async()=>{try{const U=await TU(S,E),B=window.URL.createObjectURL(U),ee=document.createElement("a");ee.href=B,ee.download=`sales_report_${S}_${E}.pdf`,document.body.appendChild(ee),ee.click(),ee.remove(),window.URL.revokeObjectURL(B)}catch(U){console.error("Failed to export PDF",U),alert("Failed to export report. Please try again.")}};return d?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-10 h-10 text-blue-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500",children:"Loading sales reports..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(ci,{className:"w-6 h-6 text-blue-600"}),"Sales Reports"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Detailed sales analytics and performance tracking"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{onClick:O,disabled:m,className:`p-2.5 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-500 transition-all ${m?"animate-spin":""}`,children:r.jsx(ir,{size:18})}),r.jsx("button",{onClick:()=>window.print(),className:"p-2.5 rounded-xl border border-slate-200 hover:bg-slate-50 text-slate-500 transition-all",children:r.jsx(mi,{size:18})}),r.jsxs("button",{onClick:z,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-800 hover:bg-slate-900 text-white rounded-xl text-sm font-medium transition-colors",children:[r.jsx(ua,{size:16}),"Export PDF"]})]})]}),r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{size:16,className:"text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-600",children:"From:"}),r.jsx("input",{type:"date",value:S,onChange:U=>A(U.target.value),className:"px-3 py-2 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-sm text-slate-600",children:"To:"}),r.jsx("input",{type:"date",value:E,onChange:U=>C(U.target.value),className:"px-3 py-2 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(er,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),r.jsx("input",{type:"text",value:x,onChange:U=>p(U.target.value),placeholder:"Search by date...",className:"pl-9 pr-4 py-2 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none w-48"})]})]})}),P&&r.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(dm,{title:"Total Revenue",current:P.currentRevenue,previous:P.previousRevenue,prefix:"LKR ",isCurrency:!0}),r.jsx(dm,{title:"Transactions",current:P.currentTransactions,previous:P.previousTransactions}),r.jsx(dm,{title:"Total Cost",current:P.currentCost,previous:P.previousCost,prefix:"LKR ",isCurrency:!0}),r.jsx(dm,{title:"Net Profit",current:P.currentProfit,previous:P.previousProfit,prefix:"LKR ",isCurrency:!0})]}),r.jsx("div",{className:"flex gap-2 border-b border-slate-200 pb-2",children:[{id:"daily",label:"Daily Summary"},{id:"terminals",label:"Terminal Performance"},{id:"products",label:"Product Performance"},{id:"cashiers",label:"Cashier Performance"}].map(U=>r.jsx("button",{onClick:()=>w(U.id),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${v===U.id?"bg-slate-800 text-white":"text-slate-500 hover:bg-slate-100"}`,children:U.label},U.id))}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"font-semibold text-slate-800",children:v==="terminals"?"Terminal Performance":"Daily Sales Report"}),r.jsx("span",{className:"ml-2 text-sm text-slate-400",children:v==="terminals"?`${l.length} terminals`:`${k.length} days`})]}),_&&v==="daily"&&r.jsxs("div",{className:"text-sm text-slate-600",children:["Total Revenue: ",r.jsxs("span",{className:"font-bold text-emerald-600",children:["LKR ",_.revenue.toLocaleString()]})]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600",children:r.jsx("tr",{children:v==="terminals"?r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"text-left p-4 font-semibold",children:"Terminal Name"}),r.jsx("th",{className:"text-center p-4 font-semibold",children:"Terminal Code"}),r.jsx("th",{className:"text-center p-4 font-semibold",children:"Transactions"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Total Revenue"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Cash Sales"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Card Sales"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Contribution"})]}):r.jsxs(r.Fragment,{children:[r.jsx("th",{className:"text-left p-4 font-semibold",children:"Date"}),r.jsx("th",{className:"text-center p-4 font-semibold",children:"Invoices"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Revenue"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Cost"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Profit"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Margin"})]})})}),r.jsx("tbody",{children:v==="terminals"?l.map(U=>r.jsx(_se,{terminal:U},U.id)):k.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:[r.jsx(sa,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No sales data for the selected period"]})}):r.jsxs(r.Fragment,{children:[k.map(U=>r.jsx(kse,{report:U,isExpanded:b.has(U.date),onToggle:()=>L(U.date)},U.date)),_&&r.jsxs("tr",{className:"bg-slate-100 font-bold border-t-2 border-slate-300",children:[r.jsx("td",{className:"p-4 text-slate-800",children:"TOTAL"}),r.jsx("td",{className:"p-4 text-center text-slate-800",children:_.invoices}),r.jsxs("td",{className:"p-4 text-right text-slate-800",children:["LKR ",_.revenue.toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-slate-600",children:["LKR ",_.cost.toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-emerald-600",children:["LKR ",_.profit.toLocaleString()]}),r.jsxs("td",{className:"p-4 text-right text-slate-600",children:[_.revenue>0?(_.profit/_.revenue*100).toFixed(1):0,"%"]})]})]})})]})})]})]})}const vv={ASSET:{icon:_o,color:"bg-blue-100 text-blue-700 border-blue-200",badgeColor:"bg-blue-500"},LIABILITY:{icon:Fa,color:"bg-red-100 text-red-700 border-red-200",badgeColor:"bg-red-500"},EQUITY:{icon:A7,color:"bg-purple-100 text-purple-700 border-purple-200",badgeColor:"bg-purple-500"},INCOME:{icon:Hn,color:"bg-emerald-100 text-emerald-700 border-emerald-200",badgeColor:"bg-emerald-500"},EXPENSE:{icon:Mv,color:"bg-amber-100 text-amber-700 border-amber-200",badgeColor:"bg-amber-500"}};function RR({account:e,level:t=0,onEdit:n,onDelete:a,expandedIds:l,toggleExpand:o}){const d=vv[e.type]||vv.ASSET,u=d.icon,m=e.children&&e.children.length>0,h=l.has(e.accountId);return r.jsxs(r.Fragment,{children:[r.jsxs("tr",{className:`hover:bg-slate-50 transition-colors ${t>0?"bg-slate-50/50":""}`,children:[r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",style:{paddingLeft:`${t*24}px`},children:[m?r.jsx("button",{onClick:()=>o(e.accountId),className:"p-1 hover:bg-slate-200 rounded transition-colors",children:h?r.jsx(na,{size:14}):r.jsx(wo,{size:14})}):r.jsx("span",{className:"w-6"}),r.jsx("span",{className:"font-mono text-sm text-slate-600 bg-slate-100 px-2 py-0.5 rounded",children:e.code})]})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`p-1.5 rounded-lg ${d.color}`,children:r.jsx(u,{size:14})}),r.jsx("span",{className:"font-medium text-slate-800",children:e.name}),e.parentId&&r.jsx("span",{className:"text-xs text-slate-400",children:"Sub-account"})]})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold ${d.color} border`,children:e.type})}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("span",{className:`font-bold ${e.balance>=0?"text-slate-800":"text-red-600"}`,children:["LKR ",(e.balance||0).toLocaleString()]})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-medium ${e.isActive?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-500"}`,children:e.isActive?"Active":"Inactive"})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>n(e),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(qk,{size:14})}),!m&&r.jsx("button",{onClick:()=>a(e),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(en,{size:14})})]})})]}),m&&h&&e.children.map(x=>r.jsx(RR,{account:x,level:t+1,onEdit:n,onDelete:a,expandedIds:l,toggleExpand:o},x.accountId))]})}function Tse({account:e,parentAccounts:t,onSave:n,onClose:a}){const[l,o]=g.useState({code:e?.code||"",name:e?.name||"",type:e?.type||"ASSET",parentId:e?.parentId||"",isActive:e?.isActive!==!1}),[d,u]=g.useState({}),m=()=>{const x={};return l.code.trim()||(x.code="Account code is required"),l.name.trim()||(x.name="Account name is required"),u(x),Object.keys(x).length===0},h=x=>{x.preventDefault(),m()&&n({...e,...l})};return r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:r.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg shadow-2xl",children:[r.jsx("div",{className:"p-6 border-b border-slate-100",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:e?"Edit Account":"New Account"}),r.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg",children:r.jsx($e,{size:20})})]})}),r.jsxs("form",{onSubmit:h,className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Account Code *"}),r.jsx("input",{type:"text",value:l.code,onChange:x=>o(p=>({...p,code:x.target.value})),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none ${d.code?"border-red-300":"border-slate-200"}`,placeholder:"e.g., 1000"}),d.code&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.code})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Account Type *"}),r.jsxs("select",{value:l.type,onChange:x=>o(p=>({...p,type:x.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"ASSET",children:"Asset"}),r.jsx("option",{value:"LIABILITY",children:"Liability"}),r.jsx("option",{value:"EQUITY",children:"Equity"}),r.jsx("option",{value:"INCOME",children:"Income"}),r.jsx("option",{value:"EXPENSE",children:"Expense"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Account Name *"}),r.jsx("input",{type:"text",value:l.name,onChange:x=>o(p=>({...p,name:x.target.value})),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none ${d.name?"border-red-300":"border-slate-200"}`,placeholder:"e.g., Cash in Hand"}),d.name&&r.jsx("p",{className:"text-sm text-red-500 mt-1",children:d.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Parent Account (Optional)"}),r.jsxs("select",{value:l.parentId,onChange:x=>o(p=>({...p,parentId:x.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"",children:"-- No Parent (Top Level) --"}),t.filter(x=>x.type===l.type).map(x=>r.jsxs("option",{value:x.accountId,children:[x.code," - ",x.name]},x.accountId))]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("input",{type:"checkbox",id:"isActive",checked:l.isActive,onChange:x=>o(p=>({...p,isActive:x.target.checked})),className:"w-4 h-4 text-blue-600 rounded border-slate-300"}),r.jsx("label",{htmlFor:"isActive",className:"text-sm text-slate-700",children:"Account is active"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"button",onClick:a,className:"flex-1 px-4 py-2.5 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2.5 bg-slate-800 hover:bg-slate-900 text-white rounded-xl font-medium transition-colors flex items-center justify-center gap-2",children:[r.jsx(Rv,{size:16}),"Save Account"]})]})]})]})})}function Rse({type:e,count:t,balance:n}){const a=vv[e],l=a?.icon||_o;return r.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4 shadow-sm",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2.5 rounded-xl ${a?.color||"bg-slate-100"}`,children:r.jsx(l,{size:20})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"text-sm text-slate-500",children:e}),r.jsxs("div",{className:"text-lg font-bold text-slate-800",children:["LKR ",n.toLocaleString()]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"text-2xl font-bold text-slate-800",children:t}),r.jsx("div",{className:"text-xs text-slate-400",children:"accounts"})]})]})})}function Pse(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(""),[d,u]=g.useState("ALL"),[m,h]=g.useState(new Set),[x,p]=g.useState(!1),[b,N]=g.useState(null),v=async()=>{try{a(!0);const P=await A3();P&&P.length>0?t(P):t(w())}catch(P){console.error("Error fetching accounts:",P),t(w())}finally{a(!1)}},w=()=>[{accountId:1,code:"1000",name:"Assets",type:"ASSET",isActive:!0,balance:15e5,children:[{accountId:11,code:"1100",name:"Cash & Bank",type:"ASSET",parentId:1,isActive:!0,balance:85e4,children:[{accountId:111,code:"1110",name:"Cash in Hand",type:"ASSET",parentId:11,isActive:!0,balance:15e4},{accountId:112,code:"1120",name:"Petty Cash",type:"ASSET",parentId:11,isActive:!0,balance:25e3},{accountId:113,code:"1130",name:"Bank - Commercial",type:"ASSET",parentId:11,isActive:!0,balance:675e3}]},{accountId:12,code:"1200",name:"Accounts Receivable",type:"ASSET",parentId:1,isActive:!0,balance:35e4},{accountId:13,code:"1300",name:"Inventory",type:"ASSET",parentId:1,isActive:!0,balance:3e5}]},{accountId:2,code:"2000",name:"Liabilities",type:"LIABILITY",isActive:!0,balance:45e4,children:[{accountId:21,code:"2100",name:"Accounts Payable",type:"LIABILITY",parentId:2,isActive:!0,balance:28e4},{accountId:22,code:"2200",name:"Supplier Payable",type:"LIABILITY",parentId:2,isActive:!0,balance:17e4}]},{accountId:3,code:"3000",name:"Equity",type:"EQUITY",isActive:!0,balance:5e5,children:[{accountId:31,code:"3100",name:"Owner's Capital",type:"EQUITY",parentId:3,isActive:!0,balance:4e5},{accountId:32,code:"3200",name:"Retained Earnings",type:"EQUITY",parentId:3,isActive:!0,balance:1e5}]},{accountId:4,code:"4000",name:"Income",type:"INCOME",isActive:!0,balance:25e5,children:[{accountId:41,code:"4100",name:"Sales Revenue",type:"INCOME",parentId:4,isActive:!0,balance:23e5},{accountId:42,code:"4200",name:"Other Income",type:"INCOME",parentId:4,isActive:!0,balance:2e5}]},{accountId:5,code:"5000",name:"Expenses",type:"EXPENSE",isActive:!0,balance:105e4,children:[{accountId:51,code:"5100",name:"Cost of Goods Sold",type:"EXPENSE",parentId:5,isActive:!0,balance:75e4},{accountId:52,code:"5200",name:"Operating Expenses",type:"EXPENSE",parentId:5,isActive:!0,balance:2e5},{accountId:53,code:"5300",name:"Salaries & Wages",type:"EXPENSE",parentId:5,isActive:!0,balance:1e5}]}];g.useEffect(()=>{v(),h(new Set([1,2,3,4,5]))},[]);const S=(P,L=[])=>(P.forEach(z=>{L.push(z),z.children&&S(z.children,L)}),L),{filteredAccounts:A,typeSummary:E,flatList:C}=g.useMemo(()=>{const P=S(e),L=l.toLowerCase(),z=ee=>{const X=!L||ee.code.toLowerCase().includes(L)||ee.name.toLowerCase().includes(L),be=d==="ALL"||ee.type===d;return X&&be},U=ee=>ee.filter(X=>{if(z(X))return!0;if(X.children){const be=U(X.children);if(be.length>0)return X.children=be,!0}return!1}),B={};return["ASSET","LIABILITY","EQUITY","INCOME","EXPENSE"].forEach(ee=>{const X=P.filter(be=>be.type===ee);B[ee]={count:X.length,balance:X.reduce((be,G)=>be+(G.balance||0),0)}}),{filteredAccounts:U(JSON.parse(JSON.stringify(e))),typeSummary:B,flatList:P}},[e,l,d]),O=P=>{h(L=>{const z=new Set(L);return z.has(P)?z.delete(P):z.add(P),z})},k=P=>{N(P),p(!0)},_=P=>{window.confirm(`Are you sure you want to delete "${P.name}"?`)&&console.log("Deleting account:",P)},T=P=>{console.log("Saving account:",P),p(!1),N(null),v()};return n?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-10 h-10 text-blue-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500",children:"Loading chart of accounts..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(GL,{className:"w-6 h-6 text-blue-600"}),"Chart of Accounts"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Manage your accounting structure and track balances"})]}),r.jsxs("button",{onClick:()=>{N(null),p(!0)},className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors shadow-lg shadow-blue-500/25",children:[r.jsx(yn,{size:18}),"Add Account"]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(E).map(([P,L])=>r.jsx(Rse,{type:P,count:L.count,balance:L.balance},P))}),r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(er,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),r.jsx("input",{type:"text",value:l,onChange:P=>o(P.target.value),placeholder:"Search by code or name...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("select",{value:d,onChange:P=>u(P.target.value),className:"px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"ALL",children:"All Types"}),r.jsx("option",{value:"ASSET",children:"Assets"}),r.jsx("option",{value:"LIABILITY",children:"Liabilities"}),r.jsx("option",{value:"EQUITY",children:"Equity"}),r.jsx("option",{value:"INCOME",children:"Income"}),r.jsx("option",{value:"EXPENSE",children:"Expenses"})]}),r.jsx("button",{onClick:()=>h(new Set(C.map(P=>P.accountId))),className:"px-4 py-2.5 border border-slate-200 rounded-xl text-sm hover:bg-slate-50 transition-colors",children:"Expand All"}),r.jsx("button",{onClick:()=>h(new Set),className:"px-4 py-2.5 border border-slate-200 rounded-xl text-sm hover:bg-slate-50 transition-colors",children:"Collapse All"})]})]})}),r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/80 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold w-40",children:"Code"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Account Name"}),r.jsx("th",{className:"text-left p-4 font-semibold w-32",children:"Type"}),r.jsx("th",{className:"text-right p-4 font-semibold w-40",children:"Balance"}),r.jsx("th",{className:"text-left p-4 font-semibold w-24",children:"Status"}),r.jsx("th",{className:"text-right p-4 font-semibold w-24",children:"Actions"})]})}),r.jsx("tbody",{children:A.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:[r.jsx(lr,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No accounts found"]})}):A.map(P=>r.jsx(RR,{account:P,level:0,onEdit:k,onDelete:_,expandedIds:m,toggleExpand:O},P.accountId))})]})})}),x&&r.jsx(Tse,{account:b,parentAccounts:C.filter(P=>!P.parentId),onSave:T,onClose:()=>{p(!1),N(null)}})]})}function Dse({status:e}){const t={DRAFT:"bg-slate-100 text-slate-700 border-slate-200",PENDING:"bg-amber-100 text-amber-700 border-amber-200",POSTED:"bg-emerald-100 text-emerald-700 border-emerald-200",VOID:"bg-red-100 text-red-700 border-red-200"};return r.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-bold border ${t[e]||t.DRAFT}`,children:e})}function Mse({line:e,index:t,accounts:n,onUpdate:a,onRemove:l,canEdit:o}){return n.find(d=>d.code===e.accountCode),r.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"p-3",children:r.jsx("span",{className:"text-sm text-slate-400 font-mono",children:t+1})}),r.jsx("td",{className:"p-3",children:o?r.jsxs("select",{value:e.accountCode,onChange:d=>{const u=n.find(m=>m.code===d.target.value);a(t,{accountCode:d.target.value,accountName:u?.name||""})},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"",children:"Select Account"}),n.map(d=>r.jsxs("option",{value:d.code,children:[d.code," - ",d.name]},d.code))]}):r.jsxs("div",{children:[r.jsx("span",{className:"font-mono text-xs text-slate-500",children:e.accountCode}),r.jsx("span",{className:"ml-2 text-sm text-slate-700",children:e.accountName})]})}),r.jsx("td",{className:"p-3",children:o?r.jsx("input",{type:"text",value:e.description,onChange:d=>a(t,{description:d.target.value}),placeholder:"Line description",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"}):r.jsx("span",{className:"text-sm text-slate-600",children:e.description||"-"})}),r.jsx("td",{className:"p-3",children:o?r.jsx("input",{type:"number",value:e.debit||"",onChange:d=>a(t,{debit:parseFloat(d.target.value)||0,credit:0}),placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"}):r.jsx("span",{className:`text-sm text-right block ${e.debit>0?"font-bold text-slate-800":"text-slate-400"}`,children:e.debit>0?`LKR ${e.debit.toLocaleString()}`:"-"})}),r.jsx("td",{className:"p-3",children:o?r.jsx("input",{type:"number",value:e.credit||"",onChange:d=>a(t,{credit:parseFloat(d.target.value)||0,debit:0}),placeholder:"0.00",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm text-right focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"}):r.jsx("span",{className:`text-sm text-right block ${e.credit>0?"font-bold text-slate-800":"text-slate-400"}`,children:e.credit>0?`LKR ${e.credit.toLocaleString()}`:"-"})}),r.jsx("td",{className:"p-3",children:o&&r.jsx("button",{onClick:()=>l(t),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx(en,{size:14})})})]})}function Ise({accounts:e,onSave:t,onCancel:n}){const[a,l]=g.useState({date:new Date().toISOString().split("T")[0],reference:"",memo:"",transactionType:"GENERAL",lines:[{accountCode:"",accountName:"",description:"",debit:0,credit:0},{accountCode:"",accountName:"",description:"",debit:0,credit:0}]}),[o,d]=g.useState({}),[u,m]=g.useState(!1),h=g.useMemo(()=>{const w=a.lines.reduce((A,E)=>A+(E.debit||0),0),S=a.lines.reduce((A,E)=>A+(E.credit||0),0);return{debit:w,credit:S,balanced:Math.abs(w-S)<.01}},[a.lines]),x=(w,S)=>{l(A=>({...A,lines:A.lines.map((E,C)=>C===w?{...E,...S}:E)}))},p=()=>{l(w=>({...w,lines:[...w.lines,{accountCode:"",accountName:"",description:"",debit:0,credit:0}]}))},b=w=>{a.lines.length>2&&l(S=>({...S,lines:S.lines.filter((A,E)=>E!==w)}))},N=()=>{const w={};return a.date||(w.date="Date is required"),a.memo||(w.memo="Description is required"),h.balanced||(w.balance="Debits must equal Credits"),h.debit===0&&(w.amount="Entry must have amounts"),a.lines.filter(A=>(A.debit>0||A.credit>0)&&!A.accountCode).length>0&&(w.lines="All lines with amounts must have an account"),d(w),Object.keys(w).length===0},v=async(w="DRAFT")=>{if(N()){m(!0);try{await t({...a,status:w,lines:a.lines.filter(S=>S.accountCode&&(S.debit>0||S.credit>0))})}catch(S){console.error("Error saving journal entry:",S),d({submit:"Failed to save journal entry"})}finally{m(!1)}}};return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-lg overflow-hidden",children:[r.jsx("div",{className:"p-5 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"New Journal Entry"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Create a new accounting entry"})]}),r.jsx("button",{onClick:n,className:"p-2 hover:bg-slate-100 rounded-lg text-slate-500",children:r.jsx($e,{size:20})})]})}),r.jsxs("div",{className:"p-5 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Date *"}),r.jsx("input",{type:"date",value:a.date,onChange:w=>l(S=>({...S,date:w.target.value})),className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none ${o.date?"border-red-300":"border-slate-200"}`})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Transaction Type"}),r.jsxs("select",{value:a.transactionType,onChange:w=>l(S=>({...S,transactionType:w.target.value})),className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"GENERAL",children:"General Entry"}),r.jsx("option",{value:"SALE",children:"Sales Entry"}),r.jsx("option",{value:"PURCHASE",children:"Purchase Entry"}),r.jsx("option",{value:"PAYMENT",children:"Payment Entry"}),r.jsx("option",{value:"RECEIPT",children:"Receipt Entry"}),r.jsx("option",{value:"ADJUSTMENT",children:"Adjustment Entry"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Reference No"}),r.jsx("input",{type:"text",value:a.reference,onChange:w=>l(S=>({...S,reference:w.target.value})),placeholder:"e.g., INV-001",className:"w-full px-4 py-2.5 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Description *"}),r.jsx("input",{type:"text",value:a.memo,onChange:w=>l(S=>({...S,memo:w.target.value})),placeholder:"Entry description",className:`w-full px-4 py-2.5 border rounded-xl focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none ${o.memo?"border-red-300":"border-slate-200"}`})]})]}),r.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[r.jsxs("div",{className:"bg-slate-50 px-4 py-3 border-b border-slate-200 flex items-center justify-between",children:[r.jsx("span",{className:"font-semibold text-slate-700",children:"Journal Lines"}),r.jsxs("button",{onClick:p,className:"flex items-center gap-1 px-3 py-1.5 text-sm text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:[r.jsx(yn,{size:14}),"Add Line"]})]}),r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/50",children:r.jsxs("tr",{className:"text-slate-600",children:[r.jsx("th",{className:"p-3 text-left w-12",children:"#"}),r.jsx("th",{className:"p-3 text-left",children:"Account"}),r.jsx("th",{className:"p-3 text-left",children:"Description"}),r.jsx("th",{className:"p-3 text-right w-36",children:"Debit"}),r.jsx("th",{className:"p-3 text-right w-36",children:"Credit"}),r.jsx("th",{className:"p-3 w-12"})]})}),r.jsxs("tbody",{children:[a.lines.map((w,S)=>r.jsx(Mse,{line:w,index:S,accounts:e,onUpdate:x,onRemove:b,canEdit:!0},S)),r.jsxs("tr",{className:"bg-slate-100 border-t-2 border-slate-300",children:[r.jsx("td",{colSpan:3,className:"p-3 text-right font-bold text-slate-700",children:"TOTALS"}),r.jsxs("td",{className:"p-3 text-right font-bold text-slate-800",children:["LKR ",h.debit.toLocaleString()]}),r.jsxs("td",{className:"p-3 text-right font-bold text-slate-800",children:["LKR ",h.credit.toLocaleString()]}),r.jsx("td",{className:"p-3",children:h.balanced?r.jsx(Lm,{size:18,className:"text-emerald-600"}):r.jsx(lr,{size:18,className:"text-red-500"})})]})]})]})]}),!h.balanced&&h.debit>0&&r.jsxs("div",{className:"flex items-center gap-2 p-4 bg-amber-50 border border-amber-200 rounded-xl text-amber-700",children:[r.jsx(lr,{size:18}),r.jsxs("span",{className:"text-sm font-medium",children:["Entry is unbalanced. Difference: LKR ",Math.abs(h.debit-h.credit).toLocaleString()]})]}),Object.keys(o).length>0&&r.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:[r.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-medium mb-2",children:[r.jsx(lr,{size:18}),"Please fix the following errors:"]}),r.jsx("ul",{className:"list-disc list-inside text-sm text-red-600",children:Object.values(o).map((w,S)=>r.jsx("li",{children:w},S))})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[r.jsx("button",{onClick:n,className:"px-4 py-2.5 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50 transition-colors",children:"Cancel"}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("button",{onClick:()=>v("DRAFT"),disabled:u,className:"flex items-center gap-2 px-4 py-2.5 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50 transition-colors disabled:opacity-50",children:[r.jsx(Rv,{size:16}),"Save as Draft"]}),r.jsxs("button",{onClick:()=>v("POSTED"),disabled:u||!h.balanced,className:"flex items-center gap-2 px-6 py-2.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-xl font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(Lm,{size:16}),u?"Posting...":"Post Entry"]})]})]})]})]})}function Lse({entry:e,onView:t,onEdit:n,onDuplicate:a}){return r.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"font-mono text-sm text-slate-800",children:e.journalNo})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(da,{size:14,className:"text-slate-400"}),r.jsx("span",{className:"text-sm text-slate-700",children:e.date})]})}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 rounded text-xs font-medium",children:e.transactionType})}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:"max-w-xs truncate text-sm text-slate-700",children:e.memo}),e.reference&&r.jsxs("div",{className:"text-xs text-slate-400",children:["Ref: ",e.reference]})]}),r.jsxs("td",{className:"p-4 text-right font-bold text-slate-800",children:["LKR ",e.totalDebit?.toLocaleString()||0]}),r.jsx("td",{className:"p-4",children:r.jsx(Dse,{status:e.status})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center justify-end gap-1",children:[r.jsx("button",{onClick:()=>t(e),className:"p-2 text-slate-400 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View",children:r.jsx(di,{size:14})}),e.status==="DRAFT"&&r.jsx("button",{onClick:()=>n(e),className:"p-2 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-colors",title:"Edit",children:r.jsx(qk,{size:14})}),r.jsx("button",{onClick:()=>a(e),className:"p-2 text-slate-400 hover:text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Duplicate",children:r.jsx(TL,{size:14})})]})})]})}function zse(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[d,u]=g.useState(!1),[m,h]=g.useState(""),[x,p]=g.useState("ALL"),[b,N]=g.useState({from:new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],to:new Date().toISOString().split("T")[0]});g.useEffect(()=>{v()},[]);const v=async()=>{try{o(!0);const C=await A3(),O=[],k=_=>{_.forEach(T=>{O.push({code:T.code,name:T.name,type:T.type}),T.children&&k(T.children)})};C&&k(C),a(O.length>0?O:w()),t(S())}catch(C){console.error("Error fetching data:",C),a(w()),t(S())}finally{o(!1)}},w=()=>[{code:"1110",name:"Cash in Hand",type:"ASSET"},{code:"1120",name:"Petty Cash",type:"ASSET"},{code:"1130",name:"Bank - Commercial",type:"ASSET"},{code:"1200",name:"Accounts Receivable",type:"ASSET"},{code:"1300",name:"Inventory",type:"ASSET"},{code:"2100",name:"Accounts Payable",type:"LIABILITY"},{code:"2200",name:"Supplier Payable",type:"LIABILITY"},{code:"4100",name:"Sales Revenue",type:"INCOME"},{code:"4200",name:"Other Income",type:"INCOME"},{code:"5100",name:"Cost of Goods Sold",type:"EXPENSE"},{code:"5200",name:"Operating Expenses",type:"EXPENSE"},{code:"5300",name:"Salaries & Wages",type:"EXPENSE"}],S=()=>[{id:1,journalNo:"JE-2024-001",date:"2024-02-06",transactionType:"SALE",memo:"Daily sales posting",reference:"INV-0156",totalDebit:125e3,status:"POSTED"},{id:2,journalNo:"JE-2024-002",date:"2024-02-05",transactionType:"PURCHASE",memo:"Inventory purchase from supplier",reference:"GRN-0045",totalDebit:85e3,status:"POSTED"},{id:3,journalNo:"JE-2024-003",date:"2024-02-05",transactionType:"PAYMENT",memo:"Salary payment - January",reference:"PAY-0012",totalDebit:15e4,status:"POSTED"},{id:4,journalNo:"JE-2024-004",date:"2024-02-04",transactionType:"ADJUSTMENT",memo:"Stock adjustment - damaged goods",reference:"ADJ-003",totalDebit:12500,status:"DRAFT"},{id:5,journalNo:"JE-2024-005",date:"2024-02-04",transactionType:"GENERAL",memo:"Bank charges for February",totalDebit:2500,status:"PENDING"}],A=g.useMemo(()=>{const C=m.toLowerCase();return e.filter(O=>{const k=!C||O.journalNo?.toLowerCase().includes(C)||O.memo?.toLowerCase().includes(C)||O.reference?.toLowerCase().includes(C),_=x==="ALL"||O.status===x;return k&&_})},[e,m,x]),E=async C=>{console.log("Saving entry:",C),u(!1),v()};return l?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-10 h-10 text-blue-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500",children:"Loading journal entries..."})]})}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(sa,{className:"w-6 h-6 text-blue-600"}),"Journal Entries"]}),r.jsx("p",{className:"text-slate-500 mt-1",children:"Record and manage accounting transactions"})]}),!d&&r.jsxs("button",{onClick:()=>u(!0),className:"flex items-center gap-2 px-4 py-2.5 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-medium transition-colors shadow-lg shadow-blue-500/25",children:[r.jsx(yn,{size:18}),"New Journal Entry"]})]}),d&&r.jsx(Ise,{accounts:n,onSave:E,onCancel:()=>u(!1)}),!d&&r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 p-4 shadow-sm",children:r.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(er,{size:18,className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400"}),r.jsx("input",{type:"text",value:m,onChange:C=>h(C.target.value),placeholder:"Search by journal no, description, or reference...",className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none"})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsxs("select",{value:x,onChange:C=>p(C.target.value),className:"px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"ALL",children:"All Status"}),r.jsx("option",{value:"DRAFT",children:"Draft"}),r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"POSTED",children:"Posted"}),r.jsx("option",{value:"VOID",children:"Void"})]}),r.jsx("button",{onClick:v,className:"p-2.5 border border-slate-200 rounded-xl hover:bg-slate-50 transition-colors",children:r.jsx(ir,{size:18,className:"text-slate-500"})})]})]})}),!d&&r.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/80 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold",children:"Journal No"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Date"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Type"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Description"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Amount"}),r.jsx("th",{className:"text-left p-4 font-semibold",children:"Status"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Actions"})]})}),r.jsx("tbody",{children:A.length===0?r.jsx("tr",{children:r.jsxs("td",{colSpan:7,className:"p-12 text-center text-slate-400",children:[r.jsx(sa,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),"No journal entries found"]})}):A.map(C=>r.jsx(Lse,{entry:C,onView:()=>console.log("View:",C),onEdit:()=>console.log("Edit:",C),onDuplicate:()=>console.log("Duplicate:",C)},C.id))})]})})})]})}function um({title:e,value:t,subtitle:n,icon:a,trend:l,trendValue:o,color:d="blue"}){const u={blue:"from-blue-500 to-blue-600",emerald:"from-emerald-500 to-emerald-600",amber:"from-amber-500 to-amber-600",red:"from-red-500 to-red-600",purple:"from-purple-500 to-purple-600"};return r.jsxs("div",{className:`bg-gradient-to-br ${u[d]} rounded-2xl p-5 text-white relative overflow-hidden shadow-lg`,children:[r.jsx("div",{className:"absolute inset-0 opacity-10",children:r.jsx("div",{className:"absolute -right-8 -top-8 w-32 h-32 rounded-full bg-white/20"})}),r.jsxs("div",{className:"relative z-10",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"p-2 rounded-xl bg-white/20",children:r.jsx(a,{size:20})}),l&&r.jsxs("div",{className:`flex items-center gap-1 text-xs font-bold px-2 py-1 rounded-full ${l==="up"?"bg-emerald-400/30":"bg-red-400/30"}`,children:[l==="up"?r.jsx(_s,{size:12}):r.jsx(oi,{size:12}),o,"%"]})]}),r.jsx("div",{className:"text-2xl font-bold tracking-tight",children:t}),r.jsx("div",{className:"text-sm opacity-80 mt-1",children:e}),n&&r.jsx("div",{className:"text-xs opacity-60 mt-1",children:n})]})]})}function Bse({expenses:e}){const t=e.reduce((a,l)=>a+l.amount,0)||1,n=["bg-blue-500","bg-emerald-500","bg-purple-500","bg-amber-500","bg-red-500","bg-cyan-500"];return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Expense Breakdown"}),r.jsx(pL,{size:18,className:"text-slate-400"})]}),r.jsx("div",{className:"h-4 flex rounded-full overflow-hidden mb-4",children:e.map((a,l)=>r.jsx("div",{className:`${n[l%n.length]} transition-all`,style:{width:`${a.amount/t*100}%`},title:`${a.name}: LKR ${a.amount.toLocaleString()}`},l))}),r.jsx("div",{className:"space-y-2",children:e.slice(0,6).map((a,l)=>r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-3 h-3 rounded-full ${n[l%n.length]}`}),r.jsx("span",{className:"text-sm text-slate-600",children:a.name})]}),r.jsxs("div",{className:"text-sm",children:[r.jsxs("span",{className:"font-semibold text-slate-800",children:["LKR ",a.amount.toLocaleString()]}),r.jsxs("span",{className:"text-slate-400 ml-2",children:["(",(a.amount/t*100).toFixed(1),"%)"]})]})]},l))})]})}function $se({data:e}){const t=Math.max(...e.map(n=>Math.max(n.revenue,n.expenses)),1);return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Monthly Comparison"}),r.jsx(hL,{size:18,className:"text-slate-400"})]}),r.jsx("div",{className:"flex items-end gap-4 h-40",children:e.map((n,a)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[r.jsxs("div",{className:"w-full flex gap-1 items-end justify-center h-32",children:[r.jsx("div",{className:"w-6 bg-gradient-to-t from-emerald-500 to-emerald-400 rounded-t",style:{height:`${n.revenue/t*100}%`},title:`Revenue: LKR ${n.revenue.toLocaleString()}`}),r.jsx("div",{className:"w-6 bg-gradient-to-t from-red-400 to-red-300 rounded-t",style:{height:`${n.expenses/t*100}%`},title:`Expenses: LKR ${n.expenses.toLocaleString()}`})]}),r.jsx("div",{className:"text-xs text-slate-500 font-medium",children:n.month})]},a))}),r.jsxs("div",{className:"flex items-center justify-center gap-6 mt-4 pt-4 border-t border-slate-100",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Revenue"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-400"}),r.jsx("span",{className:"text-sm text-slate-600",children:"Expenses"})]})]})]})}function Use({margin:e}){const t=o=>o>=20?{bg:"bg-emerald-500",text:"text-emerald-700",status:"Excellent"}:o>=10?{bg:"bg-blue-500",text:"text-blue-700",status:"Good"}:o>=5?{bg:"bg-amber-500",text:"text-amber-700",status:"Fair"}:{bg:"bg-red-500",text:"text-red-700",status:"Needs Attention"},{bg:n,text:a,status:l}=t(e);return r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 shadow-sm",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Profit Margin"}),r.jsx(Fk,{size:18,className:"text-slate-400"})]}),r.jsxs("div",{className:"relative pt-4",children:[r.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full ${n} transition-all duration-1000`,style:{width:`${Math.min(e,100)}%`}})}),r.jsxs("div",{className:"absolute -top-1 left-0 right-0 flex justify-between text-xs text-slate-400",children:[r.jsx("span",{children:"0%"}),r.jsx("span",{children:"25%"}),r.jsx("span",{children:"50%"})]})]}),r.jsxs("div",{className:"mt-6 text-center",children:[r.jsxs("div",{className:"text-4xl font-bold text-slate-800",children:[e.toFixed(1),"%"]}),r.jsxs("div",{className:`text-sm font-medium ${a} mt-1`,children:[e>=0?r.jsx(et,{size:14,className:"inline mr-1"}):r.jsx(lr,{size:14,className:"inline mr-1"}),l]})]})]})}function qse(){const[e,t]=g.useState(null),[n,a]=g.useState(!0),[l,o]=g.useState("monthly"),[d,u]=g.useState(new Set),[m,h]=g.useState(!1),x=async()=>{try{a(!0);const v=await MU(l);t(v||p())}catch(v){console.error("Error fetching P&L:",v),t(p())}finally{a(!1)}},p=()=>({period:l==="monthly"?"February 2024":l==="quarterly"?"Q1 2024":l==="yearly"?"FY 2024":"Today",revenue:285e4,cogs:1852500,grossProfit:997500,expenses:[{id:1,name:"Salaries & Wages",amount:35e4,budget:4e5},{id:2,name:"Rent & Utilities",amount:12e4,budget:12e4},{id:3,name:"Marketing",amount:85e3,budget:1e5},{id:4,name:"Supplies & Materials",amount:45e3,budget:5e4},{id:5,name:"Insurance",amount:25e3,budget:25e3},{id:6,name:"Miscellaneous",amount:32500,budget:4e4}],previousRevenue:25e5,previousProfit:28e4,monthlyTrend:[{month:"Oct",revenue:21e5,expenses:185e4},{month:"Nov",revenue:23e5,expenses:195e4},{month:"Dec",revenue:265e4,expenses:21e5},{month:"Jan",revenue:25e5,expenses:205e4},{month:"Feb",revenue:285e4,expenses:251e4}]});g.useEffect(()=>{x()},[l]);const b=g.useMemo(()=>{if(!e)return null;const v=e.expenses?.reduce((_,T)=>_+T.amount,0)||0,w=e.grossProfit-v,S=w,A=e.revenue>0?e.grossProfit/e.revenue*100:0,E=e.revenue>0?S/e.revenue*100:0,C=e.previousRevenue>0?(e.revenue-e.previousRevenue)/e.previousRevenue*100:0,O=e.previousProfit>0?(S-e.previousProfit)/e.previousProfit*100:0,k=e.expenses?.map(_=>({..._,variance:_.budget>0?(_.budget-_.amount)/_.budget*100:0}))||[];return{totalExpenses:v,operatingProfit:w,netProfit:S,grossMargin:A,netMargin:E,revenueGrowth:C,profitGrowth:O,expensesWithVariance:k}},[e]),N=()=>{if(!e||!b)return;const v=[];v.push(" SMART RETAIL PRO - PROFIT & LOSS STATEMENT"),v.push("=".repeat(70)),v.push(` Generated: ${new Date().toLocaleString()}`),v.push(` Period: ${e.period}`),v.push("=".repeat(70)),v.push(""),v.push("INCOME"),v.push("-".repeat(70)),v.push(`Sales Revenue,LKR ${e.revenue.toLocaleString()}`),v.push(""),v.push("COST OF GOODS SOLD"),v.push("-".repeat(70)),v.push(`Cost of Goods Sold,LKR ${e.cogs.toLocaleString()}`),v.push(`GROSS PROFIT,LKR ${e.grossProfit.toLocaleString()}`),v.push(""),v.push("OPERATING EXPENSES"),v.push("-".repeat(70)),b.expensesWithVariance.forEach(C=>{v.push(`${C.name},LKR ${C.amount.toLocaleString()}`)}),v.push(`TOTAL EXPENSES,LKR ${b.totalExpenses.toLocaleString()}`),v.push(""),v.push("=".repeat(70)),v.push(`NET PROFIT,LKR ${b.netProfit.toLocaleString()}`),v.push(`Profit Margin,${b.netMargin.toFixed(1)}%`),v.push("=".repeat(70)),v.push(" End of Report");const w="\uFEFF"+v.join(`
`),S=new Blob([w],{type:"text/csv;charset=utf-8;"}),A=URL.createObjectURL(S),E=document.createElement("a");E.href=A,E.download=`profit-loss-${l}-${new Date().toISOString().split("T")[0]}.csv`,E.click(),URL.revokeObjectURL(A)};return n?r.jsx("div",{className:"flex items-center justify-center h-96",children:r.jsxs("div",{className:"text-center",children:[r.jsx(ir,{className:"w-10 h-10 text-blue-500 animate-spin mx-auto mb-3"}),r.jsx("p",{className:"text-slate-500",children:"Loading P&L report..."})]})}):!e||!b?null:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[r.jsx(Hn,{className:"w-6 h-6 text-emerald-600"}),"Profit & Loss Statement"]}),r.jsxs("p",{className:"text-slate-500 mt-1",children:["Financial performance for ",r.jsx("span",{className:"font-medium text-slate-700",children:e.period})]})]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsxs("select",{value:l,onChange:v=>o(v.target.value),className:"px-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none",children:[r.jsx("option",{value:"daily",children:"Daily"}),r.jsx("option",{value:"weekly",children:"Weekly"}),r.jsx("option",{value:"monthly",children:"Monthly"}),r.jsx("option",{value:"quarterly",children:"Quarterly"}),r.jsx("option",{value:"yearly",children:"Yearly"})]}),r.jsxs("button",{onClick:()=>window.print(),className:"flex items-center gap-2 px-4 py-2.5 border border-slate-200 rounded-xl text-sm hover:bg-slate-50 transition-colors",children:[r.jsx(mi,{size:16}),"Print"]}),r.jsxs("button",{onClick:N,className:"flex items-center gap-2 px-4 py-2.5 bg-slate-800 hover:bg-slate-900 text-white rounded-xl text-sm font-medium transition-colors",children:[r.jsx(ua,{size:16}),"Export"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsx(um,{title:"Total Revenue",value:`LKR ${e.revenue.toLocaleString()}`,subtitle:"Gross Sales",icon:gn,color:"blue",trend:b.revenueGrowth>=0?"up":"down",trendValue:Math.abs(b.revenueGrowth).toFixed(1)}),r.jsx(um,{title:"Gross Profit",value:`LKR ${e.grossProfit.toLocaleString()}`,subtitle:`${b.grossMargin.toFixed(1)}% margin`,icon:Hn,color:"emerald"}),r.jsx(um,{title:"Operating Expenses",value:`LKR ${b.totalExpenses.toLocaleString()}`,subtitle:`${(b.totalExpenses/e.revenue*100).toFixed(1)}% of revenue`,icon:Mv,color:"amber"}),r.jsx(um,{title:"Net Profit",value:`LKR ${b.netProfit.toLocaleString()}`,subtitle:`${b.netMargin.toFixed(1)}% margin`,icon:Fk,color:b.netProfit>=0?"emerald":"red",trend:b.profitGrowth>=0?"up":"down",trendValue:Math.abs(b.profitGrowth).toFixed(1)})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsx($se,{data:e.monthlyTrend||[]}),r.jsx(Bse,{expenses:b.expensesWithVariance}),r.jsx(Use,{margin:b.netMargin})]}),r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"p-5 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Detailed Statement"}),r.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Click rows to expand details"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/80 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold",children:"Description"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Budget"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Actual"}),r.jsx("th",{className:"text-right p-4 font-semibold",children:"Variance"})]})}),r.jsxs("tbody",{children:[r.jsxs("tr",{className:"bg-blue-50/50 font-bold text-blue-800",children:[r.jsx("td",{className:"p-4",children:"REVENUE"}),r.jsx("td",{className:"p-4 text-right",children:"-"}),r.jsxs("td",{className:"p-4 text-right",children:["LKR ",e.revenue.toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:"-"})]}),r.jsxs("tr",{className:"border-t border-slate-100",children:[r.jsx("td",{className:"p-4 pl-8 text-slate-600",children:"Sales Revenue"}),r.jsx("td",{className:"p-4 text-right text-slate-400",children:"-"}),r.jsxs("td",{className:"p-4 text-right font-semibold",children:["LKR ",e.revenue.toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:"-"})]}),r.jsxs("tr",{className:"bg-red-50/50 font-bold text-red-800 border-t-2 border-slate-200",children:[r.jsx("td",{className:"p-4",children:"COST OF GOODS SOLD"}),r.jsx("td",{className:"p-4 text-right",children:"-"}),r.jsxs("td",{className:"p-4 text-right",children:["LKR ",e.cogs.toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:"-"})]}),r.jsxs("tr",{className:"bg-emerald-50 font-bold text-emerald-800 border-t-2 border-slate-200",children:[r.jsx("td",{className:"p-4",children:"GROSS PROFIT"}),r.jsx("td",{className:"p-4 text-right",children:"-"}),r.jsxs("td",{className:"p-4 text-right",children:["LKR ",e.grossProfit.toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:r.jsxs("span",{className:"px-2 py-1 bg-emerald-100 rounded-full text-xs",children:[b.grossMargin.toFixed(1),"% margin"]})})]}),r.jsxs("tr",{className:"bg-amber-50/50 font-bold text-amber-800 border-t-2 border-slate-200",children:[r.jsx("td",{className:"p-4",children:"OPERATING EXPENSES"}),r.jsx("td",{className:"p-4 text-right",children:"-"}),r.jsxs("td",{className:"p-4 text-right",children:["LKR ",b.totalExpenses.toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:"-"})]}),b.expensesWithVariance.map(v=>r.jsxs("tr",{className:"border-t border-slate-100 hover:bg-slate-50",children:[r.jsx("td",{className:"p-4 pl-8 text-slate-600",children:v.name}),r.jsx("td",{className:"p-4 text-right text-slate-400",children:v.budget>0?`LKR ${v.budget.toLocaleString()}`:"-"}),r.jsxs("td",{className:"p-4 text-right font-semibold",children:["LKR ",v.amount.toLocaleString()]}),r.jsx("td",{className:"p-4 text-right",children:v.budget>0&&r.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-bold ${v.variance>=0?"bg-emerald-100 text-emerald-700":"bg-red-100 text-red-700"}`,children:[v.variance>=0?"Under":"Over"," ",Math.abs(v.variance).toFixed(0),"%"]})})]},v.id)),r.jsxs("tr",{className:`font-bold text-lg border-t-4 border-slate-300 ${b.netProfit>=0?"bg-emerald-100 text-emerald-900":"bg-red-100 text-red-900"}`,children:[r.jsx("td",{className:"p-5",children:"NET PROFIT / (LOSS)"}),r.jsx("td",{className:"p-5 text-right",children:"-"}),r.jsxs("td",{className:"p-5 text-right text-xl",children:[b.netProfit<0&&"(","LKR ",Math.abs(b.netProfit).toLocaleString(),b.netProfit<0&&")"]}),r.jsx("td",{className:"p-5 text-right",children:r.jsxs("span",{className:`px-3 py-1.5 rounded-full text-sm font-bold ${b.netProfit>=0?"bg-emerald-200":"bg-red-200"}`,children:[b.netMargin.toFixed(1),"% margin"]})})]})]})]})})]})]})}function Fse(){const e=()=>{const n=m=>{if(m==null)return"";const h=String(m);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h},a=[];a.push(" SMART RETAIL PRO - DAILY SALES REPORT"),a.push("=".repeat(70)),a.push(` Generated: ${new Date().toLocaleString()}`),a.push(" Branch: Colombo Main"),a.push("=".repeat(70)),a.push(""),a.push("Daily sales summary data for today's operations."),a.push(""),a.push(["Date","Sales Value (LKR)","Transactions"].map(n).join(",")),a.push([new Date().toISOString().split("T")[0],"0","0"].map(n).join(",")),a.push("=".repeat(70)),a.push(" End of Report");const l="\uFEFF"+a.join(`
`),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(o),u=document.createElement("a");u.href=d,u.download=`daily-sales-${new Date().toISOString().split("T")[0]}.csv`,u.click(),URL.revokeObjectURL(d)},t=()=>{const n=m=>{if(m==null)return"";const h=String(m);return h.includes(",")||h.includes('"')||h.includes(`
`)?`"${h.replace(/"/g,'""')}"`:h},a=[];a.push(" SMART RETAIL PRO - STOCK VALUATION REPORT"),a.push("=".repeat(70)),a.push(` Generated: ${new Date().toLocaleString()}`),a.push(" Branch: Colombo Main"),a.push("=".repeat(70)),a.push(""),a.push("Stock valuation report for inventory management."),a.push(""),a.push(["SKU","Product Name","Quantity","Unit Price (LKR)","Total Value (LKR)"].map(n).join(",")),a.push("=".repeat(70)),a.push(" End of Report");const l="\uFEFF"+a.join(`
`),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(o),u=document.createElement("a");u.href=d,u.download=`stock-valuation-${new Date().toISOString().split("T")[0]}.csv`,u.click(),URL.revokeObjectURL(d)};return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Reports"}),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-1",children:"Branch Reports"}),r.jsx("p",{className:"text-sm text-brand-muted",children:"Typical manager reports: Daily Sales Summary, Stock Valuation, Top Products, and GRN Summary. Later you can connect these to your Spring Boot APIs."}),r.jsxs("div",{className:"mt-4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition",children:" Download Daily Sales (CSV)"}),r.jsx("button",{type:"button",onClick:t,className:"py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition",children:" Export Stock (CSV)"}),r.jsx("button",{type:"button",className:"py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition",children:" View Top Products"})]})]})]})}const Hse=["STORE_KEEPER","CASHIER","SUPERVISOR"];function Kse(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState({}),[d,u]=g.useState({}),[m,h]=g.useState(!0),[x,p]=g.useState(!0),[b,N]=g.useState(null),[v,w]=g.useState(null);g.useEffect(()=>{S(),A()},[]);const S=async()=>{try{h(!0),N(null),console.log("Fetching pending registrations...");const O=await Fv("PENDING");if(console.log("Raw Pending API Response:",O),!Array.isArray(O)){console.warn("API response is not an array:",O),t([]);return}const k=O.map(T=>({...T,name:T.requestedBy||T.reference||"Unknown",username:T.username||(T.referenceNo?T.referenceNo.replace("USER-",""):"-"),email:T.email||"No Email",time:T.time||"Recently"}));t(k);const _={};k.forEach(T=>{_[T.id]=T.role||"CASHIER"}),o(_)}catch(O){console.error("Error fetching pending registrations:",O),N("Failed to connect to server. Ensure Backend is running.")}finally{h(!1)}},A=async()=>{try{p(!0);const k=(await C3()||[]).map(T=>({id:T.userId,name:T.name,username:"-",email:"-",role:T.role,lastLogin:T.lastLogin,isActive:T.status==="Active"||T.status==="Online",statusRaw:T.status})).filter(T=>T.role!=="ADMIN");a(k);const _={};k.forEach(T=>{_[T.id]=T.role||"CASHIER"}),u(_)}catch(O){console.error("Error fetching users:",O)}finally{p(!1)}},E=async O=>{const k=O.id,_=l[k]||"CASHIER";try{w(k),await xE(k,"APPROVED",_),t(T=>T.filter(P=>P.id!==k)),setTimeout(A,500)}catch(T){console.error("Error approving registration:",T),alert("Failed to approve. Check console for details.")}finally{w(null)}},C=async O=>{const k=O.id;try{w(k),await xE(k,"REJECTED"),t(_=>_.filter(T=>T.id!==k))}catch(_){console.error("Error rejecting registration:",_),alert("Failed to reject.")}finally{w(null)}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h1",{className:"text-xl font-extrabold text-slate-800",children:"User Management"}),r.jsx("button",{onClick:()=>{S(),A()},className:"text-xs px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-600 rounded font-bold transition-colors",children:"Refresh Data"})]}),b&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center gap-3 text-red-700 animate-in fade-in slide-in-from-top-2",children:[r.jsxs("span",{className:"font-bold relative flex h-3 w-3",children:[r.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),r.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-red-500"})]}),r.jsx("span",{className:"font-semibold",children:b})]}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-5 border-b border-slate-100 flex items-center gap-3",children:[r.jsx("span",{className:"font-bold text-slate-700",children:"Pending Approvals"}),e.length>0&&r.jsxs("span",{className:"bg-amber-100 text-amber-700 px-2.5 py-0.5 rounded-full text-xs font-bold shadow-sm border border-amber-200",children:[e.length," Waiting"]})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/50 text-slate-500 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Name"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Username"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Email"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Assign Role"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Action"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:m?r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"p-8 text-center text-slate-400",children:r.jsxs("div",{className:"flex flex-col items-center gap-2",children:[r.jsx("div",{className:"w-6 h-6 border-2 border-brand border-t-transparent rounded-full animate-spin"}),r.jsx("span",{children:"Syncing requests..."})]})})}):e.length===0?r.jsx("tr",{children:r.jsx("td",{className:"p-8 text-center text-slate-400",colSpan:5,children:r.jsxs("div",{className:"flex flex-col items-center gap-1",children:[r.jsx("span",{className:"text-lg opacity-50",children:""}),r.jsx("span",{children:"No pending registrations found"})]})})}):e.map(O=>{const k=O.id,_=l[k]||"CASHIER",T=v===k;return r.jsxs("tr",{className:`group hover:bg-slate-50 transition-colors ${T?"opacity-50 pointer-events-none":""}`,children:[r.jsxs("td",{className:"p-4 font-semibold text-slate-700",children:[O.name,r.jsx("div",{className:"text-[10px] text-slate-400 font-normal mt-0.5 max-w-[150px] truncate",children:O.reference})]}),r.jsx("td",{className:"p-4 font-mono text-xs text-slate-600",children:O.username}),r.jsx("td",{className:"p-4 text-slate-600",children:r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded bg-slate-100 text-xs font-medium text-slate-600 border border-slate-200 max-w-[180px] break-all",children:O.email})}),r.jsx("td",{className:"p-4",children:r.jsx("select",{value:_,onChange:P=>o(L=>({...L,[k]:P.target.value})),className:"px-3 py-1.5 rounded-lg border border-slate-200 bg-white text-xs font-semibold focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand cursor-pointer hover:border-slate-300 transition-colors",children:Hse.map(P=>r.jsx("option",{value:P,children:P},P))})}),r.jsx("td",{className:"p-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{type:"button",onClick:()=>E(O),disabled:T,className:"px-3 py-1.5 bg-emerald-500 text-white rounded-lg text-xs font-bold hover:bg-emerald-600 hover:shadow-lg hover:shadow-emerald-200 transition-all active:scale-95 disabled:opacity-50",children:"Approve"}),r.jsx("button",{type:"button",onClick:()=>C(O),disabled:T,className:"px-3 py-1.5 bg-white border border-slate-200 text-red-600 rounded-lg text-xs font-bold hover:bg-red-50 hover:border-red-200 transition-all active:scale-95 disabled:opacity-50",children:"Reject"})]})})]},k)})})]})})]}),r.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"px-6 py-5 border-b border-slate-100 font-bold text-slate-700",children:"Staff Directory"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50/50 text-slate-500 border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Name"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Role"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Last Login"}),r.jsx("th",{className:"text-left p-4 font-semibold uppercase text-xs tracking-wider",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:x?r.jsx("tr",{children:r.jsx("td",{colSpan:4,className:"p-8 text-center text-slate-400",children:"Loading staff..."})}):n.length===0?r.jsx("tr",{children:r.jsx("td",{className:"p-8 text-center text-slate-400",colSpan:4,children:"No staff found"})}):n.map(O=>{const k=O.id,_=O.role||"CASHIER",T=O.isActive;return r.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[r.jsx("td",{className:"p-4 font-medium text-slate-700",children:O.name}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:"px-2.5 py-1 bg-slate-100 rounded-md text-xs font-bold border border-slate-200 text-slate-600",children:_})}),r.jsx("td",{className:"p-4 text-slate-500 font-mono text-xs",children:O.lastLogin||"Never"}),r.jsx("td",{className:"p-4",children:r.jsx("span",{className:`px-2.5 py-1 rounded-full text-[10px] uppercase font-bold tracking-wide border ${T?"bg-emerald-50 text-emerald-600 border-emerald-100":"bg-slate-100 text-slate-500 border-slate-200"}`,children:O.statusRaw||"Inactive"})})]},k)})})]})})]})]})}function Gse({customer:e,onClose:t,onUpdate:n}){const[a,l]=g.useState("details"),[o,d]=g.useState(!1),[u,m]=g.useState({}),[h,x]=g.useState(!1),[p,b]=g.useState([]),[N,v]=g.useState(!1),[w,S]=g.useState({amount:0,reason:""}),[A,E]=g.useState(!1);g.useEffect(()=>{e&&(m({...e,dateOfBirth:e.dateOfBirth||"",address:e.address||"",city:e.city||""}),C(e.id))},[e]);const C=async P=>{v(!0);try{const L=await $U(P);b(L||[])}catch(L){console.error("Failed to load transactions",L)}finally{v(!1)}};if(!e)return null;const O=e.status==="Inactive",k=async()=>{x(!0);try{await pE(e.id,u),n(),d(!1)}catch{alert("Failed to update customer")}finally{x(!1)}},_=async P=>{P.preventDefault(),E(!0);try{await zU(e.id,parseInt(w.amount),w.reason),n(),S({amount:0,reason:""}),alert("Points adjusted successfully")}catch{alert("Failed to adjust points")}finally{E(!1)}},T=async()=>{if(!confirm(`Are you sure you want to ${O?"UNBLOCK":"BLOCK"} this customer?`))return;const P=O?"Active":"Inactive";try{await pE(e.id,{...e,status:P}),n()}catch{alert("Failed to change status")}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:`bg-white w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] transition-all ${O?"border-4 border-red-500":""}`,children:[r.jsxs("div",{className:`p-6 flex justify-between items-start text-white transition-colors duration-300 ${O?"bg-red-600":"bg-slate-900"}`,children:[r.jsxs("div",{className:"flex gap-4 items-center",children:[r.jsx("div",{className:`w-16 h-16 rounded-full flex items-center justify-center text-2xl font-bold shadow-lg transition-transform ${O?"bg-white text-red-600 scale-110":"bg-gradient-to-br from-brand-secondary to-brand scale-100"}`,children:e.name.charAt(0)}),r.jsxs("div",{children:[r.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.name,O&&r.jsx(Uf,{size:24,className:"text-white drop-shadow-md"})]}),r.jsxs("div",{className:"flex items-center gap-3 text-white/80 text-sm mt-1",children:[O?r.jsx("span",{className:"px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide bg-white text-red-600 shadow-sm",children:"Blocked / Inactive"}):r.jsxs("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase tracking-wide ${e.tier==="Platinum"?"bg-purple-500/20 text-purple-200 border border-purple-500/30":e.tier==="Gold"?"bg-yellow-500/20 text-yellow-200 border border-yellow-500/30":"bg-slate-700 text-slate-300"}`,children:[e.tier," Member"]}),r.jsxs("span",{className:"flex items-center gap-1 opacity-80",children:[r.jsx(Qm,{size:12})," ",e.phone]})]})]})]}),r.jsx("button",{onClick:t,className:"text-white/60 hover:text-white transition-colors p-1 rounded-full hover:bg-white/10",children:r.jsx($e,{size:24})})]}),r.jsxs("div",{className:"flex border-b border-slate-200 bg-white",children:[r.jsx("button",{onClick:()=>l("details"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a==="details"?"border-brand text-brand":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Profile Details"}),r.jsx("button",{onClick:()=>l("history"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a==="history"?"border-brand text-brand":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Sales History"}),r.jsx("button",{onClick:()=>l("points"),className:`flex-1 py-3 text-sm font-bold border-b-2 transition-colors ${a==="points"?"border-brand text-brand":"border-transparent text-slate-500 hover:text-slate-700"}`,children:"Points & Rewards"})]}),r.jsxs("div",{className:`p-6 overflow-y-auto flex-1 ${O?"bg-red-50":"bg-white"}`,children:[a==="details"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Personal Information"}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:T,className:`px-3 py-1.5 rounded text-xs font-bold flex items-center gap-1 transition-colors shadow-sm ${O?"bg-emerald-100 text-emerald-700 hover:bg-emerald-200 border border-emerald-200":"bg-red-100 text-red-700 hover:bg-red-200 border border-red-200"}`,children:O?r.jsxs(r.Fragment,{children:[r.jsx(Si,{size:14})," UNBLOCK USER"]}):r.jsxs(r.Fragment,{children:[r.jsx(Uf,{size:14})," BLOCK USER"]})}),!O&&(o?r.jsxs("div",{className:"flex gap-2 ml-2",children:[r.jsx("button",{onClick:()=>d(!1),className:"text-slate-500 hover:text-slate-700 text-sm font-bold",children:"Cancel"}),r.jsxs("button",{onClick:k,disabled:h,className:"bg-brand text-white px-3 py-1 rounded text-sm font-bold flex items-center gap-1",children:[h&&r.jsx(Ve,{size:14,className:"animate-spin"})," Save"]})]}):r.jsx("button",{onClick:()=>d(!0),className:"text-brand hover:text-brand-hover text-sm font-bold ml-2",children:"Edit Details"}))]})]}),O&&r.jsxs("div",{className:"bg-red-100 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm flex items-start gap-2",children:[r.jsx(Uf,{size:16,className:"mt-0.5 shrink-0"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-bold",children:"This account is currently blocked."}),r.jsx("p",{className:"opacity-80",children:"Editing details and earning points are disabled while the account is inactive."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-6 gap-x-8",children:[r.jsx(yo,{label:"Full Name",icon:tn,value:u.name,editMode:o&&!O,onChange:P=>m({...u,name:P}),disabled:O}),r.jsx(yo,{label:"Phone Number",icon:Qm,value:u.phone,editMode:o&&!O,onChange:P=>m({...u,phone:P}),disabled:O}),r.jsx(yo,{label:"Email Address",icon:Wd,value:u.email,editMode:o&&!O,onChange:P=>m({...u,email:P}),disabled:O}),r.jsx(yo,{label:"Date of Birth",icon:da,value:u.dateOfBirth,type:"date",editMode:o&&!O,onChange:P=>m({...u,dateOfBirth:P}),disabled:O}),r.jsxs("div",{className:"md:col-span-2 grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"md:col-span-2",children:r.jsx(yo,{label:"Address",icon:Km,value:u.address,editMode:o&&!O,onChange:P=>m({...u,address:P}),disabled:O})}),r.jsx(yo,{label:"City",icon:Km,value:u.city,editMode:o&&!O,onChange:P=>m({...u,city:P}),disabled:O})]})]})]}),a==="history"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("h3",{className:"font-bold text-slate-800 text-lg flex items-center gap-2",children:[r.jsx(Po,{size:20,className:"text-brand"})," Recent Purchases"]}),N?r.jsx("div",{className:"py-8 flex justify-center text-brand",children:r.jsx(Ve,{size:32,className:"animate-spin"})}):p.length===0?r.jsxs("div",{className:"py-12 text-center text-slate-400 border-2 border-dashed rounded-xl",children:[r.jsx(Po,{size:32,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"No recent transactions found."})]}):r.jsx("div",{className:"space-y-3",children:p.map(P=>r.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200 flex justify-between items-center hover:bg-slate-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-white flex items-center justify-center border border-slate-200 text-brand-secondary shadow-sm",children:r.jsx(ps,{size:18})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-slate-700",children:P.invoiceNo}),r.jsxs("div",{className:"text-xs text-slate-400 flex items-center gap-1",children:[r.jsx(Rr,{size:10})," ",P.date]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-mono font-bold text-slate-800",children:["LKR ",P.amount?.toLocaleString()]}),r.jsx("div",{className:`text-[10px] font-bold uppercase tracking-wider ${P.paymentStatus==="PAID"?"text-emerald-500":"text-orange-500"}`,children:P.paymentStatus})]})]},P.id))}),p.length>0&&r.jsxs("button",{className:"w-full py-2 text-xs font-bold text-slate-400 hover:text-brand flex items-center justify-center gap-1 mt-2",children:["View Full History ",r.jsx(Yd,{size:12})]})]}),a==="points"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 text-center shadow-sm",children:[r.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-1",children:"Available Points"}),r.jsx("div",{className:"text-2xl font-extrabold text-brand-secondary",children:e.availablePoints})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 text-center shadow-sm",children:[r.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-1",children:"Lifetime Spend"}),r.jsx("div",{className:"text-lg font-bold text-slate-800",children:e.totalSpend})]}),r.jsxs("div",{className:"bg-white p-4 rounded-xl border border-slate-200 text-center shadow-sm",children:[r.jsx("div",{className:"text-slate-500 text-xs font-bold uppercase mb-1",children:"Current Tier"}),r.jsx("div",{className:"text-lg font-bold text-brand",children:e.tier})]})]}),O?r.jsxs("div",{className:"p-8 text-center text-slate-400 bg-white border border-slate-200 rounded-xl border-dashed",children:[r.jsx(Uf,{size:32,className:"mx-auto mb-2 opacity-50"}),r.jsx("p",{className:"font-bold",children:"Points operations disabled"}),r.jsx("p",{className:"text-xs",children:"Unblock this customer to adjust points."})]}):r.jsxs("div",{className:"bg-white p-5 rounded-xl border border-slate-200 shadow-sm",children:[r.jsxs("h4",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:[r.jsx(Oo,{size:18,className:"text-brand"})," Adjust Loyalty Points"]}),r.jsxs("form",{onSubmit:_,className:"space-y-3",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Points (+/-)"}),r.jsx("input",{type:"number",className:"w-full px-3 py-2 border rounded font-mono text-sm",placeholder:"e.g. 100 or -50",value:w.amount,onChange:P=>S({...w,amount:P.target.value}),required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-1 block",children:"Reason"}),r.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded text-sm",placeholder:"e.g. Manual Correction",value:w.reason,onChange:P=>S({...w,reason:P.target.value}),required:!0})]})]}),r.jsxs("button",{type:"submit",disabled:A||!w.amount,className:"w-full bg-slate-800 text-white py-2 rounded font-bold text-sm hover:bg-slate-900 transition flex justify-center items-center gap-2",children:[A&&r.jsx(Ve,{size:16,className:"animate-spin"})," Update Balance"]})]})]})]})]})]})})}const yo=({label:e,icon:t,value:n,editMode:a,onChange:l,type:o="text",disabled:d})=>r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-400 uppercase mb-1 flex items-center gap-1",children:[r.jsx(t,{size:12})," ",e]}),a&&!d?r.jsx("input",{type:o,className:"w-full border border-slate-300 rounded px-3 py-2 text-sm focus:outline-none focus:border-brand",value:n||"",onChange:u=>l(u.target.value)}):r.jsx("div",{className:`p-2 rounded border border-transparent ${n?"text-slate-800 font-medium":"text-slate-400 italic"} ${d?"opacity-70":""}`,children:n||"Not provided"})]});function Vse({onClose:e,onUpdate:t}){const[n,a]=g.useState({Silver:0,Gold:0,Platinum:0}),[l,o]=g.useState(!0),[d,u]=g.useState(!1);g.useEffect(()=>{m()},[]);const m=async()=>{try{const x=await k3();a({Silver:x.Silver||1e4,Gold:x.Gold||5e4,Platinum:x.Platinum||1e5})}catch(x){console.error("Failed to load tier rules",x)}finally{o(!1)}},h=async x=>{x.preventDefault(),u(!0);try{await BU(n),t(),e()}catch{alert("Failed to save rules")}finally{u(!1)}};return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4",children:r.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-in fade-in zoom-in duration-200",children:[r.jsxs("div",{className:"bg-slate-900 p-4 flex justify-between items-center text-white",children:[r.jsxs("h3",{className:"font-bold text-lg flex items-center gap-2",children:[r.jsx(Qd,{size:20,className:"text-brand-secondary"})," Tier Point Rules"]}),r.jsx("button",{onClick:e,className:"text-slate-400 hover:text-white transition-colors",children:r.jsx($e,{size:20})})]}),r.jsx("div",{className:"p-6",children:l?r.jsx("div",{className:"flex justify-center py-8 text-brand",children:r.jsx(Ve,{className:"animate-spin",size:32})}):r.jsxs("form",{onSubmit:h,className:"space-y-4",children:[r.jsx("p",{className:"text-sm text-slate-500 mb-4",children:"Define the minimum total spend (LKR) required for customers to reach each loyalty tier. Changes apply immediately."}),["Silver","Gold","Platinum"].map(x=>r.jsxs("div",{children:[r.jsxs("label",{className:"text-xs font-bold text-slate-700 uppercase mb-1 block",children:[x," Threshold"]}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-2.5 text-slate-400 text-sm font-mono",children:"LKR"}),r.jsx("input",{type:"number",value:n[x],onChange:p=>a({...n,[x]:parseFloat(p.target.value)}),className:"w-full pl-12 pr-4 py-2 border border-slate-300 rounded-lg text-sm font-mono text-slate-800 focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand",placeholder:"0.00",min:"0"})]})]},x)),r.jsxs("div",{className:"pt-4 flex gap-3",children:[r.jsx("button",{type:"button",onClick:e,className:"flex-1 py-2.5 border border-slate-200 text-slate-600 font-bold rounded-lg hover:bg-slate-50 text-sm",children:"Cancel"}),r.jsxs("button",{type:"submit",disabled:d,className:"flex-1 py-2.5 bg-brand text-white font-bold rounded-lg hover:bg-brand-hover text-sm flex justify-center items-center gap-2 shadow-lg shadow-brand/20",children:[d&&r.jsx(Ve,{size:16,className:"animate-spin"})," Save Changes"]})]})]})})]})})}function Yse({onClose:e}){return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/60 backdrop-blur-sm p-4 animate-in fade-in duration-300",children:r.jsxs("div",{className:"bg-white w-full max-w-lg rounded-3xl shadow-2xl overflow-hidden relative",children:[r.jsx("div",{className:"absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-brand-deep to-brand"}),r.jsx("div",{className:"absolute top-[-50px] right-[-50px] w-40 h-40 bg-white/10 rounded-full blur-3xl"}),r.jsxs("div",{className:"relative pt-10 px-8 pb-8 text-center",children:[r.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/70 hover:text-white transition-colors bg-black/10 hover:bg-black/20 rounded-full p-2",children:r.jsx($e,{size:20})}),r.jsx("div",{className:"w-24 h-24 bg-white rounded-full mx-auto shadow-xl flex items-center justify-center mb-6 relative z-10 border-4 border-white",children:r.jsx(M7,{size:40,className:"text-brand animate-pulse"})}),r.jsx("h2",{className:"text-2xl font-extrabold text-slate-800 mb-2",children:"Campaign Manager"}),r.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-amber-50 text-amber-600 border border-amber-200 rounded-full text-xs font-bold uppercase tracking-wider mb-6",children:[r.jsx(_L,{size:12})," Under Development"]}),r.jsxs("p",{className:"text-slate-500 mb-8 leading-relaxed",children:["We're currently building a powerful engine to manage loyalty campaigns, automated rewards, and targeted offers.",r.jsx("br",{}),"Get ready to boost customer engagement like never before!"]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 text-left mb-8",children:[r.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 text-purple-600 flex items-center justify-center mb-3",children:r.jsx(ko,{size:16})}),r.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:"Automated Alerts"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Trigger notifications based on spending habits."})]}),r.jsxs("div",{className:"p-4 rounded-2xl bg-slate-50 border border-slate-100",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center mb-3",children:r.jsx(Rr,{size:16})}),r.jsx("h4",{className:"font-bold text-slate-800 text-sm mb-1",children:"Seasonal Offers"}),r.jsx("p",{className:"text-xs text-slate-400",children:"Schedule doubling point events in advance."})]})]}),r.jsx("button",{onClick:e,className:"w-full py-3.5 bg-brand text-white font-bold rounded-xl shadow-lg shadow-brand/30 hover:bg-brand-hover hover:shadow-brand/40 transition-all transform hover:-translate-y-0.5 active:translate-y-0",children:"Got it, I'll wait!"})]})]})})}const Qse=({title:e,value:t,desc:n,icon:a,trend:l})=>r.jsxs("div",{className:"bg-white p-5 rounded-2xl shadow-sm border border-slate-200 flex items-start justify-between hover:shadow-md transition-shadow cursor-pointer",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase tracking-wider mb-1",children:e}),r.jsx("h3",{className:"text-2xl font-extrabold text-slate-800",children:t}),r.jsx("p",{className:`text-xs mt-1 font-medium ${l==="up"?"text-emerald-500":l==="down"?"text-red-500":"text-slate-400"}`,children:n})]}),r.jsx("div",{className:"p-3 bg-brand-light/10 rounded-xl text-brand",children:r.jsx(a,{size:22})})]}),fk=({children:e,type:t})=>{const a={Bronze:"bg-orange-50 text-orange-700 border-orange-200",Silver:"bg-slate-100 text-slate-600 border-slate-200",Gold:"bg-yellow-50 text-yellow-700 border-yellow-200",Platinum:"bg-purple-50 text-purple-700 border-purple-200",Active:"bg-emerald-50 text-emerald-700 border-emerald-200",Inactive:"bg-red-50 text-red-700 border-red-200",Blocked:"bg-red-50 text-red-700 border-red-200"}[e]||"bg-gray-100 text-gray-600 border-gray-200";return r.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold border ${a}`,children:e})};function Wse(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[d,u]=g.useState(""),[m,h]=g.useState("All"),[x,p]=g.useState(null),[b,N]=g.useState(!1),[v,w]=g.useState(!1),[S,A]=g.useState({Silver:1e4,Gold:5e4,Platinum:1e5});g.useEffect(()=>{E()},[]);const E=async()=>{try{o(!0);const[k,_,T]=await Promise.all([IU(),LU(),k3().catch(()=>null)]);t(k||[]);const P=T||{Silver:1e4,Gold:5e4,Platinum:1e5};T&&A(T);const z=(_||[]).map(U=>{let B="Bronze";const ee=parseFloat(U.availablePoints||U.points||0);return ee>=(P.Platinum||1e5)?B="Platinum":ee>=(P.Gold||5e4)?B="Gold":ee>=(P.Silver||1e4)&&(B="Silver"),{...U,tier:B}}).sort((U,B)=>B.availablePoints-U.availablePoints);a(z)}catch(k){console.error("Failed to load loyalty data",k)}finally{o(!1)}},C=n.filter(k=>{const _=k.name.toLowerCase().includes(d.toLowerCase())||k.phone.includes(d)||k.email&&k.email.toLowerCase().includes(d.toLowerCase()),T=m==="All"||k.tier===m;return _&&T}),O=async()=>{try{const k=await PU(),_=window.URL.createObjectURL(k),T=document.createElement("a");T.href=_,T.download="loyalty_customers.pdf",document.body.appendChild(T),T.click(),T.remove(),window.URL.revokeObjectURL(_)}catch(k){console.error("Failed to export PDF",k),alert("Failed to export report. Please try again.")}};return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-extrabold text-slate-800",children:"Loyalty & Customers"}),r.jsx("p",{className:"text-slate-500 text-sm",children:"Manage customer relationships, tiers, and rewards."})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-lg text-sm font-bold text-slate-600 hover:bg-slate-50",children:[r.jsx(ua,{size:16})," Export PDF"]}),r.jsxs("button",{onClick:()=>w(!0),className:"flex items-center gap-2 px-4 py-2 bg-brand text-white rounded-lg text-sm font-bold shadow-lg shadow-brand/20 hover:bg-brand-hover",children:[r.jsx(kS,{size:16})," Campaign Config"]})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:e.length>0?e.map((k,_)=>r.jsx(Qse,{title:k.title,value:k.value,desc:k.description,trend:k.trend,icon:k.icon==="users"?vs:k.icon==="star"?hi:k.icon==="percent"?Sd:Ma},_)):Array(4).fill(0).map((k,_)=>r.jsx("div",{className:"h-32 bg-white rounded-2xl shadow-sm border border-slate-200 animate-pulse"},_))}),x&&r.jsx(Gse,{customer:x,onClose:()=>p(null),onUpdate:()=>{E(),p(null)}}),b&&r.jsx(Vse,{onClose:()=>N(!1),onUpdate:()=>{E()}}),v&&r.jsx(Yse,{onClose:()=>w(!1)}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden flex flex-col",children:[r.jsxs("div",{className:"p-4 border-b border-slate-100 flex gap-4 flex-wrap",children:[r.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[r.jsx(er,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),r.jsx("input",{type:"text",placeholder:"Search customers...",value:d,onChange:k=>u(k.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-lg text-sm focus:outline-none focus:border-brand focus:ring-1 focus:ring-brand"})]}),r.jsxs("div",{className:"flex items-center gap-2 relative",children:[r.jsx(Jh,{size:16,className:"text-slate-400 absolute left-3 pointer-events-none"}),r.jsxs("select",{value:m,onChange:k=>h(k.target.value),className:"pl-9 pr-10 py-2 bg-white border border-slate-200 rounded-lg text-sm font-medium text-slate-600 focus:outline-none focus:border-brand appearance-none cursor-pointer hover:bg-slate-50 transition-colors",children:[r.jsx("option",{value:"All",children:"All Tiers"}),r.jsx("option",{value:"Bronze",children:"Bronze"}),r.jsx("option",{value:"Silver",children:"Silver"}),r.jsx("option",{value:"Gold",children:"Gold"}),r.jsx("option",{value:"Platinum",children:"Platinum"})]}),r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:r.jsx("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M1 1L5 5L9 1",stroke:"#64748B",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),r.jsx("div",{className:"overflow-x-auto flex-1",children:r.jsxs("table",{className:"w-full text-sm text-left",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-500 font-semibold border-b border-slate-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"p-4 w-10",children:r.jsx("input",{type:"checkbox",className:"rounded border-slate-300 cursor-pointer"})}),r.jsx("th",{className:"p-4",children:"Customer"}),r.jsx("th",{className:"p-4",children:"Tier"}),r.jsx("th",{className:"p-4 text-right",children:"Points"}),r.jsx("th",{className:"p-4 text-right",children:"Total Spend"}),r.jsx("th",{className:"p-4",children:"Status"})]})}),r.jsx("tbody",{className:"divide-y divide-slate-100",children:l?Array(5).fill(0).map((k,_)=>r.jsx("tr",{className:"animate-pulse",children:r.jsx("td",{colSpan:6,className:"p-4",children:r.jsx("div",{className:"h-8 bg-slate-100 rounded"})})},_)):C.length===0?r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-12 text-center text-slate-400",children:n.length===0?"No customers enrolled yet.":"No customers found matching filters."})}):C.map(k=>r.jsxs("tr",{onClick:()=>p(k),className:`group transition-colors cursor-pointer border-l-4 ${k.status==="Inactive"||k.status==="Blocked"?"bg-red-50 hover:bg-red-100 border-l-red-500":"hover:bg-slate-50 border-l-transparent"}`,children:[r.jsx("td",{className:"p-4",onClick:_=>_.stopPropagation(),children:r.jsx("input",{type:"checkbox",className:"rounded border-slate-300 cursor-pointer"})}),r.jsxs("td",{className:"p-4",children:[r.jsx("div",{className:`font-bold ${k.status==="Inactive"?"text-red-700":"text-slate-700"}`,children:k.name}),r.jsx("div",{className:"text-xs text-slate-400 font-mono",children:k.phone})]}),r.jsx("td",{className:"p-4",children:r.jsx(fk,{children:k.tier})}),r.jsx("td",{className:"p-4 text-right font-mono font-medium text-brand-secondary",children:k.availablePoints}),r.jsx("td",{className:"p-4 text-right font-mono text-slate-600",children:k.totalSpend}),r.jsx("td",{className:"p-4",children:r.jsx(fk,{children:k.status})})]},k.id))})]})}),r.jsxs("div",{className:"p-4 border-t border-slate-100 flex justify-between items-center text-xs text-slate-500",children:[r.jsxs("span",{children:["Showing ",C.length," customers"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{disabled:!0,className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),r.jsx("button",{className:"px-3 py-1 border rounded hover:bg-slate-50",children:"Next"})]})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("h3",{className:"font-bold text-slate-800 mb-4 flex items-center gap-2",children:["Smart Insights ",r.jsx("span",{className:"bg-purple-100 text-purple-700 text-[10px] px-2 py-0.5 rounded-full",children:"AI"})]}),r.jsxs("ul",{className:"space-y-4",children:[r.jsxs("li",{className:"flex gap-3 items-start",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-orange-100 text-orange-600 flex items-center justify-center shrink-0",children:r.jsx(Ma,{size:16})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500 mb-0.5",children:"Churn Risk"}),r.jsxs("p",{className:"text-sm font-medium text-slate-700 leading-snug",children:["12 Gold customers haven't visited in 30+ days.",r.jsx("span",{className:"block mt-1 text-brand text-xs font-bold cursor-pointer hover:underline",children:"Send 'We miss you' offer?"})]})]})]}),r.jsxs("li",{className:"border-t border-slate-100 pt-4 flex gap-3 items-start",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 text-blue-600 flex items-center justify-center shrink-0",children:r.jsx(kS,{size:16})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-slate-500 mb-0.5",children:"Upsell Opportunity"}),r.jsx("p",{className:"text-sm font-medium text-slate-700 leading-snug",children:"8 customers are < 500 pts away from Platinum."})]})]})]})]}),r.jsxs("div",{className:"bg-white p-5 rounded-2xl border border-slate-200 shadow-sm",children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h3",{className:"font-bold text-slate-800",children:"Tier Rules"}),r.jsx("button",{onClick:()=>N(!0),className:"text-xs font-bold text-brand hover:text-brand-hover hover:underline",children:"Edit"})]}),r.jsxs("div",{className:"space-y-3 text-sm",children:[r.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-slate-50 border border-slate-100",children:[r.jsx("span",{className:"font-bold text-slate-600",children:"Silver"}),r.jsxs("span",{className:"text-slate-400 text-xs text-right",children:["> ",S.Silver?.toLocaleString()," LKR"]})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-yellow-50 border border-yellow-100",children:[r.jsx("span",{className:"font-bold text-yellow-700",children:"Gold"}),r.jsxs("span",{className:"text-yellow-600 text-xs text-right",children:["> ",S.Gold?.toLocaleString()," LKR"]})]}),r.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-purple-50 border border-purple-100",children:[r.jsx("span",{className:"font-bold text-purple-700",children:"Platinum"}),r.jsxs("span",{className:"text-purple-600 text-xs text-right",children:["> ",S.Platinum?.toLocaleString()," LKR"]})]})]})]})]})]})]})}const mk={PENDING:{label:"Pending",color:"bg-amber-100 text-amber-700 border-amber-200",icon:Rr},SUPERVISOR_APPROVED:{label:"Supervisor Approved",color:"bg-blue-100 text-blue-700 border-blue-200",icon:et},TRANSFERRED_TO_MANAGER:{label:"Awaiting Payment",color:"bg-purple-100 text-purple-700 border-purple-200",icon:Pv},PROCESSING:{label:"Processing",color:"bg-cyan-100 text-cyan-700 border-cyan-200",icon:Ve},PAID:{label:"Paid",color:"bg-emerald-100 text-emerald-700 border-emerald-200",icon:et},REJECTED:{label:"Rejected",color:"bg-red-100 text-red-700 border-red-200",icon:Bt}},fm={URGENT:{label:"Urgent",color:"bg-red-500 text-white",order:1},HIGH:{label:"High",color:"bg-orange-500 text-white",order:2},NORMAL:{label:"Normal",color:"bg-blue-500 text-white",order:3},LOW:{label:"Low",color:"bg-gray-500 text-white",order:4}},Xse=[{value:"BANK_TRANSFER",label:"Bank Transfer",icon:Fa},{value:"CHEQUE",label:"Cheque",icon:sa},{value:"CASH",label:"Cash",icon:Xr}];function Zse(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState("pending"),[d,u]=g.useState(""),[m,h]=g.useState(null),[x,p]=g.useState(!1),[b,N]=g.useState(!1),[v,w]=g.useState({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),[S,A]=g.useState({pending:0,totalPending:0,paidToday:0}),E=g.useCallback(async()=>{a(!0);try{let L;if(l==="pending")L=await Bn.getManagerPaymentRequests();else if(l==="paid")L=await Bn.getPaymentRequestsByStatus("PAID");else{const[U,B,ee]=await Promise.all([Bn.getManagerPaymentRequests(),Bn.getPaymentRequestsByStatus("PAID"),Bn.getPaymentRequestsByStatus("REJECTED")]),X=[...U.data?.data||[],...B.data?.data||[],...ee.data?.data||[]];t(X),C(X),a(!1);return}const z=L.data?.data||L.data||[];t(Array.isArray(z)?z:[]),C(z)}catch(L){console.error("Failed to fetch payment requests:",L)}finally{a(!1)}},[l]),C=L=>{const z=L.filter(X=>X.status==="TRANSFERRED_TO_MANAGER"||X.status==="PROCESSING"),U=z.reduce((X,be)=>X+(parseFloat(be.amount)||0),0),B=new Date().toDateString(),ee=L.filter(X=>X.status==="PAID"&&X.processedAt&&new Date(X.processedAt).toDateString()===B).reduce((X,be)=>X+(parseFloat(be.amount)||0),0);A({pending:z.length,totalPending:U,paidToday:ee})};g.useEffect(()=>{E()},[E]);const O=async()=>{if(m){if(!v.paymentReference){alert("Please enter a payment reference");return}N(!0);try{await Bn.processPayment(m.requestId,{paymentMethod:v.paymentMethod,paymentReference:v.paymentReference,amountPaid:m.amount,notes:v.notes}),p(!1),h(null),w({paymentMethod:"BANK_TRANSFER",paymentReference:"",notes:""}),E()}catch(L){console.error("Payment processing failed:",L),alert(L.response?.data?.message||"Failed to process payment")}finally{N(!1)}}},k=async(L,z)=>{try{await Bn.rejectRequest(L,z||"Rejected by manager"),E()}catch(U){console.error("Rejection failed:",U),alert("Failed to reject request")}},_=L=>new Intl.NumberFormat("en-LK",{style:"currency",currency:"LKR",minimumFractionDigits:2}).format(L||0),T=L=>L?new Date(L).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"-",P=e.filter(L=>{if(!d)return!0;const z=d.toLowerCase();return L.grnNo?.toLowerCase().includes(z)||L.supplierName?.toLowerCase().includes(z)||L.invoiceNo?.toLowerCase().includes(z)}).sort((L,z)=>{const U=fm[L.priority]?.order||3,B=fm[z.priority]?.order||3;return U!==B?U-B:new Date(z.createdAt)-new Date(L.createdAt)});return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"GRN Payments"}),r.jsx("p",{className:"text-gray-500 mt-1",children:"Manage and process supplier payment requests"})]}),r.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(ir,{className:"w-4 h-4"}),"Refresh"]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[r.jsx("div",{className:"bg-gradient-to-br from-purple-500 to-indigo-600 rounded-xl p-5 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-purple-100 text-sm font-medium",children:"Pending Payments"}),r.jsx("p",{className:"text-3xl font-bold mt-1",children:S.pending})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:r.jsx(Rr,{className:"w-6 h-6"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-amber-500 to-orange-600 rounded-xl p-5 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-amber-100 text-sm font-medium",children:"Total Pending Amount"}),r.jsx("p",{className:"text-2xl font-bold mt-1",children:_(S.totalPending)})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:r.jsx(gn,{className:"w-6 h-6"})})]})}),r.jsx("div",{className:"bg-gradient-to-br from-emerald-500 to-teal-600 rounded-xl p-5 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-emerald-100 text-sm font-medium",children:"Paid Today"}),r.jsx("p",{className:"text-2xl font-bold mt-1",children:_(S.paidToday)})]}),r.jsx("div",{className:"w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center",children:r.jsx(et,{className:"w-6 h-6"})})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl p-4 border border-gray-200 flex flex-col md:flex-row gap-4",children:[r.jsx("div",{className:"flex gap-2",children:[{key:"pending",label:"Pending"},{key:"paid",label:"Paid"},{key:"all",label:"All"}].map(L=>r.jsx("button",{onClick:()=>o(L.key),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${l===L.key?"bg-indigo-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:L.label},L.key))}),r.jsxs("div",{className:"flex-1 relative",children:[r.jsx(er,{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),r.jsx("input",{type:"text",value:d,onChange:L=>u(L.target.value),placeholder:"Search by GRN No, Supplier, or Invoice...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:n?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx(Ve,{className:"w-8 h-8 text-indigo-600 animate-spin"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading payment requests..."})]}):P.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-100 flex items-center justify-center mx-auto mb-4",children:r.jsx(ps,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"No Payment Requests"}),r.jsx("p",{className:"text-gray-500 mt-1",children:l==="pending"?"No pending payment requests at the moment.":"No payment requests match your criteria."})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{className:"bg-gray-5 border-b border-gray-200",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"GRN / Invoice"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Supplier"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Request Date"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Amount"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Priority"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Paid Date"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Paid By"}),r.jsx("th",{className:"text-left px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"text-right px-6 py-3 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"divide-y divide-gray-100",children:P.map(L=>{const z=mk[L.status]||mk.PENDING,U=z.icon,B=fm[L.priority]||fm.NORMAL,ee=["TRANSFERRED_TO_MANAGER","PROCESSING"].includes(L.status);return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"font-semibold text-gray-800",children:L.grnNo}),r.jsx("div",{className:"text-sm text-gray-500",children:L.invoiceNo||"-"})]}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(_v,{className:"w-4 h-4 text-gray-400"}),r.jsx("span",{className:"text-gray-700",children:L.supplierName})]})}),r.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:T(L.createdAt)}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"font-bold text-gray-800",children:_(L.amount)})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:`px-2 py-1 text-xs font-bold rounded ${B.color}`,children:B.label})}),r.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:T(L.dueDate)?.split(",")[0]||"-"}),r.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:L.status==="PAID"?T(L.processedAt):"-"}),r.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:L.status==="PAID"?L.processedByName||"Manager":"-"}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("span",{className:`px-3 py-1 text-xs font-medium rounded-full border ${z.color}`,children:[r.jsx(U,{className:"w-3 h-3 inline mr-1"}),z.label]})}),r.jsxs("td",{className:"px-6 py-4 text-right",children:[ee&&r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>{h(L),p(!0)},className:"px-3 py-1.5 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg text-sm font-medium transition-colors",children:"Process Payment"}),r.jsx("button",{onClick:()=>{const X=prompt("Enter rejection reason:");X&&k(L.requestId,X)},className:"px-3 py-1.5 border border-red-200 text-red-600 hover:bg-red-50 rounded-lg text-sm font-medium transition-colors",children:"Reject"})]}),L.status==="PAID"&&r.jsx("span",{className:"text-sm text-emerald-600 font-medium",children:" Completed"}),L.status==="REJECTED"&&r.jsx("span",{className:"text-sm text-red-600 font-medium",children:" Rejected"})]})]},L.requestId)})})]})})}),x&&m&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-4 flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-bold text-white",children:"Process Payment"}),r.jsx("button",{onClick:()=>p(!1),className:"p-1 rounded hover:bg-white/20 text-white",children:r.jsx($e,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 mb-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("span",{className:"font-semibold text-gray-800",children:m.grnNo}),r.jsx("span",{className:"text-sm text-gray-600",children:m.invoiceNo})]}),r.jsx("div",{className:"text-sm text-gray-600",children:m.supplierName}),r.jsx("div",{className:"text-2xl font-bold text-emerald-700 mt-2",children:_(m.amount)})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Payment Method"}),r.jsx("div",{className:"grid grid-cols-3 gap-2",children:Xse.map(L=>{const z=L.icon;return r.jsxs("button",{onClick:()=>w(U=>({...U,paymentMethod:L.value})),className:`p-3 rounded-lg border-2 text-center transition-all ${v.paymentMethod===L.value?"border-emerald-500 bg-emerald-50 text-emerald-700":"border-gray-200 hover:border-gray-300 text-gray-600"}`,children:[r.jsx(z,{className:"w-5 h-5 mx-auto mb-1"}),r.jsx("span",{className:"text-xs font-medium",children:L.label})]},L.value)})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Payment Reference / Transaction ID *"}),r.jsx("input",{type:"text",value:v.paymentReference,onChange:L=>w(z=>({...z,paymentReference:L.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Enter reference number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-700 mb-1 block",children:"Notes (Optional)"}),r.jsx("textarea",{value:v.notes,onChange:L=>w(z=>({...z,notes:L.target.value})),rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-emerald-500 focus:border-emerald-500",placeholder:"Add payment notes..."})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:O,disabled:b||!v.paymentReference,className:"flex-1 px-4 py-2 bg-emerald-600 hover:bg-emerald-700 disabled:bg-emerald-400 text-white rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:b?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx(et,{className:"w-4 h-4"}),"Confirm Payment"]})})]})]})]})})]})}const Jse=async()=>(await me.get("/v1/admin/dashboard/user-stats")).data,fs=async()=>(await me.get("/v1/admin/branches")).data,ele=async e=>{try{return(await me.get(`/v1/admin/branches/${e}/summary`)).data}catch(t){if(t.response&&t.response.status===404){console.warn(`Branch summary not found for ${e}, using mock data.`);let n={id:e,name:"Branch "+e};try{n=(await me.get(`/v1/admin/branches/${e}`)).data}catch{}return{branch:n,users:[{userId:101,name:"Manager Mock",email:"manager@mock.com",role:"MANAGER",status:"Active"},{userId:102,name:"Cashier Mock",email:"cashier@mock.com",role:"CASHIER",status:"Active"}],userCount:2}}throw t}},tle=async()=>(await me.get("/v1/admin/dashboard/top-branches")).data,rle=async()=>(await me.get("/v1/admin/dashboard/customer-recurrence")).data,nle=async()=>(await me.get("/v1/admin/dashboard/top-managers")).data,ale=async e=>{try{return(await me.get(`/v1/admin/branches/${e}/realtime-sales`)).data}catch(t){if(t.response&&t.response.status===404)return{dailySales:Math.floor(Math.random()*15e4)+25e3,activeTerminals:Math.floor(Math.random()*5)+1,registeredCustomers:Math.floor(Math.random()*1e3)+200,totalTerminals:5};throw t}},xl=async()=>(await me.get("/v1/admin/users")).data,sle=async e=>(await me.get("/v1/admin/users/search",{params:{q:e}})).data,lle=async e=>(await me.post("/v1/admin/users/register-manager",e)).data,ile=async(e,t)=>(await me.put(`/v1/admin/users/${e}`,t)).data,ole=async e=>(await me.patch(`/v1/admin/users/${e}/toggle-status`)).data,cle=async e=>(await me.post("/v1/admin/branches",e)).data,dle=async(e,t)=>(await me.put(`/v1/admin/branches/${e}`,t)).data,ule=async e=>(await me.patch(`/v1/admin/branches/${e}/toggle-status`)).data,fle=async()=>(await me.get("/v1/admin/users/managers")).data,mle=async e=>(await me.get(`/v1/admin/branches/${e}/users`)).data,pd=async()=>(await me.get("/v1/admin/terminals")).data,hle=async e=>(await me.post("/v1/admin/terminals",e)).data,xle=async(e,t)=>(await me.put(`/v1/admin/terminals/${e}`,t)).data,ple=async e=>(await me.delete(`/v1/admin/terminals/${e}`)).data,gle=async e=>(await me.patch(`/v1/admin/terminals/${e}/toggle-status`)).data,hk=async(e={})=>(await me.get("/v1/admin/activity-logs",{params:e})).data,PR=async e=>{const t=localStorage.getItem("user");if(!t)throw new Error("Not authenticated");let n;try{const a=JSON.parse(t);n=a.username||a.email||a.name,!n&&a.sub&&(n=a.sub)}catch{throw new Error("Invalid user session data")}if(!n)throw new Error("Could not identify current user for verification");try{return(await me.post("/v1/auth/login",{username:n,password:e})).data}catch(a){throw a.response&&(a.response.status===401||a.response.status===403)?new Error("Incorrect password"):a}},ble=async(e,t)=>(await PR(t),(await me.delete(`/v1/admin/users/${e}`)).data),yle=async(e,t)=>(await PR(t),(await me.delete(`/v1/admin/branches/${e}`)).data),vle=async(e=null)=>{const t=e?`?status=${e}`:"";return(await me.get(`/v1/admin/password-requests${t}`)).data},jle=async()=>(await me.get("/v1/admin/password-requests/count")).data,Nle=async(e,t="")=>(await me.patch(`/v1/admin/password-requests/${e}/approve`,{adminNotes:t})).data,wle=async(e,t="")=>(await me.patch(`/v1/admin/password-requests/${e}/reject`,{adminNotes:t})).data,Sle="w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 text-gray-300 hover:bg-gray-800 hover:translate-x-1 hover:text-white",Ele="bg-brand-primary text-white shadow-lg translate-x-1",Yl=({to:e,icon:t,label:n,end:a=!1,badge:l=null})=>r.jsxs(kv,{to:e,end:a,className:({isActive:o})=>`${Sle} ${o?Ele:""}`,children:[r.jsx(t,{size:18,className:"shrink-0 transition-transform duration-200"}),r.jsx("span",{className:"text-sm flex-1",children:n}),l!==null&&l>0&&r.jsx("span",{className:"min-w-[20px] h-5 px-1.5 flex items-center justify-center bg-amber-500 text-white text-xs font-bold rounded-full animate-pulse shadow-sm",children:l})]});function Cle(){const[e,t]=g.useState(0);return g.useEffect(()=>{const n=async()=>{try{const l=await jle();t(l.pendingCount||0)}catch{}};n();const a=setInterval(n,3e4);return()=>clearInterval(a)},[]),r.jsxs("aside",{className:"w-72 shrink-0 bg-gray-900 text-white h-screen flex flex-col min-h-0",children:[r.jsxs("div",{className:"p-6 border-b border-gray-800",children:[r.jsxs("h1",{className:"text-xl font-bold",children:["SmartRetail ",r.jsx("span",{className:"text-emerald-400",children:"Pro"})]}),r.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Admin Dashboard"})]}),r.jsxs("nav",{className:"sidebar-scroll p-4 flex-1 min-h-0 overflow-y-auto",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Overview"}),r.jsx("div",{className:"mt-2 space-y-1",children:r.jsx(Yl,{to:"/admin",end:!0,icon:Uk,label:"Overview"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Administration"}),r.jsxs("div",{className:"mt-2 space-y-1",children:[r.jsx(Yl,{to:"/admin/users",icon:vs,label:"User Registration"}),r.jsx(Yl,{to:"/admin/branches",icon:_o,label:"Branch Management"}),r.jsx(Yl,{to:"/admin/terminals",icon:ex,label:"Terminals"}),r.jsx(Yl,{to:"/admin/password-requests",icon:qm,label:"Password Requests",badge:e})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Audit & Logs"}),r.jsx("div",{className:"mt-2 space-y-1",children:r.jsx(Yl,{to:"/admin/system-activity",icon:Ma,label:"System Activity"})})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"flex items-center px-3 py-2 text-xs font-bold text-gray-500 uppercase tracking-wider",children:"Reports"}),r.jsx("div",{className:"mt-2 space-y-1",children:r.jsx(Yl,{to:"/admin/reports",icon:sa,label:"Reports"})})]})]})]})}function Ale(){const e=ca(),[t,n]=g.useState(new Date),{unreadCount:a,setIsOpen:l}=ru(),o=localStorage.getItem("user");let d="Admin";if(o)try{const m=JSON.parse(o);d=m.username||m.name||"Admin"}catch{}g.useEffect(()=>{const m=setInterval(()=>n(new Date),1e3);return()=>clearInterval(m)},[]);const u=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e("/login")};return r.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center px-6 gap-4 shrink-0 shadow-sm",children:[r.jsxs("div",{className:"flex flex-col flex-1",children:[r.jsx("h1",{className:"font-bold text-lg text-slate-800",children:"Admin Dashboard"}),r.jsx("span",{className:"text-xs text-slate-500",children:"System Administration"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>e("/manager"),className:"group flex items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-emerald-50 rounded-lg text-sm font-medium transition-all duration-300 hover:shadow-[0_0_15px_rgba(16,185,129,0.3)] hover:border hover:border-emerald-200",children:[r.jsx(vs,{size:16,className:"text-slate-600 group-hover:text-emerald-600 transition-colors"}),r.jsx("span",{className:"hidden sm:inline text-slate-700 group-hover:text-emerald-700 transition-colors",children:"Manager"})]}),r.jsxs("button",{onClick:()=>e("/inventory"),className:"group flex items-center gap-2 px-3 py-2 bg-slate-100 hover:bg-blue-50 rounded-lg text-sm font-medium transition-all duration-300 hover:shadow-[0_0_15px_rgba(59,130,246,0.3)] hover:border hover:border-blue-200",children:[r.jsx(Ov,{size:16,className:"text-slate-600 group-hover:text-blue-600 transition-colors"}),r.jsx("span",{className:"hidden sm:inline text-slate-700 group-hover:text-blue-700 transition-colors",children:"Inventory"})]}),r.jsxs("button",{onClick:()=>l(!0),className:"p-2 rounded-full hover:bg-slate-100 transition-colors text-slate-600 relative",children:[r.jsx(ko,{className:"w-5 h-5"}),a>0&&r.jsx("span",{className:"absolute top-1 right-1 w-2.5 h-2.5 bg-red-500 rounded-full border-2 border-white animate-pulse"})]}),r.jsxs("div",{className:"text-right leading-tight",children:[r.jsx("div",{className:"font-mono text-lg font-bold tracking-wider text-slate-700",children:t.toLocaleTimeString("en-US",{hour12:!1})}),r.jsx("div",{className:"text-xs text-slate-400 uppercase font-bold tracking-wider",children:t.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"}).toUpperCase()})]}),r.jsxs("div",{className:"hidden lg:flex items-center gap-3 px-4 py-2 bg-white/80 backdrop-blur-md rounded-full border border-blue-100 shadow-[0_0_15px_rgba(59,130,246,0.15)] hover:shadow-[0_0_20px_rgba(59,130,246,0.25)] transition-all duration-300 group cursor-default",children:[r.jsx("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white text-xs font-bold shadow-md transform group-hover:scale-110 transition-transform duration-300 ring-2 ring-blue-100",children:d.charAt(0).toUpperCase()}),r.jsx("span",{className:"text-sm font-semibold text-slate-700 group-hover:text-blue-700 transition-colors",children:d})]}),r.jsxs("button",{type:"button",onClick:u,className:"group relative overflow-hidden flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 hover:border-red-100 text-slate-700 hover:text-red-600 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md hover:-translate-y-0.5",children:[r.jsx("div",{className:"absolute inset-0 bg-red-50 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsx(fi,{size:18,className:"relative z-10 transition-transform duration-300 group-hover:scale-110 group-hover:-translate-x-0.5"}),r.jsx("span",{className:"relative z-10 hidden sm:inline text-sm font-semibold",children:"Sign Out"})]})]})]})}function kle({children:e}){return r.jsxs(qv,{children:[r.jsxs("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(Cle,{}),r.jsxs("div",{className:"flex-1 flex flex-col h-screen overflow-hidden",children:[r.jsx(Ale,{}),r.jsx("main",{className:"flex-1 overflow-y-auto bg-gray-50 p-8",children:e})]})]}),r.jsx(p3,{})]})}function _le({branch:e,onClose:t}){const[n,a]=g.useState(e),[l,o]=g.useState(new Date),[d,u]=g.useState(!1);g.useEffect(()=>{const w=async()=>{const A=e?.branchId||e?.id;if(A)try{u(!0);const E=await ale(A);a(C=>({...C,dailySales:E.dailySales,activeTerminals:E.activeTerminals,registeredCustomers:E.registeredCustomers})),o(new Date)}catch(E){console.error("Failed to fetch real-time sales:",E)}finally{u(!1)}};w();const S=setInterval(w,1e4);return()=>clearInterval(S)},[e]);const m=w=>`LKR ${(w||0).toLocaleString()}`,h=w=>w.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),x=n?.users||[],p=x.filter(w=>w.status==="Active"||w.accountStatus==="ACTIVE").length,b=x.length,N=x.find(w=>(w.userId||w.id)===n?.managerId)||{name:n?.managerName},v=n?.isActive||n?.status==="Active";return r.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden animate-in fade-in zoom-in duration-200",children:[r.jsx("div",{className:"bg-gradient-to-r from-brand-primary to-brand-secondary p-6 text-white",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold",children:n?.name||"Branch"}),r.jsx("p",{className:"text-blue-200 text-sm",children:n?.address||n?.location||""})]}),r.jsx("button",{onClick:t,className:"w-10 h-10 bg-white/20 hover:bg-white/30 rounded-xl flex items-center justify-center transition-colors",children:r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"p-6 overflow-y-auto max-h-[calc(90vh-180px)]",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl p-5 mb-5",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-green-700 font-medium mb-1",children:"Daily Total Sales"}),r.jsx("div",{className:"text-3xl font-extrabold text-green-800",children:d?"...":m(n?.dailySales)})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"flex items-center gap-2 text-green-600 text-sm",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live Updates"]}),r.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Last: ",h(l)]})]})]})}),r.jsxs("div",{className:"mb-5",children:[r.jsx("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:"Assigned Manager"}),N?.name?r.jsxs("div",{className:"flex items-center gap-4 p-4 bg-blue-50 rounded-xl",children:[r.jsx("div",{className:"w-14 h-14 bg-brand-primary rounded-full flex items-center justify-center text-white text-xl font-bold",children:N.name.split(" ").map(w=>w[0]).join("").substring(0,2)}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"font-bold text-gray-800",children:N.name||N.fullName}),r.jsx("div",{className:"text-sm text-gray-500",children:N.email}),r.jsx("div",{className:"text-sm text-gray-500",children:N.phone})]}),r.jsx("div",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium",children:"Active"})]}):r.jsx("div",{className:"p-4 bg-gray-50 rounded-xl text-gray-500 text-center",children:"No manager assigned"})]}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-5",children:[r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-extrabold text-brand-primary",children:n?.activeTerminals||0}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Active Terminals"}),r.jsxs("div",{className:"text-xs text-gray-400",children:["of ",n?.totalTerminals||0," total"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-extrabold text-amber-600",children:n?.registeredCustomers||0}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Registered"}),r.jsx("div",{className:"text-xs text-gray-400",children:"Customers"})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-extrabold text-green-600",children:p}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Active Users"}),r.jsxs("div",{className:"text-xs text-gray-400",children:["of ",b," total"]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-4 text-center",children:[r.jsx("div",{className:"text-2xl font-extrabold text-purple-600",children:v?"Active":"Inactive"}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Branch Status"}),r.jsx("div",{className:`text-xs ${v?"text-green-500":"text-red-500"}`,children:v?"Operational":"Closed"})]})]}),r.jsxs("div",{children:[r.jsxs("h3",{className:"text-sm font-bold text-gray-500 uppercase tracking-wider mb-3",children:["Users in Branch (",b,")"]}),x.length>0?r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:x.map(w=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-9 h-9 bg-brand-soft rounded-full flex items-center justify-center text-brand-primary text-sm font-bold",children:(w.name||w.fullName||"U").split(" ").map(S=>S[0]).join("").substring(0,2)}),r.jsxs("div",{children:[r.jsx("div",{className:"font-medium text-gray-800 text-sm",children:w.name||w.fullName}),r.jsx("div",{className:"text-xs text-gray-500",children:w.role})]})]}),r.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${w.status==="Active"||w.accountStatus==="ACTIVE"?"bg-green-100 text-green-700":"bg-gray-200 text-gray-600"}`,children:w.status||w.accountStatus})]},w.userId||w.id))}):r.jsx("div",{className:"p-4 bg-gray-50 rounded-xl text-gray-500 text-center",children:"No users assigned to this branch"})]}),r.jsxs("div",{className:"mt-5 pt-4 border-t border-gray-100 flex items-center justify-between text-sm text-gray-500",children:[r.jsxs("span",{children:["Branch ID: ",n?.branchId||n?.id||n?.code]}),r.jsxs("span",{children:["Created: ",n?.createdAt?new Date(n.createdAt).toLocaleDateString():n?.openedAt||"N/A"]})]})]})]})})}function Ole(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null),[d,u]=g.useState(null),[m,h]=g.useState(null),[x,p]=g.useState(!1);g.useEffect(()=>{const E=async()=>{try{a(!0);const O=await fs();t(O||[]),o(null)}catch(O){console.error("Failed to fetch branches:",O),o("Failed to load branches")}finally{a(!1)}};E();const C=setInterval(E,6e4);return()=>clearInterval(C)},[]);const b=async E=>{const C=E.branchId||E.id;u(C),p(!0);try{const O=await ele(C);h({...O.branch,users:O.users,userCount:O.userCount})}catch(O){console.error("Failed to fetch branch summary:",O),h(E)}finally{p(!1)}},N=E=>`LKR ${(E||0).toLocaleString()}`,v=["from-blue-500 to-indigo-600","from-emerald-500 to-teal-600","from-violet-500 to-purple-600","from-amber-500 to-orange-600","from-rose-500 to-pink-600","from-cyan-500 to-blue-600","from-lime-500 to-green-600","from-fuchsia-500 to-purple-600"],w=["from-blue-50 to-indigo-50","from-emerald-50 to-teal-50","from-violet-50 to-purple-50","from-amber-50 to-orange-50","from-rose-50 to-pink-50","from-cyan-50 to-blue-50","from-lime-50 to-green-50","from-fuchsia-50 to-purple-50"],S=["border-blue-200 hover:border-blue-400","border-emerald-200 hover:border-emerald-400","border-violet-200 hover:border-violet-400","border-amber-200 hover:border-amber-400","border-rose-200 hover:border-rose-400","border-cyan-200 hover:border-cyan-400","border-lime-200 hover:border-lime-400","border-fuchsia-200 hover:border-fuchsia-400"];if(n)return r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx(_o,{size:20,className:"text-slate-600"}),r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Branch Overview"})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3].map(E=>r.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-5 animate-pulse",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-100 rounded w-1/2"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsx("div",{className:"h-16 bg-gray-100 rounded-lg"}),r.jsx("div",{className:"h-16 bg-gray-100 rounded-lg"}),r.jsx("div",{className:"h-16 bg-gray-100 rounded-lg"})]})]},E))})]});if(l)return r.jsx("div",{className:"lg:col-span-3",children:r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center",children:r.jsx("p",{className:"text-red-600 font-medium",children:l})})});const A=e.filter(E=>E.isActive||E.status==="Active").length;return r.jsxs("div",{className:"lg:col-span-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-5",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-200",children:r.jsx(_o,{size:20,className:"text-white"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Branch Overview"}),r.jsxs("p",{className:"text-sm text-gray-500",children:[A," active of ",e.length," total branches "," ",r.jsx("span",{className:"text-green-600 font-medium",children:"Click for details"})]})]})]}),r.jsx("div",{className:"flex items-center gap-2",children:r.jsxs("span",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-50 border border-green-200 rounded-full text-xs font-medium text-green-700",children:[r.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Live"]})})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map((E,C)=>{const O=E.branchId||E.id,k=E.name||E.branchName||"Branch",_=E.isActive||E.status==="Active",T=C%v.length,P=x&&d===O;return r.jsxs("button",{onClick:()=>b(E),disabled:P,className:`group relative text-left bg-gradient-to-br ${w[T]} border ${S[T]} rounded-2xl p-5 transition-all duration-300 hover:shadow-xl hover:shadow-blue-100/50 hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:opacity-70`,children:[P&&r.jsx("div",{className:"absolute inset-0 bg-white/80 backdrop-blur-sm rounded-2xl flex items-center justify-center z-10",children:r.jsx(Ve,{size:24,className:"animate-spin text-blue-600"})}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${v[T]} rounded-xl flex items-center justify-center text-white font-bold text-lg shadow-lg transition-transform duration-300 group-hover:scale-110`,children:k.charAt(0)}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-800 group-hover:text-gray-900 transition-colors text-sm",children:k}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[r.jsx(Km,{size:12}),r.jsx("span",{className:"truncate max-w-[120px]",children:E.address||E.location||""})]})]})]}),r.jsxs("div",{className:"flex flex-col items-end gap-1",children:[r.jsx("span",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold ${_?"bg-green-100 text-green-700 border border-green-200":"bg-red-100 text-red-600 border border-red-200"}`,children:_?"ACTIVE":"INACTIVE"}),r.jsx(wo,{size:16,className:"text-gray-400 group-hover:text-gray-600 transition-all duration-300 group-hover:translate-x-1"})]})]}),r.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border border-white/50",children:[r.jsx(Hn,{size:14,className:"mx-auto mb-1 text-green-600"}),r.jsx("div",{className:"text-xs font-extrabold text-gray-800 leading-tight",children:N(E.dailySales)}),r.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:"Today Sales"})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border border-white/50",children:[r.jsx(ex,{size:14,className:"mx-auto mb-1 text-blue-600"}),r.jsx("div",{className:"text-sm font-extrabold text-gray-800",children:E.activeTerminals||E.totalTerminals||0}),r.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:"Terminals"})]}),r.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-3 text-center border border-white/50",children:[r.jsx(vs,{size:14,className:"mx-auto mb-1 text-purple-600"}),r.jsx("div",{className:"text-sm font-extrabold text-gray-800",children:E.userCount||E.totalUsers||0}),r.jsx("div",{className:"text-[10px] text-gray-500 mt-0.5",children:"Staff"})]})]}),r.jsxs("div",{className:"mt-3 pt-3 border-t border-white/50 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-6 h-6 rounded-full bg-gradient-to-br ${v[T]} flex items-center justify-center text-white text-[10px] font-bold`,children:(E.managerName||"N")[0]}),r.jsx("span",{className:"text-xs text-gray-600 truncate max-w-[130px]",children:E.managerName||"No manager"})]}),r.jsxs("span",{className:"text-[10px] text-gray-400 flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx(Ma,{size:10}),"View Details"]})]})]},O)})}),m&&r.jsx(_le,{branch:m,onClose:()=>{h(null),u(null)}})]})}const mm=({label:e,count:t,color:n})=>r.jsxs("div",{className:`flex flex-col items-center justify-center p-4 rounded-xl ${n} transition-transform hover:scale-105`,children:[r.jsx("div",{className:"text-2xl font-extrabold text-gray-800",children:(t||0).toLocaleString()}),r.jsx("div",{className:"text-sm font-medium text-gray-600 text-center",children:e})]});function Tle(){const[e,t]=g.useState({totalUsers:0,loyaltyCustomers:0,managers:0,cashiers:0,storeKeepers:0,admins:0}),[n,a]=g.useState(!0),[l,o]=g.useState(null);return g.useEffect(()=>{(async()=>{try{a(!0);const u=await Jse();t(u),o(null)}catch(u){console.error("Failed to fetch user stats:",u),o("Failed to load user statistics")}finally{a(!1)}})()},[]),n?r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-5"}),r.jsx("div",{className:"grid grid-cols-2 gap-3",children:[1,2,3,4].map(d=>r.jsx("div",{className:"h-20 bg-gray-100 rounded-xl"},d))})]}):l?r.jsx("div",{className:"bg-white border border-red-200 rounded-2xl shadow-sm p-6",children:r.jsx("p",{className:"text-red-600 font-medium",children:l})}):r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-5",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Users by Role"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Total registered: ",e.totalUsers]})]})}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsx(mm,{label:"Loyalty Customers",count:e.loyaltyCustomers,color:"bg-gradient-to-br from-amber-100 to-amber-50"}),r.jsx(mm,{label:"Managers",count:e.managers,color:"bg-gradient-to-br from-blue-100 to-blue-50"}),r.jsx(mm,{label:"Cashiers",count:e.cashiers,color:"bg-gradient-to-br from-green-100 to-green-50"}),r.jsx(mm,{label:"Store Keepers",count:e.storeKeepers,color:"bg-gradient-to-br from-purple-100 to-purple-50"})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"System Admins"}),r.jsx("span",{className:"font-bold text-brand-primary",children:e.admins})]})})]})}const cy=["#1F3C88","#2563EB","#16A34A","#F59E0B","#EF4444"];function Rle(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);g.useEffect(()=>{(async()=>{try{a(!0);const m=await tle();t(m),o(null)}catch(m){console.error("Failed to fetch top branches:",m),o("Failed to load data")}finally{a(!1)}})()},[]);const d=u=>`LKR ${((u||0)/1e3).toFixed(0)}K`;return n?r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-5"}),r.jsx("div",{className:"h-64 bg-gray-100 rounded"})]}):l?r.jsx("div",{className:"bg-white border border-red-200 rounded-2xl shadow-sm p-6",children:r.jsx("p",{className:"text-red-600 font-medium",children:l})}):r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-5",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Top Performing Branches"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Today's sales comparison"})]})}),e.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{width:"100%",height:"280px"},children:r.jsx(dj,{width:"100%",height:"100%",children:r.jsxs(TR,{data:e,layout:"vertical",margin:{top:5,right:30,left:20,bottom:5},children:[r.jsx(t0,{type:"number",tickFormatter:d,tick:{fill:"#6B7280",fontSize:12},axisLine:!1,tickLine:!1}),r.jsx(r0,{type:"category",dataKey:"branchName",tick:{fill:"#374151",fontSize:12,fontWeight:500},axisLine:!1,tickLine:!1,width:100}),r.jsx(f1,{formatter:u=>[`LKR ${(u||0).toLocaleString()}`,"Sales"],contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},cursor:{fill:"rgba(31, 60, 136, 0.1)"}}),r.jsx(y1,{dataKey:"totalSales",radius:[0,8,8,0],barSize:32,children:e.map((u,m)=>r.jsx(Jx,{fill:cy[m%cy.length]},`cell-${m}`))})]})})}),r.jsx("div",{className:"flex flex-wrap gap-3 mt-4 pt-4 border-t border-gray-100",children:e.slice(0,3).map((u,m)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:cy[m]}}),r.jsxs("span",{className:"text-xs text-gray-600",children:[m+1,". ",u.branchName]})]},u.branchId||u.branchName||m))})]}):r.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No data available"})]})}const xk=["#8B5CF6","#A78BFA","#C4B5FD","#DDD6FE","#EDE9FE"];function Ple(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);if(g.useEffect(()=>{(async()=>{try{a(!0);const h=await rle();t(h),o(null)}catch(h){console.error("Failed to fetch customer recurrence:",h),o("Failed to load data")}finally{a(!1)}})()},[]),n)return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-5"}),r.jsx("div",{className:"h-64 bg-gray-100 rounded"})]});if(l)return r.jsx("div",{className:"bg-white border border-red-200 rounded-2xl shadow-sm p-6",children:r.jsx("p",{className:"text-red-600 font-medium",children:l})});const d=e.length>0?Math.round(e.reduce((m,h)=>m+(h.recurrenceRate||0),0)/e.length):0,u=e.reduce((m,h)=>m+(h.totalVisits||0),0);return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-5",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Customer Recurrence Rate"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Repeat customer visits by branch"})]})}),e.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{width:"100%",height:"280px"},children:r.jsx(dj,{width:"100%",height:"100%",children:r.jsxs(TR,{data:e,margin:{top:20,right:30,left:20,bottom:5},children:[r.jsx(t0,{dataKey:"name",tick:{fill:"#374151",fontSize:11},axisLine:!1,tickLine:!1,interval:0,angle:-15,textAnchor:"end",height:60}),r.jsx(r0,{tick:{fill:"#6B7280",fontSize:12},axisLine:!1,tickLine:!1,domain:[0,100],tickFormatter:m=>`${m}%`}),r.jsx(f1,{formatter:(m,h)=>h==="recurrenceRate"?[`${m}%`,"Recurrence Rate"]:[(m||0).toLocaleString(),"Total Visits"],contentStyle:{backgroundColor:"#fff",border:"1px solid #e5e7eb",borderRadius:"12px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)"},cursor:{fill:"rgba(139, 92, 246, 0.1)"}}),r.jsxs(y1,{dataKey:"recurrenceRate",radius:[8,8,0,0],barSize:40,children:[e.map((m,h)=>r.jsx(Jx,{fill:xk[h%xk.length]},`cell-${h}`)),r.jsx(Nd,{dataKey:"recurrenceRate",position:"top",formatter:m=>`${m}%`,fill:"#374151",fontSize:12,fontWeight:600})]})]})})}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 pt-4 border-t border-gray-100",children:[r.jsxs("div",{className:"text-center",children:[r.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[d,"%"]}),r.jsx("div",{className:"text-xs text-gray-500",children:"Avg. Recurrence"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-600",children:u.toLocaleString()}),r.jsx("div",{className:"text-xs text-gray-500",children:"Total Visits Today"})]})]})]}):r.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:"No data available"})]})}const Dle=["#FFD700","#C0C0C0","#CD7F32"],Mle=({manager:e,rank:t})=>{const n=t<=3,a=Dle[t-1],l=(e.name||e.fullName||"").split(" ").map(o=>o[0]).join("").substring(0,2);return r.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-xl transition-all hover:shadow-md ${t===1?"bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200":"bg-gray-50 hover:bg-gray-100"}`,children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-white font-bold text-lg ${t===1?"bg-gradient-to-br from-amber-400 to-amber-600":t===2?"bg-gradient-to-br from-gray-300 to-gray-500":t===3?"bg-gradient-to-br from-amber-600 to-amber-800":"bg-brand-primary"}`,children:l}),n&&r.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold border-2 border-white",style:{backgroundColor:a},children:t})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("span",{className:"font-bold text-gray-800 truncate",children:e.name||e.fullName})}),r.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.branch||e.branchName})]}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:"font-bold text-green-600",children:["LKR ",((e.sales||0)/1e3).toFixed(0),"K"]}),r.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500 justify-end",children:[r.jsxs("span",{children:[e.rating||0," rating"]}),r.jsx("span",{className:"text-gray-300",children:"|"}),r.jsxs("span",{children:[e.transactions||0," txns"]})]})]})]})};function Ile(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState(null);if(g.useEffect(()=>{(async()=>{try{a(!0);const m=await nle();t(m),o(null)}catch(m){console.error("Failed to fetch top managers:",m),o("Failed to load data")}finally{a(!1)}})()},[]),n)return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-5"}),r.jsx("div",{className:"space-y-3",children:[1,2,3,4,5].map(u=>r.jsx("div",{className:"h-16 bg-gray-100 rounded-xl"},u))})]});if(l)return r.jsx("div",{className:"bg-white border border-red-200 rounded-2xl shadow-sm p-6",children:r.jsx("p",{className:"text-red-600 font-medium",children:l})});const d=e.reduce((u,m)=>u+(m.sales||0),0);return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-5",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Top Performing Managers"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Based on today's sales"})]})}),e.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"space-y-3",children:e.map((u,m)=>r.jsx(Mle,{manager:u,rank:m+1},u.userId||u.id||m))}),r.jsx("div",{className:"mt-5 pt-4 border-t border-gray-100",children:r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-500",children:"Total Manager Sales Today"}),r.jsxs("span",{className:"font-bold text-brand-primary",children:["LKR ",d.toLocaleString()]})]})})]}):r.jsx("div",{className:"py-8 text-center text-gray-500",children:"No data available"})]})}const hm=({label:e,onClick:t,color:n="brand"})=>{const a={brand:"bg-brand-primary hover:bg-brand-secondary text-white",green:"bg-green-600 hover:bg-green-700 text-white",amber:"bg-amber-500 hover:bg-amber-600 text-white",purple:"bg-purple-600 hover:bg-purple-700 text-white"};return r.jsx("button",{onClick:t,className:`flex items-center justify-center p-4 rounded-xl ${a[n]} font-medium transition-all hover:shadow-lg hover:-translate-y-0.5 text-center`,children:e})};function Lle(){const e=ca();return r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-6",children:[r.jsx("div",{className:"flex items-center justify-between mb-5",children:r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Quick Actions"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Admin control panel shortcuts"})]})}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[r.jsx(hm,{label:"Manage Users",onClick:()=>e("/admin/users"),color:"brand"}),r.jsx(hm,{label:"Manage Branches",onClick:()=>e("/admin/branches"),color:"green"}),r.jsx(hm,{label:"Terminals",onClick:()=>e("/admin/terminals"),color:"amber"}),r.jsx(hm,{label:"Reports",onClick:()=>e("/admin/reports"),color:"purple"})]})]})}function pk(){return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-extrabold text-gray-800",children:"Admin Dashboard"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"System-wide overview and performance metrics"})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:r.jsx(Ole,{})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-5",children:[r.jsx(Tle,{}),r.jsx(Ile,{}),r.jsx(Lle,{})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-5",children:[r.jsx(Rle,{}),r.jsx(Ple,{})]})]})}function DR({isOpen:e,onClose:t,onConfirm:n,title:a="Confirm Action",description:l="This action requires admin password verification.",actionLabel:o="Confirm",loading:d=!1}){const[u,m]=g.useState(""),[h,x]=g.useState(!1),[p,b]=g.useState("");if(!e)return null;const N=w=>{if(w.preventDefault(),!u.trim()){b("Password is required");return}b(""),n(u)},v=()=>{m(""),b(""),x(!1),t()};return ys.createPortal(r.jsxs("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-[400] p-4",onClick:v,children:[r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-md overflow-hidden animate-in",onClick:w=>w.stopPropagation(),style:{animation:"modalSlideIn 0.25s ease-out"},children:[r.jsxs("div",{className:"bg-gradient-to-r from-red-500 via-red-600 to-rose-600 p-5 text-white relative overflow-hidden",children:[r.jsxs("div",{className:"absolute inset-0 opacity-10",children:[r.jsx("div",{className:"absolute -right-8 -top-8 w-32 h-32 rounded-full bg-white/20"}),r.jsx("div",{className:"absolute -left-4 -bottom-4 w-24 h-24 rounded-full bg-white/10"})]}),r.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center",children:r.jsx(Ng,{size:22})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold",children:a}),r.jsx("p",{className:"text-red-200 text-xs",children:"Security Verification Required"})]})]}),r.jsx("button",{onClick:v,className:"w-8 h-8 bg-white/20 hover:bg-white/30 rounded-lg flex items-center justify-center transition-colors",children:r.jsx($e,{size:16})})]})]}),r.jsxs("form",{onSubmit:N,className:"p-6 space-y-5",children:[r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-lg flex items-center justify-center flex-shrink-0 mt-0.5",children:r.jsx(Ng,{size:16,className:"text-red-600"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-red-800 font-medium",children:" Destructive Action"}),r.jsx("p",{className:"text-xs text-red-600 mt-1 leading-relaxed",children:l})]})]})}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-bold text-slate-700 flex items-center gap-2 mb-2",children:[r.jsx(ui,{size:14,className:"text-slate-500"}),"Enter Admin Password"]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:h?"text":"password",value:u,onChange:w=>{m(w.target.value),b("")},placeholder:"Enter your admin password...",className:`w-full px-4 py-3 pr-12 rounded-xl border-2 outline-none transition-all duration-200 text-sm font-medium ${p?"border-red-300 bg-red-50 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-slate-200 bg-slate-50 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:bg-white"}`,autoFocus:!0,autoComplete:"current-password"}),r.jsx("button",{type:"button",onClick:()=>x(!h),className:"absolute right-3 top-1/2 -translate-y-1/2 p-1 text-slate-400 hover:text-slate-600 transition-colors",children:h?r.jsx(my,{size:18}):r.jsx(di,{size:18})})]}),p&&r.jsxs("p",{className:"text-xs text-red-600 mt-2 flex items-center gap-1 font-medium",children:[r.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),p]})]}),r.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[r.jsx("button",{type:"button",onClick:v,className:"flex-1 py-3 rounded-xl bg-slate-100 hover:bg-slate-200 text-slate-700 font-semibold text-sm transition-all duration-200",disabled:d,children:"Cancel"}),r.jsx("button",{type:"submit",disabled:d||!u.trim(),className:"flex-1 py-3 rounded-xl bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white font-semibold text-sm transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shadow-md hover:shadow-lg",children:d?r.jsxs(r.Fragment,{children:[r.jsx(Ve,{size:16,className:"animate-spin"}),"Verifying..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Ng,{size:16}),o]})})]})]})]}),r.jsx("style",{children:`
        @keyframes modalSlideIn {
          from { opacity: 0; transform: scale(0.95) translateY(10px); }
          to { opacity: 1; transform: scale(1) translateY(0); }
        }
      `})]}),document.body)}function zle(){const[e,t]=g.useState([]),[n,a]=g.useState([]),[l,o]=g.useState(!0),[d,u]=g.useState(!1),[m,h]=g.useState(null),[x,p]=g.useState(""),[b,N]=g.useState(""),[v,w]=g.useState(""),[S,A]=g.useState(""),[E,C]=g.useState(""),[O,k]=g.useState(""),[_,T]=g.useState(null),[P,L]=g.useState(null),[z,U]=g.useState(null),[B,ee]=g.useState({top:0,left:0}),[X,be]=g.useState(!1),G=g.useRef({}),J=g.useRef(null),[$,q]=g.useState({open:!1,userId:null,userName:""}),[se,I]=g.useState(!1),M=ae=>{if(_===ae)T(null);else{const we=G.current[ae];if(we){const Be=we.getBoundingClientRect();ee({top:Be.bottom+window.scrollY+4,left:Be.left+window.scrollX-120})}T(ae)}};g.useEffect(()=>{(async()=>{try{o(!0);const[we,Be]=await Promise.all([xl(),fs()]);t(we||[]),a(Be||[]),Be?.length>0&&C("")}catch(we){console.error("Error fetching data:",we),h("Failed to load data")}finally{o(!1)}})()},[]),g.useEffect(()=>{if(J.current&&clearTimeout(J.current),!O.trim()){(async()=>{try{const we=await xl();t(we||[])}catch(we){console.error("Error fetching users:",we)}})();return}return J.current=setTimeout(async()=>{try{u(!0);const ae=await sle(O.trim());t(ae||[])}catch(ae){console.error("Error searching users:",ae)}finally{u(!1)}},300),()=>{J.current&&clearTimeout(J.current)}},[O]);function H(){p(""),N(""),w(""),A(""),C(""),L(null)}function oe(ae){L(ae),p(ae.fullName||ae.full_name||""),N(ae.username||""),w(ae.email||""),A(ae.employeeId||ae.employee_id||"");const we=ae.branch?.branchId||ae.branch?.id||ae.branchId||ae.branch_id||"";C(we),T(null)}async function K(ae){if(ae.preventDefault(),!x.trim()||!v.trim())return alert("Full name and email are required");try{be(!0);const we=P.userId||P.user_id||P.id;await ile(we,{fullName:x.trim(),email:v.trim(),employeeId:S.trim(),branchId:E});const Be=await xl();t(Be||[]),H()}catch(we){console.error("Error updating user:",we),alert("Failed to update user. Please try again.")}finally{be(!1)}}function pe(ae){const we=e.find(Be=>(Be.userId||Be.id)===ae);q({open:!0,userId:ae,userName:we?.fullName||we?.username||"this user"}),T(null)}async function V(ae){try{I(!0),await ble($.userId,ae);const we=await xl();t(we||[]),q({open:!1,userId:null,userName:""})}catch(we){console.error("Error deleting user:",we),alert(we?.response?.data?.message||we.message||"Incorrect password or failed to delete user.")}finally{I(!1)}}async function xe(ae){ae.preventDefault();const we=x.trim(),Be=b.trim(),tt=v.trim(),kr=S.trim();if(!we||!Be||!tt){alert("Full name, username and email are required.");return}try{be(!0),await lle({fullName:we,username:Be,email:tt,employeeId:kr,branchId:E||null,role:"BRANCH_MANAGER",status:"ACTIVE"});const tr=await xl();t(tr||[]),H()}catch(tr){console.error("Error registering manager:",tr);const an=tr.response?.data?.message||tr.message||"Unknown error";an.toLowerCase().includes("username")?alert("Username already exists. Please choose another."):an.toLowerCase().includes("employee")?alert("Employee ID already exists. Please use a different ID."):an.toLowerCase().includes("email")?alert("Email already exists. Please use a different email address."):alert(`Failed to register manager: ${an}`)}finally{be(!1)}}async function Z(ae){try{await ole(ae);const we=await xl();t(we||[]),T(null)}catch(we){console.error("Error toggling status:",we),alert("Failed to update user status. Please try again.")}}if(l)return r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-brand-primary"})});if(m)return r.jsx("div",{className:"flex items-center justify-center h-64 text-red-500",children:m});const ne=ae=>ae.userId||ae.user_id||ae.id,Se=ae=>ae.accountStatus||ae.account_status||ae.status||"INACTIVE",W=ae=>ae==="ACTIVE"||ae==="Active";return r.jsxs("div",{className:"space-y-4",onClick:()=>T(null),children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"User Management"}),r.jsxs("p",{className:"text-sm text-brand-muted",children:["Admin can register ",r.jsx("span",{className:"font-bold",children:"Managers only"}),". New managers are created as ",r.jsx("span",{className:"font-bold",children:"Active"}),". Search any user by Employee ID or Name."]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`lg:col-span-1 bg-white border rounded-2xl shadow-sm p-5 transition-all duration-300 ${P?"border-blue-400 ring-2 ring-blue-100":"border-brand-border"}`,children:[P&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 px-3 py-2 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx(Fn,{size:16,className:"text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Editing: ",P.fullName||P.full_name]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Iv,{size:18,className:"text-brand-primary"}),r.jsx("span",{className:"font-bold",children:P?"Edit User":"Register New Manager"})]}),P&&r.jsx("button",{type:"button",onClick:H,className:"text-gray-400 hover:text-gray-600",children:r.jsx($e,{size:18})})]}),r.jsxs("form",{onSubmit:P?K:xe,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Full Name"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",value:x,onChange:ae=>p(ae.target.value),placeholder:"e.g., Nimal Perera"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Username"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary disabled:bg-gray-100 disabled:text-gray-500",value:b,onChange:ae=>N(ae.target.value),placeholder:"e.g., nimal",disabled:!!P})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Employee ID"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",value:S,onChange:ae=>A(ae.target.value),placeholder:"e.g., EMP001"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Email"}),r.jsx("input",{type:"email",className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",value:v,onChange:ae=>w(ae.target.value),placeholder:"e.g., nimal@smartretailpro.lk"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Branch"}),r.jsxs("select",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",value:E,onChange:ae=>C(ae.target.value),children:[r.jsx("option",{value:"",children:"Select Branch (Optional)"}),n.map(ae=>r.jsx("option",{value:ae.id||ae.branchId||ae.branch_id,children:ae.name||ae.branchName||ae.branch_name},ae.id||ae.branchId||ae.branch_id))]})]}),!P&&r.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-3",children:r.jsxs("p",{className:"text-xs text-indigo-700",children:[r.jsx("span",{className:"font-bold",children:"Role:"})," Manager (Admin can only register Managers)"]})}),r.jsxs("button",{type:"submit",disabled:X,className:"w-full py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[X&&r.jsx(Ve,{size:16,className:"animate-spin"}),P?"Save Changes":"Register Manager"]})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-white border border-brand-border rounded-2xl shadow-sm overflow-visible",children:[r.jsxs("div",{className:"p-5 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsx("div",{className:"font-bold",children:"All Users"}),r.jsxs("div",{className:"relative",children:[r.jsx(er,{size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),r.jsx("input",{value:O,onChange:ae=>k(ae.target.value),placeholder:"Search by Employee ID or Name...",className:"w-full sm:w-80 pl-9 pr-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary"}),d&&r.jsx(Ve,{size:16,className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 animate-spin"})]})]}),r.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-3",children:"User"}),r.jsx("th",{className:"text-left p-3",children:"Employee ID"}),r.jsx("th",{className:"text-left p-3",children:"Role"}),r.jsx("th",{className:"text-left p-3",children:"Branch"}),r.jsx("th",{className:"text-center p-3",children:"Status"}),r.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),r.jsxs("tbody",{children:[e.map(ae=>{const we=ne(ae),Be=Se(ae);return r.jsxs("tr",{className:"border-t hover:bg-slate-50",children:[r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-indigo-100 text-indigo-600",children:r.jsx(tn,{size:18})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-bold text-gray-900",children:ae.fullName||ae.full_name}),r.jsxs("span",{className:"text-xs text-gray-500",children:["@",ae.username,"  ",ae.email]})]})]})}),r.jsx("td",{className:"p-3 font-mono text-gray-600",children:ae.employeeId||ae.employee_id||"-"}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${(ae.role||"").toUpperCase()==="MANAGER"||(ae.role||"").toUpperCase()==="BRANCH_MANAGER"?"bg-purple-100 text-purple-700":(ae.role||"").toUpperCase()==="CASHIER"?"bg-blue-100 text-blue-700":(ae.role||"").toUpperCase()==="ADMIN"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:ae.role||"N/A"})}),r.jsx("td",{className:"p-3",children:ae.branch?.name||ae.branchName||ae.branch_name||"-"}),r.jsx("td",{className:"p-3 text-center",children:r.jsx("span",{className:`text-xs px-3 py-1 rounded-full font-bold ${W(Be)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:Be})}),r.jsx("td",{className:"p-3 text-right relative",children:r.jsx("button",{ref:tt=>G.current[we]=tt,onClick:tt=>{tt.stopPropagation(),M(we)},className:"p-2 hover:bg-gray-100 rounded-lg transition",children:r.jsx(Zh,{size:18})})})]},we)}),e.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"p-6 text-center text-brand-muted",children:"No users found"})})]})]})})]})]}),_&&ys.createPortal(r.jsxs("div",{className:"fixed bg-white border border-gray-200 rounded-xl shadow-lg py-1 min-w-[160px] z-[200]",style:{top:B.top,left:B.left},onClick:ae=>ae.stopPropagation(),children:[r.jsxs("button",{onClick:()=>{const ae=e.find(we=>ne(we)===_);U(ae),T(null)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(di,{size:16,className:"text-gray-500"}),"View Details"]}),r.jsxs("button",{onClick:()=>oe(e.find(ae=>ne(ae)===_)),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Fn,{size:16,className:"text-blue-500"}),"Edit User"]}),r.jsxs("button",{onClick:()=>{Z(_)},className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ed,{size:16,className:"text-orange-500"}),W(Se(e.find(ae=>ne(ae)===_)))?"Deactivate":"Activate"]}),r.jsxs("button",{onClick:()=>pe(_),className:"w-full px-4 py-2 text-left text-sm hover:bg-gray-50 flex items-center gap-2 text-red-600",children:[r.jsx(en,{size:16}),"Delete User"]})]}),document.body),z&&ys.createPortal(r.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[300]",children:r.jsxs("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-bold",children:"User Details"}),r.jsx("button",{onClick:()=>U(null),className:"p-2 hover:bg-gray-100 rounded-lg",children:r.jsx($e,{size:20})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[r.jsx("div",{className:"p-3 rounded-xl bg-indigo-100 text-indigo-600",children:r.jsx(tn,{size:24})}),r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-lg",children:z.fullName||z.full_name}),r.jsxs("div",{className:"text-sm text-gray-500",children:["@",z.username]})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[r.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl",children:[r.jsx("div",{className:"text-gray-500 text-xs",children:"Employee ID"}),r.jsx("div",{className:"font-medium font-mono",children:z.employeeId||z.employee_id||"-"})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl",children:[r.jsx("div",{className:"text-gray-500 text-xs",children:"Email"}),r.jsx("div",{className:"font-medium truncate",children:z.email})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl",children:[r.jsx("div",{className:"text-gray-500 text-xs",children:"Role"}),r.jsx("div",{className:"font-medium",children:z.role})]}),r.jsxs("div",{className:"bg-gray-50 p-3 rounded-xl",children:[r.jsx("div",{className:"text-gray-500 text-xs",children:"Branch"}),r.jsx("div",{className:"font-medium",children:z.branch?.name||z.branchName||z.branch_name||"-"})]}),r.jsxs("div",{className:"col-span-2 bg-gray-50 p-3 rounded-xl",children:[r.jsx("div",{className:"text-gray-500 text-xs",children:"Status"}),r.jsx("div",{className:`font-medium ${W(Se(z))?"text-green-600":"text-red-600"}`,children:Se(z)})]})]})]}),r.jsx("button",{onClick:()=>U(null),className:"w-full mt-4 py-2 rounded-xl bg-gray-100 hover:bg-gray-200 font-medium transition",children:"Close"})]})}),document.body),r.jsx(DR,{isOpen:$.open,onClose:()=>q({open:!1,userId:null,userName:""}),onConfirm:V,actionLabel:`Delete user "${$.userName}"`,loading:se})]})}function Ble(){return r.jsxs("div",{className:"space-y-4",children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Reports"}),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5",children:[r.jsx("div",{className:"font-bold mb-1",children:"Coming soon"}),r.jsx("p",{className:"text-sm text-brand-muted",children:"Add Daily Sales, Stock Reports, Export PDF/Excel later."})]})]})}const $le=e=>{const t=e.toUpperCase();return t.includes("ERROR")||t.includes("CRITICAL")||t.includes("DELETE")?"bg-brand-danger":t.includes("WARNING")||t.includes("UPDATE")?"bg-brand-warning":t.includes("LOGIN")||t.includes("CREATE")?"bg-brand-success":"bg-slate-500"};function Ule(){const[e,t]=g.useState(""),[n,a]=g.useState("All"),[l,o]=g.useState("All"),[d,u]=g.useState([]),[m,h]=g.useState([]),[x,p]=g.useState([]),[b,N]=g.useState(!0),[v,w]=g.useState(null);g.useEffect(()=>{(async()=>{try{N(!0);const[T,P,L]=await Promise.all([hk(),fs(),xl()]);u(T||[]),h(P||[]),p(L||[])}catch(T){console.error("Error fetching data:",T),w("Failed to load activity logs")}finally{N(!1)}})()},[]);async function S(){try{N(!0);const _={};n!=="All"&&(_.type=n),l!=="All"&&(_.branchId=l);const T=await hk(_);u(T||[])}catch(_){console.error("Error refreshing logs:",_)}finally{N(!1)}}const A=_=>{if(!_)return"-";const T=m.find(P=>(P.id||P.branchId)===_);return T?T.name||T.branchName:"Unknown Branch"},E=_=>{if(!_)return"-";const T=x.find(P=>(P.userId||P.id)===_);return T?T.fullName||T.username:`User ${_}`},C=_=>_.id||_.branchId||_.branch_id,O=_=>_.name||_.branchName||_.branch_name,k=d.filter(_=>{const T=n==="All"?!0:_.activityType===n,P=l==="All"?!0:_.branchId==l;if(!T||!P)return!1;const L=e.trim().toLowerCase();if(!L)return!0;const z=(_.createdAt||"").toLowerCase(),U=E(_.userId||_.performedBy).toLowerCase(),B=(_.description||"").toLowerCase(),ee=(_.activityType||"").toLowerCase(),X=A(_.branchId).toLowerCase();return z.includes(L)||U.includes(L)||ee.includes(L)||B.includes(L)||X.includes(L)});return b?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-brand-primary"})}):v?r.jsx("div",{className:"flex items-center justify-center h-64 text-red-500",children:v}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-3",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"System Activity (Merged Logs)"}),r.jsx("p",{className:"text-sm text-brand-muted",children:"Includes system actions and login history in one place."})]}),r.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[r.jsx("button",{type:"button",onClick:S,className:"hidden sm:inline-flex items-center justify-center px-3 py-2 rounded-xl bg-slate-100 border border-brand-border hover:bg-slate-200 transition text-sm font-bold",children:"Refresh"}),r.jsxs("select",{value:n,onChange:_=>a(_.target.value),className:"w-40 px-3 py-2 rounded-xl border border-brand-border bg-white text-sm",children:[r.jsx("option",{children:"All"}),r.jsx("option",{value:"LOGIN",children:"Login"}),r.jsx("option",{value:"LOGOUT",children:"Logout"}),r.jsx("option",{value:"CREATE",children:"Create"}),r.jsx("option",{value:"UPDATE",children:"Update"}),r.jsx("option",{value:"DELETE",children:"Delete"}),r.jsx("option",{value:"ERROR",children:"Error"})]}),r.jsxs("select",{value:l,onChange:_=>o(_.target.value),className:"w-40 px-3 py-2 rounded-xl border border-brand-border bg-white text-sm",children:[r.jsx("option",{value:"All",children:"All Branches"}),m.map(_=>r.jsx("option",{value:C(_),children:O(_)},C(_)))]}),r.jsx("input",{value:e,onChange:_=>t(_.target.value),placeholder:"Search...",className:"flex-1 sm:w-80 px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary"})]})]}),r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm overflow-hidden",children:[r.jsx("div",{className:"p-5 font-bold",children:"Audit Log"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-3",children:"Time"}),r.jsx("th",{className:"text-left p-3",children:"Actor"}),r.jsx("th",{className:"text-left p-3",children:"Branch"}),r.jsx("th",{className:"text-left p-3",children:"Type"}),r.jsx("th",{className:"text-left p-3",children:"Action"}),r.jsx("th",{className:"text-left p-3",children:"Severity (Type)"})]})}),r.jsxs("tbody",{children:[k.map((_,T)=>{const P=_.activityId||T,L=_.createdAt?new Date(_.createdAt).toLocaleString():"-",z=E(_.userId||_.performedBy),U=A(_.branchId),B=_.description||"-",ee=_.activityType||"UNKNOWN";return r.jsxs("tr",{className:"border-t hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 text-brand-muted whitespace-nowrap",children:L}),r.jsx("td",{className:"p-3 font-medium text-slate-900 whitespace-nowrap",children:z}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-blue-100 border border-blue-300 text-blue-700",children:U})}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-slate-100 border border-brand-border",children:ee})}),r.jsx("td",{className:"p-3 max-w-xs truncate",title:B,children:B}),r.jsx("td",{className:"p-3",children:r.jsx("span",{className:`text-xs px-3 py-1 rounded-full text-white font-bold ${$le(ee)}`,children:ee})})]},P)}),k.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-6 text-center text-brand-muted",colSpan:6,children:"No activity found"})})]})]})})]})]})}function qle(){const[e,t]=g.useState(""),[n,a]=g.useState([]),[l,o]=g.useState({code:"",branchName:"",address:"",managerId:"",status:"INACTIVE"}),[d,u]=g.useState([]),[m,h]=g.useState(null),[x,p]=g.useState([]),[b,N]=g.useState(null),[v,w]=g.useState(null),[S,A]=g.useState({top:0,left:0}),[E,C]=g.useState(!0),[O,k]=g.useState(!1),[_,T]=g.useState(null),P=g.useRef({}),[L,z]=g.useState({open:!1,branchId:null,branchName:""}),[U,B]=g.useState(!1),ee=V=>{if(b===V)N(null);else{const xe=P.current[V];if(xe){const Z=xe.getBoundingClientRect();A({top:Z.bottom+window.scrollY+4,left:Z.left+window.scrollX-160})}N(V)}};g.useEffect(()=>{(async()=>{try{C(!0);const[xe,Z]=await Promise.all([fs(),fle()]);a(xe||[]),u(Z||[])}catch(xe){console.error("Error fetching data:",xe),T("Failed to load data")}finally{C(!1)}})()},[]);const X=n.filter(V=>{const xe=e.trim().toLowerCase();if(!xe)return!0;const Z=V.code||"",ne=V.branchName||V.branch_name||V.name||"",Se=V.address||"",W=V.status||"";return Z.toLowerCase().includes(xe)||ne.toLowerCase().includes(xe)||Se.toLowerCase().includes(xe)||W.toLowerCase().includes(xe)}),be=()=>{o({code:"",branchName:"",address:"",managerId:"",status:"INACTIVE"}),w(null)};async function G(V){if(V.preventDefault(),!l.code||!l.branchName)return alert("Branch Code and Name are required");try{k(!0);const xe={code:l.code,name:l.branchName,address:l.address,managerId:l.managerId,isActive:l.status==="ACTIVE"};await cle(xe);const Z=await fs();a(Z||[]),be()}catch(xe){console.error("Error creating branch:",xe);const Z=xe.response?.data?.message||"";Z.includes("exists")||Z.includes("Duplicate")?alert("Branch Code already exists"):alert("Failed to create branch. Please try again.")}finally{k(!1)}}async function J(V){try{await ule(V);const xe=await fs();a(xe||[]),N(null)}catch(xe){console.error("Error toggling status:",xe),alert("Failed to update branch status. Please try again.")}}function $(V){w(V),o({code:V.code||"",branchName:V.branchName||V.branch_name||V.name||"",address:V.address||"",managerId:V.managerId||V.manager_id||"",status:pe(V)?"ACTIVE":"INACTIVE"}),N(null)}async function q(V){if(V.preventDefault(),!l.branchName)return alert("Branch Name is required");try{k(!0);const xe=H(v),Z={code:l.code,name:l.branchName,address:l.address,managerId:l.managerId,isActive:l.status==="ACTIVE"};await dle(xe,Z);const ne=await fs();a(ne||[]),be()}catch(xe){console.error("Error updating branch:",xe),alert("Failed to update branch. Please try again.")}finally{k(!1)}}function se(V){const xe=n.find(Z=>(Z.branchId||Z.id)===V);z({open:!0,branchId:V,branchName:xe?.branchName||xe?.name||"this branch"}),N(null)}async function I(V){try{B(!0),await yle(L.branchId,V);const xe=await fs();a(xe||[]),z({open:!1,branchId:null,branchName:""})}catch(xe){console.error("Error deleting branch:",xe),alert(xe?.response?.data?.message||xe.message||"Incorrect password or failed to delete branch.")}finally{B(!1)}}async function M(V){h(V),N(null);try{const xe=H(V),Z=await mle(xe);p(Z||[])}catch(xe){console.error("Error fetching branch users:",xe),p([])}}const H=V=>V.id||V.branchId||V.branch_id,oe=V=>V.name||V.branchName||V.branch_name,K=V=>pe(V)?"ACTIVE":"INACTIVE",pe=V=>typeof V=="object"?V.isActive===!0||V.status==="ACTIVE"||V.status==="Active":V==="ACTIVE"||V==="Active"||V===!0;return E?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-brand-primary"})}):_?r.jsx("div",{className:"flex items-center justify-center h-64 text-red-500",children:_}):r.jsxs("div",{className:"space-y-4",onClick:()=>N(null),children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Create & Manage Branches"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`lg:col-span-1 bg-white border rounded-2xl shadow-sm p-5 transition-all duration-300 ${v?"border-blue-400 ring-2 ring-blue-100":"border-brand-border"}`,children:[v&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 px-3 py-2 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx(Fn,{size:16,className:"text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Editing: ",oe(v)]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"font-bold",children:v?"Edit Branch":"Add New Branch"}),v&&r.jsx("button",{onClick:be,className:"text-gray-400 hover:text-gray-600",children:r.jsx($e,{size:18})})]}),r.jsxs("form",{onSubmit:v?q:G,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Branch Code (ID)"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary disabled:bg-gray-100 disabled:text-gray-500",placeholder:"e.g., BR-004",value:l.code,onChange:V=>o({...l,code:V.target.value}),disabled:!!v})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Branch Name"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",placeholder:"e.g., Colombo Branch",value:l.branchName,onChange:V=>o({...l,branchName:V.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Address / City"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",placeholder:"e.g., Colombo",value:l.address,onChange:V=>o({...l,address:V.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Branch Manager"}),r.jsxs("select",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border bg-white",value:l.managerId,onChange:V=>o({...l,managerId:V.target.value}),children:[r.jsx("option",{value:"",children:"Select Manager"}),d.map(V=>{const xe=V.userId||V.user_id||V.id,Z=V.fullName||V.full_name;return r.jsx("option",{value:xe,children:Z},xe)})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Status"}),r.jsxs("select",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border bg-white",value:l.status,onChange:V=>o({...l,status:V.target.value}),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]}),r.jsxs("button",{type:"submit",disabled:O,className:"w-full py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[O&&r.jsx(Ve,{size:16,className:"animate-spin"}),v?"Save Changes":"Create Branch"]})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-white border border-brand-border rounded-2xl shadow-sm overflow-visible",children:[r.jsxs("div",{className:"p-5 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsx("div",{className:"font-bold",children:"Branch List"}),r.jsx("input",{value:e,onChange:V=>t(V.target.value),placeholder:"Search branch...",className:"w-full sm:w-80 px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary"})]}),r.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-3",children:"Branch ID"}),r.jsx("th",{className:"text-left p-3",children:"Name"}),r.jsx("th",{className:"text-left p-3",children:"Address"}),r.jsx("th",{className:"text-left p-3",children:"Manager"}),r.jsx("th",{className:"text-center p-3",children:"Status"}),r.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),r.jsxs("tbody",{children:[X.map(V=>{const xe=H(V),Z=oe(V),ne=V.managerName||V.manager_name||V.manager||"-";return r.jsxs("tr",{className:"border-t hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 font-mono text-xs",children:xe}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-blue-100 text-blue-600",children:r.jsx(Km,{size:18})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("span",{className:"font-bold text-gray-900",children:Z}),r.jsx("span",{className:"text-xs text-gray-500",children:V.address})]})]})}),r.jsx("td",{className:"p-3",children:V.address}),r.jsx("td",{className:"p-3 text-sm",children:ne}),r.jsx("td",{className:"p-3 text-center",children:r.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-medium ${pe(V)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:K(V)})}),r.jsx("td",{className:"p-3 text-right",children:r.jsx("button",{ref:Se=>P.current[xe]=Se,onClick:Se=>{Se.stopPropagation(),ee(xe)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:r.jsx(Zh,{size:16})})})]},xe)}),X.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-6 text-center text-brand-muted",colSpan:6,children:"No branches found"})})]})]})})]})]}),b&&ys.createPortal(r.jsxs("div",{className:"fixed w-48 bg-white rounded-lg shadow-xl border border-gray-100 z-[200] py-1",style:{top:S.top,left:S.left},onClick:V=>V.stopPropagation(),children:[r.jsxs("button",{onClick:()=>M(n.find(V=>H(V)===b)),className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(di,{size:14})," View Details"]}),r.jsxs("button",{onClick:()=>$(n.find(V=>H(V)===b)),className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Fn,{size:14})," Edit Branch"]}),r.jsxs("button",{onClick:()=>J(b),className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ed,{size:14})," ",pe(n.find(V=>H(V)===b))?"Deactivate":"Activate"]}),r.jsx("div",{className:"h-px bg-gray-100 my-1"}),r.jsxs("button",{onClick:()=>se(b),className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(en,{size:14})," Delete"]})]}),document.body),m&&ys.createPortal(r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-brand-border sticky top-0 bg-white",children:[r.jsx("h2",{className:"text-2xl font-extrabold",children:oe(m)}),r.jsx("button",{onClick:()=>{h(null),p([])},className:"text-slate-500 hover:text-slate-700 transition",children:r.jsx($e,{size:24})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-1",children:"Branch ID"}),r.jsx("div",{className:"text-lg font-mono",children:H(m)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-1",children:"Location"}),r.jsx("div",{className:"text-lg",children:m.address})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-2",children:"Branch Manager"}),r.jsx("div",{className:"bg-blue-50 p-4 rounded-xl border border-blue-200",children:m.managerName||m.manager_name||m.manager?r.jsxs("div",{children:[r.jsx("div",{className:"font-bold text-blue-900",children:m.managerName||m.manager_name||m.manager}),r.jsx("div",{className:"text-sm text-blue-700",children:"Assigned Manager"})]}):r.jsx("div",{className:"text-slate-500",children:"No manager assigned"})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-bold text-slate-600 mb-2",children:["Users (",x.length,")"]}),r.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:x.length>0?x.map(V=>{const xe=V.userId||V.user_id||V.id,Z=V.fullName||V.full_name;return r.jsxs("div",{className:"bg-slate-50 p-3 rounded-lg border border-slate-200",children:[r.jsx("div",{className:"font-bold text-sm",children:Z}),r.jsxs("div",{className:"text-xs text-slate-600",children:[V.role,"  @",V.username]})]},xe)}):r.jsx("div",{className:"text-slate-500 text-sm p-3",children:"No users assigned to this branch"})})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-2",children:"Status"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold text-white ${pe(m)?"bg-brand-success":"bg-slate-500"}`,children:K(m)})]})]})]})}),document.body),r.jsx(DR,{isOpen:L.open,onClose:()=>z({open:!1,branchId:null,branchName:""}),onConfirm:I,actionLabel:`Delete branch "${L.branchName}"`,loading:U})]})}function Fle(){const[e,t]=g.useState(""),[n,a]=g.useState([]),[l,o]=g.useState({terminalId:"",terminalName:"",branchId:"",location:"",assignedUserId:"",status:"INACTIVE"}),[d,u]=g.useState([]),[m,h]=g.useState([]),[x,p]=g.useState(null),[b,N]=g.useState(null),[v,w]=g.useState(null),[S,A]=g.useState({top:0,left:0}),[E,C]=g.useState(!0),[O,k]=g.useState(!1),[_,T]=g.useState(null),P=g.useRef({}),L=M=>{if(b===M)N(null);else{const H=P.current[M];if(H){const oe=H.getBoundingClientRect();A({top:oe.bottom+window.scrollY+4,left:oe.left+window.scrollX-160})}N(M)}};g.useEffect(()=>{(async()=>{try{C(!0);const[H,oe,K]=await Promise.all([pd(),xl(),fs()]);a(H||[]),u(oe||[]),h(K||[])}catch(H){console.error("Error fetching data:",H),T("Failed to load data")}finally{C(!1)}})()},[]);const z=n.filter(M=>{const H=e.trim().toLowerCase();if(!H)return!0;const oe=M.terminalCode||"",K=M.name||M.terminalName||"",pe=m.find(xe=>J(xe)===M.branchId),V=pe?$(pe):"";return oe.toLowerCase().includes(H)||K.toLowerCase().includes(H)||V.toLowerCase().includes(H)}),U=()=>{o({terminalId:"",terminalName:"",branchId:"",location:"",assignedUserId:"",status:"INACTIVE"}),w(null)};async function B(M){if(M.preventDefault(),!l.terminalId||!l.terminalName||!l.branchId)return alert("Terminal ID, Name, and Branch are required");try{k(!0);const H={terminalCode:l.terminalId,name:l.terminalName,branchId:l.branchId,isActive:l.status==="ACTIVE"};await hle(H);const oe=await pd();a(oe||[]),U()}catch(H){console.error("Error creating terminal:",H);const oe=H.response?.data?.message||"";oe.includes("exists")||oe.includes("Duplicate")?alert("Terminal ID already exists"):alert("Failed to create terminal. Please try again.")}finally{k(!1)}}async function ee(M){try{await gle(M);const H=await pd();a(H||[]),N(null)}catch(H){console.error("Error toggling status:",H),alert("Failed to update terminal status. Please try again.")}}function X(M){w(M),o({terminalId:M.terminalCode||"",terminalName:M.name||"",branchId:M.branchId||"",location:"",assignedUserId:"",status:M.isActive?"ACTIVE":"INACTIVE"}),N(null)}async function be(M){if(M.preventDefault(),!l.terminalName||!l.branchId)return alert("Terminal Name and Branch are required");try{k(!0);const H=v.terminalId,oe={terminalCode:l.terminalId,name:l.terminalName,branchId:l.branchId,isActive:l.status==="ACTIVE"};await xle(H,oe);const K=await pd();a(K||[]),U()}catch(H){console.error("Error updating terminal:",H),alert("Failed to update terminal. Please try again.")}finally{k(!1)}}async function G(M){if(window.confirm("Are you sure you want to delete this terminal?"))try{await ple(M);const H=await pd();a(H||[]),N(null)}catch(H){console.error("Error deleting terminal:",H),alert("Failed to delete terminal. Please try again.")}}const J=M=>M.id||M.branchId||M.branch_id,$=M=>M.name||M.branchName||M.branch_name,q=M=>M.terminalId,se=M=>M.terminalCode,I=M=>M===void 0?!1:typeof M=="object"?M.isActive===!0:M==="ACTIVE"||M==="Active"||M===!0;return E?r.jsx("div",{className:"flex items-center justify-center h-64",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-brand-primary"})}):_?r.jsx("div",{className:"flex items-center justify-center h-64 text-red-500",children:_}):r.jsxs("div",{className:"space-y-4",onClick:()=>N(null),children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Terminal Management"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[r.jsxs("div",{className:`lg:col-span-1 bg-white border rounded-2xl shadow-sm p-5 transition-all duration-300 ${v?"border-blue-400 ring-2 ring-blue-100":"border-brand-border"}`,children:[v&&r.jsxs("div",{className:"flex items-center gap-2 mb-3 px-3 py-2 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx(Fn,{size:16,className:"text-blue-600"}),r.jsxs("span",{className:"text-sm font-medium text-blue-700",children:["Editing: ",v.name]})]}),r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{className:"font-bold",children:v?"Edit Terminal":"Add New Terminal"}),v&&r.jsx("button",{onClick:U,className:"text-gray-400 hover:text-gray-600",children:r.jsx($e,{size:18})})]}),r.jsxs("form",{onSubmit:v?be:B,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Terminal ID (Code)"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary disabled:bg-gray-100 disabled:text-gray-500",placeholder:"e.g., POS-004",value:l.terminalId,onChange:M=>o({...l,terminalId:M.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Terminal Name"}),r.jsx("input",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary",placeholder:"e.g., Terminal 4",value:l.terminalName,onChange:M=>o({...l,terminalName:M.target.value})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Branch"}),r.jsxs("select",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border bg-white",value:l.branchId,onChange:M=>o({...l,branchId:M.target.value}),children:[r.jsx("option",{value:"",children:"Select Branch"}),m.map(M=>r.jsx("option",{value:J(M),children:$(M)},J(M)))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-bold",children:"Status"}),r.jsxs("select",{className:"mt-1 w-full px-3 py-2 rounded-xl border border-brand-border bg-white",value:l.status,onChange:M=>o({...l,status:M.target.value}),children:[r.jsx("option",{value:"ACTIVE",children:"Active"}),r.jsx("option",{value:"INACTIVE",children:"Inactive"})]})]}),r.jsxs("button",{type:"submit",disabled:O,className:"w-full py-2 rounded-xl bg-brand-primary hover:bg-brand-secondary text-white font-bold transition disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[O&&r.jsx(Ve,{size:16,className:"animate-spin"}),v?"Save Changes":"Add Terminal"]})]})]}),r.jsxs("div",{className:"lg:col-span-2 bg-white border border-brand-border rounded-2xl shadow-sm overflow-visible",children:[r.jsxs("div",{className:"p-5 flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[r.jsx("div",{className:"font-bold",children:"Terminal List"}),r.jsx("input",{value:e,onChange:M=>t(M.target.value),placeholder:"Search terminal...",className:"w-full sm:w-80 px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary"})]}),r.jsx("div",{className:"overflow-x-auto overflow-y-visible",children:r.jsxs("table",{className:"w-full text-sm",children:[r.jsx("thead",{className:"bg-slate-50 text-slate-600",children:r.jsxs("tr",{children:[r.jsx("th",{className:"text-left p-3",children:"Terminal ID"}),r.jsx("th",{className:"text-left p-3",children:"Name"}),r.jsx("th",{className:"text-left p-3",children:"Branch"}),r.jsx("th",{className:"text-center p-3",children:"Status"}),r.jsx("th",{className:"text-right p-3",children:"Actions"})]})}),r.jsxs("tbody",{children:[z.map(M=>{const H=q(M),oe=se(M),K=M.name,pe=m.find(xe=>J(xe)===M.branchId),V=pe?$(pe):"Unknown Branch";return r.jsxs("tr",{className:"border-t hover:bg-slate-50",children:[r.jsx("td",{className:"p-3 font-mono text-xs",children:oe}),r.jsx("td",{className:"p-3",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"p-2 rounded-lg bg-purple-100 text-purple-600",children:r.jsx(ex,{size:18})}),r.jsx("div",{className:"flex flex-col",children:r.jsx("span",{className:"font-bold text-gray-900",children:K})})]})}),r.jsx("td",{className:"p-3",children:V}),r.jsx("td",{className:"p-3 text-center",children:r.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-full text-xs font-medium ${I(M)?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:I(M)?"ACTIVE":"INACTIVE"})}),r.jsx("td",{className:"p-3 text-right",children:r.jsx("button",{ref:xe=>P.current[H]=xe,onClick:xe=>{xe.stopPropagation(),L(H)},className:"p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100",children:r.jsx(Zh,{size:16})})})]},H)}),z.length===0&&r.jsx("tr",{children:r.jsx("td",{className:"p-6 text-center text-brand-muted",colSpan:5,children:"No terminals found"})})]})]})})]})]}),b&&ys.createPortal(r.jsxs("div",{className:"fixed w-48 bg-white rounded-lg shadow-xl border border-gray-100 z-[200] py-1",style:{top:S.top,left:S.left},onClick:M=>M.stopPropagation(),children:[r.jsxs("button",{onClick:()=>X(n.find(M=>q(M)===b)),className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Fn,{size:14})," Edit Terminal"]}),r.jsxs("button",{onClick:()=>ee(b),className:"w-full text-left px-4 py-2.5 text-sm text-gray-700 hover:bg-gray-50 flex items-center gap-2",children:[r.jsx(Ed,{size:14})," ",I(n.find(M=>q(M)===b))?"Deactivate":"Activate"]}),r.jsx("div",{className:"h-px bg-gray-100 my-1"}),r.jsxs("button",{onClick:()=>G(b),className:"w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-red-50 flex items-center gap-2",children:[r.jsx(en,{size:14})," Delete"]})]}),document.body),x&&ys.createPortal(r.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[100] flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-brand-border sticky top-0 bg-white",children:[r.jsx("h2",{className:"text-2xl font-extrabold",children:x.name}),r.jsx("button",{onClick:()=>p(null),className:"text-slate-500 hover:text-slate-700 transition",children:r.jsx($e,{size:24})})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-1",children:"Terminal ID (Code)"}),r.jsx("div",{className:"text-lg font-mono",children:x.terminalCode})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-1",children:"Branch"}),r.jsx("div",{className:"text-lg",children:(()=>{const M=m.find(H=>J(H)===x.branchId);return M?$(M):"Unknown Branch"})()})]})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-bold text-slate-600 mb-2",children:"Status"}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold text-white ${I(x)?"bg-brand-success":"bg-slate-500"}`,children:I(x)?"ACTIVE":"INACTIVE"})]})]})]})}),document.body)]})}function Hle({isOpen:e,onClose:t,onConfirm:n,request:a,action:l,loading:o}){const[d,u]=g.useState("");if(!e||!a)return null;const m=l==="approve";return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-slate-900/50 backdrop-blur-sm p-4 animate-in fade-in duration-200",children:r.jsxs("div",{className:"bg-white w-full max-w-md rounded-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[r.jsx("div",{className:`px-6 py-4 ${m?"bg-emerald-50 border-b border-emerald-100":"bg-red-50 border-b border-red-100"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`p-2 rounded-full ${m?"bg-emerald-100":"bg-red-100"}`,children:m?r.jsx(et,{className:"w-5 h-5 text-emerald-600"}):r.jsx(Ia,{className:"w-5 h-5 text-red-600"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-slate-800",children:m?"Approve Password Reset":"Reject Password Reset"}),r.jsxs("p",{className:"text-sm text-slate-500",children:["For user: ",r.jsx("strong",{children:a.fullName})," (@",a.username,")"]})]})]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"bg-slate-50 rounded-xl p-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(Wd,{className:"w-4 h-4 text-slate-400"}),r.jsx("span",{className:"text-slate-600",children:a.email})]}),r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(da,{className:"w-4 h-4 text-slate-400"}),r.jsxs("span",{className:"text-slate-600",children:["Requested: ",new Date(a.createdAt).toLocaleString()]})]}),a.requestNotes&&r.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[r.jsx(Tv,{className:"w-4 h-4 text-slate-400 shrink-0 mt-0.5"}),r.jsx("span",{className:"text-slate-600",children:a.requestNotes})]})]}),m&&r.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-3",children:r.jsxs("div",{className:"flex items-start gap-2",children:[r.jsx(lr,{className:"w-4 h-4 text-amber-600 shrink-0 mt-0.5"}),r.jsxs("p",{className:"text-xs text-amber-700",children:[r.jsx("strong",{children:"Warning:"})," Approving will immediately change the user's password. They will be notified via email."]})]})}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-bold text-slate-600 mb-1 block",children:["Admin Notes ",r.jsx("span",{className:"text-slate-300 font-normal",children:"(Optional)"})]}),r.jsx("textarea",{value:d,onChange:h=>u(h.target.value),placeholder:m?"e.g., Verified user identity via phone":"e.g., User failed identity verification",rows:2,className:"w-full px-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary text-sm resize-none"})]})]}),r.jsxs("div",{className:"bg-slate-50 px-6 py-4 flex justify-end gap-3 border-t",children:[r.jsx("button",{onClick:t,disabled:o,className:"px-4 py-2 text-sm font-semibold text-slate-600 hover:text-slate-800 hover:bg-slate-100 rounded-lg transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:()=>n(d),disabled:o,className:`px-5 py-2 text-sm font-bold text-white rounded-lg shadow-sm transition-all active:scale-95 flex items-center gap-2 disabled:opacity-50 ${m?"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-200":"bg-red-600 hover:bg-red-700 shadow-red-200"}`,children:[o&&r.jsx(Ve,{className:"w-4 h-4 animate-spin"}),m?"Approve & Apply":"Reject Request"]})]})]})})}function Kle(){const[e,t]=g.useState([]),[n,a]=g.useState(!0),[l,o]=g.useState("PENDING"),[d,u]=g.useState(""),[m,h]=g.useState(null),[x,p]=g.useState(!1),[b,N]=g.useState(!1),[v,w]=g.useState(null),[S,A]=g.useState(""),E=async()=>{try{a(!0),h(null);const P=await vle(l==="ALL"?null:l);t(P||[])}catch(P){console.error("Error fetching password reset requests:",P),h("Failed to load password reset requests.")}finally{a(!1)}};g.useEffect(()=>{E()},[l]);const C=(P,L)=>{w(P),A(L),N(!0)},O=async P=>{if(v)try{p(!0),S==="approve"?await Nle(v.id,P):await wle(v.id,P),N(!1),w(null),await E()}catch(L){console.error("Error processing request:",L),alert("Failed to process request. Please try again.")}finally{p(!1)}},k=P=>{switch(P){case"PENDING":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold bg-amber-100 text-amber-700 border border-amber-200",children:[r.jsx(Rr,{className:"w-3 h-3"})," Pending"]});case"APPROVED":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold bg-emerald-100 text-emerald-700 border border-emerald-200",children:[r.jsx(et,{className:"w-3 h-3"})," Approved"]});case"REJECTED":return r.jsxs("span",{className:"inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold bg-red-100 text-red-700 border border-red-200",children:[r.jsx(Ia,{className:"w-3 h-3"})," Rejected"]});default:return r.jsx("span",{className:"text-xs text-slate-400",children:P})}},_=e.filter(P=>{if(!d.trim())return!0;const L=d.toLowerCase();return P.username?.toLowerCase().includes(L)||P.fullName?.toLowerCase().includes(L)||P.email?.toLowerCase().includes(L)}),T=e.filter(P=>P.status==="PENDING").length;return r.jsxs("div",{className:"space-y-4",children:[r.jsx(Hle,{isOpen:b,onClose:()=>{N(!1),w(null)},onConfirm:O,request:v,action:S,loading:x}),r.jsx("div",{className:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2",children:r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("h1",{className:"text-xl font-extrabold",children:"Password Reset Requests"}),T>0&&r.jsx("span",{className:"inline-flex items-center justify-center min-w-[24px] h-6 px-2 bg-amber-500 text-white text-xs font-bold rounded-full animate-pulse",children:T})]}),r.jsx("p",{className:"text-sm text-brand-muted",children:"Review and manage user password reset requests. Approved requests will take effect immediately."})]})}),r.jsx("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(er,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),r.jsx("input",{type:"text",value:d,onChange:P=>u(P.target.value),placeholder:"Search by name, username, or email...",className:"w-full pl-9 pr-3 py-2 rounded-xl border border-brand-border outline-none focus:ring-2 focus:ring-brand-secondary text-sm"})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Jh,{className:"absolute left-3 top-2.5 w-4 h-4 text-slate-400"}),r.jsxs("select",{value:l,onChange:P=>o(P.target.value),className:"pl-9 pr-8 py-2 rounded-xl border border-brand-border bg-white outline-none focus:ring-2 focus:ring-brand-secondary text-sm font-semibold appearance-none cursor-pointer",children:[r.jsx("option",{value:"PENDING",children:"Pending"}),r.jsx("option",{value:"APPROVED",children:"Approved"}),r.jsx("option",{value:"REJECTED",children:"Rejected"}),r.jsx("option",{value:"ALL",children:"All Requests"})]}),r.jsx(na,{className:"absolute right-2.5 top-2.5 w-4 h-4 text-slate-400 pointer-events-none"})]})]})}),n?r.jsx("div",{className:"flex items-center justify-center h-48",children:r.jsx(Ve,{className:"w-8 h-8 animate-spin text-brand-primary"})}):m?r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6 text-center text-red-600",children:[r.jsx(lr,{className:"w-8 h-8 mx-auto mb-2"}),m]}):_.length===0?r.jsxs("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-12 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(qm,{className:"w-8 h-8 text-slate-300"})}),r.jsx("h3",{className:"text-lg font-bold text-slate-600 mb-1",children:"No Requests Found"}),r.jsx("p",{className:"text-sm text-slate-400",children:l==="PENDING"?"No pending password reset requests at this time.":"No password reset requests match your search."})]}):r.jsx("div",{className:"space-y-3",children:_.map(P=>r.jsx("div",{className:"bg-white border border-brand-border rounded-2xl shadow-sm p-5 hover:shadow-md transition-all duration-200",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[r.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-600 to-indigo-600 flex items-center justify-center text-white text-sm font-bold shadow-md shrink-0",children:P.fullName?.charAt(0)?.toUpperCase()||"?"}),r.jsxs("div",{className:"min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[r.jsx("h3",{className:"font-bold text-slate-800 truncate",children:P.fullName}),k(P.status)]}),r.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-400 flex-wrap",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(tn,{className:"w-3 h-3"})," @",P.username]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(Wd,{className:"w-3 h-3"})," ",P.email]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx(da,{className:"w-3 h-3"}),new Date(P.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),P.requestNotes&&r.jsxs("div",{className:"mt-2 flex items-start gap-1.5 text-xs text-slate-500 bg-slate-50 rounded-lg p-2",children:[r.jsx(Tv,{className:"w-3 h-3 shrink-0 mt-0.5"}),r.jsx("span",{children:P.requestNotes})]}),P.adminNotes&&r.jsxs("div",{className:"mt-1 flex items-start gap-1.5 text-xs text-blue-600 bg-blue-50 rounded-lg p-2",children:[r.jsx(Ro,{className:"w-3 h-3 shrink-0 mt-0.5"}),r.jsxs("span",{children:["Admin: ",P.adminNotes]})]}),P.reviewedAt&&r.jsxs("p",{className:"text-xs text-slate-300 mt-1",children:["Reviewed: ",new Date(P.reviewedAt).toLocaleString()]})]})]}),P.status==="PENDING"&&r.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[r.jsxs("button",{onClick:()=>C(P,"approve"),className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white text-sm font-bold rounded-xl shadow-sm transition-all active:scale-95 flex items-center gap-1.5",children:[r.jsx(et,{className:"w-4 h-4"})," Approve"]}),r.jsxs("button",{onClick:()=>C(P,"reject"),className:"px-4 py-2 bg-white hover:bg-red-50 text-red-600 border border-red-200 text-sm font-bold rounded-xl shadow-sm transition-all active:scale-95 flex items-center gap-1.5",children:[r.jsx(Ia,{className:"w-4 h-4"})," Reject"]})]})]})},P.id))})]})}function Gle(){return r.jsx(kle,{children:r.jsxs(Rk,{children:[r.jsx(lt,{index:!0,element:r.jsx(pk,{})}),r.jsx(lt,{path:"overview",element:r.jsx(pk,{})}),r.jsx(lt,{path:"users",element:r.jsx(zle,{})}),r.jsx(lt,{path:"terminals",element:r.jsx(Fle,{})}),r.jsx(lt,{path:"system-activity",element:r.jsx(Ule,{})}),r.jsx(lt,{path:"branches",element:r.jsx(qle,{})}),r.jsx(lt,{path:"reports",element:r.jsx(Ble,{})}),r.jsx(lt,{path:"password-requests",element:r.jsx(Kle,{})}),r.jsx(lt,{path:"*",element:r.jsx(Pm,{to:"/admin",replace:!0})})]})})}const xm=({children:e,allowedRoles:t=[]})=>{const n=localStorage.getItem("token"),a=localStorage.getItem("user");if(!n)return r.jsx(Pm,{to:"/login",replace:!0});if(t.length>0&&a)try{const l=JSON.parse(a),o=(l.role||l.userRole||"").toUpperCase();if(!t.includes(o))return r.jsx(Pm,{to:Vle(o),replace:!0})}catch(l){console.error("Error parsing user data:",l)}return e};function Vle(e){switch(e){case"ADMIN":return"/admin";case"BRANCH_MANAGER":return"/manager";case"STORE_KEEPER":return"/inventory";default:return"/pos"}}function Yle(){return r.jsx(PI,{children:r.jsxs(wI,{children:[r.jsxs(Rk,{children:[r.jsx(lt,{path:"/login",element:r.jsx(w8,{})}),r.jsx(lt,{path:"/register",element:r.jsx(E8,{})}),r.jsx(lt,{path:"/forgot-password",element:r.jsx(C8,{})}),r.jsx(lt,{path:"/",element:r.jsx(Pm,{to:"/login",replace:!0})}),r.jsx(lt,{path:"/pos",element:r.jsx(xm,{allowedRoles:["CASHIER","SUPERVISOR","ADMIN","BRANCH_MANAGER"],children:r.jsx(kB,{})})}),r.jsx(lt,{path:"/inventory/*",element:r.jsx(xm,{allowedRoles:["STORE_KEEPER","ADMIN","BRANCH_MANAGER"],children:r.jsx(yU,{})})}),r.jsx(lt,{path:"/admin/*",element:r.jsx(xm,{allowedRoles:["ADMIN"],children:r.jsx(Gle,{})})}),r.jsxs(lt,{path:"/manager",element:r.jsx(xm,{allowedRoles:["BRANCH_MANAGER"],children:r.jsx(qv,{children:r.jsx(GU,{})})}),children:[r.jsx(lt,{index:!0,element:r.jsx(hse,{})}),r.jsx(lt,{path:"approvals",element:r.jsx(gse,{})}),r.jsx(lt,{path:"branch-activity",element:r.jsx(jse,{})}),r.jsx(lt,{path:"sales",element:r.jsx(Ase,{})}),r.jsx(lt,{path:"sales-reports",element:r.jsx(Ose,{})}),r.jsx(lt,{path:"chart-of-accounts",element:r.jsx(Pse,{})}),r.jsx(lt,{path:"journal-entry",element:r.jsx(zse,{})}),r.jsx(lt,{path:"profit-loss",element:r.jsx(qse,{})}),r.jsx(lt,{path:"manager-payments",element:r.jsx(Zse,{})}),r.jsx(lt,{path:"loyalty",element:r.jsx(Wse,{})}),r.jsx(lt,{path:"user-registrations",element:r.jsx(Kse,{})}),r.jsx(lt,{path:"reports",element:r.jsx(Fse,{})})]}),r.jsx(lt,{path:"*",element:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-100",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-6xl font-bold text-slate-300 mb-4",children:"404"}),r.jsx("p",{className:"text-slate-600 mb-6",children:"Page not found"}),r.jsx("a",{href:"/login",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Go to Login"})]})})})]}),r.jsx(N8,{})]})})}console.log("=== Smart Retail Pro - ROCS Frontend ===");console.log("Environment:","development");console.log("Backend API: http://localhost:8080/api/v1");console.log("==========================================");eM.createRoot(document.getElementById("root")).render(r.jsx(El.StrictMode,{children:r.jsx(Yle,{})}));
